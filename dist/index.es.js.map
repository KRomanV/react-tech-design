{"version":3,"file":"index.es.js","sources":["../src/components/utils/datesUtils.js","../src/redux/rtd.action.types.js","../src/redux/rtd.actions.js","../src/components/utils/baseUtils.js","../src/components/Base/withStore.js","../src/components/utils/variables.js","../src/components/Base/index.js","../src/components/Form/FormItem.js","../src/components/Form/FormItems.js","../src/components/Form/Form.js","../src/components/Layout/Layout.js","../src/components/Switcher/Switcher.js","../src/components/Table/ReactBaseTable/defaultSettings.js","../src/components/Table/ReactBaseTable/Selectable/SelectionHead.js","../src/components/Table/ReactBaseTable/Selectable/SelectionCell.js","../src/components/Table/ReactBaseTable/SelectionList/SelectionList.js","../src/components/Table/ReactBaseTable/Table.js","../src/components/Table/ReactBaseTable/ConfigLoader.js","../node_modules/react-window/dist/index.esm.js","../src/components/Table/AntTable/HeaderCell.js","../src/components/Table/AntTable/HeaderRow.js","../src/components/Table/AntTable/BodyCell.js","../src/components/Table/AntTable/Table.js","../src/components/Table/AntTable/ConfigLoader.js","../src/components/Select/Select.js","../src/components/TreeSelect/TreeSelect.js","../src/components/Modal/Modal.js","../src/components/UploadFile/UploadFile.js","../src/components/declarative.js","../src/components/deprecated/Table/defaultSettings.js","../src/components/deprecated/Table/Selectable/SelectionHead.js","../src/components/deprecated/Table/Selectable/SelectionCell.js","../src/components/deprecated/DateRange/DateRange.js","../src/components/deprecated/SingleDate/SingleDate.js","../src/components/deprecated/FilterPanel/FilterPanel.js","../src/components/deprecated/Table/SelectionList/SelectionList.js","../src/components/deprecated/Table/Table.js","../src/components/deprecated/Select/Select.js","../src/components/deprecated/AdvancedTable/AdvancedTable.js","../src/components/deprecated/Form/Form.js","../src/components/deprecated/Form/FormModal.js","../src/components/deprecated/Form/FormTable.js","../src/components/deprecated/Form/HOCs.js","../src/components/deprecated/FileManager/AddFolderModal.js","../src/components/utils/clipboardUtils.js","../src/components/deprecated/FileManager/FileManager.js","../src/components/deprecated/Modal/Modal.js","../src/components/deprecated/Form/FormItem.js","../src/components/deprecated/Layout/Layout.js","../src/components/deprecated/Form/FormItems.js","../src/components/deprecated/CommandPanel/CommandPanel.js","../src/components/deprecated/List/List.js","../src/components/deprecated/index.js","../src/redux/rtd.reducer.js","../src/components/utils/api.js","../src/index.js"],"sourcesContent":["import moment from 'moment';\n\nexport const APP_TIME_OFFSET = 3;\n\nexport const getMomentFromStringByFormat = (date, format) =>\n\tdate ? moment(date, format).utcOffset(APP_TIME_OFFSET) : null;\n\n// export const getMomentWithOffset = (date) =>\n// \tmoment(date).utcOffset(APP_TIME_OFFSET);\nexport const getMomentWithOffset = (date) => moment(date).format();\n\nexport const getMomentWithOffsetTruncateDay = (date) =>\n\tmoment(date).startOf('day')\n\t\t// .hours(0)\n\t\t// .minutes(0)\n\t\t// .seconds(0)\n\t\t// .milliseconds(0)\n\t\t.format();\n\n\nexport const toFormat = (dateString, format) => {\n\tif (!dateString) {\n\t\treturn '';\n\t}\n\tconst mom = moment(dateString);\n\treturn mom.isValid() ? mom.format(format) : dateString;\n};\n\nexport const toDDMMYYYYdot = (dateString) => toFormat(dateString, 'DD.MM.YYYY');\n\nexport const toDDMMYYYYdotAltDashDash = (dateString) =>\n\ttoDDMMYYYYdot(dateString) || '--';\n\nexport const toDDMMYYYYHHMMSS = (dateString) =>\n\ttoFormat(dateString, 'DD.MM.YYYY HH:mm:ss') || '--';\n\nexport const toDDMMYYYYdash = (dateString) =>\n\ttoFormat(dateString, 'DD-MM-YYYY');\n\nexport const getISO = (date) =>\n\tmoment(date).utcOffset(APP_TIME_OFFSET).toISOString();\n","const types =\n{\n    INIT_STORE: 'INIT_STORE',\n    SET_DATA_STORE: 'SET_DATA_STORE',\n};\n\nexport {types as actionTypes};\n","import {actionTypes} from './rtd.action.types';\n\nexport const initStore = (path) => ({\n    type: actionTypes.INIT_STORE,\n    payload: {path}\n});\n\nexport const setDateStore = (path, row) => ({\n    type: actionTypes.SET_DATA_STORE,\n    payload: {path, row}\n});\n","import React from 'react';\nimport {notification} from 'antd';\nimport moment from \"moment\";\n\nexport const noop = () => {};\n\nexport const flatten = (arrayOfArrays) =>\n\tarrayOfArrays.reduce(\n\t\t(flattened, item) =>\n\t\t\tflattened.concat(Array.isArray(item) ? flatten(item) : [item]),\n\t\t[]\n\t);\n\nexport const getTableRowObjects = (data) => {\n\tconst rowKeys = data.map((item) => {\n\t\tif (item.children && item.children.length) {\n\t\t\treturn [item, getTableRowObjects(item.children)];\n\t\t}\n\t\treturn item;\n\t});\n\treturn rowKeys;\n};\n\nexport const getTableRowKeys = (data, rowKey) => {\n\tconst rowKeys = data.map((item) => {\n\t\tif (item.children && item.children.length) {\n\t\t\treturn [item[rowKey], getTableRowKeys(item.children, rowKey)];\n\t\t}\n\t\treturn item[rowKey];\n\t});\n\treturn rowKeys;\n};\n\nexport const findNodeByRowKey = (data, rowKey, rowValue) => {\n\tlet node = {};\n\tlet item = {};\n\tfor (let i = 0; i < data.length; i++) {\n\t\titem = _findNodeByRowKey(data[i], rowKey, rowValue);\n\t\tif (item !== false) return item;\n\t}\n\treturn node;\n};\n\nconst _findNodeByRowKey = (currentNode, rowKey, value) => {\n\tlet i, currentChild, result;\n\n\tif (value === currentNode[rowKey]) {\n\t\treturn currentNode;\n\t} else {\n\t\tif (currentNode.children) {\n\t\t\tfor (i = 0; i < currentNode.children.length; i += 1) {\n\t\t\t\tcurrentChild = currentNode.children[i];\n\t\t\t\tresult = _findNodeByRowKey(currentChild, rowKey, value);\n\t\t\t\tif (result !== false) return result;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n};\n\nexport const generateUUID = () => {\n\treturn ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>\n\t\t(\n\t\t\tc ^\n\t\t\t(crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\n\t\t).toString(16)\n\t);\n};\n\n\nexport const getValueFromSingleSelect = (name, keys) => (keys && keys.length > 0) ? keys[0] : null;\n\nexport const getValueFromMultiSelect = (name, keys) => (keys && keys.length > 0) ? keys : null;\n\nexport const getValueFromSelectTable = (rows) => {\n    if (rows && rows.length > 0) return rows[0];\n    else return null;\n};\n\nexport const getObjectExcludedProps = (object, exclude) => {\n    let returnObject = {};\n    Object.keys(object).forEach((key) =>\n        !exclude.includes(key) ? (returnObject[key] = object[key]) : undefined // было null\n    );\n    return returnObject;\n};\n\nexport const notificationError = (error, message) => {\n\tif (error.response) {\n\t\tconsole.error(error.response.status, error.response.data);\n\t\tconst errorDescription = (error.response.data && error.response.data.error)\n\t\t\t? error.response.data.error\n\t\t\t: \"Нет описания ошибки\";\n\t\tnotification.error({\n\t\t\tmessage: `[${error.response.status}] ${message}`,\n\t\t\tdescription: errorDescription,\n\t\t});\n\t} else {\n\t\tconsole.error(error);\n\t\tnotification.error({\n\t\t\tmessage: 'Не удалось детектировать ошибку. См. console.error',\n\t\t});\n\t}\n};\n\nexport const dispatchToStore = ({dispatch, setDateStore, value, extraData}) => {\n\tif(dispatch.path) {\n\t\t// console.log(\"storeHOC => dispatchToStore\", dispatch, setDateStore);\n\t\tif(dispatch.type === 'event')\n\t\t\tsetDateStore && setDateStore(dispatch.path,  {\n\t\t\t\ttimestamp: moment(),\n\t\t\t\t// type: dispatch.type,\n\t\t\t\tvalue: value,\n\t\t\t\textraData: extraData\n\t\t\t});\n\t\telse\n\t\t\tsetDateStore && setDateStore(dispatch.path, value);\n\t}\n}\n\nexport function useMounted() {\n\tconst [isMounted, setIsMounted] = React.useState(false)\n\n\tReact.useEffect(() => {\n\t\tsetIsMounted(true)\n\t}, [])\n\treturn isMounted\n}\n\nexport const getSortBy = (clientSortBy, serverSortBy, dataIndex) => {\n\tif (clientSortBy && clientSortBy.key === dataIndex) {\n\t\treturn [\n\t\t\tclientSortBy,\n\t\t\tclientSortBy.order === \"asc\" ? \"ascend\" : \"descend\"\n\t\t];\n\t} else if (serverSortBy) {\n\t\treturn [\n\t\t\t{ key: dataIndex, order: serverSortBy },\n\t\t\tserverSortBy === \"asc\" ? \"ascend\" : \"descend\"\n\t\t];\n\t} else\n\t\treturn [undefined, undefined];\n};\n","import React, {useState, useEffect} from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport objectPath from \"object-path\";\nimport { setDateStore } from \"../../redux/rtd.actions\";\nimport { dispatchToStore, getObjectExcludedProps, useMounted } from \"../utils/baseUtils\";\n\nexport const withStore = (Component, antFormItemProps) => {\n\n    const mapStateToProps = (store, ownProps) => {\n        const {subscribe, dispatch} = ownProps;\n        let state = {};\n        if(subscribe && subscribe.length > 0){\n            subscribe.forEach(item => {\n                const {name, path, extraData} = item;\n                if(name && path)\n                    state[name] = objectPath.get(store, path);\n                if(name && extraData)\n                    state[`${name}ExtraData`] = objectPath.get(store, extraData);\n            })\n        }\n        if(dispatch && dispatch.extraData) {\n            // console.log('subscribe to ', dispatch.extraData)\n            state.dispatchExtraData = objectPath.get(store, dispatch.extraData);\n        }\n\n        return state;\n    };\n    const mapDispatchToProps = (dispatch) =>\n        bindActionCreators({ setDateStore: setDateStore}, dispatch);\n\n    const defaultProps = {\n        trigger: 'onChange',\n        valuePropName: 'value',\n    };\n\n    const withStoreProps = { ...defaultProps, ...antFormItemProps };\n\n    return connect(mapStateToProps, mapDispatchToProps)( (props) => {\n\n        const {componentType, setDateStore, dispatchExtraData} = props;\n\n        // Объект подписки на стор\n        const subscribe = props.subscribe ? props.subscribe : [];\n\n        // Объект публикации в стор\n        const dispatch = props.dispatch ? props.dispatch : {};\n\n        const [subscribeProps, setSubscribeProps] = useState({});\n\n        const {trigger, valuePropName} = withStoreProps;\n\n        const excludeProps = ['componentType', 'setDateStore', 'subscribe', ...subscribe.map(item => item.name), 'dispatch', 'dispatchExtraData']; // ...subscribe.map(item => item.name),\n\n        const isMounted = useMounted()\n\n        /** Подписка на изменение props[subscribe.name] в сторе */\n        subscribe.map(item => {\n            return useEffect( () => {\n                // console.log(\"withStore subscribe: \", item.name, item.withMount);\n                if((item.withMount || isMounted) && item.name) {\n                    // console.log(\"storeHOC => subscribe: \", props[subscribe.name]);\n                    item.onChange && item.onChange({\n                        value: props[item.name],\n                        extraData: props[`${item.name}ExtraData`],\n                        setSubscribeProps: setSubscribePropsHandler});\n                }\n                // console.log(\"Change Props[2]: \", props.subscribeЗф);\n            }, [props[item.name]]);\n        })\n\n        /** Подписка на изменение props и отправка данных в стор */\n        useEffect(() => {\n            let _value = props[valuePropName];\n            // console.log(`storeHOC => `, _value);\n            // if (_value === null || _value === undefined || (typeof _value === 'string' && _value.trim() === ''))\n            //     _value = undefined;\n            if (componentType !== 'Button' && componentType !== 'Search')\n                dispatchToStore({ dispatch, setDateStore, value: _value });\n        }, [props[valuePropName]]);\n\n        /** Подписка на изменение subscribeProps.value и отправка данных в props[trigger] (как правило это onChange) */\n        // useEffect(() => {\n        //     if(isMounted) {\n        //         console.log('onChange subscribeProps.value => ', subscribeProps.value);\n        //         props[trigger] && props[trigger](subscribeProps.value);\n        //     }\n        // }, [subscribeProps.value]);\n\n        const setSubscribePropsHandler = (_subscribeProps) => {\n            // console.log('onChange setSubscribePropsHandler => ', value);\n            setSubscribeProps((prevState) => ({ ...prevState, ..._subscribeProps }));\n            if(_subscribeProps && objectPath.has(_subscribeProps, valuePropName)) {\n                const value = _subscribeProps[valuePropName]\n                // console.log('setSubscribePropsHandler => ', componentType, value);\n                if(componentType === 'Search')\n                    _searchDispatchToStore(value)\n\n                props[trigger] && props[trigger](value);\n            }\n        }\n\n        const onChange = (...args) => {\n            // console.log('withStore [trigger] ',  props[trigger], args)\n            if(componentType === 'Button')\n                dispatchToStore({dispatch, setDateStore, value: args[0], extraData: dispatchExtraData});\n\n            if(subscribeProps && objectPath.has(subscribeProps, valuePropName)) {\n                const _subscribeProps = {...subscribeProps}\n                objectPath.del(_subscribeProps, valuePropName);\n                // console.log('onClear subscribeProps[valuePropName] => ', _subscribeProps);\n                setSubscribeProps(_subscribeProps)\n            }\n\n            props[trigger] && props[trigger](...args);\n        };\n\n        const _onSearch = (searchLine, e) => {\n            e.preventDefault();\n            // console.log(\"_onSearch\", searchLine);\n            _searchDispatchToStore(searchLine)\n        };\n        const _searchDispatchToStore = (searchLine) =>\n          dispatchToStore({dispatch, setDateStore, value: searchLine, extraData: dispatchExtraData});\n\n        const childProps = getObjectExcludedProps(props, excludeProps);\n        const onSearchProps = (componentType === 'Search') ? {onSearch: _onSearch} : {}\n        // console.log(`storeHOC Component => `, componentType, Component);\n        return (\n            <Component\n                {...childProps}\n                {...subscribeProps}\n                {...{[trigger]: onChange}}\n                {...onSearchProps}\n            >{props.children}</Component>\n        )\n    })\n};\n","export const rtPrefix = 'rt';\n","import React, {useEffect} from \"react\";\nimport moment from \"moment\";\nimport {\n    Button as AntButton,\n    DatePicker as AntDatePicker,\n    TimePicker as AntTimePicker,\n    Typography as AntTypography,\n    Tabs as AntTabs,\n} from \"antd\";\nimport { getISO, toFormat } from \"../utils/datesUtils\";\nimport {withStore} from \"./withStore\";\nimport { rtPrefix } from \"../utils/variables\";\nimport { renderClassic, renderClassicWithLabel } from \"../declarative\";\n\n/** Компонент выбора даты */\nconst DatePicker = (props) => {\n    return <DateTimePicker Component={AntDatePicker} {...props}/>\n};\n\nconst TimePicker = (props) => {\n    return <DateTimePicker Component={AntTimePicker} {...props}/>\n};\nconst DateTimePicker = (props) => {\n    const {Component, value, onChange, ...restProps} = props;\n\n    useEffect(() => {\n        // console.log(\"DatePickerHOC => onChange => string\");\n        value && typeof value === 'string' && onChange(moment(value), value);\n    }, [])\n\n    const _value = value ? (typeof value === 'string' ? moment(value) : value) : undefined;\n    const style = {width: '100%', ...(props && props.style)};\n    // console.log(\"DatePickerHOC value => \", value);\n    return <Component {...restProps} style={style} value={_value} onChange={onChange}/>\n}\n\n/** Компонент вывода даты в текстовом виде */\nconst TypographyDate = (props) => {\n    const {label, value, format } = props;\n    const _value = value ? (format ? toFormat(value, format) : getISO(value)) : undefined;\n    return <AntTypography.Text {...props}> {label || _value} </AntTypography.Text>;\n}\n\n/** Компонент кнопки со всеми пропрами AntButton */\nconst Button = (props) => {\n    const Component = withStore(AntButton, { trigger: 'onClick' });\n    // console.log('Props classic field renderClassic => ', props.field);\n    // const onClick = (e) => childProps.onClick && childProps.onClick(e, field);\n    const onClick = (e) => props.onClick && props.onClick(e, props.field);\n    return renderClassicWithLabel(Component)({...props, onClick: onClick})\n}\n\n/** Custom компонент */\nconst Custom = (props) => {\n    const {children} = props\n    let childNode = null;\n    let childProps = null;\n\n    if (Array.isArray(children)) {\n        console.warn('Custom component: `children` is array. Don\\'t render component')\n        return null;\n    } else if(props.render) {\n        // console.log('childNode = props.render')\n        childNode = props.render;\n        childProps = { ...props, componentType: 'Custom' };\n        return renderClassic(childNode)(childProps)\n    } else if(React.isValidElement(children)) {\n        // console.log('childNode = children')\n        childProps = { ...children.props, ...props, componentType: 'Custom' };\n        return  React.cloneElement(children, childProps);\n    } else {\n        console.warn('Custom component: not exist valid render')\n        return null;\n    }\n}\n\n/** Компонент заголовка формы */\nconst FormHeader = (props) => {\n    return <div className={`${rtPrefix}-form-header`}>{props.children}</div>\n}\n\n/** Компонент тела формы */\nconst FormBody = (props) => {\n    let cls = [`${rtPrefix}-form-body`];\n    props.noPadding && cls.push(`${rtPrefix}-form-body-no-padding`);\n    props.scrollable && cls.push(`${rtPrefix}-form-body-scrollable`);\n    return <div className={cls.join(\" \")}>{props.children}</div>\n}\n\n/** Компонент подвала формы */\nconst FormFooter = (props) => {\n    return <div className={`${rtPrefix}-form-footer`}>{props.children}</div>\n}\n\nconst TabPane = (props) => {\n    let cls = [];\n    props.className && cls.push(props.className);\n    props.scrollable && cls.push(`${rtPrefix}-tabs-tabpane-scrollable`);\n    return <AntTabs.TabPane {...props} className={cls.join(\" \")}>{props.children}</AntTabs.TabPane>\n}\n\n\nexport {\n    DatePicker,\n    TimePicker,\n    TypographyDate,\n    Button,\n    Custom,\n    FormHeader,\n    FormBody,\n    FormFooter,\n    TabPane,\n    withStore\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { getObjectExcludedProps } from \"../utils/baseUtils\";\nimport {renderClassicByName} from \"../declarative\";\nconst excludeProps = ['child', 'componentType', 'field'];\nconst FormItem = (props) => {\n\n\tconst {child, field} = props;\n\tlet antFormItemProps = getObjectExcludedProps(props, excludeProps);\n\tif (child)\n\t\treturn renderClassicByName(child.componentType)\n\t\t\t({itemProps: {...antFormItemProps}, ...child, field})\n\telse\n\t\treturn null;\n};\n\nFormItem.propTypes = {\n\tchild: PropTypes.object.isRequired\n};\n\nexport default FormItem;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport FormItem from \"./FormItem\";\nimport { Form as AntForm } from \"antd\";\nimport { getObjectExcludedProps } from \"../utils/baseUtils\";\nimport { renderDeclarativeByName } from \"../declarative\";\n\nconst excludeProps = [\"children\", \"componentType\"];\n\nconst FormItems = (props) => {\n    const { items } = props;\n\n    // console.log('FormItems props => ', props);\n\n    const getItems = (data, antFormListParams) => {\n\n        return (data && data.map((item, index) => {\n            let itemProps = getObjectExcludedProps(item, excludeProps);\n            // console.log('FormItems index => ', index);\n\n            switch (item.componentType) {\n                case \"Item\":\n                    let _item = { ...item };\n                    let _key = index;\n                    if (antFormListParams && antFormListParams.field) {\n                        if (_item.name) {\n                            if (Array.isArray(_item.name)) {\n                                _item.name = [antFormListParams.field.name, ..._item.name];\n                                _item.fieldKey = [antFormListParams.field.name, ..._item.name];\n                            } else {\n                                _item.name = [antFormListParams.field.name, _item.name];\n                                _item.fieldKey = [antFormListParams.field.name, ..._item.name];\n                            }\n                        }\n                    }\n                    // console.log('_item ', _item.name);\n                    return <FormItem key={`${_key}`} {..._item} field={{ ...antFormListParams }}/>;\n                case \"ListItems\":\n                    return (\n                        <AntForm.List key={index} {...itemProps}>\n                            {(fields, operation) => {\n                                const param = { fields: [...fields], operation: { ...operation } };\n                                return getItems(item.children, param);\n                            }}\n                        </AntForm.List>\n                    );\n                case \"ListItem\":\n                    // console.log('antFormListParams => ', antFormListParams);\n                    return (\n                        <div key={index}>\n                            {antFormListParams && antFormListParams.fields && antFormListParams.fields.map((field, fIndex) => {\n                                // console.log('index field.key', index, field);\n                                const param = { field: { ...field }, ...antFormListParams };\n                                return <div key={field.key}>{getItems(item.children, param)} </div>;\n                            })}\n                        </div>\n                    );\n                default:\n                    return renderDeclarativeByName(item.componentType)({ key: index, ...itemProps })(getItems(item.children, antFormListParams))\n            }\n        })) || null;\n    };\n\n    return getItems(items);\n};\n\nFormItems.propTypes = {\n    items: PropTypes.arrayOf(PropTypes.object).isRequired\n};\n\nexport default FormItems;\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport FormItems from \"./FormItems\";\nimport { Form as AntForm, notification } from \"antd\";\nimport { dispatchToStore, getObjectExcludedProps, noop, notificationError } from \"../utils/baseUtils\";\nimport { rtPrefix } from \"../utils/variables\";\nimport { setDateStore } from \"../../redux/rtd.actions\";\n\nconst excludeProps = [\n    \"dispatch\",\n    \"setDateStore\",\n    \"componentType\",\n    \"noPadding\",\n    \"scrollable\",\n    \"header\",\n    \"body\",\n    \"footer\",\n    \"loadInitData\",\n    \"requestSaveForm\",\n    \"methodSaveForm\",\n    \"processBeforeSaveForm\"\n];\n\n/** Компонент формы */\nconst Form = (props) => {\n    const {\n        dispatch,\n        setDateStore,\n        loadInitData,\n        header,\n        body,\n        footer,\n        requestSaveForm,\n        methodSaveForm,\n        processBeforeSaveForm\n    } = props;\n\n    /** Состояние первоначалной настройки компонента*/\n    const [loaded, setLoaded] = useState(false);\n    const [antFormProps, setAntFormProps] = useState({});\n    const [initFormData, setInitFormData] = useState({});\n\n    useEffect(() => {\n        if (!loaded) {\n            if (loadInitData !== noop)\n                loadInitData(_setInitFormData);\n            else\n                setLoaded(true);\n        }\n    }, [loaded]);\n\n    useEffect(() => {\n        setAntFormProps(getObjectExcludedProps(props, excludeProps));\n        // console.log('antFormProps props => ', getObjectExcludedProps(props, excludeProps));\n    }, [props]);\n\n\n    const _setInitFormData = (data) => {\n        // console.log(\"Form loaded init data => \", data);\n        setInitFormData(data);\n        setLoaded(true);\n    };\n\n\n    let antForm;\n    if (props && props.form) {\n        antForm = props.form;\n    } else {\n        const [form] = AntForm.useForm();\n        antForm = form;\n    }\n\n    const getBodyCls = () => {\n        let cls = [`${rtPrefix}-form-body`];\n        props.noPadding && cls.push(`${rtPrefix}-form-body-no-padding`);\n        props.scrollable && cls.push(`${rtPrefix}-form-body-scrollable`);\n        return cls.join(\" \");\n    };\n\n    const onFinish = (rawValues) => {\n        const values = processBeforeSaveForm ? processBeforeSaveForm(rawValues) : rawValues;\n        // console.log(`Success form [${props.name ? props.name : 'no name form'}]: `, values);\n        const saveObject = {\n            ...initFormData,\n            ...values,\n        };\n        console.log(`Success form [${props.name ? props.name : 'no name form'}]: `, saveObject);\n        if (requestSaveForm && methodSaveForm) {\n            requestSaveForm({\n                method: methodSaveForm,\n                data: saveObject\n            })\n                .then(response => {\n                    notification.success({\n                        message: \"Сохранение прошло успешно\"\n                    });\n                    props.onFinish && props.onFinish(saveObject, response.data);\n                })\n                .catch(error => notificationError(error, 'Ошибка при сохранении') );\n        } else if (props.onFinish)\n            props.onFinish(saveObject);\n    };\n\n    const onFinishFailed = errorInfo => {\n        console.error(\"Failed:\", errorInfo);\n        props.onFinishFailed && props.onFinishFailed(errorInfo);\n    };\n\n    const Header = (header) => <div className={`${rtPrefix}-form-header`}><FormItems items={header}/></div>\n    const Footer = (footer) => <div className={`${rtPrefix}-form-footer`}><FormItems items={footer}/></div>\n\n    return (\n        <React.Fragment>\n            {loaded\n                ? <AntForm\n                    form={antForm}\n                    {...antFormProps}\n                    className={`${antFormProps.className} ${rtPrefix}-form`}\n                    style={{ ...antFormProps.style, width: '100%', height: '100%' }}\n                    initialValues={{ ...antFormProps.initialValues, ...initFormData }}\n                    onFinish={onFinish}\n                    onFinishFailed={onFinishFailed}\n                    onFieldsChange={(changedFields, allFields) => {\n                        const values = antForm.getFieldsValue();\n                        // console.log('dispatchToStore => ', dispatch, values);\n                        dispatch && dispatchToStore({ dispatch, setDateStore, value: values })}\n                    }\n                >\n                    <React.Fragment>\n                        {header ? Header(header) : null}\n                        {body ? <div className={getBodyCls()}><FormItems items={body}/></div> : null}\n                        {props.children}\n                        {footer ? Footer(footer) : null}\n                    </React.Fragment>\n                </AntForm>\n                : null}\n        </React.Fragment>\n    );\n};\n\nForm.propTypes = {\n\n    /** Не делать отступы у формы от краев блока. **Only config Form** */\n    noPadding: PropTypes.bool,\n\n    /** Разрешит скролл внтри формы. **Only config Form** */\n    scrollable: PropTypes.bool,\n\n    /** Массив объектов для шапки формы. Как правило только заголовок. */\n    header: PropTypes.arrayOf(PropTypes.object),\n\n    /** Массив объектов для тела формы */\n    body: PropTypes.arrayOf(PropTypes.object),\n\n    /** Массив объектов для подвала формы. Как правило только кнопки \"Сохранить\" и \"Отмена\" */\n    footer: PropTypes.arrayOf(PropTypes.object),\n\n    /** Ссылка на функцию загрузки значений по умолчанию\n     * `(callBack) => callBack(initObject)` */\n    loadInitData: PropTypes.func,\n\n    /** Запрос для автоматического сохранения формы */\n    requestSaveForm: PropTypes.func,\n\n    /** HTTP Метод, передаваемый в запрос сохранения */\n    methodSaveForm: PropTypes.string,\n\n    /** Функция обработки перед сохранением формы */\n    processBeforeSaveForm: PropTypes.func\n};\n\nForm.defaultProps = {\n    noPadding: false,\n    scrollable: false,\n    loadInitData: noop,\n    methodSaveForm: 'POST'\n};\n\nconst mapDispatchToProps = (dispatch) =>\n  bindActionCreators({ setDateStore: setDateStore}, dispatch);\n\nexport default connect(null, mapDispatchToProps)(Form);\n","import React from 'react';\nimport {rtPrefix} from '../utils/variables';\n\n/** Компонент обертка со всеми пропрами div */\nconst Layout = props => {\n\n    const getCls = () => {\n        let cls = [`${rtPrefix}-layout`];\n        props.className && cls.push(props.className);\n        return cls.join(' ');\n    };\n\n    return (\n        <div {...props} className={getCls()}>\n            {props.children}\n        </div>\n    );\n};\n\nexport default Layout;\n","import React, {useState, useEffect} from 'react';\n\nconst Switcher = props => {\n\n    const { value } = props;\n\n    const [_value, _setValue] = useState(0);\n\n    useEffect(() => {\n        if(value !== undefined && value < props.children.length) {\n            _setValue(value);\n        }\n    }, [value])\n\n    return (props.children[_value]);\n};\n\n\nexport default Switcher;\n","import {Spin} from 'antd';\nimport {LoadingOutlined} from '@ant-design/icons';\nimport React from 'react';\n\nexport const empty = (\n\t<div className={'BaseTable__overlay'}>\n\t\t{' '}\n\t\t<span>Нет данных</span>{' '}\n\t</div>\n);\n\nexport const overlay = (\n\t<div className={'BaseTable__overlay'}>\n\t\t{' '}\n\t\t<Spin\n\t\t\ttip='Загрузка...'\n\t\t\tindicator={<LoadingOutlined style={{fontSize: 24}} spin />}\n\t\t/>{' '}\n\t</div>\n);\n","import React from 'react';\nimport {Checkbox} from 'antd';\nimport { flatten, getTableRowKeys, getTableRowObjects } from \"../../../utils/baseUtils\";\n\nconst SelectionHead = (props) => {\n\tconst {column, container} = props;\n\tconst {rowKey, onSelectAll, selectedRowKeys, selectAll} = column;\n\n\tconst _handleChange = (e) => {\n\t\tconst rowKeys = flatten(getTableRowKeys(container.props.data, column.rowKey));\n\t\tconst rowObjects = flatten(getTableRowObjects(container.props.data, rowKey)).filter((item) => rowKeys.includes(item[rowKey]));\n\t\tconst totalLength = rowKeys.length;\n\t\tconst selectLength = selectedRowKeys.length;\n\t\tconst checked = !(totalLength === selectLength);\n\n\t\t// const newRowKeys = container.props.data.map((item) => { return item[column.rowKey] });\n\t\tonSelectAll({selected: checked, rowKeys: rowKeys, rowObjects: rowObjects});\n\t};\n\n\treturn (\n\t\t<Checkbox\n\t\t\tindeterminate={selectAll === null}\n\t\t\tonChange={_handleChange}\n\t\t\tchecked={selectAll}\n\t\t/>\n\t);\n};\n\nexport default SelectionHead;\n","import React from 'react';\nimport {Checkbox} from 'antd';\nimport {\n\tflatten,\n\tgetTableRowKeys,\n\tfindNodeByRowKey, getTableRowObjects\n} from \"../../../utils/baseUtils\";\n\nconst getRowChildren = (data, rowKey) =>\n\tdata.map((item) => {\n\t\tif (item.children && item.children.length) {\n\t\t\treturn [item[rowKey], getRowChildren(item.children, rowKey)];\n\t\t}\n\t\treturn item[rowKey];\n\t});\n\nconst findBrothers = (data, selfItem, rowKey, parentKey, rowKeys = null) => {\n\tlet arr = [];\n\tdata.forEach((item) => {\n\t\tif (\n\t\t\titem[parentKey] &&\n\t\t\titem[parentKey] === selfItem[parentKey] &&\n\t\t\titem[rowKey] !== selfItem[rowKey]\n\t\t) {\n\t\t\tif (rowKeys !== null) {\n\t\t\t\tif (rowKeys.includes(item[rowKey])) {\n\t\t\t\t\tarr.push(item[rowKey]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tarr.push(item[rowKey]);\n\t\t\t}\n\t\t} else if (item.children && item.children.length) {\n\t\t\tarr.push(\n\t\t\t\tfindBrothers(\n\t\t\t\t\titem.children,\n\t\t\t\t\tselfItem,\n\t\t\t\t\trowKey,\n\t\t\t\t\tparentKey,\n\t\t\t\t\trowKeys\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\treturn arr;\n};\n\nexport const parentAnalysis = ({\n\trowData,\n\trowKey,\n\tparentKey,\n\tchecked,\n\tnodeAssociated,\n\ttreeData,\n\tselectedRowKeys,\n\tindeterminateRowKeys,\n}) => {\n\tlet _selectedRowKeys = [...selectedRowKeys];\n\tlet _indeterminateRowKeys = [...indeterminateRowKeys];\n\n\tlet currentRowData = rowData;\n\tlet parentExist = !!currentRowData[parentKey];\n\tlet lastTypeSelect = checked ? 'checked' : 'square';\n\tlet typeSelect = '';\n\tlet nextSquare = false;\n\n\t/** Пока есть родитель */\n\twhile (parentExist && nodeAssociated) {\n\t\tconst indeterminateBrothers = flatten(\n\t\t\tfindBrothers(\n\t\t\t\ttreeData,\n\t\t\t\tcurrentRowData,\n\t\t\t\trowKey,\n\t\t\t\tparentKey,\n\t\t\t\t_indeterminateRowKeys\n\t\t\t)\n\t\t);\n\t\tconst selectedBrothers = flatten(\n\t\t\tfindBrothers(\n\t\t\t\ttreeData,\n\t\t\t\tcurrentRowData,\n\t\t\t\trowKey,\n\t\t\t\tparentKey,\n\t\t\t\t_selectedRowKeys\n\t\t\t)\n\t\t);\n\t\tconst allBrothers = flatten(\n\t\t\tfindBrothers(treeData, currentRowData, rowKey, parentKey)\n\t\t);\n\n\t\tif (checked) {\n\t\t\tif (\n\t\t\t\tlastTypeSelect === 'checked' &&\n\t\t\t\tselectedBrothers.length === allBrothers.length\n\t\t\t)\n\t\t\t\ttypeSelect = 'checked';\n\t\t\telse typeSelect = 'square';\n\t\t} else {\n\t\t\tif (\n\t\t\t\t!checked &&\n\t\t\t\t!nextSquare &&\n\t\t\t\t(selectedBrothers.length || indeterminateBrothers.length)\n\t\t\t)\n\t\t\t\tnextSquare = true;\n\t\t\tif (nextSquare) typeSelect = 'square';\n\t\t\telse typeSelect = 'none';\n\t\t}\n\n\t\t// console.log(\"allBrothers \", allBrothers);\n\t\t// console.log(\"findParentById \", treeData,\n\t\t//     rowKey,\n\t\t//     parentKey,\n\t\t//     currentRowData[parentKey]);\n\t\t//\n\t\t// console.log(\"findNodeByRowKey \", findNodeByRowKey(treeData, rowKey, currentRowData[parentKey]));\n\n\t\t// Найти родителя\n\t\tcurrentRowData = findNodeByRowKey(\n\t\t\ttreeData,\n\t\t\trowKey,\n\t\t\tcurrentRowData[parentKey]\n\t\t);\n\n\t\tif (typeSelect === 'checked') {\n\t\t\t// Выделить галкой\n\t\t\t// console.log(\"checked\");\n\t\t\tlastTypeSelect = 'checked';\n\t\t\tif (!_selectedRowKeys.includes(currentRowData[rowKey]))\n\t\t\t\t_selectedRowKeys.push(currentRowData[rowKey]);\n\t\t\tconst index = _indeterminateRowKeys.indexOf(currentRowData[rowKey]);\n\t\t\tif (index > -1) _indeterminateRowKeys.splice(index, 1);\n\t\t} else if (typeSelect === 'square') {\n\t\t\t// Выдлеить квадратом\n\t\t\t// console.log(\"square: \");\n\t\t\tlastTypeSelect = 'square';\n\t\t\tif (!_indeterminateRowKeys.includes(currentRowData[rowKey]))\n\t\t\t\t_indeterminateRowKeys.push(currentRowData[rowKey]);\n\t\t\tconst index = _selectedRowKeys.indexOf(currentRowData[rowKey]);\n\t\t\tif (index > -1) _selectedRowKeys.splice(index, 1);\n\t\t} else if (typeSelect === 'none') {\n\t\t\t// Снять выделение\n\t\t\t// console.log(\"none: \");\n\t\t\tlastTypeSelect = 'none';\n\t\t\tconst indexS = _selectedRowKeys.indexOf(currentRowData[rowKey]);\n\t\t\tif (indexS > -1) _selectedRowKeys.splice(indexS, 1);\n\t\t\tconst indexI = _indeterminateRowKeys.indexOf(\n\t\t\t\tcurrentRowData[rowKey]\n\t\t\t);\n\t\t\tif (indexI > -1) _indeterminateRowKeys.splice(indexI, 1);\n\t\t}\n\n\t\tparentExist = !!currentRowData[parentKey];\n\t\t// parentExist = проверка наличия след родителя\n\t}\n\n\treturn [_selectedRowKeys, _indeterminateRowKeys];\n};\n\nexport const onChangeSelectionCell = (props) => {\n\tconst {rowData, rowIndex, column, rows, checked} = props;\n\tconst {\n\t\trowKey,\n\t\tparentKey,\n\t\tnodeAssociated,\n\t\tselectedRowKeys,\n\t\tindeterminateRowKeys,\n\t\tonChange\n\t} = column;\n\n\t// const rowKeys = flatten(getTableRowKeys([rowData], column.rowKey));\n\t// const totalLength = container.props.data.length;\n\t// const checked = e.target.checked;\n\t// const currentRowKey = {[rowKey]: rowData[rowKey], checked};\n\t// console.log(\"_handleChange: \", container);\n\n\tlet _selectedRowKeys = [...selectedRowKeys];\n\tlet _indeterminateRowKeys = [...indeterminateRowKeys];\n\n\t/** Обработка себя, поиск детей, выделение / снятие их */\n\tlet rowChildren = [];\n\tif (checked) {\n\t\tif (rowData.children && nodeAssociated)\n\t\t\trowChildren = flatten(getRowChildren(rowData.children, rowKey));\n\n\t\t_selectedRowKeys = _selectedRowKeys\n\t\t\t.concat([rowData[rowKey]])\n\t\t\t.concat(rowChildren);\n\t\t_indeterminateRowKeys = _indeterminateRowKeys.filter(\n\t\t\t(element) =>\n\t\t\t\telement !== rowData[rowKey] &&\n\t\t\t\t!rowChildren.includes(element)\n\t\t);\n\t} else {\n\t\tif (rowData.children && nodeAssociated)\n\t\t\trowChildren = flatten(\n\t\t\t\tgetRowChildren(rowData.children, rowKey, false)\n\t\t\t);\n\n\t\t_selectedRowKeys = _selectedRowKeys.filter(\n\t\t\t(element) =>\n\t\t\t\telement !== rowData[rowKey] &&\n\t\t\t\t!rowChildren.includes(element)\n\t\t);\n\t\t_indeterminateRowKeys = _indeterminateRowKeys.filter(\n\t\t\t(element) =>\n\t\t\t\telement !== rowData[rowKey] &&\n\t\t\t\t!rowChildren.includes(element)\n\t\t);\n\t}\n\n\t[_selectedRowKeys, _indeterminateRowKeys] = parentAnalysis({\n\t\trowData,\n\t\trowKey,\n\t\tparentKey,\n\t\tchecked,\n\t\tnodeAssociated,\n\t\ttreeData: rows,\n\t\tselectedRowKeys: _selectedRowKeys,\n\t\tindeterminateRowKeys: _indeterminateRowKeys,\n\t});\n\n\tconst keys = [...new Set(_selectedRowKeys)];\n\tconst _selectedRowObjects = flatten(getTableRowObjects(rows, rowKey)).filter((item) => keys.includes(item[rowKey]));\n\t//return [...new Set(_disabledElements)]\n\t// onChange({ selected: checked, totalLength, rowData, rowIndex });\n\n\t/** Выясняем новое состояние галочки \"Выделить все\" */\n\tlet selectAll;\n\tconst selectLength = keys.length;\n\tconst totalLength = flatten(\n\t\tgetTableRowKeys(rows, column.rowKey)\n\t).length;\n\n\tif (selectLength === 0) selectAll = false;\n\telse if (totalLength === selectLength) selectAll = true;\n\telse if (totalLength !== selectLength) selectAll = null;\n\n\n\n\tonChange({\n\t\tselected: checked,\n\t\t_selectedRow: {\n\t\t\trowData: {...rowData},\n\t\t\trowIndex: rowIndex,\n\t\t\trowKey: rowKey,\n\t\t},\n\t\t_selectAll: selectAll,\n\t\t_selectedRowKeys: keys, //[...new Set(_selectedRowKeys)],\n\t\t_selectedRowObjects: _selectedRowObjects,\n\t\t_indeterminateRowKeys: [...new Set(_indeterminateRowKeys)],\n\t});\n\n\t// let uniqIds = {};\n\t// onChange({selected: checked, rowKeys: rowKeys.filter(obj => !uniqIds[obj[rowKey]] && (uniqIds[obj[rowKey]] = true)) });\n};\n\nconst SelectionCell = (props) => {\n\n\tconst {rowData, column} = props;\n\tconst {selectedRowKeys, indeterminateRowKeys, rowKey} = column;\n\tconst det = indeterminateRowKeys.includes(rowData[rowKey]);\n\tconst checked = selectedRowKeys.includes(rowData[rowKey]);\n\n\t// React.useEffect(() => {\n\t// \tconsole.log(\"selectionCell\", props);\n\t// }, [props]);\n\n\tconst _onChangeHandler = (checked) => {\n\t\tconst {rowData, rowIndex, column, container} = props;\n\t\tonChangeSelectionCell({\n\t\t\trowData, rowIndex, column, rows: container.props.data, checked\n\t\t})\n\t}\n\n\treturn (\n\t\t\t<Checkbox\n\t\t\t\tindeterminate={det}\n\t\t\t\t// onChange={(e) => _onChangeHandler(e.target.checked)}\n\t\t\t\tchecked={checked}\n\t\t\t/>\n\t);\n};\n\nexport default SelectionCell;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {CloseCircleOutlined} from '@ant-design/icons';\nimport {rtPrefix} from '../../../utils/variables';\n\nconst SelectionList = (props) => {\n\tconst {selectedRowObjects, rowRender, onClickDropSelect} = props;\n\n\t// console.log(\"SelectionList typeof -> \", typeof(rowRender));\n\treturn (\n\t\t<div className={`${rtPrefix}-table-selected-rows`}>\n\t\t\t{selectedRowObjects && selectedRowObjects.length > 0 ? (\n\t\t\t\t<ul>\n\t\t\t\t\t{selectedRowObjects.map((item, index) => (\n\t\t\t\t\t\t<li key={index}>\n\t\t\t\t\t\t\t{/*{(typeof(rowRender) === 'string') ? <div>{item[rowRender]}</div> : rowRender }*/}\n\t\t\t\t\t\t\t{typeof rowRender === 'function' ? (\n\t\t\t\t\t\t\t\trowRender({rowData: item, rowIndex: index})\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div>{item[rowRender]}</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div onClick={() => onClickDropSelect(item)}>\n\t\t\t\t\t\t\t\t<CloseCircleOutlined />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t) : (\n\t\t\t\t<div>Нет выбранных записей</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nSelectionList.propTypes = {\n\t/** Строка или функция для отображения элементов списка\n\t * Строка - имя поля\n\t * Функция - рендер строк. Параметры v\n\t * { rowData, rowIndex }) */\n\trowRender: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n\n\t/** Список выделенных объектов */\n\tselectedRowObjects: PropTypes.arrayOf(PropTypes.object).isRequired,\n\n\t/** Событие удаления элемента */\n\tonClickDropSelect: PropTypes.func.isRequired,\n};\n\nSelectionList.defaultProps = {};\n\nexport default SelectionList;\n","import React, {useRef, forwardRef, useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport BaseTable, {AutoResizer} from 'react-base-table';\nimport {empty, overlay} from './defaultSettings';\nimport SelectionHead from './Selectable/SelectionHead';\nimport SelectionCell, {parentAnalysis, onChangeSelectionCell} from './Selectable/SelectionCell';\nimport SelectionList from './SelectionList/SelectionList';\nimport {rtPrefix} from '../../utils/variables';\nimport {\n\tflatten,\n\tgenerateUUID,\n\tgetTableRowKeys,\n\tfindNodeByRowKey,\n\tnoop,\n\tgetTableRowObjects, notificationError, useMounted\n} from \"../../utils/baseUtils\";\nimport objectPath from \"object-path\";\nimport { setDateStore } from \"../../../redux/rtd.actions\";\nimport FormItems from \"../../Form/FormItems\";\nimport moment from \"moment\";\n\n/** Компонент таблицы */\nconst Table = forwardRef((props, ref) => {\n\n\t/** LOADING AND INFINITY MODE STATES */\n\t/** Наличие на сервере еще данных */\n\tconst [hasMore, setHasMore] = useState(true);\n\t/** Индикатор загрузки данных */\n\tconst [loading, setLoading] = useState(false);\n\n\t/** TABLE STATES */\n\t/** Колонки таблицы */\n\t// const [_columns, _setColumns] = useState([]);\n\t/** Строки таблицы */\n\tconst [_rows, _setRows] = useState([]);\n\t/** Ключи выделенных строк */\n\tconst [_selectedRowKeys, setSelectedRowKeys] = useState([]);\n\t/** Значение строки поиска */\n\tconst [_searchValue, setSearchValue] = useState('');\n\t/** Объект фильтра */\n\tconst [_filter, setFilter] = useState({});\n\t/** Объект соритировки */\n\tconst [_sortBy, setSortBy] = useState({});\n\t/** Состояние selectAll галочки */\n\tconst [selectAll, setSelectAll] = useState(false);\n\n\t/** TREE STATES */\n\t/** Ключи строк с кубиками при selectable = true */\n\tconst [_indeterminateRowKeys, setIndeterminateRowKeys] = useState([]);\n\t/** Ключи раскрытых строк при selectable = true */\n\tconst [_expandedRowKeys, setExpandedRowKeys] = useState([]);\n\n\t/** FOOTER STATES */\n\t/** Отображать ли footer */\n\tconst [_footerShow, _setFooterShow] = useState(false);\n\t/** Всего строк по фильтру в таблице */\n    const [_totalCountRows, setTotalCountRows] = useState(0);\n\n\n\tconst [subscribeProps, setSubscribeProps] = useState({});\n\n\tconst tableRef = useRef();\n\n\tconst isMounted = useMounted()\n\n\tconst {\n\t\t/** Required */\n\t\tcolumns,\n\t\t// type,\n\t\tinfinityMode,\n\t\teditMode, // need Props.types\n\n\t\t/** Def values */\n\t\tdefaultRows,\n\t\tdefaultSelectedRowKeys,\n\t\tdefaultSearchValue,\n\t\tdefaultFilter,\n\t\tdefaultSortBy,\n\n\t\t/** Outdoor control */\n\t\trows,\n\t\tsetRows, // ???\n\t\tselectedRowKeys,\n\t\tsearchValue,\n\t\tfilter,\n\t\tsortBy,\n\n\t\t/** Base Props */\n\t\trowKey,\n\t\tcustomFields,\n\n\t\t/** View Props */\n\t\tempty,\n\t\toverlay,\n\t\tfixWidthColumn,\n\t\t// footerProps,\n\t\theaderHeight,\n\t\trowHeight,\n\t\trowRenderer,\n\t\tzebraStyle,\n\t\testimatedRowHeight,\n\t\t// cellBordered, // need Props.types\n\t\trowBordered,  // need Props.types\n\n\t\t/** Load Data Props */\n\t\tloadThreshold,\n\t\tpageSize,\n\t\trequestLoadRows,\n\t\trequestLoadCount,\n\t\tsearchParamName,\n\n\t\t/** Selectable Props */\n\t\tselectable,\n\n\t\t/** Tree Props */\n\t\tnodeAssociated,\n\t\texpandColumnKey,\n\t\texpandDefaultAll,\n\t\texpandLazyLoad,\n\t\texpandParentKey,\n\n\t\t/** Events */\n\t\tonRowClick,\n\t\tonRowDoubleClick,\n\t\tonRowExpand,\n\t\tonSelectedRowsChange,\n\t\tonExpandedRowsChange,\n\n\t\t/** SELECTED PANEL */\n\t\tshowSelection,\n\t\trowRenderShowSelection,\n\n\t\t/** REDUX PROPS */\n\t\tdispatchPath,\n\t\tdispatch,\n\t\tsubscribe,\n\n\t\tvalue,\n\t\tonChange,\n\t} = {...props, ...subscribeProps};\n\n\tconst footerProps = {\n\t\t...Table.defaultProps.footerProps,\n\t\t...props.footerProps,\n\t};\n\n\tconst selectedDispatchPath = dispatch && dispatch.path\n\t\t? `${dispatch.path}.selected`\n\t\t: dispatchPath && `${dispatchPath}.selected`;\n\tconst rowsDispatchPath = dispatch && dispatch.path\n\t\t? `${dispatch.path}.rows`\n\t\t: dispatchPath && `${dispatchPath}.rows`;\n\n\tuseEffect(() => {\n        // console.log(\"Инициализация дефолтных значений \", selectColumn, columns);\n        // console.log(\"Инициализация дефолтных значений defaultSelectedRowKeys > \", defaultSelectedRowKeys);\n\n\t\t// Инициализация дефолтных значений\n\t\t// _setRows(defaultRows);\n\t\tif(defaultRows.length > 0) _setRowsHandler(defaultRows);\n\t\telse if(rows.length > 0) _setRowsHandler(rows);\n\t\t// setSelectedRowKeys(defaultSelectedRowKeys);\n\t\t_setSelectedRowsHandler(defaultSelectedRowKeys,undefined, defaultRows)\n\t\tsetSearchValue(defaultSearchValue);\n\t\tsetFilterHandler(defaultFilter);\n\t\tsetSortBy(defaultSortBy);\n\t\tsetSelectAll(\n\t\t\tdefaultRows.length > 0 &&\n\t\t\t\tdefaultRows.length === defaultSelectedRowKeys.length\n\t\t);\n\t\t// Определение нужно ли отображать подвал\n\t\t_setFooterShow(\n\t\t\t(footerProps.showElements.length ||\n\t\t\tfooterProps.leftCustomSideElement ||\n\t\t\tfooterProps.centerCustomSideElement ||\n\t\t\tfooterProps.rightCustomSideElement));\n\n\t\t// Only tree table\n\t\tif (!!expandColumnKey && !expandLazyLoad) {\n\t\t\t// Открытие всех нод\n\t\t\tif (expandDefaultAll)\n\t\t\t\tsetExpandedRowKeys(\n\t\t\t\t\tflatten(getTableRowKeys(defaultRows, rowKey))\n\t\t\t\t);\n\t\t\t// Установка квадратиков на нужных нодах\n\t\t\tif (defaultSelectedRowKeys && defaultSelectedRowKeys.length > 0) {\n\t\t\t\tlet flatRows = flatten(getTableRowKeys(defaultRows, rowKey));\n\t\t\t\tlet selectedRow = flatRows.filter((item) =>\n\t\t\t\t\tdefaultSelectedRowKeys.includes(item[rowKey])\n\t\t\t\t);\n\t\t\t\tlet _indeterminateRowKeys = [];\n\t\t\t\tselectedRow.forEach((item) => {\n\t\t\t\t\tconst [ss, ii] = parentAnalysis({\n\t\t\t\t\t\trowData: item,\n\t\t\t\t\t\trowKey,\n\t\t\t\t\t\tparentKey: expandParentKey,\n\t\t\t\t\t\tchecked: true,\n\t\t\t\t\t\tnodeAssociated,\n\t\t\t\t\t\ttreeData: defaultRows,\n\t\t\t\t\t\tselectedRowKeys: defaultSelectedRowKeys,\n\t\t\t\t\t\tindeterminateRowKeys: _indeterminateRowKeys,\n\t\t\t\t\t});\n\t\t\t\t\t_indeterminateRowKeys.push(...ii);\n\t\t\t\t});\n\t\t\t\tsetIndeterminateRowKeys([...new Set(_indeterminateRowKeys)]);\n\t\t\t}\n\t\t}\n\n\t\t// if (type !== 'localSide') {\n\t\t_dataProcessing({\n\t\t\tsortBy: defaultSortBy,\n\t\t\tfilter: defaultFilter,\n\t\t\tsearchLine: defaultSearchValue,\n\t\t\treload: true,\n\t\t});\n\t\t// }\n\t\t// console.log(\"Table => useEffect start \");\n\t\t// setMounted(true);\n\t\tif (ref && typeof ref === 'function') ref({reloadData});\n\t\telse if (ref && typeof ref === 'object') ref.current = {reloadData};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif(isMounted) {\n\t\t\t// console.log('useEffect rows');\n\t\t\t_setRowsHandler(rows);\n\t\t\t// setSelectedRowKeys(selectedRowKeys);\n\t\t\t_setSelectedRowsHandler(selectedRowKeys, undefined, rows);\n\t\t\tsetSearchValue(searchValue);\n\t\t\tsetFilterHandler(filter);\n\t\t\tsetSortBy(sortBy);\n\t\t\tif (!!expandColumnKey && !expandLazyLoad) {\n\t\t\t\t// Открытие всех нод\n\t\t\t\tif (expandDefaultAll)\n\t\t\t\t\tsetExpandedRowKeys(flatten(getTableRowKeys(rows, rowKey)));\n\t\t\t}\n\t\t}\n    }, [rows, selectedRowKeys, searchValue, filter, sortBy]);\n\n\tuseEffect(() => {\n\t\t// console.log('useEffect editMode');\n\t\t_setSelectedRowsHandler([], [])\n\t}, [editMode])\n\n\tuseEffect(() => {\n\t\t// console.log('useEffect value');\n\t\t_setRowsHandler(value)\n\t}, [value])\n\n\t/** Подписка на изменение props[subscribe.name] в сторе */\n\tsubscribe.map(item => {\n\t\treturn useEffect( () => {\n\t\t\tif((item.withMount || isMounted) && item.name) {\n\t\t\t\t// console.log(\"Table => useEffect => [%s] \", item.name, props[item.name]);\n\t\t\t\tlet extraData = {};\n\t\t\t\tif (item.extraData) {\n\t\t\t\t\tif (typeof item.extraData === 'object')\n\t\t\t\t\t\tObject.keys(item.extraData).forEach((key) => extraData[key] = props[`${item.name}.extraData.${key}`]);\n\t\t\t\t\telse\n\t\t\t\t\t\textraData = props[`${item.name}ExtraData`];\n\t\t\t\t}\n\t\t\t\tconst onChangeObject = {\n\t\t\t\t\tvalue: props[item.name],\n\t\t\t\t\textraData: extraData, //props[`${item.name}ExtraData`],\n\t\t\t\t\treloadTable: reloadData,\n\t\t\t\t\taddRows: _addRows,\n\t\t\t\t\taddRow: _addRow,\n\t\t\t\t\taddRowAsCopy: _addRowAsCopy,\n\t\t\t\t\teditRow: _editRow,\n\t\t\t\t\tremoveRow: _removeRow,\n\t\t\t\t\tmoveUpRow: _moveUpRow,\n\t\t\t\t\tmoveDownRow: _moveDownRow,\n\t\t\t\t\tsetSubscribeProps: _setSubscribeProps,\n\t\t\t\t}\n\t\t\t\titem.onChange && item.onChange(onChangeObject);\n\t\t\t}\n\t\t}, [props[item.name]]);\n\t})\n\n\t/** BASE FUNCTIONS */\n\n\tconst _setSubscribeProps = (props) => {\n\t\t// setTimeout(() => {\n\t\t// \tconsole.log('_setSubscribeProps');\n\t\tsetSubscribeProps({...subscribeProps, ...props});\n\t\t// }, 2000)\n\t}\n\n\tconst _setLoadedRowsHandler = (rows) => {\n\t\t_setRowsHandler(rows)\n\t\tonChange && onChange(rows)\n\t};\n\tconst _setRowsHandler = (rows) => {\n\t\t// console.log('_setRowsHandler onChange');\n\t\t_setRows(rows);\n\t\tsetRows(rows);\n\t\trowsDispatch(rows);\n\t};\n\n\tconst _setSelectedRowsHandler = (selectedKeys = [], selectedObjects = undefined, rows = []) => {\n\t\t// console.log('_setSelectedRowsHandler => ', selectedKeys)\n\t\tsetSelectedRowKeys(selectedKeys);\n\t\tif(selectedKeys.length === 0)\n\t\t\tif (selectable)\n\t\t\t\tselectedDispatch([]);\n\t\t\telse\n\t\t\t\tselectedDispatch(undefined);\n\t\telse if(selectedKeys.length > 0 && !selectedObjects)\n\t\t\tif (selectable)\n\t\t\t\tselectedDispatch (flatten( getTableRowObjects(rows, rowKey) ).filter((item) => selectedKeys.includes(item[rowKey])))\n\t\t\telse\n\t\t\t\tselectedDispatch (findNodeByRowKey(rows, rowKey, selectedKeys[0]))\n\t\telse\n\t\t\tselectedDispatch(selectedObjects);\n\t}\n\n\tconst rowsDispatch = (rows) => {\n\t\trowsDispatchPath && props.setDateStore && props.setDateStore(rowsDispatchPath, rows);\n\t};\n\n\tconst selectedDispatch = (data) => {\n\t\tselectedDispatchPath && props.setDateStore && props.setDateStore(selectedDispatchPath, data);\n\t}\n\n\tconst onTableEventsDispatch = (nameEvent, value) => {\n\t\tconst dp = dispatch && dispatch.path\n\t\t\t? `${dispatch.path}.events.${nameEvent}`\n\t\t\t: dispatchPath && `${dispatchPath}.events.${nameEvent}`;\n\n\t\tdp && props.setDateStore && props.setDateStore(dp, {\n\t\t\ttimestamp: moment(),\n\t\t\tvalue: value\n\t\t});\n\t\t// console.log('onTableEventsDispatch onChange');\n\t\tArray.isArray(value) && onChange && onChange(value)\n\t}\n\n\tconst setFilterHandler = (filter) => {\n\t\t// console.log('setFilterHandler => ', filter);\n\t\tsetFilter(filter);\n\t}\n\n\tconst reloadData = ({sortBy, filter, searchValue}, appendParams) => {\n\t\t// console.log(\"reloadData params \", sortBy, filter, searchValue, loading);\n\t\ttableRef.current && tableRef.current.scrollToRow(0, 'auto');\n\t\tif(props.value && props.value.length > 0)\n\t\t\t_setSelectedRowsHandler(props.value.map(item => item[rowKey]), props.value);\n\t\telse\n\t\t\t_setSelectedRowsHandler()\n\n\t\tconst __sortBy = appendParams ? (sortBy ? sortBy : _sortBy) : sortBy;\n\t\tconst __filter = appendParams ? {..._filter, ...filter} : filter;\n\t\tconst __searchValue = appendParams ? (searchValue ? searchValue : _searchValue) : searchValue;\n\t\tsetSortBy(__sortBy);\n\t\tsetFilterHandler(__filter);\n\t\tsetSearchValue(__searchValue);\n\t\t_dataProcessing({\n\t\t\tsortBy: __sortBy,\n\t\t\tfilter: __filter,\n\t\t\tsearchLine: __searchValue,\n\t\t\treload: true,\n\t\t});\n        // console.log(\"reloadData loading \", loading);\n    };\n\n\tconst _dataProcessing = (params) => {\n\t\t// console.log('_dataProcessing', params);\n\t\tconst {sortBy, filter, searchLine, expandRow, reload} = params;\n\t\tif ((hasMore || reload) && !loading) {\n\t\t\tsetLoading(true);\n\t\t\tconst pageNum = reload\n\t\t\t\t? 0\n\t\t\t\t: Math.floor(_rows.length / pageSize);\n\t\t\tconst params = {\n\t\t\t\tpage: pageNum,\n\t\t\t\tsize: pageSize,\n\t\t\t\tsort:\n\t\t\t\t\tsortBy && sortBy.key\n\t\t\t\t\t\t? sortBy.key + ',' + sortBy.order\n\t\t\t\t\t\t: null,\n\t\t\t};\n\t\t\tconst dataQuery = {\n\t\t\t\t...filter,\n\t\t\t\t...(searchLine\n\t\t\t\t\t? {[searchParamName]: searchLine}\n\t\t\t\t\t: null),\n\t\t\t};\n\t\t\t// console.log('dataQuery', dataQuery);\n\n\t\t\tif(infinityMode && reload && requestLoadCount !== noop && !expandColumnKey && !expandLazyLoad) {\n\t\t\t\trequestLoadCount({\n\t\t\t\t\tparams,\n\t\t\t\t\tdata: dataQuery,\n\t\t\t\t})\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t// console.log(\"infinity then response\", response);\n\t\t\t\t\t\t// const result = response.data;\n\t\t\t\t\t\tsetTotalCountRows(response.data);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(error =>\n\t\t\t\t\t\tnotificationError(error, 'Ошибка получения количества записей по фильтру') );\n\t\t\t}\n\n\t\t\t// console.log('requestLoadRows => ', typeof requestLoadRows);\n\t\t\t// if(typeof requestLoadRows !== 'function'){\n\t\t\t//     setLoading(false);\n\t\t\t// }\n\t\t\tif(requestLoadRows) {\n\t\t\t\trequestLoadRows({\n\t\t\t\t\tparams,\n\t\t\t\t\tdata: dataQuery,\n\t\t\t\t})\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t// console.log(\"infinity then response\", response);\n\t\t\t\t\t\tconst result = response.data;\n\t\t\t\t\t\t// Если иерархия и ленивая, то ищим кому добавть полученные записи\n\t\t\t\t\t\tif (!!expandColumnKey && expandLazyLoad) {\n\t\t\t\t\t\t\t// lastExpandRow//, setLastExpandRow\n\t\t\t\t\t\t\t// console.log('!!expandColumnKey && expandLazyLoad', result);\n\t\t\t\t\t\t\tif (pageNum === 0) {\n\t\t\t\t\t\t\t\tresult.forEach((child) => {\n\t\t\t\t\t\t\t\t\tchild.children = [\n\t\t\t\t\t\t\t\t\t\t{ [rowKey]: generateUUID() },\n\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t// _setRows(result);\n\t\t\t\t\t\t\t\t_setLoadedRowsHandler(result);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlet newRows = [..._rows];\n\t\t\t\t\t\t\t\t// (data, rowKey, rowValue)\n\t\t\t\t\t\t\t\tresult.forEach((child) => {\n\t\t\t\t\t\t\t\t\tchild.children = [\n\t\t\t\t\t\t\t\t\t\t{ [rowKey]: generateUUID() },\n\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tlet node = findNodeByRowKey(\n\t\t\t\t\t\t\t\t\tnewRows,\n\t\t\t\t\t\t\t\t\trowKey,\n\t\t\t\t\t\t\t\t\texpandRow[rowKey]\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tnode.children = result;\n\t\t\t\t\t\t\t\t// console.log('newRows -> ', newRows);\n\t\t\t\t\t\t\t\t// _setRows(newRows);\n\t\t\t\t\t\t\t\t_setLoadedRowsHandler(newRows);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (result && result.length < pageSize) {\n\t\t\t\t\t\t\t\tsetHasMore(false);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetHasMore(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpageNum === 0\n\t\t\t\t\t\t\t\t? _setLoadedRowsHandler(result) // _setRows\n\t\t\t\t\t\t\t\t: _setLoadedRowsHandler(_rows.concat(result)); // _setRows\n\n\t\t\t\t\t\t\t// console.log('expandDefaultAll ', expandDefaultAll, _expandedRowKeys);\n\t\t\t\t\t\t\tif (expandDefaultAll)\n\t\t\t\t\t\t\t\tsetExpandedRowKeys(\n\t\t\t\t\t\t\t\t\tflatten(getTableRowKeys(result, rowKey))\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tnotificationError(error, 'Ошибка загрузки данных')\n\t\t\t\t\t\t_setLoadedRowsHandler(_rows); // _setRows\n\t\t\t\t\t\t// setHasMore(false);\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t});\n\t\t\t} else setLoading(false);\n\t\t}\n\t};\n\n\t/** Событие выделение одной строки в режиме без галочек */\n\tconst useSimpleAndDoubleClick = (actionSimpleClick, actionDoubleClick, delay = 200) => {\n\t\tconst [click, setClick] = useState(0);\n\t\tconst [data, setData] = useState(undefined);\n\t\tuseEffect(() => {\n\t\t\tconst timer = setTimeout(() => {\n\t\t\t\t// simple click\n\t\t\t\tif (click === 1) actionSimpleClick(data);\n\t\t\t\tsetClick(0);\n\t\t\t}, delay);\n\t\t\tif (click === 2) actionDoubleClick(data);\n\t\t\treturn () => clearTimeout(timer);\n\t\t}, [click]);\n\t\treturn (_data) => {setClick(prev => prev + 1); setData(() => _data);}\n\t}\n\n\tlet timer;\n\tconst simpleAndDoubleClick = (actionSimpleClick, actionDoubleClick, data) => (event) => {\n\t\tclearTimeout(timer);\n\t\tif (event.detail === 1) {\n\t\t\t// console.log('actionSimpleClick', data)\n\t\t\ttimer = setTimeout(() => actionSimpleClick(data), 200)\n\t\t} else if (event.detail === 2) {\n\t\t\t// console.log('actionDoubleClick', data)\n\t\t\tactionDoubleClick(data)\n\t\t}\n\t}\n\n\tconst _onRowClick = ({rowData, rowIndex, rowKey}) => {\n\t\t// console.log('actionSimpleClick')\n\t\tonTableEventsDispatch('onRowClick', rowData)\n\t\t_rowSelectAfterClick({rowData, rowIndex, rowKey, onClick: onRowClick})\n\t}\n\tconst _onRowDoubleClick = ({rowData, rowIndex, rowKey}) => {\n\t\t// console.log('onDoubleClick', rowData, rowIndex, rowKey);\n\t\t// console.log('actionDoubleClick')\n\t\t// rowDoubleClickDispatch(rowData);\n\t\tonTableEventsDispatch('onRowDoubleClick', rowData)\n\t\t_rowSelectAfterClick({rowData, rowIndex, rowKey, onClick: onRowDoubleClick})\n\t}\n\n\tconst _rowSelectAfterClick = ({rowData, rowIndex, rowKey, onClick}) => {\n\t\tconst checked = !_selectedRowKeys.includes(rowKey);\n\t\tconst newRowObject = {\n\t\t\trowData: {...rowData},\n\t\t\trowIndex: rowIndex,\n\t\t\trowKey: rowKey,\n\t\t};\n\t\tif (!selectable) {\n\t\t\t// console.log('_rowEventHandlers -> onClick', rowKey, rowIndex);\n\t\t\t// console.log('q onRowClick => ', rowData)\n\t\t\t// if(_selectedRowKeys)\n\t\t\tif(checked && !editMode)\n\t\t\t\t_setSelectedRowsHandler([rowKey], rowData);\n\t\t\tonSelectedRowsChange([rowKey], [rowData]);\n\t\t} else {\n\t\t\tonChangeSelectionCell({\n\t\t\t\t...newRowObject,\n\t\t\t\tcolumn: _getSelectionColumnProps(),\n\t\t\t\trows: _rows,\n\t\t\t\tchecked: checked,\n\t\t\t})\n\t\t}\n\t\tonClick && onClick({ selected: checked, ...newRowObject });\n\t}\n\n\tconst _rowEventHandlers = {\n\t\tonClick: _onRowClick,\n\t\tonDoubleClick: _onRowDoubleClick,\n\n\t\t// onClick: useSimpleAndDoubleClick(_onRowClick, _onRowDoubleClick),\n\t\t// onClick: simpleAndDoubleClick(_onRowClick, _onRowDoubleClick),\n\n\t\t// onDoubleClick: console.log('onDoubleClick'),\n\t\t// onContextMenu: console.log('context menu'),\n\t\t// onMouseEnter: console.log('mouse enter'),\n\t\t// onMouseLeave: console.log('mouse leave'),\n\t};\n\n\n\t/** Событие при сортировке */\n\tconst _onColumnSort = (sortBy) => {\n\t\t// console.log(\"sortBy\", sortBy);\n\t\ttableRef.current.scrollToRow(0, 'auto');\n\t\tlet localSortBy = _sortBy.order === 'desc' ? {} : sortBy;\n\t\tsetSortBy(localSortBy);\n\n\t\t// Для серверной сортировки - сбросить выделение\n\t\t// if (type !== 'localSide') {\n\t\t// setSelectedRowKeys([]);\n\t\t_setSelectedRowsHandler();\n\t\t// }\n\t\tconst loadParams = {\n\t\t\tsortBy: localSortBy,\n\t\t\tfilter: _filter,\n\t\t\tsearchLine: _searchValue,\n\t\t\treload: true,\n\t\t};\n\t\t_dataProcessing(loadParams);\n\t};\n\n\t/** VIEW FUNCTIONS */\n\n\n\tconst _footer = (\n\t\t<React.Fragment>\n\t\t\t{_footerShow ? (\n\t\t\t\t\t<React.Fragment>\n                        {/*className={'BaseTable__footer__counter'}>*/}\n\t\t\t\t\t\t<div key={'footer-left-custom-side'} className={'left-custom-side'}>\n\t\t\t\t\t\t\t{footerProps.leftCustomSideElement\n\t\t\t\t\t\t\t\t? Array.isArray(footerProps.leftCustomSideElement)\n\t\t\t\t\t\t\t\t\t? <FormItems items={footerProps.leftCustomSideElement} />\n\t\t\t\t\t\t\t\t\t: <footerProps.leftCustomSideElement/>\n\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div key={'footer-center-custom-side'} className={'center-custom-side'}>\n\t\t\t\t\t\t\t{footerProps.centerCustomSideElement\n\t\t\t\t\t\t\t\t? Array.isArray(footerProps.centerCustomSideElement)\n\t\t\t\t\t\t\t\t\t? <FormItems items={footerProps.centerCustomSideElement} />\n\t\t\t\t\t\t\t\t\t: <footerProps.centerCustomSideElement/>\n\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div key={'footer-right-custom-side'} className={'right-custom-side'}>\n\t\t\t\t\t\t\t{footerProps.rightCustomSideElement\n\t\t\t\t\t\t\t\t? Array.isArray(footerProps.rightCustomSideElement)\n\t\t\t\t\t\t\t\t\t? <FormItems items={footerProps.rightCustomSideElement} />\n\t\t\t\t\t\t\t\t\t: <footerProps.rightCustomSideElement/>\n\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{selectable ? (\n\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t{footerProps.showElements.includes('selected')\n\t\t\t\t\t\t\t\t\t? <span>{footerProps.selectedTitle} {_selectedRowKeys.length}</span>\n\t\t\t\t\t\t\t\t\t: null }\n\t\t\t\t\t\t\t\t{footerProps.showElements.includes('loaded')\n\t\t\t\t\t\t\t\t\t? <span>{footerProps.loadedTitle} {flatten(getTableRowKeys(_rows, rowKey)).length}</span>\n\t\t\t\t\t\t\t\t\t: null }\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t{footerProps.showElements.includes('total')\n\t\t\t\t\t\t\t? infinityMode && requestLoadCount !== noop && !expandColumnKey && !expandLazyLoad\n\t\t\t\t\t\t\t\t? <span>{footerProps.totalTitle} {_totalCountRows}</span>\n\t\t\t\t\t\t\t\t: <span>{footerProps.totalTitle} {flatten(getTableRowKeys(_rows, rowKey)).length}</span>\n\t\t\t\t\t\t\t: null}\n\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t) : null}\n\t\t</React.Fragment>\n\t);\n\n\t/** Событие при рендере для стилизации */\n\tconst _rowClassName = ({rowData, rowIndex}) => {\n\t\tconst {rowClassName} = props;\n\t\treturn [\n\t\t\trowClassName,\n\t\t\t_selectedRowKeys.includes(rowData[rowKey]) && 'row-selected',\n\t\t\tzebraStyle ? (rowIndex % 2 === 0 ? 'even' : 'odd') : '',\n\t\t\trowBordered ? 'bordered' : ''\n\t\t].join(' ')\n\t};\n\n\t// const _cellProps = () => ({ className: [cellBordered ? 'cellBordered' : ''].join(' ')})\n\n\tconst _rowRenderer = (props) => {\n\t\tconst { cells, rowData, rowIndex } = props;\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\theight: '100%'\n\t\t\t\t}}\n\t\t\t\tonClick={(e) =>\n\t\t\t\tsimpleAndDoubleClick(_onRowClick, _onRowDoubleClick, {rowData, rowIndex, rowKey: rowData[rowKey]})(e)}\n\t\t\t>\n\t\t\t\t{cells}\n\t\t\t</div>\n\t\t)\n\t}\n\n\tconst _rowProps = ({ columns, rowData, rowIndex }) => ({\n\t\tonClick: (e) =>\n\t\tsimpleAndDoubleClick(_onRowClick, _onRowDoubleClick, {rowData, rowIndex, rowKey: rowData[rowKey]})(e)\n\n})\n\n\t/** LOAD DATA FUNCTIONS */\n\tconst onEndReached = () => {\n\t\tlet selectAll;\n\t\tconst selectLength = _selectedRowKeys.length;\n\t\tif (selectLength === 0) selectAll = false;\n\t\telse if (selectLength > 0) selectAll = null;\n\n\t\tsetSelectAll(selectAll);\n\t\t// console.log('_filter', _filter);\n\n\t\tif (infinityMode) {\n\t\t\tconst loadParams = {\n\t\t\t\tsortBy: _sortBy,\n\t\t\t\tfilter: _filter,\n\t\t\t\tsearchLine: _searchValue,\n\t\t\t\treload: false,\n\t\t\t};\n\t\t\t_dataProcessing(loadParams);\n\t\t}\n\t};\n\n\t/** SELECTABLE FUNCTIONS */\n\n\t/** Событие при изменении галочки одной строки */\n\tconst _onChangeSelectHandler = ({\n\t\tselected,\n\t\t_selectedRow,\n\t\t_selectAll,\n\t\t_selectedRowKeys,\n\t\t_selectedRowObjects,\n\t\t_indeterminateRowKeys,\n\t}) => {\n\t\t// console.group(\"_onChangeSelectHandler\", _selectedRowKeys);\n\t\t// console.log(\"_selectedRowKeys\", _selectedRowKeys);\n\t\t// console.log(\"_indeterminateRowKeys\", _indeterminateRowKeys);\n\t\t// console.log(\"_selectAll\", _selectAll);\n\t\t// console.groupEnd();\n\n\t\t// setSelectedRowKeys(_selectedRowKeys);\n\t\t// selectedDispatch(_selectedRowObjects);\n\t\t_setSelectedRowsHandler(_selectedRowKeys, _selectedRowObjects)\n\t\tsetIndeterminateRowKeys(_indeterminateRowKeys);\n\t\tsetSelectAll(_selectAll);\n\t\tonSelectedRowsChange(_selectedRowKeys, _selectedRowObjects);\n\t};\n\n\t/** Событие при изменении галочки \"Выделить все\" */\n\tconst _onSelectAllHandler = ({selected, rowKeys, rowObjects}) => {\n\t\tconst selectedKeys = selected ? rowKeys : [];\n\t\t// setSelectedRowKeys(selectedKeys);\n\t\t// selectedDispatch(selected ? rowObjects : []);\n\t\t_setSelectedRowsHandler(selectedKeys, selected ? rowObjects : [])\n\t\tsetIndeterminateRowKeys([]);\n\t\tsetSelectAll(selected);\n\t\t// setSelectedRowObjects(rows);\n\t\t// console.log(\"_handleSelectAll\", selectedKeys);\n\t\tonSelectedRowsChange(selectedKeys, rowObjects);\n\t};\n\t//\n\t// const SelectionCell = (props) => {\n\t// \tconst {rowData, column} = props;\n\t// \tconst {selectedRowKeys, indeterminateRowKeys, rowKey} = column;\n\t// \tconst det = indeterminateRowKeys.includes(rowData[rowKey]);\n\t// \tconst checked = selectedRowKeys.includes(rowData[rowKey]);\n\t// \tReact.useEffect(() => {\n\t// \t\tconsole.log(\"selectionCell\", props);\n\t// \t}, []);\n\t//\n\t// \tconst _handleChange = (checked) => {\n\t// \t\tconsole.log(\"_handleChange\", checked);\n\t// \t}\n\t//\n\t// \treturn (\n\t// \t\t<Checkbox\n\t// \t\t\tindeterminate={det}\n\t// \t\t\tonChange={(e) => _handleChange(e.target.checked)}\n\t// \t\t\tchecked={checked}\n\t// \t\t/>\n\t// \t);\n\t// };\n\n\tconst _getSelectionColumnProps = () => ({\n\t\trowKey: rowKey,\n\t\tparentKey: expandParentKey,\n\t\tnodeAssociated: nodeAssociated,\n\t\tselectedRowKeys: _selectedRowKeys,\n\t\tindeterminateRowKeys: _indeterminateRowKeys,\n\t\tonChange: _onChangeSelectHandler,\n\t})\n\n\tconst _getColumns = () => {\n\t\tconst selectColumn = {\n\t\t\tkey: '__selection__',\n\t\t\theaderRenderer: SelectionHead,\n\t\t\tcellRenderer: <SelectionCell/>,\n\t\t\twidth: 40,\n\t\t\tflexShrink: 0,\n\t\t\tresizable: false,\n\t\t\tfrozen: 'left',\n\t\t\tselectAll: selectAll,\n\t\t\tonSelectAll: _onSelectAllHandler,\n\t\t\t..._getSelectionColumnProps()\n\t\t};\n\t\treturn selectable ? [selectColumn, ...columns] : [...columns];\n\t}\n\n\n\n\t/** TREE FUNCTIONS */\n\n\tconst _onExpandedRowsChange = (expandedRowKeys) => {\n\t\t// console.log(\"_onExpandedRowsChange\", expandedRowKeys);\n\t\tonExpandedRowsChange(expandedRowKeys);\n\t};\n\tconst _onRowExpand = ({expanded, rowData, rowIndex, rowKey}) => {\n\t\t// console.log(\"_onRowExpand\", rowData, expanded, rowIndex, rowKey);\n\t\tif (expanded) {\n\t\t\tsetExpandedRowKeys([..._expandedRowKeys, rowKey]);\n\n\t\t\tif (expandLazyLoad) {\n\t\t\t\tconst loadParams = {\n\t\t\t\t\tsortBy: _sortBy,\n\t\t\t\t\tfilter: {..._filter, [expandParentKey]: rowKey},\n\t\t\t\t\tsearchLine: _searchValue,\n\t\t\t\t\treload: false,\n\t\t\t\t\texpandRow: rowData,\n\t\t\t\t};\n\t\t\t\t// _callPropsOnLoad(loadParams);\n\t\t\t\t_dataProcessing(loadParams);\n\t\t\t}\n\t\t} else {\n\t\t\tlet expandedRowKeys = [..._expandedRowKeys];\n\t\t\tlet allChildKeys = flatten(\n\t\t\t\tgetTableRowKeys(rowData.children, props.rowKey)\n\t\t\t);\n\t\t\tallChildKeys.push(rowKey);\n\t\t\t// console.log('allChildKeys', allChildKeys);\n\t\t\tsetExpandedRowKeys(\n\t\t\t\texpandedRowKeys.filter((item) => !allChildKeys.includes(item))\n\t\t\t);\n\t\t}\n\t\tonRowExpand({expanded, rowData, rowIndex, rowKey});\n\t};\n\n\n\t/** ROW CHANGE FUNCTIONS */\n\n\t/**\n\t * Find row by key\n\t * @param data - table rows\n\t * @param key - key row for find\n\t * @param callback - function for return result\n\t */\n\tconst loop = (data, key, callback) => {\n\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\tif (data[i][rowKey] === key) {\n\t\t\t\t// console.log(`Selected => index: [${i}], path: [${data[i].path}]`, data);\n\t\t\t\treturn callback(data[i], i, data);\n\t\t\t} else {\n\t\t\t\t// console.log(`Other => index: [${i}], path: [${data[i].path}]`);\n\t\t\t}\n\t\t\tif (data[i].children) {\n\t\t\t\tloop(data[i].children, key, callback);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst _addRows = (rows) => {\n\t\tlet saveRows = [...rows];\n\t\tif (customFields)\n\t\t\t// Фильтрация по пользовательским параметрам\n\t\t\tsaveRows = saveRows.filter((sRow) => {\n\t\t\t\tlet isValid = [];\n\t\t\t\tcustomFields.forEach((field) => {\n\t\t\t\t\t// Валидация по пользовательской логике функции validate\n\t\t\t\t\tif(field.validate)\n\t\t\t\t\t\tisValid.push(field.validate(sRow, _rows));\n\n\t\t\t\t\t// Создание или переобразование по пользовательской логике функции value\n\t\t\t\t\tif(field.value)\n\t\t\t\t\t\tsRow[field.name] = field.value(sRow, _rows);\n\t\t\t\t});\n\t\t\t\t// console.log('_addRows isValid', isValid);\n\t\t\t\tif(!isValid.includes(false))\n\t\t\t\t\treturn sRow;\n\t\t\t});\n\t\tconst _localRows = [..._rows, ...saveRows]\n\t\t_setRowsHandler(_localRows);\n\t\tonTableEventsDispatch('onAddRows', _localRows);\n\t}\n\n\tconst _addRow = (row) => {\n\t\tlet _row = {...row}\n\t\tlet isValid = true;\n\t\tif (customFields) {\n\t\t\tlet validations = [];\n\t\t\tcustomFields.forEach((field) => {\n\t\t\t\tif(field.validate)\n\t\t\t\t\tvalidations.push(field.validate(_row, _rows));\n\n\t\t\t\tif(field.value)\n\t\t\t\t\t_row[field.name] = field.value(_row, _rows)\n\t\t\t});\n\t\t\tisValid = !validations.includes(false)\n\t\t}\n\t\tif(isValid) {\n\t\t\tconst _localRows = [..._rows, _row]\n\t\t\t_setRowsHandler(_localRows);\n\t\t\tonTableEventsDispatch('onAddRow', _localRows);\n\t\t}\n\n\t}\n\n\tconst _addRowAsCopy = () => {\n\t\t// console.log(\"_onClickAddAsCopy\", selectedRow);\n\t\tconst _localRows = [..._rows, findNodeByRowKey(_rows, rowKey, _selectedRowKeys[0])]\n\t\t_setRowsHandler(_localRows);\n\t\tonTableEventsDispatch('onAddRowAsCopy', _localRows);\n\n\t};\n\n\tconst _editRow = (row) => {\n\t\t// console.log(\"_onClickEdit\", selectedRow);\n\t\tconst data = [..._rows];\n\t\tconst key = row[rowKey];\n\t\tloop(data, key, (item, index, arr)  => {\n\t\t\tdata[index] = row;\n\t\t\t_setRowsHandler(data);\n\t\t\t// selectedDispatch(row)\n\t\t\t_setSelectedRowsHandler(_selectedRowKeys, undefined, data);\n\t\t\tonTableEventsDispatch('onEditRow', data);\n\n\t\t\t// setSelectedRowKeys([]);\n\t\t})\n\t\t// props.onClickEdit(event, selectedRow);\n\t};\n\n\tconst _removeRow = (event) => {\n\t\t// console.log(\"_onClickDelete\", autoDeleteRows, selectedRowKeys);\n\t\tconst _localRows = _rows.filter(\n\t\t\t(item) => !_selectedRowKeys.includes(item[rowKey]) )\n\t\t_setRowsHandler(_localRows);\n\t\t_setSelectedRowsHandler();\n\t\tonTableEventsDispatch('onRemoveRow', _localRows);\n\n\t\t// setSelectedRowKeys([]);\n\t\t// if (selectable)\n\t\t// \tselectedDispatch([]);\n\t\t// else\n\t\t// \tselectedDispatch(undefined);\n\t\t// commandPanelProps.onClickDelete(event, _selectedRowKeys);\n\t};\n\n\t// const _moveUpRow\n\n\tconst _moveUpRow = (event) => {\n\t\tconst data = [..._rows];\n\t\tconst key = _selectedRowKeys[0];\n\t\tloop(data, key, (item, index, arr)  => {\n\t\t\tconst newRowIndex = _getNewIndexRow(index, index - 1);\n\t\t\t_changeIndexRow(index, newRowIndex, arr, data, 'onMoveUpRow');\n\t\t\t// commandPanelProps.onClickUp(event, {\n\t\t\t// \trowIndex: newRowIndex,\n\t\t\t// \trowData: findNodeByRowKey(_rows, rowKey, _selectedRowKeys[0]),\n\t\t\t// }, data);\n\t\t})\n\t};\n\n\tconst _moveDownRow = (event) => {\n\t\tconst data = [..._rows];\n\t\tconst key = _selectedRowKeys[0];\n\t\tloop(data, key, (item, index, arr)  => {\n\t\t\tconst newRowIndex = _getNewIndexRow(index, index + 1);\n\t\t\t_changeIndexRow(index, newRowIndex, arr, data, 'onMoveDownRow');\n\t\t\t// commandPanelProps.onClickDown(event, {\n\t\t\t// \trowIndex: newRowIndex,\n\t\t\t// \trowData: findNodeByRowKey(_rows, rowKey, _selectedRowKeys[0]),\n\t\t\t// }, data);\n\t\t})\n\t};\n\n\tconst _getNewIndexRow = (oldIndex, newIndex) =>\n\t\tnewIndex >= 0 && newIndex < _rows.length ? newIndex : oldIndex;\n\n\tconst _changeIndexRow = (oldIndex, newIndex, arr, data, nameEvent) => {\n\t\tif (newIndex >= 0 && newIndex < arr.length) {\n\t\t\t// let arr = [..._rows]; // Копируем массив\n\t\t\tconst item = arr.splice(oldIndex, 1); // Удаляем элемент со старого места\n\t\t\t// console.log('_changeIndexRow => ',item);\n\t\t\tarr.splice(newIndex > 0 ? newIndex : 0, 0, item[0]); // Ставим элемент на новое место\n\t\t\t// console.log(\"_changeIndexRow\", item[0]);\n\t\t\t_setRowsHandler(data);\n\t\t\tonTableEventsDispatch(nameEvent, data);\n\n\t\t}\n\t};\n\n\t// const _onSearch = (searchLine, e) => {\n\t// \te.preventDefault();\n\t// \t// console.log(\"_onSearch\", searchLine);\n\t// \ttableRef.current.scrollToRow(0, 'auto');\n\t// \tsetSearchValue(searchLine);\n\t// \tconst loadParams = {\n\t// \t\tsortBy: _sortBy,\n\t// \t\tfilter: _filter,\n\t// \t\tsearchLine: searchLine,\n\t// \t\treload: true,\n\t// \t};\n\t// \t_dataProcessing(loadParams);\n\t// \tcommandPanelProps.onSearch(searchLine);\n\t// };\n\n\t/** SELECTED PANEL */\n\tconst _onClickDropSelectHandler = (dropObject) => {\n\t\tconst newSelectedKeys = _selectedRowKeys.filter(\n\t\t\t(item) => item !== dropObject[rowKey]\n\t\t);\n\t\t// setSelectedRowKeys(newSelectedKeys);\n\t\t_setSelectedRowsHandler(newSelectedKeys, undefined, _rows);\n\t\tsetSelectAll((newSelectedKeys.length === 0 ? false : null));\n\t\tonSelectedRowsChange(newSelectedKeys);\n\t};\n\n\treturn (\n\t\t<div className={`${rtPrefix}-table`}>\n\t\t\t<div className={`${rtPrefix}-baseTable`}>\n\t\t\t\t<AutoResizer>\n\t\t\t\t\t{({width, height}) => (\n\t\t\t\t\t\t<BaseTable\n\t\t\t\t\t\t\tref={tableRef}\n\t\t\t\t\t\t\t/** Required */\n\t\t\t\t\t\t\tcolumns={_getColumns()}\n\t\t\t\t\t\t\tdata={_rows}\n\t\t\t\t\t\t\t/** Control Props */\n\t\t\t\t\t\t\tsortBy={_sortBy}\n\t\t\t\t\t\t\t/** Base Props */\n\t\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\t\theight={height}\n\t\t\t\t\t\t\trowKey={rowKey}\n\t\t\t\t\t\t\t// rowProps={rowProps}\n\n\t\t\t\t\t\t\t/** View Props */\n\t\t\t\t\t\t\trowClassName={_rowClassName}\n\t\t\t\t\t\t\temptyRenderer={empty}\n\t\t\t\t\t\t\tfixed={fixWidthColumn}\n\t\t\t\t\t\t\tfooterHeight={_footerShow ? footerProps.height : 0}\n\t\t\t\t\t\t\theaderHeight={headerHeight}\n\t\t\t\t\t\t\trowHeight={rowHeight}\n\t\t\t\t\t\t\toverlayRenderer={loading ? overlay : null}\n\t\t\t\t\t\t\tfooterRenderer={_footer}\n\t\t\t\t\t\t\trowRenderer={rowRenderer}\n\t\t\t\t\t\t\t// rowProps={_rowProps}\n\t\t\t\t\t\t\t// cellProps={_cellProps}\n\t\t\t\t\t\t\testimatedRowHeight={estimatedRowHeight}\n\t\t\t\t\t\t\t/** Load Data Props */\n\t\t\t\t\t\t\tonEndReachedThreshold={loadThreshold}\n\t\t\t\t\t\t\tonEndReached={infinityMode ? onEndReached : undefined}\n\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t/** Tree Props */\n\t\t\t\t\t\t\texpandColumnKey={expandColumnKey}\n\t\t\t\t\t\t\texpandedRowKeys={_expandedRowKeys}\n\t\t\t\t\t\t\t/** Events */\n\t\t\t\t\t\t\tonColumnSort={_onColumnSort}\n\t\t\t\t\t\t\trowEventHandlers={_rowEventHandlers}\n\t\t\t\t\t\t\tonExpandedRowsChange={_onExpandedRowsChange}\n\t\t\t\t\t\t\tonRowExpand={_onRowExpand}\n\t\t\t\t\t\t\teditMode={editMode}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</AutoResizer>\n\t\t\t</div>\n\t\t\t{showSelection && selectable && !expandColumnKey ? (\n\t\t\t\t<SelectionList\n\t\t\t\t\tonClickDropSelect={_onClickDropSelectHandler}\n\t\t\t\t\tselectedRowObjects={flatten(\n\t\t\t\t\t\tgetTableRowObjects(_rows, rowKey)\n\t\t\t\t\t).filter((item) => _selectedRowKeys.includes(item[rowKey]))}\n\t\t\t\t\trowRender={rowRenderShowSelection}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t</div>\n\t);\n});\n\nTable.propTypes = {\n\t/**\n\t * REQUIRED\n\t * */\n\n\t/** Столбцы таблицы */\n\tcolumns: PropTypes.arrayOf(PropTypes.object).isRequired,\n\n\t/** Режим загрузки данных по скроллу */\n\tinfinityMode: PropTypes.bool,\n\n\t/**\n\t * ПРОПСЫ ЗАДАНИЯ ЗНАЧЕНИЙ ПО УМОЛЧАНИЮ\n\t * */\n\n\t/** Строки по умолчанию */\n\tdefaultRows: PropTypes.arrayOf(PropTypes.object),\n\n\t/** Ключи выделенных по умолчанию строк */\n\tdefaultSelectedRowKeys: PropTypes.arrayOf(\n\t\tPropTypes.oneOfType([PropTypes.string, PropTypes.number])\n\t),\n\n\t/** Значение строки поиска по умолчанию строк */\n\tdefaultSearchValue: PropTypes.string,\n\n\t/** Объект фильтрации по умолчанию */\n\tdefaultFilter: PropTypes.object,\n\n\t/** Сортировка по умолчанию */\n\tdefaultSortBy: PropTypes.shape({\n\t\t/** Ключ поля для сортировки */\n\t\tkey: PropTypes.string,\n\t\t/** Направление сортировки */\n\t\torder: PropTypes.oneOf(['asc', 'desc']),\n\t}),\n\n\t/**\n\t * ПРОПРЫ ДЛЯ ВНЕШНЕГО КОНТРОЛЯ ТАБЛИЦЫ\n\t * */\n\n\t/** Строки таблицы. Используется для контроля таблицы из вне. */\n\trows: PropTypes.arrayOf(PropTypes.object),\n\n    /** Функция задания строк таблицы. */\n    setRows: PropTypes.func,\n\n\t/** Выделенные строки таблицы. */\n\tselectedRowKeys: PropTypes.arrayOf(\n\t\tPropTypes.oneOfType([PropTypes.string, PropTypes.number])\n\t),\n\n\t/** Значение строки поиска */\n\tsearchValue: PropTypes.string,\n\n\t/** Объект фильтрации */\n\tfilter: PropTypes.object,\n\n\t/** Объект сортировки */\n\tsortBy: PropTypes.shape({\n\t\t/** Ключ поля для сортировки */\n\t\tkey: PropTypes.string,\n\t\t/** Направление сортировки */\n\t\torder: PropTypes.oneOf(['asc', 'desc']),\n\t}),\n\n\t/**\n\t * BASE PROPS\n\t * */\n\n\t/** Поле для уникальной идентификации строки */\n\trowKey: PropTypes.string,\n\n\n\t/** Дополнительные поля и валидация в объекты таблицы\n\t * Данный параметр (props) осуществляет дополнительную обработку объекта таблицы после закрытия модалки, но перед добавлением в таблицу.\n\t * Можно как изменить существующие поля объекта, так и добавить новые поля объекта.\n\t * `customFields` - массив объектов для дополнения или изменения полей объектов таблицы\n\t * ```json\n\t * [\n\t * \t{\n\t * \t\tname: <String>,\n\t * \t\tvalue: <func>,\n\t * \t\tvalidate: <func>\n\t * \t}\n\t * ]\n\t * ```\n\t * `name` – Имя параметра в объекте\n\t * `value` – Функция формирования значения - `(row, rows) => { return {} }`\n\t * `validate` – Функция проверки значения - `(row, rows) => { return <Bool> }`\n\t * Параметра **validate** работает **только** для модельного окна тип `select`.\n\t * Validate можно наложить на любое кол-во полей объекта и если хотя бы один `validate` === `false`, то исключает строку из добавления.\n\t */\n\tcustomFields: PropTypes.arrayOf(PropTypes.object),\n\n\t/**\n\t * Данный параметр (props) позволяет добавить или переопределить пропсы для колонок, которые заданы конфигурацией на сервере\n\t * `customColumnProps` - массив объектов `props` к `columns`. Один объект описывает доп. параметры для одной колонки\n\t * ```json\n\t * [\n\t * \t{\n\t * \t\tname: <String>,\n\t * \t\tcellRenderer: <func>,\n\t * \t\t...advancedColProps\n\t * \t}\n\t * ]\n\t * ```\n\t * `name` – key колонки к которой надо применить дополнительные пропсы\n\t * `cellRenderer` – `({ cellData, columns, column, columnIndex, rowData, rowIndex, container, isScrolling }) => return <ReactNode>`\n\t * `advancedColProps` – подолнительные свойства колонок тут -> [Column](https://autodesk.github.io/react-base-table/api/column)\n\t */\n\tcustomColumnProps: PropTypes.arrayOf(PropTypes.object),\n\n\t/**\n\t * VIEW PROPS\n\t * */\n\n\t/** Вывод когда нет данных */\n\tempty: PropTypes.element,\n\n\t/** Отображение загрузки данных */\n\toverlay: PropTypes.element,\n\n\t/** Фиксированная ширина столбцов. Появится боковой скрол */\n\tfixWidthColumn: PropTypes.bool,\n\n\tfooterProps: PropTypes.shape({\n\n\t\t/** Высота подвала */\n\t\theight: PropTypes.number,\n\n\t\t/** Массив элементов футтера, которые надо отобразить\n\t\t * ['selected', 'loaded', 'total'] */\n\t\tshowElements: PropTypes.arrayOf(PropTypes.string),\n\n\t\t/** Заколовок для кол-ва выбранных объектов */\n\t\tselectedTitle: PropTypes.string,\n\n\t\t/** Заколовок для кол-ва загруженны объектов */\n\t\tloadedTitle: PropTypes.string,\n\n\t\t/** Заколовок для кол-ва всего объектов */\n\t\ttotalTitle: PropTypes.string,\n\n\t\t/** Левый кастомный элемент командной панели */\n\t\tleftCustomSideElement: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.object)]),\n\n\t\t/** Центральный кастомный элемент командной панели */\n\t\tcenterCustomSideElement: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.object)]),\n\n\t\t/** Правый кастомный элемент командной панели */\n\t\trightCustomSideElement: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.object)]),\n\t}),\n\n\t/** Высота заголовка таблицы */\n\theaderHeight: PropTypes.number,\n\n\t/** Высота строки таблицы */\n\trowHeight: PropTypes.number,\n\n\t/** Custom row renderer\n\t * Параметры - `({ isScrolling, cells, columns, rowData, rowIndex, depth })` */\n\trowRenderer: PropTypes.oneOfType([PropTypes.func, PropTypes.element]),\n\n\t/** Строки будут в зебро-стиле */\n\tzebraStyle: PropTypes.bool,\n\n\t/** Высота расширения */\n\testimatedRowHeight: PropTypes.number,\n\n\t/** Отображать ли разделители ячеек в строке */\n\tcellBordered: PropTypes.bool,\n\n\t/** Отобрадать ли разделители строк */\n\trowBordered: PropTypes.bool,\n\n\t/**\n\t * LOAD DATA PROPS\n\t * */\n\n\t/** Порог в пикселях для вызова _onLoad.\n\t * Кол-во пикселей от низа таблицы для срабатывания события загрузки (onEndReached) */\n\tloadThreshold: PropTypes.number,\n\n\t/** Размер страницы */\n\tpageSize: PropTypes.number,\n\n\t/** Функция запроса для конфигурации */\n\trequestLoadConfig: PropTypes.func,\n\n\t/** Функция запроса для загрузки строк (данных) */\n\trequestLoadRows: PropTypes.func,\n\n    /** Функция запроса для загрузки строк (данных) */\n    requestLoadCount: PropTypes.func,\n\n\t/** Имя параметра для поиска */\n\tsearchParamName: PropTypes.string,\n\n\t/**\n\t * SELECTABLE PROPS\n\t * */\n\n\t/** Таблица с возможностью выбора строки */\n\tselectable: PropTypes.bool,\n\n\t/**\n\t * TREE PROPS\n\t * */\n\n\t/** Родительский узел и дочерние узлы связаны (Работает только при `selectable`) */\n\tnodeAssociated: PropTypes.bool,\n\n\t/** Ключ колонки по которой строить иерархию */\n\texpandColumnKey: PropTypes.string,\n\n\t/** Открыть по умолчанию вложенность до уровня N или 'All' */\n\texpandDefaultAll: PropTypes.bool,\n\n\t/** Загружать ноды иерархии по одной */\n\texpandLazyLoad: PropTypes.bool,\n\n\t/** Поле в котором хранится ссылка на родителя */\n\texpandParentKey: PropTypes.string,\n\n\t/**\n\t * EVENTS\n\t * */\n\n\t/** Событие при клике на строку (только при `selectable` = `false`)\n\t * `({selected, rowData, rowIndex}) => {}` */\n\tonRowClick: PropTypes.func,\n\n\t/** Событие при двойном клике на строку.\n\t * `({rowData, rowIndex, rowKey}) => {}` */\n\tonRowDoubleClick: PropTypes.func,\n\n\t/** События при открытии / закрытии ноды\n\t * `({ expanded, rowData, rowIndex, rowKey }) => {}` */\n\tonRowExpand: PropTypes.func,\n\n\t/** Событие при выборе строки.\n\t * `([rowKeys], [rowDatas]) => {}` */\n\tonSelectedRowsChange: PropTypes.func,\n\n\t/** События при открытии / закрытии ноды\n\t * `(expandedRowKeys) => {}` - массив ключей открытых нод */\n\tonExpandedRowsChange: PropTypes.func,\n\n\t/** SELECTED PANEL */\n\n\t/** Отображать ли панель выбранных элементов */\n\tshowSelection: PropTypes.bool,\n\n\t/** Строка или функция для отображения элементов списка выбранных\n\t * Строка - имя поля\n\t * Функция - рендер строк.\n\t * `({ rowData, rowIndex }) => { return <Component> }` */\n\trowRenderShowSelection: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\n\t/** Путь в сторе куда класть выбранную строку таблицы */\n\tdispatchPath: PropTypes.string,\n\n\t/** Объект для подписки на изменения в STORE */\n\tsubscribe: PropTypes.arrayOf(PropTypes.object),\n};\n\nTable.defaultProps = {\n\tinfinityMode: false,\n\teditMode: false,\n\tdefaultRows: [],\n\tdefaultSelectedRowKeys: [],\n\tdefaultSearchValue: '',\n\tdefaultFilter: {},\n\tdefaultSortBy: {},\n\n\trows: [],\n\tsetRows: noop,\n\tselectedRowKeys: [],\n\tsearchValue: '',\n\tfilter: {},\n\tsortBy: {},\n\n\trowKey: 'id',\n\n\tempty: empty,\n\toverlay: overlay,\n\tfixWidthColumn: false,\n\tfooterProps: {\n\t\theight: 30,\n\t\tshowElements: [],\n\t\tselectedTitle: 'Выделено:',\n\t\tloadedTitle: 'Загружено записей:',\n\t\ttotalTitle: 'Всего записей:',\n\t\tleftCustomSideElement: null,\n\t\tcenterCustomSideElement: null,\n\t\trightCustomSideElement: null\n\t},\n\theaderHeight: 36,\n\trowHeight: 36,\n\tzebraStyle: false,\n\testimatedRowHeight: undefined,\n\tcellBordered: false,\n\trowBordered: true,\n\n\tloadThreshold: 300,\n\tpageSize: 50,\n\trequestLoadRows: undefined,\n    requestLoadCount: noop,\n\tsearchParamName: 'searchLine',\n\n\tselectable: false,\n\n\tnodeAssociated: true,\n\texpandColumnKey: undefined,\n\texpandDefaultAll: true,\n\texpandLazyLoad: false,\n\texpandParentKey: 'parentId',\n\n\tonRowClick: noop,\n\tonRowDoubleClick: noop,\n\tonRowExpand: noop,\n\tonSelectedRowsChange: noop,\n\tonExpandedRowsChange: noop,\n\n\tshowSelection: false,\n\n\tdispatchPath: undefined,\n\tsubscribe: [],\n};\n\nconst mapStateToProps = (store, ownProps) => {\n\tconst {subscribe} = ownProps;\n\tlet state = {};\n\tif(subscribe && subscribe.length > 0){\n\t\tsubscribe.forEach(item => {\n\t\t\tconst {name, path, extraData} = item;\n\t\t\tif(name && path)\n\t\t\t\tstate[name] = objectPath.get(store, path);\n\t\t\tif(name && extraData)\n\t\t\t\tif(typeof extraData === 'object')\n\t\t\t\t\tObject.keys(extraData).forEach( (key) => state[`${name}.extraData.${key}`] = objectPath.get(store, extraData[key]) );\n\t\t\t\telse\n\t\t\t\t\tstate[`${name}ExtraData`] = objectPath.get(store, extraData);\n\t\t})\n\t}\n\treturn state;\n};\nconst mapDispatchToProps = (dispatch) =>\n\tbindActionCreators({ setDateStore: setDateStore}, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })(Table);\n","import React, {useEffect, useState} from \"react\";\nimport { getSortBy, noop, notificationError } from \"../../utils/baseUtils\";\nimport Table from \"./Table\";\nimport { Typography } from \"antd\";\n\nconst defaultProps = {\n    defaultFilter: {},\n    rowKey: 'id',\n    pageSize: 50,\n    requestLoadConfig: noop,\n    expandColumnKey: undefined,\n    expandLazyLoad: false,\n    expandParentKey: 'parentId',\n    customColumnProps: [],\n};\n\nconst ConfigLoader = props => {\n\n    /** Конфигурация таблицы */\n    const [tableConfig, setTableConfig] = useState(undefined);\n\n    const {\n        defaultSortBy,\n        defaultFilter,\n        rowKey,\n        pageSize,\n        requestLoadConfig,\n        expandColumnKey,\n        expandLazyLoad,\n        expandParentKey,\n        customColumnProps,\n        cellBordered,\n    } = {...defaultProps, ...props};\n\n    useEffect(() => {\n        let cleanupFunction = false;\n        const loadData = async () => {\n            if (requestLoadConfig) {\n                // console.log('requestLoadConfig => ', typeof requestLoadConfig);\n                // console.log('requestLoadRows => ', typeof props.requestLoadRows);\n                requestLoadConfig()\n                    .then((response) => {\n                        // let result = response.data;\n                        // console.log('requestLoadConfig -> ', response.data);\n                        if(!cleanupFunction) {\n                            // setTableConfig(response.data);\n                            configParser(response.data);\n                        }\n                    })\n                    .catch(error => notificationError(error, 'Ошибка получения конфигурации') );\n            }\n        };\n        loadData().then(r => r);\n        return () => cleanupFunction = true;\n    }, []);\n\n    const configParser = (config) => {\n        // Массив колонок\n        let _columns = [];\n        // Сортировка по умолчанию\n        let _defaultSorter = [];\n\n        config && config.fields && config.fields.forEach((item) => {\n            const colProps = customColumnProps &&\n                customColumnProps.find((render) =>\n                    render.name === item.name || render.name === item.alias);\n\n            // Индекс или имя поля в данных\n            const dataIndex = (item.alias ? item.alias : item.name);\n\n            if (_defaultSorter.length === 0 || _defaultSorter[1] === undefined)\n                _defaultSorter = getSortBy(defaultSortBy, item.defaultSort, dataIndex);\n\n            _columns.push({\n                key: dataIndex,\n                title: item.header ? item.header : item.name,\n                dataKey: dataIndex,\n                align: item.align,\n                width: item.width,\n                resizable: item.resizable,\n                sortable: item.sortable,\n                hidden: !item.visible,\n                className: [cellBordered ? 'bordered' : ''].join(' '),\n                headerClassName: [cellBordered ? 'bordered' : ''].join(' '),\n                // cellRenderer: cellR && cellR.cellRender,\n                ...colProps,\n                cellRenderer: (object) => {\n                    if (colProps && colProps.cellRenderer)\n                        return <colProps.cellRenderer {...object}/>\n                        // return colProps.cellRenderer(object) ? colProps.cellRenderer(object) : '---';\n                    else\n                        return object.cellData\n                            ? <Typography.Text ellipsis={true} style={{width: '100%'}} className={'rt-table-cell'}>{object.cellData}</Typography.Text>\n                            : <Typography.Text ellipsis={true} style={{width: '100%'}} className={'rt-table-cell'}>---</Typography.Text> ;\n                        // return object.cellData ? object.cellData : '---';\n                },\n            });\n        });\n\n        let _defaultFilter;\n        if (config && config.hierarchical && config.hierarchyLazyLoad) {\n            const parentKey = config.hierarchyField\n                ? config.hierarchyField.split('/')[1]\n                : expandParentKey;\n            _defaultFilter =  {...defaultFilter, [parentKey]: null};\n        } else _defaultFilter = defaultFilter;\n\n\n        setTableConfig({\n            columns: _columns,\n            defaultSortBy: _defaultSorter[0],\n            defaultFilter: _defaultFilter,\n            rowKey:\n                config && config.hierarchical && config.hierarchyField\n                    ? config.hierarchyField.split('/')[0]\n                    : rowKey,\n            expandParentKey:\n                config && config.hierarchical && config.hierarchyField\n                    ? config.hierarchyField.split('/')[1]\n                    : expandParentKey,\n            expandColumnKey:\n                config && config.hierarchical && config.hierarchyView\n                    ? config.hierarchyView\n                    : expandColumnKey,\n            expandLazyLoad:\n                config && config.hierarchical && config.hierarchyLazyLoad\n                    ? config.hierarchyLazyLoad\n                    : expandLazyLoad,\n            pageSize: config && config.hierarchical ? 1 : pageSize,\n        });\n    }\n\n    if(tableConfig)\n        return ( <Table {...props} {...tableConfig} /> );\n    else\n        return null\n};\n\nexport default ConfigLoader;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport memoizeOne from 'memoize-one';\nimport { createElement, PureComponent } from 'react';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\n\n// Animation frame based implementation of setTimeout.\n// Inspired by Joe Lambert, https://gist.github.com/joelambert/1002116#file-requesttimeout-js\nvar hasNativePerformanceNow = typeof performance === 'object' && typeof performance.now === 'function';\nvar now = hasNativePerformanceNow ? function () {\n  return performance.now();\n} : function () {\n  return Date.now();\n};\nfunction cancelTimeout(timeoutID) {\n  cancelAnimationFrame(timeoutID.id);\n}\nfunction requestTimeout(callback, delay) {\n  var start = now();\n\n  function tick() {\n    if (now() - start >= delay) {\n      callback.call(null);\n    } else {\n      timeoutID.id = requestAnimationFrame(tick);\n    }\n  }\n\n  var timeoutID = {\n    id: requestAnimationFrame(tick)\n  };\n  return timeoutID;\n}\n\nvar size = -1; // This utility copied from \"dom-helpers\" package.\n\nfunction getScrollbarSize(recalculate) {\n  if (recalculate === void 0) {\n    recalculate = false;\n  }\n\n  if (size === -1 || recalculate) {\n    var div = document.createElement('div');\n    var style = div.style;\n    style.width = '50px';\n    style.height = '50px';\n    style.overflow = 'scroll';\n    document.body.appendChild(div);\n    size = div.offsetWidth - div.clientWidth;\n    document.body.removeChild(div);\n  }\n\n  return size;\n}\nvar cachedRTLResult = null; // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n// Chrome does not seem to adhere; its scrollLeft values are positive (measured relative to the left).\n// Safari's elastic bounce makes detecting this even more complicated wrt potential false positives.\n// The safest way to check this is to intentionally set a negative offset,\n// and then verify that the subsequent \"scroll\" event matches the negative offset.\n// If it does not match, then we can assume a non-standard RTL scroll implementation.\n\nfunction getRTLOffsetType(recalculate) {\n  if (recalculate === void 0) {\n    recalculate = false;\n  }\n\n  if (cachedRTLResult === null || recalculate) {\n    var outerDiv = document.createElement('div');\n    var outerStyle = outerDiv.style;\n    outerStyle.width = '50px';\n    outerStyle.height = '50px';\n    outerStyle.overflow = 'scroll';\n    outerStyle.direction = 'rtl';\n    var innerDiv = document.createElement('div');\n    var innerStyle = innerDiv.style;\n    innerStyle.width = '100px';\n    innerStyle.height = '100px';\n    outerDiv.appendChild(innerDiv);\n    document.body.appendChild(outerDiv);\n\n    if (outerDiv.scrollLeft > 0) {\n      cachedRTLResult = 'positive-descending';\n    } else {\n      outerDiv.scrollLeft = 1;\n\n      if (outerDiv.scrollLeft === 0) {\n        cachedRTLResult = 'negative';\n      } else {\n        cachedRTLResult = 'positive-ascending';\n      }\n    }\n\n    document.body.removeChild(outerDiv);\n    return cachedRTLResult;\n  }\n\n  return cachedRTLResult;\n}\n\nvar IS_SCROLLING_DEBOUNCE_INTERVAL = 150;\n\nvar defaultItemKey = function defaultItemKey(_ref) {\n  var columnIndex = _ref.columnIndex,\n      data = _ref.data,\n      rowIndex = _ref.rowIndex;\n  return rowIndex + \":\" + columnIndex;\n}; // In DEV mode, this Set helps us only log a warning once per component instance.\n// This avoids spamming the console every time a render happens.\n\n\nvar devWarningsOverscanCount = null;\nvar devWarningsOverscanRowsColumnsCount = null;\nvar devWarningsTagName = null;\n\nif (process.env.NODE_ENV !== 'production') {\n  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {\n    devWarningsOverscanCount =\n    /*#__PURE__*/\n    new WeakSet();\n    devWarningsOverscanRowsColumnsCount =\n    /*#__PURE__*/\n    new WeakSet();\n    devWarningsTagName =\n    /*#__PURE__*/\n    new WeakSet();\n  }\n}\n\nfunction createGridComponent(_ref2) {\n  var _class, _temp;\n\n  var getColumnOffset = _ref2.getColumnOffset,\n      getColumnStartIndexForOffset = _ref2.getColumnStartIndexForOffset,\n      getColumnStopIndexForStartIndex = _ref2.getColumnStopIndexForStartIndex,\n      getColumnWidth = _ref2.getColumnWidth,\n      getEstimatedTotalHeight = _ref2.getEstimatedTotalHeight,\n      getEstimatedTotalWidth = _ref2.getEstimatedTotalWidth,\n      getOffsetForColumnAndAlignment = _ref2.getOffsetForColumnAndAlignment,\n      getOffsetForRowAndAlignment = _ref2.getOffsetForRowAndAlignment,\n      getRowHeight = _ref2.getRowHeight,\n      getRowOffset = _ref2.getRowOffset,\n      getRowStartIndexForOffset = _ref2.getRowStartIndexForOffset,\n      getRowStopIndexForStartIndex = _ref2.getRowStopIndexForStartIndex,\n      initInstanceProps = _ref2.initInstanceProps,\n      shouldResetStyleCacheOnItemSizeChange = _ref2.shouldResetStyleCacheOnItemSizeChange,\n      validateProps = _ref2.validateProps;\n  return _temp = _class =\n  /*#__PURE__*/\n  function (_PureComponent) {\n    _inheritsLoose(Grid, _PureComponent);\n\n    // Always use explicit constructor for React components.\n    // It produces less code after transpilation. (#26)\n    // eslint-disable-next-line no-useless-constructor\n    function Grid(props) {\n      var _this;\n\n      _this = _PureComponent.call(this, props) || this;\n      _this._instanceProps = initInstanceProps(_this.props, _assertThisInitialized(_assertThisInitialized(_this)));\n      _this._resetIsScrollingTimeoutId = null;\n      _this._outerRef = void 0;\n      _this.state = {\n        instance: _assertThisInitialized(_assertThisInitialized(_this)),\n        isScrolling: false,\n        horizontalScrollDirection: 'forward',\n        scrollLeft: typeof _this.props.initialScrollLeft === 'number' ? _this.props.initialScrollLeft : 0,\n        scrollTop: typeof _this.props.initialScrollTop === 'number' ? _this.props.initialScrollTop : 0,\n        scrollUpdateWasRequested: false,\n        verticalScrollDirection: 'forward'\n      };\n      _this._callOnItemsRendered = void 0;\n      _this._callOnItemsRendered = memoizeOne(function (overscanColumnStartIndex, overscanColumnStopIndex, overscanRowStartIndex, overscanRowStopIndex, visibleColumnStartIndex, visibleColumnStopIndex, visibleRowStartIndex, visibleRowStopIndex) {\n        return _this.props.onItemsRendered({\n          overscanColumnStartIndex: overscanColumnStartIndex,\n          overscanColumnStopIndex: overscanColumnStopIndex,\n          overscanRowStartIndex: overscanRowStartIndex,\n          overscanRowStopIndex: overscanRowStopIndex,\n          visibleColumnStartIndex: visibleColumnStartIndex,\n          visibleColumnStopIndex: visibleColumnStopIndex,\n          visibleRowStartIndex: visibleRowStartIndex,\n          visibleRowStopIndex: visibleRowStopIndex\n        });\n      });\n      _this._callOnScroll = void 0;\n      _this._callOnScroll = memoizeOne(function (scrollLeft, scrollTop, horizontalScrollDirection, verticalScrollDirection, scrollUpdateWasRequested) {\n        return _this.props.onScroll({\n          horizontalScrollDirection: horizontalScrollDirection,\n          scrollLeft: scrollLeft,\n          scrollTop: scrollTop,\n          verticalScrollDirection: verticalScrollDirection,\n          scrollUpdateWasRequested: scrollUpdateWasRequested\n        });\n      });\n      _this._getItemStyle = void 0;\n\n      _this._getItemStyle = function (rowIndex, columnIndex) {\n        var _this$props = _this.props,\n            columnWidth = _this$props.columnWidth,\n            direction = _this$props.direction,\n            rowHeight = _this$props.rowHeight;\n\n        var itemStyleCache = _this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange && columnWidth, shouldResetStyleCacheOnItemSizeChange && direction, shouldResetStyleCacheOnItemSizeChange && rowHeight);\n\n        var key = rowIndex + \":\" + columnIndex;\n        var style;\n\n        if (itemStyleCache.hasOwnProperty(key)) {\n          style = itemStyleCache[key];\n        } else {\n          var _offset = getColumnOffset(_this.props, columnIndex, _this._instanceProps);\n\n          var isRtl = direction === 'rtl';\n          itemStyleCache[key] = style = {\n            position: 'absolute',\n            left: isRtl ? undefined : _offset,\n            right: isRtl ? _offset : undefined,\n            top: getRowOffset(_this.props, rowIndex, _this._instanceProps),\n            height: getRowHeight(_this.props, rowIndex, _this._instanceProps),\n            width: getColumnWidth(_this.props, columnIndex, _this._instanceProps)\n          };\n        }\n\n        return style;\n      };\n\n      _this._getItemStyleCache = void 0;\n      _this._getItemStyleCache = memoizeOne(function (_, __, ___) {\n        return {};\n      });\n\n      _this._onScroll = function (event) {\n        var _event$currentTarget = event.currentTarget,\n            clientHeight = _event$currentTarget.clientHeight,\n            clientWidth = _event$currentTarget.clientWidth,\n            scrollLeft = _event$currentTarget.scrollLeft,\n            scrollTop = _event$currentTarget.scrollTop,\n            scrollHeight = _event$currentTarget.scrollHeight,\n            scrollWidth = _event$currentTarget.scrollWidth;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollLeft === scrollLeft && prevState.scrollTop === scrollTop) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          }\n\n          var direction = _this.props.direction; // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n          // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n          // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.\n          // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.\n\n          var calculatedScrollLeft = scrollLeft;\n\n          if (direction === 'rtl') {\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                calculatedScrollLeft = -scrollLeft;\n                break;\n\n              case 'positive-descending':\n                calculatedScrollLeft = scrollWidth - clientWidth - scrollLeft;\n                break;\n            }\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          calculatedScrollLeft = Math.max(0, Math.min(calculatedScrollLeft, scrollWidth - clientWidth));\n          var calculatedScrollTop = Math.max(0, Math.min(scrollTop, scrollHeight - clientHeight));\n          return {\n            isScrolling: true,\n            horizontalScrollDirection: prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',\n            scrollLeft: calculatedScrollLeft,\n            scrollTop: calculatedScrollTop,\n            verticalScrollDirection: prevState.scrollTop < scrollTop ? 'forward' : 'backward',\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._outerRefSetter = function (ref) {\n        var outerRef = _this.props.outerRef;\n        _this._outerRef = ref;\n\n        if (typeof outerRef === 'function') {\n          outerRef(ref);\n        } else if (outerRef != null && typeof outerRef === 'object' && outerRef.hasOwnProperty('current')) {\n          outerRef.current = ref;\n        }\n      };\n\n      _this._resetIsScrollingDebounced = function () {\n        if (_this._resetIsScrollingTimeoutId !== null) {\n          cancelTimeout(_this._resetIsScrollingTimeoutId);\n        }\n\n        _this._resetIsScrollingTimeoutId = requestTimeout(_this._resetIsScrolling, IS_SCROLLING_DEBOUNCE_INTERVAL);\n      };\n\n      _this._resetIsScrolling = function () {\n        _this._resetIsScrollingTimeoutId = null;\n\n        _this.setState({\n          isScrolling: false\n        }, function () {\n          // Clear style cache after state update has been committed.\n          // This way we don't break pure sCU for items that don't use isScrolling param.\n          _this._getItemStyleCache(-1);\n        });\n      };\n\n      return _this;\n    }\n\n    Grid.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n      validateSharedProps(nextProps, prevState);\n      validateProps(nextProps);\n      return null;\n    };\n\n    var _proto = Grid.prototype;\n\n    _proto.scrollTo = function scrollTo(_ref3) {\n      var scrollLeft = _ref3.scrollLeft,\n          scrollTop = _ref3.scrollTop;\n\n      if (scrollLeft !== undefined) {\n        scrollLeft = Math.max(0, scrollLeft);\n      }\n\n      if (scrollTop !== undefined) {\n        scrollTop = Math.max(0, scrollTop);\n      }\n\n      this.setState(function (prevState) {\n        if (scrollLeft === undefined) {\n          scrollLeft = prevState.scrollLeft;\n        }\n\n        if (scrollTop === undefined) {\n          scrollTop = prevState.scrollTop;\n        }\n\n        if (prevState.scrollLeft === scrollLeft && prevState.scrollTop === scrollTop) {\n          return null;\n        }\n\n        return {\n          horizontalScrollDirection: prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',\n          scrollLeft: scrollLeft,\n          scrollTop: scrollTop,\n          scrollUpdateWasRequested: true,\n          verticalScrollDirection: prevState.scrollTop < scrollTop ? 'forward' : 'backward'\n        };\n      }, this._resetIsScrollingDebounced);\n    };\n\n    _proto.scrollToItem = function scrollToItem(_ref4) {\n      var _ref4$align = _ref4.align,\n          align = _ref4$align === void 0 ? 'auto' : _ref4$align,\n          columnIndex = _ref4.columnIndex,\n          rowIndex = _ref4.rowIndex;\n      var _this$props2 = this.props,\n          columnCount = _this$props2.columnCount,\n          height = _this$props2.height,\n          rowCount = _this$props2.rowCount,\n          width = _this$props2.width;\n      var _this$state = this.state,\n          scrollLeft = _this$state.scrollLeft,\n          scrollTop = _this$state.scrollTop;\n      var scrollbarSize = getScrollbarSize();\n\n      if (columnIndex !== undefined) {\n        columnIndex = Math.max(0, Math.min(columnIndex, columnCount - 1));\n      }\n\n      if (rowIndex !== undefined) {\n        rowIndex = Math.max(0, Math.min(rowIndex, rowCount - 1));\n      }\n\n      var estimatedTotalHeight = getEstimatedTotalHeight(this.props, this._instanceProps);\n      var estimatedTotalWidth = getEstimatedTotalWidth(this.props, this._instanceProps); // The scrollbar size should be considered when scrolling an item into view,\n      // to ensure it's fully visible.\n      // But we only need to account for its size when it's actually visible.\n\n      var horizontalScrollbarSize = estimatedTotalWidth > width ? scrollbarSize : 0;\n      var verticalScrollbarSize = estimatedTotalHeight > height ? scrollbarSize : 0;\n      this.scrollTo({\n        scrollLeft: columnIndex !== undefined ? getOffsetForColumnAndAlignment(this.props, columnIndex, align, scrollLeft, this._instanceProps, verticalScrollbarSize) : scrollLeft,\n        scrollTop: rowIndex !== undefined ? getOffsetForRowAndAlignment(this.props, rowIndex, align, scrollTop, this._instanceProps, horizontalScrollbarSize) : scrollTop\n      });\n    };\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this$props3 = this.props,\n          initialScrollLeft = _this$props3.initialScrollLeft,\n          initialScrollTop = _this$props3.initialScrollTop;\n\n      if (this._outerRef != null) {\n        var outerRef = this._outerRef;\n\n        if (typeof initialScrollLeft === 'number') {\n          outerRef.scrollLeft = initialScrollLeft;\n        }\n\n        if (typeof initialScrollTop === 'number') {\n          outerRef.scrollTop = initialScrollTop;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate() {\n      var direction = this.props.direction;\n      var _this$state2 = this.state,\n          scrollLeft = _this$state2.scrollLeft,\n          scrollTop = _this$state2.scrollTop,\n          scrollUpdateWasRequested = _this$state2.scrollUpdateWasRequested;\n\n      if (scrollUpdateWasRequested && this._outerRef != null) {\n        // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n        // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n        // So we need to determine which browser behavior we're dealing with, and mimic it.\n        var outerRef = this._outerRef;\n\n        if (direction === 'rtl') {\n          switch (getRTLOffsetType()) {\n            case 'negative':\n              outerRef.scrollLeft = -scrollLeft;\n              break;\n\n            case 'positive-ascending':\n              outerRef.scrollLeft = scrollLeft;\n              break;\n\n            default:\n              var clientWidth = outerRef.clientWidth,\n                  scrollWidth = outerRef.scrollWidth;\n              outerRef.scrollLeft = scrollWidth - clientWidth - scrollLeft;\n              break;\n          }\n        } else {\n          outerRef.scrollLeft = Math.max(0, scrollLeft);\n        }\n\n        outerRef.scrollTop = Math.max(0, scrollTop);\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      if (this._resetIsScrollingTimeoutId !== null) {\n        cancelTimeout(this._resetIsScrollingTimeoutId);\n      }\n    };\n\n    _proto.render = function render() {\n      var _this$props4 = this.props,\n          children = _this$props4.children,\n          className = _this$props4.className,\n          columnCount = _this$props4.columnCount,\n          direction = _this$props4.direction,\n          height = _this$props4.height,\n          innerRef = _this$props4.innerRef,\n          innerElementType = _this$props4.innerElementType,\n          innerTagName = _this$props4.innerTagName,\n          itemData = _this$props4.itemData,\n          _this$props4$itemKey = _this$props4.itemKey,\n          itemKey = _this$props4$itemKey === void 0 ? defaultItemKey : _this$props4$itemKey,\n          outerElementType = _this$props4.outerElementType,\n          outerTagName = _this$props4.outerTagName,\n          rowCount = _this$props4.rowCount,\n          style = _this$props4.style,\n          useIsScrolling = _this$props4.useIsScrolling,\n          width = _this$props4.width;\n      var isScrolling = this.state.isScrolling;\n\n      var _this$_getHorizontalR = this._getHorizontalRangeToRender(),\n          columnStartIndex = _this$_getHorizontalR[0],\n          columnStopIndex = _this$_getHorizontalR[1];\n\n      var _this$_getVerticalRan = this._getVerticalRangeToRender(),\n          rowStartIndex = _this$_getVerticalRan[0],\n          rowStopIndex = _this$_getVerticalRan[1];\n\n      var items = [];\n\n      if (columnCount > 0 && rowCount) {\n        for (var _rowIndex = rowStartIndex; _rowIndex <= rowStopIndex; _rowIndex++) {\n          for (var _columnIndex = columnStartIndex; _columnIndex <= columnStopIndex; _columnIndex++) {\n            items.push(createElement(children, {\n              columnIndex: _columnIndex,\n              data: itemData,\n              isScrolling: useIsScrolling ? isScrolling : undefined,\n              key: itemKey({\n                columnIndex: _columnIndex,\n                data: itemData,\n                rowIndex: _rowIndex\n              }),\n              rowIndex: _rowIndex,\n              style: this._getItemStyle(_rowIndex, _columnIndex)\n            }));\n          }\n        }\n      } // Read this value AFTER items have been created,\n      // So their actual sizes (if variable) are taken into consideration.\n\n\n      var estimatedTotalHeight = getEstimatedTotalHeight(this.props, this._instanceProps);\n      var estimatedTotalWidth = getEstimatedTotalWidth(this.props, this._instanceProps);\n      return createElement(outerElementType || outerTagName || 'div', {\n        className: className,\n        onScroll: this._onScroll,\n        ref: this._outerRefSetter,\n        style: _extends({\n          position: 'relative',\n          height: height,\n          width: width,\n          overflow: 'auto',\n          WebkitOverflowScrolling: 'touch',\n          willChange: 'transform',\n          direction: direction\n        }, style)\n      }, createElement(innerElementType || innerTagName || 'div', {\n        children: items,\n        ref: innerRef,\n        style: {\n          height: estimatedTotalHeight,\n          pointerEvents: isScrolling ? 'none' : undefined,\n          width: estimatedTotalWidth\n        }\n      }));\n    };\n\n    _proto._callPropsCallbacks = function _callPropsCallbacks() {\n      var _this$props5 = this.props,\n          columnCount = _this$props5.columnCount,\n          onItemsRendered = _this$props5.onItemsRendered,\n          onScroll = _this$props5.onScroll,\n          rowCount = _this$props5.rowCount;\n\n      if (typeof onItemsRendered === 'function') {\n        if (columnCount > 0 && rowCount > 0) {\n          var _this$_getHorizontalR2 = this._getHorizontalRangeToRender(),\n              _overscanColumnStartIndex = _this$_getHorizontalR2[0],\n              _overscanColumnStopIndex = _this$_getHorizontalR2[1],\n              _visibleColumnStartIndex = _this$_getHorizontalR2[2],\n              _visibleColumnStopIndex = _this$_getHorizontalR2[3];\n\n          var _this$_getVerticalRan2 = this._getVerticalRangeToRender(),\n              _overscanRowStartIndex = _this$_getVerticalRan2[0],\n              _overscanRowStopIndex = _this$_getVerticalRan2[1],\n              _visibleRowStartIndex = _this$_getVerticalRan2[2],\n              _visibleRowStopIndex = _this$_getVerticalRan2[3];\n\n          this._callOnItemsRendered(_overscanColumnStartIndex, _overscanColumnStopIndex, _overscanRowStartIndex, _overscanRowStopIndex, _visibleColumnStartIndex, _visibleColumnStopIndex, _visibleRowStartIndex, _visibleRowStopIndex);\n        }\n      }\n\n      if (typeof onScroll === 'function') {\n        var _this$state3 = this.state,\n            _horizontalScrollDirection = _this$state3.horizontalScrollDirection,\n            _scrollLeft = _this$state3.scrollLeft,\n            _scrollTop = _this$state3.scrollTop,\n            _scrollUpdateWasRequested = _this$state3.scrollUpdateWasRequested,\n            _verticalScrollDirection = _this$state3.verticalScrollDirection;\n\n        this._callOnScroll(_scrollLeft, _scrollTop, _horizontalScrollDirection, _verticalScrollDirection, _scrollUpdateWasRequested);\n      }\n    }; // Lazily create and cache item styles while scrolling,\n    // So that pure component sCU will prevent re-renders.\n    // We maintain this cache, and pass a style prop rather than index,\n    // So that List can clear cached styles and force item re-render if necessary.\n\n\n    _proto._getHorizontalRangeToRender = function _getHorizontalRangeToRender() {\n      var _this$props6 = this.props,\n          columnCount = _this$props6.columnCount,\n          overscanColumnCount = _this$props6.overscanColumnCount,\n          overscanColumnsCount = _this$props6.overscanColumnsCount,\n          overscanCount = _this$props6.overscanCount,\n          rowCount = _this$props6.rowCount;\n      var _this$state4 = this.state,\n          horizontalScrollDirection = _this$state4.horizontalScrollDirection,\n          isScrolling = _this$state4.isScrolling,\n          scrollLeft = _this$state4.scrollLeft;\n      var overscanCountResolved = overscanColumnCount || overscanColumnsCount || overscanCount || 1;\n\n      if (columnCount === 0 || rowCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getColumnStartIndexForOffset(this.props, scrollLeft, this._instanceProps);\n      var stopIndex = getColumnStopIndexForStartIndex(this.props, startIndex, scrollLeft, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || horizontalScrollDirection === 'backward' ? Math.max(1, overscanCountResolved) : 1;\n      var overscanForward = !isScrolling || horizontalScrollDirection === 'forward' ? Math.max(1, overscanCountResolved) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(columnCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    _proto._getVerticalRangeToRender = function _getVerticalRangeToRender() {\n      var _this$props7 = this.props,\n          columnCount = _this$props7.columnCount,\n          overscanCount = _this$props7.overscanCount,\n          overscanRowCount = _this$props7.overscanRowCount,\n          overscanRowsCount = _this$props7.overscanRowsCount,\n          rowCount = _this$props7.rowCount;\n      var _this$state5 = this.state,\n          isScrolling = _this$state5.isScrolling,\n          verticalScrollDirection = _this$state5.verticalScrollDirection,\n          scrollTop = _this$state5.scrollTop;\n      var overscanCountResolved = overscanRowCount || overscanRowsCount || overscanCount || 1;\n\n      if (columnCount === 0 || rowCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getRowStartIndexForOffset(this.props, scrollTop, this._instanceProps);\n      var stopIndex = getRowStopIndexForStartIndex(this.props, startIndex, scrollTop, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || verticalScrollDirection === 'backward' ? Math.max(1, overscanCountResolved) : 1;\n      var overscanForward = !isScrolling || verticalScrollDirection === 'forward' ? Math.max(1, overscanCountResolved) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(rowCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    return Grid;\n  }(PureComponent), _class.defaultProps = {\n    direction: 'ltr',\n    itemData: undefined,\n    useIsScrolling: false\n  }, _temp;\n}\n\nvar validateSharedProps = function validateSharedProps(_ref5, _ref6) {\n  var children = _ref5.children,\n      direction = _ref5.direction,\n      height = _ref5.height,\n      innerTagName = _ref5.innerTagName,\n      outerTagName = _ref5.outerTagName,\n      overscanColumnsCount = _ref5.overscanColumnsCount,\n      overscanCount = _ref5.overscanCount,\n      overscanRowsCount = _ref5.overscanRowsCount,\n      width = _ref5.width;\n  var instance = _ref6.instance;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof overscanCount === 'number') {\n      if (devWarningsOverscanCount && !devWarningsOverscanCount.has(instance)) {\n        devWarningsOverscanCount.add(instance);\n        console.warn('The overscanCount prop has been deprecated. ' + 'Please use the overscanColumnCount and overscanRowCount props instead.');\n      }\n    }\n\n    if (typeof overscanColumnsCount === 'number' || typeof overscanRowsCount === 'number') {\n      if (devWarningsOverscanRowsColumnsCount && !devWarningsOverscanRowsColumnsCount.has(instance)) {\n        devWarningsOverscanRowsColumnsCount.add(instance);\n        console.warn('The overscanColumnsCount and overscanRowsCount props have been deprecated. ' + 'Please use the overscanColumnCount and overscanRowCount props instead.');\n      }\n    }\n\n    if (innerTagName != null || outerTagName != null) {\n      if (devWarningsTagName && !devWarningsTagName.has(instance)) {\n        devWarningsTagName.add(instance);\n        console.warn('The innerTagName and outerTagName props have been deprecated. ' + 'Please use the innerElementType and outerElementType props instead.');\n      }\n    }\n\n    if (children == null) {\n      throw Error('An invalid \"children\" prop has been specified. ' + 'Value should be a React component. ' + (\"\\\"\" + (children === null ? 'null' : typeof children) + \"\\\" was specified.\"));\n    }\n\n    switch (direction) {\n      case 'ltr':\n      case 'rtl':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"direction\" prop has been specified. ' + 'Value should be either \"ltr\" or \"rtl\". ' + (\"\\\"\" + direction + \"\\\" was specified.\"));\n    }\n\n    if (typeof width !== 'number') {\n      throw Error('An invalid \"width\" prop has been specified. ' + 'Grids must specify a number for width. ' + (\"\\\"\" + (width === null ? 'null' : typeof width) + \"\\\" was specified.\"));\n    }\n\n    if (typeof height !== 'number') {\n      throw Error('An invalid \"height\" prop has been specified. ' + 'Grids must specify a number for height. ' + (\"\\\"\" + (height === null ? 'null' : typeof height) + \"\\\" was specified.\"));\n    }\n  }\n};\n\nvar DEFAULT_ESTIMATED_ITEM_SIZE = 50;\n\nvar getEstimatedTotalHeight = function getEstimatedTotalHeight(_ref, _ref2) {\n  var rowCount = _ref.rowCount;\n  var rowMetadataMap = _ref2.rowMetadataMap,\n      estimatedRowHeight = _ref2.estimatedRowHeight,\n      lastMeasuredRowIndex = _ref2.lastMeasuredRowIndex;\n  var totalSizeOfMeasuredRows = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredRowIndex >= rowCount) {\n    lastMeasuredRowIndex = rowCount - 1;\n  }\n\n  if (lastMeasuredRowIndex >= 0) {\n    var itemMetadata = rowMetadataMap[lastMeasuredRowIndex];\n    totalSizeOfMeasuredRows = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = rowCount - lastMeasuredRowIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedRowHeight;\n  return totalSizeOfMeasuredRows + totalSizeOfUnmeasuredItems;\n};\n\nvar getEstimatedTotalWidth = function getEstimatedTotalWidth(_ref3, _ref4) {\n  var columnCount = _ref3.columnCount;\n  var columnMetadataMap = _ref4.columnMetadataMap,\n      estimatedColumnWidth = _ref4.estimatedColumnWidth,\n      lastMeasuredColumnIndex = _ref4.lastMeasuredColumnIndex;\n  var totalSizeOfMeasuredRows = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredColumnIndex >= columnCount) {\n    lastMeasuredColumnIndex = columnCount - 1;\n  }\n\n  if (lastMeasuredColumnIndex >= 0) {\n    var itemMetadata = columnMetadataMap[lastMeasuredColumnIndex];\n    totalSizeOfMeasuredRows = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = columnCount - lastMeasuredColumnIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedColumnWidth;\n  return totalSizeOfMeasuredRows + totalSizeOfUnmeasuredItems;\n};\n\nvar getItemMetadata = function getItemMetadata(itemType, props, index, instanceProps) {\n  var itemMetadataMap, itemSize, lastMeasuredIndex;\n\n  if (itemType === 'column') {\n    itemMetadataMap = instanceProps.columnMetadataMap;\n    itemSize = props.columnWidth;\n    lastMeasuredIndex = instanceProps.lastMeasuredColumnIndex;\n  } else {\n    itemMetadataMap = instanceProps.rowMetadataMap;\n    itemSize = props.rowHeight;\n    lastMeasuredIndex = instanceProps.lastMeasuredRowIndex;\n  }\n\n  if (index > lastMeasuredIndex) {\n    var offset = 0;\n\n    if (lastMeasuredIndex >= 0) {\n      var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n      offset = itemMetadata.offset + itemMetadata.size;\n    }\n\n    for (var i = lastMeasuredIndex + 1; i <= index; i++) {\n      var size = itemSize(i);\n      itemMetadataMap[i] = {\n        offset: offset,\n        size: size\n      };\n      offset += size;\n    }\n\n    if (itemType === 'column') {\n      instanceProps.lastMeasuredColumnIndex = index;\n    } else {\n      instanceProps.lastMeasuredRowIndex = index;\n    }\n  }\n\n  return itemMetadataMap[index];\n};\n\nvar findNearestItem = function findNearestItem(itemType, props, instanceProps, offset) {\n  var itemMetadataMap, lastMeasuredIndex;\n\n  if (itemType === 'column') {\n    itemMetadataMap = instanceProps.columnMetadataMap;\n    lastMeasuredIndex = instanceProps.lastMeasuredColumnIndex;\n  } else {\n    itemMetadataMap = instanceProps.rowMetadataMap;\n    lastMeasuredIndex = instanceProps.lastMeasuredRowIndex;\n  }\n\n  var lastMeasuredItemOffset = lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;\n\n  if (lastMeasuredItemOffset >= offset) {\n    // If we've already measured items within this range just use a binary search as it's faster.\n    return findNearestItemBinarySearch(itemType, props, instanceProps, lastMeasuredIndex, 0, offset);\n  } else {\n    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.\n    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.\n    // The overall complexity for this approach is O(log n).\n    return findNearestItemExponentialSearch(itemType, props, instanceProps, Math.max(0, lastMeasuredIndex), offset);\n  }\n};\n\nvar findNearestItemBinarySearch = function findNearestItemBinarySearch(itemType, props, instanceProps, high, low, offset) {\n  while (low <= high) {\n    var middle = low + Math.floor((high - low) / 2);\n    var currentOffset = getItemMetadata(itemType, props, middle, instanceProps).offset;\n\n    if (currentOffset === offset) {\n      return middle;\n    } else if (currentOffset < offset) {\n      low = middle + 1;\n    } else if (currentOffset > offset) {\n      high = middle - 1;\n    }\n  }\n\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\n\nvar findNearestItemExponentialSearch = function findNearestItemExponentialSearch(itemType, props, instanceProps, index, offset) {\n  var itemCount = itemType === 'column' ? props.columnCount : props.rowCount;\n  var interval = 1;\n\n  while (index < itemCount && getItemMetadata(itemType, props, index, instanceProps).offset < offset) {\n    index += interval;\n    interval *= 2;\n  }\n\n  return findNearestItemBinarySearch(itemType, props, instanceProps, Math.min(index, itemCount - 1), Math.floor(index / 2), offset);\n};\n\nvar getOffsetForIndexAndAlignment = function getOffsetForIndexAndAlignment(itemType, props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n  var size = itemType === 'column' ? props.width : props.height;\n  var itemMetadata = getItemMetadata(itemType, props, index, instanceProps); // Get estimated total size after ItemMetadata is computed,\n  // To ensure it reflects actual measurements instead of just estimates.\n\n  var estimatedTotalSize = itemType === 'column' ? getEstimatedTotalWidth(props, instanceProps) : getEstimatedTotalHeight(props, instanceProps);\n  var maxOffset = Math.max(0, Math.min(estimatedTotalSize - size, itemMetadata.offset));\n  var minOffset = Math.max(0, itemMetadata.offset - size + scrollbarSize + itemMetadata.size);\n\n  if (align === 'smart') {\n    if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n      align = 'auto';\n    } else {\n      align = 'center';\n    }\n  }\n\n  switch (align) {\n    case 'start':\n      return maxOffset;\n\n    case 'end':\n      return minOffset;\n\n    case 'center':\n      return Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n    case 'auto':\n    default:\n      if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n        return scrollOffset;\n      } else if (minOffset > maxOffset) {\n        // Because we only take into account the scrollbar size when calculating minOffset\n        // this value can be larger than maxOffset when at the end of the list\n        return minOffset;\n      } else if (scrollOffset < minOffset) {\n        return minOffset;\n      } else {\n        return maxOffset;\n      }\n\n  }\n};\n\nvar VariableSizeGrid =\n/*#__PURE__*/\ncreateGridComponent({\n  getColumnOffset: function getColumnOffset(props, index, instanceProps) {\n    return getItemMetadata('column', props, index, instanceProps).offset;\n  },\n  getColumnStartIndexForOffset: function getColumnStartIndexForOffset(props, scrollLeft, instanceProps) {\n    return findNearestItem('column', props, instanceProps, scrollLeft);\n  },\n  getColumnStopIndexForStartIndex: function getColumnStopIndexForStartIndex(props, startIndex, scrollLeft, instanceProps) {\n    var columnCount = props.columnCount,\n        width = props.width;\n    var itemMetadata = getItemMetadata('column', props, startIndex, instanceProps);\n    var maxOffset = scrollLeft + width;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < columnCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata('column', props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  getColumnWidth: function getColumnWidth(props, index, instanceProps) {\n    return instanceProps.columnMetadataMap[index].size;\n  },\n  getEstimatedTotalHeight: getEstimatedTotalHeight,\n  getEstimatedTotalWidth: getEstimatedTotalWidth,\n  getOffsetForColumnAndAlignment: function getOffsetForColumnAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    return getOffsetForIndexAndAlignment('column', props, index, align, scrollOffset, instanceProps, scrollbarSize);\n  },\n  getOffsetForRowAndAlignment: function getOffsetForRowAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    return getOffsetForIndexAndAlignment('row', props, index, align, scrollOffset, instanceProps, scrollbarSize);\n  },\n  getRowOffset: function getRowOffset(props, index, instanceProps) {\n    return getItemMetadata('row', props, index, instanceProps).offset;\n  },\n  getRowHeight: function getRowHeight(props, index, instanceProps) {\n    return instanceProps.rowMetadataMap[index].size;\n  },\n  getRowStartIndexForOffset: function getRowStartIndexForOffset(props, scrollTop, instanceProps) {\n    return findNearestItem('row', props, instanceProps, scrollTop);\n  },\n  getRowStopIndexForStartIndex: function getRowStopIndexForStartIndex(props, startIndex, scrollTop, instanceProps) {\n    var rowCount = props.rowCount,\n        height = props.height;\n    var itemMetadata = getItemMetadata('row', props, startIndex, instanceProps);\n    var maxOffset = scrollTop + height;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < rowCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata('row', props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  initInstanceProps: function initInstanceProps(props, instance) {\n    var _ref5 = props,\n        estimatedColumnWidth = _ref5.estimatedColumnWidth,\n        estimatedRowHeight = _ref5.estimatedRowHeight;\n    var instanceProps = {\n      columnMetadataMap: {},\n      estimatedColumnWidth: estimatedColumnWidth || DEFAULT_ESTIMATED_ITEM_SIZE,\n      estimatedRowHeight: estimatedRowHeight || DEFAULT_ESTIMATED_ITEM_SIZE,\n      lastMeasuredColumnIndex: -1,\n      lastMeasuredRowIndex: -1,\n      rowMetadataMap: {}\n    };\n\n    instance.resetAfterColumnIndex = function (columnIndex, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instance.resetAfterIndices({\n        columnIndex: columnIndex,\n        shouldForceUpdate: shouldForceUpdate\n      });\n    };\n\n    instance.resetAfterRowIndex = function (rowIndex, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instance.resetAfterIndices({\n        rowIndex: rowIndex,\n        shouldForceUpdate: shouldForceUpdate\n      });\n    };\n\n    instance.resetAfterIndices = function (_ref6) {\n      var columnIndex = _ref6.columnIndex,\n          rowIndex = _ref6.rowIndex,\n          _ref6$shouldForceUpda = _ref6.shouldForceUpdate,\n          shouldForceUpdate = _ref6$shouldForceUpda === void 0 ? true : _ref6$shouldForceUpda;\n\n      if (typeof columnIndex === 'number') {\n        instanceProps.lastMeasuredColumnIndex = Math.min(instanceProps.lastMeasuredColumnIndex, columnIndex - 1);\n      }\n\n      if (typeof rowIndex === 'number') {\n        instanceProps.lastMeasuredRowIndex = Math.min(instanceProps.lastMeasuredRowIndex, rowIndex - 1);\n      } // We could potentially optimize further by only evicting styles after this index,\n      // But since styles are only cached while scrolling is in progress-\n      // It seems an unnecessary optimization.\n      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.\n\n\n      instance._getItemStyleCache(-1);\n\n      if (shouldForceUpdate) {\n        instance.forceUpdate();\n      }\n    };\n\n    return instanceProps;\n  },\n  shouldResetStyleCacheOnItemSizeChange: false,\n  validateProps: function validateProps(_ref7) {\n    var columnWidth = _ref7.columnWidth,\n        rowHeight = _ref7.rowHeight;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof columnWidth !== 'function') {\n        throw Error('An invalid \"columnWidth\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (columnWidth === null ? 'null' : typeof columnWidth) + \"\\\" was specified.\"));\n      } else if (typeof rowHeight !== 'function') {\n        throw Error('An invalid \"rowHeight\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (rowHeight === null ? 'null' : typeof rowHeight) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar IS_SCROLLING_DEBOUNCE_INTERVAL$1 = 150;\n\nvar defaultItemKey$1 = function defaultItemKey(index, data) {\n  return index;\n}; // In DEV mode, this Set helps us only log a warning once per component instance.\n// This avoids spamming the console every time a render happens.\n\n\nvar devWarningsDirection = null;\nvar devWarningsTagName$1 = null;\n\nif (process.env.NODE_ENV !== 'production') {\n  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {\n    devWarningsDirection =\n    /*#__PURE__*/\n    new WeakSet();\n    devWarningsTagName$1 =\n    /*#__PURE__*/\n    new WeakSet();\n  }\n}\n\nfunction createListComponent(_ref) {\n  var _class, _temp;\n\n  var getItemOffset = _ref.getItemOffset,\n      getEstimatedTotalSize = _ref.getEstimatedTotalSize,\n      getItemSize = _ref.getItemSize,\n      getOffsetForIndexAndAlignment = _ref.getOffsetForIndexAndAlignment,\n      getStartIndexForOffset = _ref.getStartIndexForOffset,\n      getStopIndexForStartIndex = _ref.getStopIndexForStartIndex,\n      initInstanceProps = _ref.initInstanceProps,\n      shouldResetStyleCacheOnItemSizeChange = _ref.shouldResetStyleCacheOnItemSizeChange,\n      validateProps = _ref.validateProps;\n  return _temp = _class =\n  /*#__PURE__*/\n  function (_PureComponent) {\n    _inheritsLoose(List, _PureComponent);\n\n    // Always use explicit constructor for React components.\n    // It produces less code after transpilation. (#26)\n    // eslint-disable-next-line no-useless-constructor\n    function List(props) {\n      var _this;\n\n      _this = _PureComponent.call(this, props) || this;\n      _this._instanceProps = initInstanceProps(_this.props, _assertThisInitialized(_assertThisInitialized(_this)));\n      _this._outerRef = void 0;\n      _this._resetIsScrollingTimeoutId = null;\n      _this.state = {\n        instance: _assertThisInitialized(_assertThisInitialized(_this)),\n        isScrolling: false,\n        scrollDirection: 'forward',\n        scrollOffset: typeof _this.props.initialScrollOffset === 'number' ? _this.props.initialScrollOffset : 0,\n        scrollUpdateWasRequested: false\n      };\n      _this._callOnItemsRendered = void 0;\n      _this._callOnItemsRendered = memoizeOne(function (overscanStartIndex, overscanStopIndex, visibleStartIndex, visibleStopIndex) {\n        return _this.props.onItemsRendered({\n          overscanStartIndex: overscanStartIndex,\n          overscanStopIndex: overscanStopIndex,\n          visibleStartIndex: visibleStartIndex,\n          visibleStopIndex: visibleStopIndex\n        });\n      });\n      _this._callOnScroll = void 0;\n      _this._callOnScroll = memoizeOne(function (scrollDirection, scrollOffset, scrollUpdateWasRequested) {\n        return _this.props.onScroll({\n          scrollDirection: scrollDirection,\n          scrollOffset: scrollOffset,\n          scrollUpdateWasRequested: scrollUpdateWasRequested\n        });\n      });\n      _this._getItemStyle = void 0;\n\n      _this._getItemStyle = function (index) {\n        var _this$props = _this.props,\n            direction = _this$props.direction,\n            itemSize = _this$props.itemSize,\n            layout = _this$props.layout;\n\n        var itemStyleCache = _this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange && itemSize, shouldResetStyleCacheOnItemSizeChange && layout, shouldResetStyleCacheOnItemSizeChange && direction);\n\n        var style;\n\n        if (itemStyleCache.hasOwnProperty(index)) {\n          style = itemStyleCache[index];\n        } else {\n          var _offset = getItemOffset(_this.props, index, _this._instanceProps);\n\n          var size = getItemSize(_this.props, index, _this._instanceProps); // TODO Deprecate direction \"horizontal\"\n\n          var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n          var isRtl = direction === 'rtl';\n          var offsetHorizontal = isHorizontal ? _offset : 0;\n          itemStyleCache[index] = style = {\n            position: 'absolute',\n            left: isRtl ? undefined : offsetHorizontal,\n            right: isRtl ? offsetHorizontal : undefined,\n            top: !isHorizontal ? _offset : 0,\n            height: !isHorizontal ? size : '100%',\n            width: isHorizontal ? size : '100%'\n          };\n        }\n\n        return style;\n      };\n\n      _this._getItemStyleCache = void 0;\n      _this._getItemStyleCache = memoizeOne(function (_, __, ___) {\n        return {};\n      });\n\n      _this._onScrollHorizontal = function (event) {\n        var _event$currentTarget = event.currentTarget,\n            clientWidth = _event$currentTarget.clientWidth,\n            scrollLeft = _event$currentTarget.scrollLeft,\n            scrollWidth = _event$currentTarget.scrollWidth;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollOffset === scrollLeft) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          }\n\n          var direction = _this.props.direction;\n          var scrollOffset = scrollLeft;\n\n          if (direction === 'rtl') {\n            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n            // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.\n            // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                scrollOffset = -scrollLeft;\n                break;\n\n              case 'positive-descending':\n                scrollOffset = scrollWidth - clientWidth - scrollLeft;\n                break;\n            }\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          scrollOffset = Math.max(0, Math.min(scrollOffset, scrollWidth - clientWidth));\n          return {\n            isScrolling: true,\n            scrollDirection: prevState.scrollOffset < scrollLeft ? 'forward' : 'backward',\n            scrollOffset: scrollOffset,\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._onScrollVertical = function (event) {\n        var _event$currentTarget2 = event.currentTarget,\n            clientHeight = _event$currentTarget2.clientHeight,\n            scrollHeight = _event$currentTarget2.scrollHeight,\n            scrollTop = _event$currentTarget2.scrollTop;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollOffset === scrollTop) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          var scrollOffset = Math.max(0, Math.min(scrollTop, scrollHeight - clientHeight));\n          return {\n            isScrolling: true,\n            scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n            scrollOffset: scrollOffset,\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._outerRefSetter = function (ref) {\n        var outerRef = _this.props.outerRef;\n        _this._outerRef = ref;\n\n        if (typeof outerRef === 'function') {\n          outerRef(ref);\n        } else if (outerRef != null && typeof outerRef === 'object' && outerRef.hasOwnProperty('current')) {\n          outerRef.current = ref;\n        }\n      };\n\n      _this._resetIsScrollingDebounced = function () {\n        if (_this._resetIsScrollingTimeoutId !== null) {\n          cancelTimeout(_this._resetIsScrollingTimeoutId);\n        }\n\n        _this._resetIsScrollingTimeoutId = requestTimeout(_this._resetIsScrolling, IS_SCROLLING_DEBOUNCE_INTERVAL$1);\n      };\n\n      _this._resetIsScrolling = function () {\n        _this._resetIsScrollingTimeoutId = null;\n\n        _this.setState({\n          isScrolling: false\n        }, function () {\n          // Clear style cache after state update has been committed.\n          // This way we don't break pure sCU for items that don't use isScrolling param.\n          _this._getItemStyleCache(-1, null);\n        });\n      };\n\n      return _this;\n    }\n\n    List.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n      validateSharedProps$1(nextProps, prevState);\n      validateProps(nextProps);\n      return null;\n    };\n\n    var _proto = List.prototype;\n\n    _proto.scrollTo = function scrollTo(scrollOffset) {\n      scrollOffset = Math.max(0, scrollOffset);\n      this.setState(function (prevState) {\n        if (prevState.scrollOffset === scrollOffset) {\n          return null;\n        }\n\n        return {\n          scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n          scrollOffset: scrollOffset,\n          scrollUpdateWasRequested: true\n        };\n      }, this._resetIsScrollingDebounced);\n    };\n\n    _proto.scrollToItem = function scrollToItem(index, align) {\n      if (align === void 0) {\n        align = 'auto';\n      }\n\n      var itemCount = this.props.itemCount;\n      var scrollOffset = this.state.scrollOffset;\n      index = Math.max(0, Math.min(index, itemCount - 1));\n      this.scrollTo(getOffsetForIndexAndAlignment(this.props, index, align, scrollOffset, this._instanceProps));\n    };\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this$props2 = this.props,\n          direction = _this$props2.direction,\n          initialScrollOffset = _this$props2.initialScrollOffset,\n          layout = _this$props2.layout;\n\n      if (typeof initialScrollOffset === 'number' && this._outerRef != null) {\n        var outerRef = this._outerRef; // TODO Deprecate direction \"horizontal\"\n\n        if (direction === 'horizontal' || layout === 'horizontal') {\n          outerRef.scrollLeft = initialScrollOffset;\n        } else {\n          outerRef.scrollTop = initialScrollOffset;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate() {\n      var _this$props3 = this.props,\n          direction = _this$props3.direction,\n          layout = _this$props3.layout;\n      var _this$state = this.state,\n          scrollOffset = _this$state.scrollOffset,\n          scrollUpdateWasRequested = _this$state.scrollUpdateWasRequested;\n\n      if (scrollUpdateWasRequested && this._outerRef != null) {\n        var outerRef = this._outerRef; // TODO Deprecate direction \"horizontal\"\n\n        if (direction === 'horizontal' || layout === 'horizontal') {\n          if (direction === 'rtl') {\n            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n            // So we need to determine which browser behavior we're dealing with, and mimic it.\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                outerRef.scrollLeft = -scrollOffset;\n                break;\n\n              case 'positive-ascending':\n                outerRef.scrollLeft = scrollOffset;\n                break;\n\n              default:\n                var clientWidth = outerRef.clientWidth,\n                    scrollWidth = outerRef.scrollWidth;\n                outerRef.scrollLeft = scrollWidth - clientWidth - scrollOffset;\n                break;\n            }\n          } else {\n            outerRef.scrollLeft = scrollOffset;\n          }\n        } else {\n          outerRef.scrollTop = scrollOffset;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      if (this._resetIsScrollingTimeoutId !== null) {\n        cancelTimeout(this._resetIsScrollingTimeoutId);\n      }\n    };\n\n    _proto.render = function render() {\n      var _this$props4 = this.props,\n          children = _this$props4.children,\n          className = _this$props4.className,\n          direction = _this$props4.direction,\n          height = _this$props4.height,\n          innerRef = _this$props4.innerRef,\n          innerElementType = _this$props4.innerElementType,\n          innerTagName = _this$props4.innerTagName,\n          itemCount = _this$props4.itemCount,\n          itemData = _this$props4.itemData,\n          _this$props4$itemKey = _this$props4.itemKey,\n          itemKey = _this$props4$itemKey === void 0 ? defaultItemKey$1 : _this$props4$itemKey,\n          layout = _this$props4.layout,\n          outerElementType = _this$props4.outerElementType,\n          outerTagName = _this$props4.outerTagName,\n          style = _this$props4.style,\n          useIsScrolling = _this$props4.useIsScrolling,\n          width = _this$props4.width;\n      var isScrolling = this.state.isScrolling; // TODO Deprecate direction \"horizontal\"\n\n      var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n      var onScroll = isHorizontal ? this._onScrollHorizontal : this._onScrollVertical;\n\n      var _this$_getRangeToRend = this._getRangeToRender(),\n          startIndex = _this$_getRangeToRend[0],\n          stopIndex = _this$_getRangeToRend[1];\n\n      var items = [];\n\n      if (itemCount > 0) {\n        for (var _index = startIndex; _index <= stopIndex; _index++) {\n          items.push(createElement(children, {\n            data: itemData,\n            key: itemKey(_index, itemData),\n            index: _index,\n            isScrolling: useIsScrolling ? isScrolling : undefined,\n            style: this._getItemStyle(_index)\n          }));\n        }\n      } // Read this value AFTER items have been created,\n      // So their actual sizes (if variable) are taken into consideration.\n\n\n      var estimatedTotalSize = getEstimatedTotalSize(this.props, this._instanceProps);\n      return createElement(outerElementType || outerTagName || 'div', {\n        className: className,\n        onScroll: onScroll,\n        ref: this._outerRefSetter,\n        style: _extends({\n          position: 'relative',\n          height: height,\n          width: width,\n          overflow: 'auto',\n          WebkitOverflowScrolling: 'touch',\n          willChange: 'transform',\n          direction: direction\n        }, style)\n      }, createElement(innerElementType || innerTagName || 'div', {\n        children: items,\n        ref: innerRef,\n        style: {\n          height: isHorizontal ? '100%' : estimatedTotalSize,\n          pointerEvents: isScrolling ? 'none' : undefined,\n          width: isHorizontal ? estimatedTotalSize : '100%'\n        }\n      }));\n    };\n\n    _proto._callPropsCallbacks = function _callPropsCallbacks() {\n      if (typeof this.props.onItemsRendered === 'function') {\n        var itemCount = this.props.itemCount;\n\n        if (itemCount > 0) {\n          var _this$_getRangeToRend2 = this._getRangeToRender(),\n              _overscanStartIndex = _this$_getRangeToRend2[0],\n              _overscanStopIndex = _this$_getRangeToRend2[1],\n              _visibleStartIndex = _this$_getRangeToRend2[2],\n              _visibleStopIndex = _this$_getRangeToRend2[3];\n\n          this._callOnItemsRendered(_overscanStartIndex, _overscanStopIndex, _visibleStartIndex, _visibleStopIndex);\n        }\n      }\n\n      if (typeof this.props.onScroll === 'function') {\n        var _this$state2 = this.state,\n            _scrollDirection = _this$state2.scrollDirection,\n            _scrollOffset = _this$state2.scrollOffset,\n            _scrollUpdateWasRequested = _this$state2.scrollUpdateWasRequested;\n\n        this._callOnScroll(_scrollDirection, _scrollOffset, _scrollUpdateWasRequested);\n      }\n    }; // Lazily create and cache item styles while scrolling,\n    // So that pure component sCU will prevent re-renders.\n    // We maintain this cache, and pass a style prop rather than index,\n    // So that List can clear cached styles and force item re-render if necessary.\n\n\n    _proto._getRangeToRender = function _getRangeToRender() {\n      var _this$props5 = this.props,\n          itemCount = _this$props5.itemCount,\n          overscanCount = _this$props5.overscanCount;\n      var _this$state3 = this.state,\n          isScrolling = _this$state3.isScrolling,\n          scrollDirection = _this$state3.scrollDirection,\n          scrollOffset = _this$state3.scrollOffset;\n\n      if (itemCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getStartIndexForOffset(this.props, scrollOffset, this._instanceProps);\n      var stopIndex = getStopIndexForStartIndex(this.props, startIndex, scrollOffset, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || scrollDirection === 'backward' ? Math.max(1, overscanCount) : 1;\n      var overscanForward = !isScrolling || scrollDirection === 'forward' ? Math.max(1, overscanCount) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(itemCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    return List;\n  }(PureComponent), _class.defaultProps = {\n    direction: 'ltr',\n    itemData: undefined,\n    layout: 'vertical',\n    overscanCount: 2,\n    useIsScrolling: false\n  }, _temp;\n} // NOTE: I considered further wrapping individual items with a pure ListItem component.\n// This would avoid ever calling the render function for the same index more than once,\n// But it would also add the overhead of a lot of components/fibers.\n// I assume people already do this (render function returning a class component),\n// So my doing it would just unnecessarily double the wrappers.\n\nvar validateSharedProps$1 = function validateSharedProps(_ref2, _ref3) {\n  var children = _ref2.children,\n      direction = _ref2.direction,\n      height = _ref2.height,\n      layout = _ref2.layout,\n      innerTagName = _ref2.innerTagName,\n      outerTagName = _ref2.outerTagName,\n      width = _ref2.width;\n  var instance = _ref3.instance;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (innerTagName != null || outerTagName != null) {\n      if (devWarningsTagName$1 && !devWarningsTagName$1.has(instance)) {\n        devWarningsTagName$1.add(instance);\n        console.warn('The innerTagName and outerTagName props have been deprecated. ' + 'Please use the innerElementType and outerElementType props instead.');\n      }\n    } // TODO Deprecate direction \"horizontal\"\n\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n\n    switch (direction) {\n      case 'horizontal':\n      case 'vertical':\n        if (devWarningsDirection && !devWarningsDirection.has(instance)) {\n          devWarningsDirection.add(instance);\n          console.warn('The direction prop should be either \"ltr\" (default) or \"rtl\". ' + 'Please use the layout prop to specify \"vertical\" (default) or \"horizontal\" orientation.');\n        }\n\n        break;\n\n      case 'ltr':\n      case 'rtl':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"direction\" prop has been specified. ' + 'Value should be either \"ltr\" or \"rtl\". ' + (\"\\\"\" + direction + \"\\\" was specified.\"));\n    }\n\n    switch (layout) {\n      case 'horizontal':\n      case 'vertical':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"layout\" prop has been specified. ' + 'Value should be either \"horizontal\" or \"vertical\". ' + (\"\\\"\" + layout + \"\\\" was specified.\"));\n    }\n\n    if (children == null) {\n      throw Error('An invalid \"children\" prop has been specified. ' + 'Value should be a React component. ' + (\"\\\"\" + (children === null ? 'null' : typeof children) + \"\\\" was specified.\"));\n    }\n\n    if (isHorizontal && typeof width !== 'number') {\n      throw Error('An invalid \"width\" prop has been specified. ' + 'Horizontal lists must specify a number for width. ' + (\"\\\"\" + (width === null ? 'null' : typeof width) + \"\\\" was specified.\"));\n    } else if (!isHorizontal && typeof height !== 'number') {\n      throw Error('An invalid \"height\" prop has been specified. ' + 'Vertical lists must specify a number for height. ' + (\"\\\"\" + (height === null ? 'null' : typeof height) + \"\\\" was specified.\"));\n    }\n  }\n};\n\nvar DEFAULT_ESTIMATED_ITEM_SIZE$1 = 50;\n\nvar getItemMetadata$1 = function getItemMetadata(props, index, instanceProps) {\n  var _ref = props,\n      itemSize = _ref.itemSize;\n  var itemMetadataMap = instanceProps.itemMetadataMap,\n      lastMeasuredIndex = instanceProps.lastMeasuredIndex;\n\n  if (index > lastMeasuredIndex) {\n    var offset = 0;\n\n    if (lastMeasuredIndex >= 0) {\n      var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n      offset = itemMetadata.offset + itemMetadata.size;\n    }\n\n    for (var i = lastMeasuredIndex + 1; i <= index; i++) {\n      var size = itemSize(i);\n      itemMetadataMap[i] = {\n        offset: offset,\n        size: size\n      };\n      offset += size;\n    }\n\n    instanceProps.lastMeasuredIndex = index;\n  }\n\n  return itemMetadataMap[index];\n};\n\nvar findNearestItem$1 = function findNearestItem(props, instanceProps, offset) {\n  var itemMetadataMap = instanceProps.itemMetadataMap,\n      lastMeasuredIndex = instanceProps.lastMeasuredIndex;\n  var lastMeasuredItemOffset = lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;\n\n  if (lastMeasuredItemOffset >= offset) {\n    // If we've already measured items within this range just use a binary search as it's faster.\n    return findNearestItemBinarySearch$1(props, instanceProps, lastMeasuredIndex, 0, offset);\n  } else {\n    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.\n    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.\n    // The overall complexity for this approach is O(log n).\n    return findNearestItemExponentialSearch$1(props, instanceProps, Math.max(0, lastMeasuredIndex), offset);\n  }\n};\n\nvar findNearestItemBinarySearch$1 = function findNearestItemBinarySearch(props, instanceProps, high, low, offset) {\n  while (low <= high) {\n    var middle = low + Math.floor((high - low) / 2);\n    var currentOffset = getItemMetadata$1(props, middle, instanceProps).offset;\n\n    if (currentOffset === offset) {\n      return middle;\n    } else if (currentOffset < offset) {\n      low = middle + 1;\n    } else if (currentOffset > offset) {\n      high = middle - 1;\n    }\n  }\n\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\n\nvar findNearestItemExponentialSearch$1 = function findNearestItemExponentialSearch(props, instanceProps, index, offset) {\n  var itemCount = props.itemCount;\n  var interval = 1;\n\n  while (index < itemCount && getItemMetadata$1(props, index, instanceProps).offset < offset) {\n    index += interval;\n    interval *= 2;\n  }\n\n  return findNearestItemBinarySearch$1(props, instanceProps, Math.min(index, itemCount - 1), Math.floor(index / 2), offset);\n};\n\nvar getEstimatedTotalSize = function getEstimatedTotalSize(_ref2, _ref3) {\n  var itemCount = _ref2.itemCount;\n  var itemMetadataMap = _ref3.itemMetadataMap,\n      estimatedItemSize = _ref3.estimatedItemSize,\n      lastMeasuredIndex = _ref3.lastMeasuredIndex;\n  var totalSizeOfMeasuredItems = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredIndex >= itemCount) {\n    lastMeasuredIndex = itemCount - 1;\n  }\n\n  if (lastMeasuredIndex >= 0) {\n    var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n    totalSizeOfMeasuredItems = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = itemCount - lastMeasuredIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedItemSize;\n  return totalSizeOfMeasuredItems + totalSizeOfUnmeasuredItems;\n};\n\nvar VariableSizeList =\n/*#__PURE__*/\ncreateListComponent({\n  getItemOffset: function getItemOffset(props, index, instanceProps) {\n    return getItemMetadata$1(props, index, instanceProps).offset;\n  },\n  getItemSize: function getItemSize(props, index, instanceProps) {\n    return instanceProps.itemMetadataMap[index].size;\n  },\n  getEstimatedTotalSize: getEstimatedTotalSize,\n  getOffsetForIndexAndAlignment: function getOffsetForIndexAndAlignment(props, index, align, scrollOffset, instanceProps) {\n    var direction = props.direction,\n        height = props.height,\n        layout = props.layout,\n        width = props.width; // TODO Deprecate direction \"horizontal\"\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var itemMetadata = getItemMetadata$1(props, index, instanceProps); // Get estimated total size after ItemMetadata is computed,\n    // To ensure it reflects actual measurements instead of just estimates.\n\n    var estimatedTotalSize = getEstimatedTotalSize(props, instanceProps);\n    var maxOffset = Math.max(0, Math.min(estimatedTotalSize - size, itemMetadata.offset));\n    var minOffset = Math.max(0, itemMetadata.offset - size + itemMetadata.size);\n\n    if (align === 'smart') {\n      if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        return Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n      case 'auto':\n      default:\n        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n          return scrollOffset;\n        } else if (scrollOffset < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getStartIndexForOffset: function getStartIndexForOffset(props, offset, instanceProps) {\n    return findNearestItem$1(props, instanceProps, offset);\n  },\n  getStopIndexForStartIndex: function getStopIndexForStartIndex(props, startIndex, scrollOffset, instanceProps) {\n    var direction = props.direction,\n        height = props.height,\n        itemCount = props.itemCount,\n        layout = props.layout,\n        width = props.width; // TODO Deprecate direction \"horizontal\"\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var itemMetadata = getItemMetadata$1(props, startIndex, instanceProps);\n    var maxOffset = scrollOffset + size;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < itemCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata$1(props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  initInstanceProps: function initInstanceProps(props, instance) {\n    var _ref4 = props,\n        estimatedItemSize = _ref4.estimatedItemSize;\n    var instanceProps = {\n      itemMetadataMap: {},\n      estimatedItemSize: estimatedItemSize || DEFAULT_ESTIMATED_ITEM_SIZE$1,\n      lastMeasuredIndex: -1\n    };\n\n    instance.resetAfterIndex = function (index, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instanceProps.lastMeasuredIndex = Math.min(instanceProps.lastMeasuredIndex, index - 1); // We could potentially optimize further by only evicting styles after this index,\n      // But since styles are only cached while scrolling is in progress-\n      // It seems an unnecessary optimization.\n      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.\n\n      instance._getItemStyleCache(-1);\n\n      if (shouldForceUpdate) {\n        instance.forceUpdate();\n      }\n    };\n\n    return instanceProps;\n  },\n  shouldResetStyleCacheOnItemSizeChange: false,\n  validateProps: function validateProps(_ref5) {\n    var itemSize = _ref5.itemSize;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof itemSize !== 'function') {\n        throw Error('An invalid \"itemSize\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (itemSize === null ? 'null' : typeof itemSize) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar FixedSizeGrid =\n/*#__PURE__*/\ncreateGridComponent({\n  getColumnOffset: function getColumnOffset(_ref, index) {\n    var columnWidth = _ref.columnWidth;\n    return index * columnWidth;\n  },\n  getColumnWidth: function getColumnWidth(_ref2, index) {\n    var columnWidth = _ref2.columnWidth;\n    return columnWidth;\n  },\n  getRowOffset: function getRowOffset(_ref3, index) {\n    var rowHeight = _ref3.rowHeight;\n    return index * rowHeight;\n  },\n  getRowHeight: function getRowHeight(_ref4, index) {\n    var rowHeight = _ref4.rowHeight;\n    return rowHeight;\n  },\n  getEstimatedTotalHeight: function getEstimatedTotalHeight(_ref5) {\n    var rowCount = _ref5.rowCount,\n        rowHeight = _ref5.rowHeight;\n    return rowHeight * rowCount;\n  },\n  getEstimatedTotalWidth: function getEstimatedTotalWidth(_ref6) {\n    var columnCount = _ref6.columnCount,\n        columnWidth = _ref6.columnWidth;\n    return columnWidth * columnCount;\n  },\n  getOffsetForColumnAndAlignment: function getOffsetForColumnAndAlignment(_ref7, columnIndex, align, scrollLeft, instanceProps, scrollbarSize) {\n    var columnCount = _ref7.columnCount,\n        columnWidth = _ref7.columnWidth,\n        width = _ref7.width;\n    var lastColumnOffset = Math.max(0, columnCount * columnWidth - width);\n    var maxOffset = Math.min(lastColumnOffset, columnIndex * columnWidth);\n    var minOffset = Math.max(0, columnIndex * columnWidth - width + scrollbarSize + columnWidth);\n\n    if (align === 'smart') {\n      if (scrollLeft >= minOffset - width && scrollLeft <= maxOffset + width) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        // \"Centered\" offset is usually the average of the min and max.\n        // But near the edges of the list, this doesn't hold true.\n        var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n        if (middleOffset < Math.ceil(width / 2)) {\n          return 0; // near the beginning\n        } else if (middleOffset > lastColumnOffset + Math.floor(width / 2)) {\n          return lastColumnOffset; // near the end\n        } else {\n          return middleOffset;\n        }\n\n      case 'auto':\n      default:\n        if (scrollLeft >= minOffset && scrollLeft <= maxOffset) {\n          return scrollLeft;\n        } else if (minOffset > maxOffset) {\n          // Because we only take into account the scrollbar size when calculating minOffset\n          // this value can be larger than maxOffset when at the end of the list\n          return minOffset;\n        } else if (scrollLeft < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getOffsetForRowAndAlignment: function getOffsetForRowAndAlignment(_ref8, rowIndex, align, scrollTop, instanceProps, scrollbarSize) {\n    var rowHeight = _ref8.rowHeight,\n        height = _ref8.height,\n        rowCount = _ref8.rowCount;\n    var lastRowOffset = Math.max(0, rowCount * rowHeight - height);\n    var maxOffset = Math.min(lastRowOffset, rowIndex * rowHeight);\n    var minOffset = Math.max(0, rowIndex * rowHeight - height + scrollbarSize + rowHeight);\n\n    if (align === 'smart') {\n      if (scrollTop >= minOffset - height && scrollTop <= maxOffset + height) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        // \"Centered\" offset is usually the average of the min and max.\n        // But near the edges of the list, this doesn't hold true.\n        var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n        if (middleOffset < Math.ceil(height / 2)) {\n          return 0; // near the beginning\n        } else if (middleOffset > lastRowOffset + Math.floor(height / 2)) {\n          return lastRowOffset; // near the end\n        } else {\n          return middleOffset;\n        }\n\n      case 'auto':\n      default:\n        if (scrollTop >= minOffset && scrollTop <= maxOffset) {\n          return scrollTop;\n        } else if (minOffset > maxOffset) {\n          // Because we only take into account the scrollbar size when calculating minOffset\n          // this value can be larger than maxOffset when at the end of the list\n          return minOffset;\n        } else if (scrollTop < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getColumnStartIndexForOffset: function getColumnStartIndexForOffset(_ref9, scrollLeft) {\n    var columnWidth = _ref9.columnWidth,\n        columnCount = _ref9.columnCount;\n    return Math.max(0, Math.min(columnCount - 1, Math.floor(scrollLeft / columnWidth)));\n  },\n  getColumnStopIndexForStartIndex: function getColumnStopIndexForStartIndex(_ref10, startIndex, scrollLeft) {\n    var columnWidth = _ref10.columnWidth,\n        columnCount = _ref10.columnCount,\n        width = _ref10.width;\n    var left = startIndex * columnWidth;\n    var numVisibleColumns = Math.ceil((width + scrollLeft - left) / columnWidth);\n    return Math.max(0, Math.min(columnCount - 1, startIndex + numVisibleColumns - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  getRowStartIndexForOffset: function getRowStartIndexForOffset(_ref11, scrollTop) {\n    var rowHeight = _ref11.rowHeight,\n        rowCount = _ref11.rowCount;\n    return Math.max(0, Math.min(rowCount - 1, Math.floor(scrollTop / rowHeight)));\n  },\n  getRowStopIndexForStartIndex: function getRowStopIndexForStartIndex(_ref12, startIndex, scrollTop) {\n    var rowHeight = _ref12.rowHeight,\n        rowCount = _ref12.rowCount,\n        height = _ref12.height;\n    var top = startIndex * rowHeight;\n    var numVisibleRows = Math.ceil((height + scrollTop - top) / rowHeight);\n    return Math.max(0, Math.min(rowCount - 1, startIndex + numVisibleRows - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  initInstanceProps: function initInstanceProps(props) {// Noop\n  },\n  shouldResetStyleCacheOnItemSizeChange: true,\n  validateProps: function validateProps(_ref13) {\n    var columnWidth = _ref13.columnWidth,\n        rowHeight = _ref13.rowHeight;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof columnWidth !== 'number') {\n        throw Error('An invalid \"columnWidth\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (columnWidth === null ? 'null' : typeof columnWidth) + \"\\\" was specified.\"));\n      }\n\n      if (typeof rowHeight !== 'number') {\n        throw Error('An invalid \"rowHeight\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (rowHeight === null ? 'null' : typeof rowHeight) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar FixedSizeList =\n/*#__PURE__*/\ncreateListComponent({\n  getItemOffset: function getItemOffset(_ref, index) {\n    var itemSize = _ref.itemSize;\n    return index * itemSize;\n  },\n  getItemSize: function getItemSize(_ref2, index) {\n    var itemSize = _ref2.itemSize;\n    return itemSize;\n  },\n  getEstimatedTotalSize: function getEstimatedTotalSize(_ref3) {\n    var itemCount = _ref3.itemCount,\n        itemSize = _ref3.itemSize;\n    return itemSize * itemCount;\n  },\n  getOffsetForIndexAndAlignment: function getOffsetForIndexAndAlignment(_ref4, index, align, scrollOffset) {\n    var direction = _ref4.direction,\n        height = _ref4.height,\n        itemCount = _ref4.itemCount,\n        itemSize = _ref4.itemSize,\n        layout = _ref4.layout,\n        width = _ref4.width;\n    // TODO Deprecate direction \"horizontal\"\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var lastItemOffset = Math.max(0, itemCount * itemSize - size);\n    var maxOffset = Math.min(lastItemOffset, index * itemSize);\n    var minOffset = Math.max(0, index * itemSize - size + itemSize);\n\n    if (align === 'smart') {\n      if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        {\n          // \"Centered\" offset is usually the average of the min and max.\n          // But near the edges of the list, this doesn't hold true.\n          var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n          if (middleOffset < Math.ceil(size / 2)) {\n            return 0; // near the beginning\n          } else if (middleOffset > lastItemOffset + Math.floor(size / 2)) {\n            return lastItemOffset; // near the end\n          } else {\n            return middleOffset;\n          }\n        }\n\n      case 'auto':\n      default:\n        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n          return scrollOffset;\n        } else if (scrollOffset < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getStartIndexForOffset: function getStartIndexForOffset(_ref5, offset) {\n    var itemCount = _ref5.itemCount,\n        itemSize = _ref5.itemSize;\n    return Math.max(0, Math.min(itemCount - 1, Math.floor(offset / itemSize)));\n  },\n  getStopIndexForStartIndex: function getStopIndexForStartIndex(_ref6, startIndex, scrollOffset) {\n    var direction = _ref6.direction,\n        height = _ref6.height,\n        itemCount = _ref6.itemCount,\n        itemSize = _ref6.itemSize,\n        layout = _ref6.layout,\n        width = _ref6.width;\n    // TODO Deprecate direction \"horizontal\"\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var offset = startIndex * itemSize;\n    var size = isHorizontal ? width : height;\n    var numVisibleItems = Math.ceil((size + scrollOffset - offset) / itemSize);\n    return Math.max(0, Math.min(itemCount - 1, startIndex + numVisibleItems - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  initInstanceProps: function initInstanceProps(props) {// Noop\n  },\n  shouldResetStyleCacheOnItemSizeChange: true,\n  validateProps: function validateProps(_ref7) {\n    var itemSize = _ref7.itemSize;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof itemSize !== 'number') {\n        throw Error('An invalid \"itemSize\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (itemSize === null ? 'null' : typeof itemSize) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\n// Pulled from react-compat\n// https://github.com/developit/preact-compat/blob/7c5de00e7c85e2ffd011bf3af02899b63f699d3a/src/index.js#L349\nfunction shallowDiffers(prev, next) {\n  for (var attribute in prev) {\n    if (!(attribute in next)) {\n      return true;\n    }\n  }\n\n  for (var _attribute in next) {\n    if (prev[_attribute] !== next[_attribute]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// It knows to compare individual style props and ignore the wrapper object.\n// See https://reactjs.org/docs/react-api.html#reactmemo\n\nfunction areEqual(prevProps, nextProps) {\n  var prevStyle = prevProps.style,\n      prevRest = _objectWithoutPropertiesLoose(prevProps, [\"style\"]);\n\n  var nextStyle = nextProps.style,\n      nextRest = _objectWithoutPropertiesLoose(nextProps, [\"style\"]);\n\n  return !shallowDiffers(prevStyle, nextStyle) && !shallowDiffers(prevRest, nextRest);\n}\n\n// It knows to compare individual style props and ignore the wrapper object.\n// See https://reactjs.org/docs/react-component.html#shouldcomponentupdate\n\nfunction shouldComponentUpdate(nextProps, nextState) {\n  return !areEqual(this.props, nextProps) || shallowDiffers(this.state, nextState);\n}\n\nexport { VariableSizeGrid, VariableSizeList, FixedSizeGrid, FixedSizeList, areEqual, shouldComponentUpdate };\n//# sourceMappingURL=index.esm.js.map\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport ColumnResizer from \"react-base-table/lib/ColumnResizer\";\nimport { rtPrefix } from \"../../utils/variables\";\n\nconst HeaderCell = (props) => {\n    // console.log('HeaderCell => ', props);\n\n    const { column, onResize, ...restProps } = props;\n\n    if (!column)\n        return <th {...restProps} />;\n\n    const { width, resizable, headerRenderer } = column;\n\n    if (!width)\n        return <th {...restProps} />;\n\n    // if (headerRenderer) {\n    //     let childNode\n    //     if( typeof headerRenderer === 'function') {\n    //         childNode = headerRenderer()\n    //     }\n    //     else {\n    //         childNode = headerRenderer\n    //     }\n    //\n    //     return (\n    //         <th {...restProps}>\n    //             {childNode}\n    //             {resizable &&\n    //             <ColumnResizer\n    //                 className={`${rtPrefix}-column-resizer`}\n    //                 column={{ width: width, maxWidth: 1000 }}\n    //                 onResize={onResize}\n    //             />}\n    //         </th>\n    //     );\n    // } else {\n        return (\n            <th {...restProps}>\n                {restProps.children}\n                {resizable &&\n                <ColumnResizer\n                    className={`${rtPrefix}-column-resizer`}\n                    column={{ width: width, maxWidth: 1000 }}\n                    onResize={onResize}\n                />}\n            </th>\n        );\n    // }\n};\n\nHeaderCell.propTypes = {\n    onResize: PropTypes.func,\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    resizable: PropTypes.bool\n};\n\nexport default HeaderCell;\n","import React, {useRef, useEffect} from 'react';\nimport PropTypes from 'prop-types';\n\nconst HeaderRow =  props => {\n    const headerRowRef = useRef();\n    const {headerHeight, setHeaderHeight, ...restProps} = props;\n    useEffect(() => {\n\n        const newHeight = headerRowRef && headerRowRef.current && headerRowRef.current.clientHeight;\n        if(headerHeight !== newHeight) {\n            // console.log('Row height', newHeight) //clientHeight\n            setHeaderHeight(newHeight)\n        }\n    })\n    return (\n        <tr {...restProps} ref={headerRowRef}/>\n    );\n};\n\nHeaderRow.propTypes = {\n    headerHeight: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    setHeaderHeight: PropTypes.func,\n}\n\nexport default HeaderRow;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nconst BodyCell = props => {\n\n  const {column, rowData, rowIndex, ...restProps} = props;\n\n  if(column && column.cellComponent) {\n    // console.log('BodyCell => ', restProps);\n    return (\n      <td {...restProps} style={{...restProps.style, padding: 0}}>\n        <column.cellComponent\n          column={column}\n          cellData={restProps.title}\n          rowData={rowData}\n          rowIndex={rowIndex}\n        />\n      </td>\n    )\n  } else {\n    return <td {...restProps}/>;\n  }\n\n};\n\nBodyCell.propTypes = {\n\n};\n\nexport default BodyCell;\n","import React, { useRef, useState, useEffect } from \"react\";\nimport { rtPrefix } from \"../../utils/variables\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { AutoResizer } from \"react-base-table\";\nimport { VariableSizeGrid as Grid } from 'react-window';\nimport {\n  findNodeByRowKey,\n  flatten,\n  getObjectExcludedProps, getTableRowKeys, getTableRowObjects, noop,\n  notificationError,\n  useMounted\n} from \"../../utils/baseUtils\";\nimport { Space, Table as AntTable } from \"antd\";\nimport { CaretDownOutlined, CaretRightOutlined, CaretUpOutlined } from \"@ant-design/icons\";\nimport { empty, overlay } from \"../ReactBaseTable/defaultSettings\";\nimport HeaderCell from \"./HeaderCell\";\nimport HeaderRow from \"./HeaderRow\";\nimport PropTypes from \"prop-types\";\nimport FormItems from \"../../Form/FormItems\";\nimport objectPath from \"object-path\";\nimport { setDateStore } from \"../../../redux/rtd.actions\";\nimport moment from \"moment\";\nimport BodyCell from \"./BodyCell\";\n\nconst excludeProps = [\n  \"defaultRows\",\n  \"defaultSelectedRowKeys\",\n  \"defaultSearchValue\",\n  \"defaultFilter\",\n  \"defaultSortBy\",\n  \"rows\",\n  \"requestLoadRows\",\n  \"pageSize\",\n  \"searchParamName\",\n  \"onRowClick\",\n  \"onRowDoubleClick\",\n];\n\nconst Table = props => {\n  /** Индикатор загрузки данных */\n  const [loading, setLoading] = useState(false);\n\n  /** TABLE STATES */\n  /** Столбцы таблицы */\n  const [_columns, _setColumns] = useState([]);\n  /** Строки таблицы */\n  const [_rows, _setRows] = useState([]);\n  /** Ключи выделенных строк */\n  const [_selectedRowKeys, setSelectedRowKeys] = useState([]);\n  /** Значение строки поиска */\n  const [_searchValue, setSearchValue] = useState(\"\");\n  /** Объект фильтра */\n  const [_filter, setFilter] = useState({});\n  /** Объект соритировки */\n  const [_sortBy, setSortBy] = useState({});\n\n  /** TREE STATES */\n  /** Ключи строк с кубиками при selectable = true */\n  // const [_indeterminateRowKeys, setIndeterminateRowKeys] = useState([]);\n  /** Ключи раскрытых строк при selectable = true */\n  const [_expandedRowKeys, setExpandedRowKeys] = useState([]);\n\n  /** FOOTER STATES */\n  /** Отображать ли footer */\n  const [_footerShow, _setFooterShow] = useState(false);\n  /** Всего строк по фильтру в таблице */\n  const [_totalCountRows, setTotalCountRows] = useState(0);\n\n  const [subscribeProps, setSubscribeProps] = useState({});\n\n  const [headerHeight, setHeaderHeight] = useState(0);\n\n  const isMounted = useMounted();\n\n  const {\n    /** Required */\n    columns,\n    // type,\n    // infinityMode, // no use\n    editMode, // need Props.types\n\n    /** Def values */\n    defaultRows,\n    // defaultSelectedRowKeys,\n    defaultSearchValue,\n    defaultFilter,\n    defaultSortBy,\n\n    /** Outdoor control */\n    rows,\n    // setRows, // ???\n    // selectedRowKeys,\n    // searchValue,\n    // filter,\n    // sortBy,\n\n    /** Base Props */\n    rowKey,\n    customFields,\n\n    /** View Props */\n    // empty,\n    // overlay,\n    // fixWidthColumn,\n    // footerProps,\n    // headerHeight,\n    // rowHeight,\n    // rowRenderer,\n    zebraStyle,\n    // estimatedRowHeight,\n    className,\n    style,\n    // cellBordered, // need Props.types\n    // rowBordered,  // need Props.types\n\n    /** Load Data Props */\n    pageSize,\n    requestLoadRows,\n    requestLoadCount,\n    searchParamName,\n\n    /** Selectable Props */\n    rowSelection,\n    selectable,\n\n    /** Tree Props */\n    expandable,\n    nodeAssociated,\n    expandColumnKey,\n    expandDefaultAll,\n    // expandLazyLoad, // no use\n    // expandParentKey, // no use\n\n    /** Events */\n    onRowClick,\n    onRowDoubleClick,\n    // onRowExpand,\n    // onSelectedRowsChange,\n    onExpandedRowsChange,\n\n    /** SELECTED PANEL */\n    // showSelection,\n    // rowRenderShowSelection,\n\n    /** REDUX PROPS */\n    dispatchPath,\n    dispatch,\n    subscribe,\n\n    value,\n    onChange\n  } = { ...props, ...subscribeProps };\n\n  const footerProps = {\n    ...Table.defaultProps.footerProps,\n    ...props.footerProps\n  };\n\n  const selectedDispatchPath = dispatch && dispatch.path\n      ? `${dispatch.path}.selected`\n      : dispatchPath && `${dispatchPath}.selected`;\n  const rowsDispatchPath = dispatch && dispatch.path\n      ? `${dispatch.path}.rows`\n      : dispatchPath && `${dispatchPath}.rows`;\n\n  useEffect(() => {\n    // console.log(\"Инициализация дефолтных значений \", selectColumn, columns);\n    // console.log(\"Инициализация дефолтных значений defaultSelectedRowKeys > \", defaultSelectedRowKeys);\n\n    // Инициализация дефолтных значений\n    // _setRows(defaultRows);\n    if (defaultRows.length > 0) _setRowsHandler(defaultRows);\n    else if (rows.length > 0) _setRowsHandler(rows);\n    setSearchValue(defaultSearchValue);\n    setFilter(defaultFilter);\n    setSortBy(defaultSortBy);\n\n    // Определение нужно ли отображать подвал\n    _setFooterShow(\n      (footerProps.showElements.length ||\n        footerProps.leftCustomSideElement ||\n        footerProps.centerCustomSideElement ||\n        footerProps.rightCustomSideElement));\n\n    _loadRows({\n      sortBy: defaultSortBy,\n      filter: defaultFilter,\n      searchLine: defaultSearchValue,\n      reload: true\n    });\n    // console.log(\"tableRef\", tableRef);\n  }, []);\n\n  useEffect(() => {\n    _setColumns(columns);\n  }, [columns]);\n\n  useEffect(() => {\n    if(value && Array.isArray(value))\n  \t  _setRowsHandler(value)\n  }, [value])\n\n  /** Подписка на изменение props[subscribe.name] в сторе */\n  subscribe.map(item => {\n    return useEffect(() => {\n      if ((item.withMount || isMounted) && item.name) {\n        // console.log(\"Table => useEffect => \", props); //item.name, props[item.name]\n        let extraData = {};\n        if (item.extraData) {\n          if (typeof item.extraData === 'object')\n            Object.keys(item.extraData).forEach((key) => extraData[key] = props[`${item.name}.extraData.${key}`]);\n          else\n            extraData = props[`${item.name}ExtraData`];\n        }\n        const onChangeObject = {\n          value: props[item.name],\n          extraData: extraData, //props[`${item.name}ExtraData`],\n          reloadTable: reloadData,\n          addRows: _addRows,\n          addRow: _addRow,\n          addRowAsCopy: _addRowAsCopy,\n          editRow: _editRow,\n          removeRow: _removeRow,\n          moveUpRow: _moveUpSelectedRow,\n          moveUpRowByKey: _moveUpRowByKey,\n          moveDownRow: _moveDownSelectedRow,\n          moveDownRowByKey: _moveDownRowByKey,\n          setSubscribeProps: _setSubscribeProps\n        };\n        item.onChange && item.onChange(onChangeObject);\n      }\n    }, [props[item.name]]);\n  });\n\n  /** BASE FUNCTIONS */\n  const _setSubscribeProps = (props) => {\n    setSubscribeProps({ ...subscribeProps, ...props });\n  };\n\n  const _setLoadedRowsHandler = (rows) => {\n    _setRowsHandler(rows);\n    onChange && onChange(rows);\n  };\n  const _setRowsHandler = (rows) => {\n    // console.log('_setRowsHandler onChange');\n    _setRows(rows);\n    // setRows(rows);\n    rowsDispatch(rows);\n  };\n\n  const _setSelectedRowsHandler = (selectedKeys = [], selectedObjects = undefined, rows = []) => {\n    // console.log('_setSelectedRowsHandler => ', selectedKeys)\n    if(!editMode) {\n      setSelectedRowKeys(selectedKeys);\n      if (selectedKeys.length === 0)\n        if (selectable)\n          selectedDispatch([]);\n        else\n          selectedDispatch(undefined);\n      else if (selectedKeys.length > 0 && !selectedObjects)\n        if (selectable)\n          selectedDispatch(flatten(getTableRowObjects(rows, rowKey)).filter((item) => selectedKeys.includes(item[rowKey])));\n        else\n          selectedDispatch(findNodeByRowKey(rows, rowKey, selectedKeys[0]));\n      else\n        selectedDispatch(selectedObjects);\n    }\n  };\n\n  const rowsDispatch = (rows) => {\n    rowsDispatchPath && props.setDateStore && props.setDateStore(rowsDispatchPath, rows);\n  };\n\n  const selectedDispatch = (data) => {\n    selectedDispatchPath && props.setDateStore && props.setDateStore(selectedDispatchPath, data);\n  };\n\n  const onTableEventsDispatch = (nameEvent, value) => {\n    const dp = dispatch && dispatch.path\n        ? `${dispatch.path}.events.${nameEvent}`\n        : dispatchPath && `${dispatchPath}.events.${nameEvent}`;\n\n    dp && props.setDateStore && props.setDateStore(dp, {\n      timestamp: moment(),\n      value: value\n    });\n    // console.log('onTableEventsDispatch onChange');\n    Array.isArray(value) && onChange && onChange(value);\n  };\n\n  const reloadData = ({ sortBy, filter, searchValue }, appendParams) => {\n    // console.log(\"reloadData params \", sortBy, filter, searchValue, loading);\n    if (selectable && props.value && props.value.length > 0)\n      _setSelectedRowsHandler(props.value.map(item => item[rowKey]), props.value);\n    else\n      _setSelectedRowsHandler();\n\n    const __sortBy = appendParams ? (sortBy ? sortBy : _sortBy) : sortBy;\n    const __filter = appendParams ? { ..._filter, ...filter } : filter;\n    const __searchValue = appendParams ? (searchValue ? searchValue : _searchValue) : searchValue;\n    setSortBy(__sortBy);\n    setFilter(__filter);\n    setSearchValue(__searchValue);\n    // console.log(\"reloadData params \", sortBy, filter, searchValue, loading);\n    _loadRows({\n      sortBy: __sortBy,\n      filter: __filter,\n      searchLine: __searchValue,\n      reload: true\n    });\n  };\n\n  const _loadRows = (params) => {\n    const { sortBy, filter, searchLine, expandRow, reload } = params;\n    if (!loading && requestLoadRows) {\n      setLoading(true);\n      const pageNum = 0;\n      const params = {\n        page: 0,\n        size: pageSize,\n        sort:\n          sortBy && sortBy.key\n            ? sortBy.key + \",\" + sortBy.order\n            : null\n      };\n      const dataQuery = {\n        ...filter,\n        ...(searchLine\n          ? { [searchParamName]: searchLine }\n          : null)\n      };\n      if(reload && requestLoadCount !== noop && !expandColumnKey) {\n        requestLoadCount({ params, data: dataQuery, })\n          .then((response) => {\n            // console.log(\"infinity then response\", response);\n            setTotalCountRows(response.data);\n          })\n          .catch(error =>\n            notificationError(error, 'Ошибка получения количества записей по фильтру') );\n      }\n      requestLoadRows({ params, data: dataQuery })\n        .then((response) => {\n          // console.log(\"infinity then response\", response);\n          const result = response.data;\n          _setLoadedRowsHandler(result); // _setRows\n\n          if (expandColumnKey) {\n            expandDefaultAll &&\n            setExpandedRowKeys(flatten(getTableRowKeys(result, rowKey)));\n          }\n\n          setLoading(false);\n        })\n        .catch((error) => {\n          notificationError(error, \"Ошибка загрузки данных\");\n          _setLoadedRowsHandler(_rows); // _setRows\n          // setHasMore(false);\n          setLoading(false);\n        });\n    }\n  };\n\n  const onChangeTable = (pagination, filters, sorter, extra) => {\n    // console.log('Table onChange', pagination, filters, sorter, extra)\n    switch (extra.action) {\n      case \"paginate\":\n        break;\n      case \"sort\":\n        onSort(sorter);\n        break;\n      case \"filter\":\n        break;\n      default:\n        break;\n    }\n  };\n\n  const onSort = (sorter) => {\n    // console.log(\"Table onSort from RT\", sorter);\n    const sortBy = sorter.order\n      ? { key: sorter.field, order: sorter.order === \"ascend\" ? \"asc\" : \"desc\" }\n      : {};\n    setSortBy(sortBy);\n    _loadRows({\n      sortBy: sortBy,\n      filter: _filter,\n      searchLine: _searchValue,\n      reload: true\n    });\n  };\n\n  const _onRowClick = ({ rowData, rowIndex, rowKey }) => {\n    // console.log('onClick', onRowClick, rowData, rowIndex, rowKey)\n    // console.log('onClick', _selectedRowKeys)\n    onTableEventsDispatch(\"onRowClick\", rowData);\n    _rowSelectAfterClick({ rowData, rowIndex, rowKey, onClick: onRowClick });\n  };\n  const _onRowDoubleClick = ({ rowData, rowIndex, rowKey }) => {\n    // console.log('onDoubleClick', onRowDoubleClick, rowData, rowIndex, rowKey);\n    // console.log('actionDoubleClick')\n    onTableEventsDispatch(\"onRowDoubleClick\", rowData);\n    _rowSelectAfterClick({ rowData, rowIndex, rowKey, onClick: onRowDoubleClick });\n  };\n\n  const _rowSelectAfterClick = ({ rowData, rowIndex, rowKey, onClick }) => {\n    const checked = !_selectedRowKeys.includes(rowKey);\n    const newRowObject = {\n      rowData: { ...rowData },\n      rowIndex: rowIndex,\n      rowKey: rowKey\n    };\n    // _setSelectedRowsHandler([rowKey], rowData);\n    // if (!expandColumnKey) {\n    // setSelectedRowKeys([rowKey]);\n    if (selectable) {\n      // console.log('_rowSelectAfterClick ', checked);\n      if (checked && !expandColumnKey)\n        _setSelectedRowsHandler([..._selectedRowKeys, rowKey], undefined, _rows);\n      else {\n        // console.log('_rowSelectAfterClick', _selectedRowKeys.filter(row => row !== rowKey), rowKey);\n        _setSelectedRowsHandler(_selectedRowKeys.filter(row => row !== rowKey), undefined, _rows);\n      }\n\n    } else {\n      if(checked)\n        _setSelectedRowsHandler([rowKey], rowData);\n    }\n    // onSelectedRowsChange([rowKey], [rowData]);\n    console.log('onRowDoubleClick = ', onClick);\n    onClick && onClick({ selected: checked, ...newRowObject });\n  };\n\n  const onHeaderRowProps = () => ({ headerHeight, setHeaderHeight })\n\n  const onRowEvents = (rowData, rowIndex) => {\n    return {\n      onClick: event => _onRowClick({ rowData, rowIndex, rowKey: rowData[rowKey] }), // click row\n      onDoubleClick: event => _onRowDoubleClick({ rowData, rowIndex, rowKey: rowData[rowKey] }), // double click row\n      // onScroll: console.log\n      // onContextMenu: event => {}, // right button click row\n      // onMouseEnter: event => {}, // mouse enter row\n      // onMouseLeave: event => {}, // mouse leave row\n    };\n  };\n\n\n  const onResizeHandler = (index) => ({ key }, width) => {\n    // console.log('handleResize index ', index, width)\n    _setColumns((columns) => {\n      const nextColumns = [...columns];\n      nextColumns[index] = {\n        ...nextColumns[index],\n        width: width\n      };\n      return nextColumns;\n    });\n  };\n\n  /** Utile function\n   * Find row by key\n   * @param data - table rows\n   * @param key - key row for find\n   * @param callback - function for return result\n   */\n  const loop = (data, key, callback) => {\n    for (let i = 0; i < data.length; i++) {\n      if (data[i][rowKey] === key) {\n        // console.log(`Selected => index: [${i}], path: [${data[i].path}]`, data);\n        return callback(data[i], i, data);\n      } else {\n        // console.log(`Other => index: [${i}], path: [${data[i].path}]`);\n      }\n      if (data[i].children) {\n        loop(data[i].children, key, callback);\n      }\n    }\n  };\n\n  /** ROW CHANGE FUNCTIONS */\n  const _addRows = (rows) => {\n    let saveRows = [...rows];\n    if(!expandColumnKey)\n      saveRows = saveRows.map(row => { row.children = undefined; return row; });\n    if (customFields) {\n      // Фильтрация по пользовательским параметрам\n      saveRows = saveRows.filter((sRow) => {\n        let isValid = [];\n        customFields.forEach((field) => {\n          // Валидация по пользовательской логике функции validate\n          if (field.validate)\n            isValid.push(field.validate(sRow, _rows));\n\n          // Создание или переобразование по пользовательской логике функции value\n          if (field.value)\n            sRow[field.name] = field.value(sRow, _rows);\n        });\n        // console.log(\"_addRows isValid\", isValid);\n        if (!isValid.includes(false))\n          return sRow;\n      });\n    }\n    const _localRows = [..._rows, ...saveRows];\n    _setRowsHandler(_localRows);\n    onTableEventsDispatch(\"onAddRows\", _localRows);\n  };\n\n  const _addRow = (row) => {\n    let _row = { ...row };\n    if(!expandColumnKey)\n      _row.children = undefined;\n    let isValid = true;\n    if (customFields) {\n      let validations = [];\n      customFields.forEach((field) => {\n        if (field.validate)\n          validations.push(field.validate(_row, _rows));\n\n        if (field.value)\n          _row[field.name] = field.value(_row, _rows);\n      });\n      isValid = !validations.includes(false);\n    }\n    if (isValid) {\n      const _localRows = [..._rows, _row];\n      _setRowsHandler(_localRows);\n      onTableEventsDispatch(\"onAddRow\", _localRows);\n    }\n  };\n\n  const _addRowAsCopy = () => {\n    // console.log(\"_onClickAddAsCopy\", selectedRow);\n    const _localRows = [..._rows, findNodeByRowKey(_rows, rowKey, _selectedRowKeys[0])];\n    _setRowsHandler(_localRows);\n    onTableEventsDispatch(\"onAddRowAsCopy\", _localRows);\n\n  };\n\n  const _editRow = (row) => {\n    // console.log(\"_onClickEdit\", selectedRow);\n    const data = [..._rows];\n    const key = row[rowKey];\n    loop(data, key, (item, index, arr) => {\n      data[index] = row;\n      _setRowsHandler(data);\n      _setSelectedRowsHandler(_selectedRowKeys, undefined, data);\n      onTableEventsDispatch(\"onEditRow\", data);\n    });\n  };\n\n  const _removeRow = (event) => {\n    // console.log(\"_onClickDelete\", autoDeleteRows, selectedRowKeys);\n    const _localRows = _rows.filter(\n      (item) => !_selectedRowKeys.includes(item[rowKey]));\n    _setRowsHandler(_localRows);\n    _setSelectedRowsHandler();\n    onTableEventsDispatch(\"onRemoveRow\", _localRows);\n  };\n\n  const _moveUpSelectedRow = () => {\n    _moveUpRowByKey(_selectedRowKeys[0])\n  }\n\n  const _moveUpRowByKey = (rowKey) => {\n    const data = [..._rows];\n    loop(data, rowKey, (item, index, arr) => {\n      const newRowIndex = _getNewIndexRow(index, index - 1);\n      _changeIndexRow(index, newRowIndex, arr, data, \"onMoveUpRow\");\n    });\n  };\n\n  const _moveDownSelectedRow = () => {\n    _moveDownRowByKey(_selectedRowKeys[0])\n  }\n\n  const _moveDownRowByKey = (rowKey) => {\n    const data = [..._rows];\n    loop(data, rowKey, (item, index, arr) => {\n      const newRowIndex = _getNewIndexRow(index, index + 1);\n      _changeIndexRow(index, newRowIndex, arr, data, \"onMoveDownRow\");\n    });\n  };\n\n  const _getNewIndexRow = (oldIndex, newIndex) =>\n    newIndex >= 0 && newIndex < _rows.length ? newIndex : oldIndex;\n\n  const _changeIndexRow = (oldIndex, newIndex, arr, data, nameEvent) => {\n    if (newIndex >= 0 && newIndex < arr.length) {\n      // let arr = [..._rows]; // Копируем массив\n      const item = arr.splice(oldIndex, 1); // Удаляем элемент со старого места\n      // console.log('_changeIndexRow => ',item);\n      arr.splice(newIndex > 0 ? newIndex : 0, 0, item[0]); // Ставим элемент на новое место\n      // console.log(\"_changeIndexRow\", item[0]);\n      _setRowsHandler(data);\n      onTableEventsDispatch(nameEvent, data);\n    }\n  };\n\n  /** TREE FUNCTIONS */\n  const _onExpandedRowsChange = (expandedRowKeys) => {\n    setExpandedRowKeys(expandedRowKeys);\n    onExpandedRowsChange(expandedRowKeys);\n  };\n\n  /** SELECTABLE FUNCTIONS */\n  const onChangeSelectedHandler = (selectedRowKeys, selectedRows) => {\n    // console.log(\"onChangeSelectedHandler\");\n    _setSelectedRowsHandler(selectedRowKeys, selectedRows);\n  };\n\n  const onSelectAllHandler = (selected, selectedRows, changeRows) => {\n    // console.log(\"onSelectAllHandler\");\n    const selectedKeys = selected ? selectedRows.map(row => row[rowKey]) : [];\n    _setSelectedRowsHandler(selectedKeys, selectedRows);\n  };\n\n  /** VIEW FUNCTIONS */\n  const _rowClassName = (rowData, rowIndex) => {\n    // const {rowClassName} = props;\n    return [\n      // rowClassName,\n      _selectedRowKeys.includes(rowData[rowKey]) && \"ant-table-row-selected\", //\n      zebraStyle ? (rowIndex % 2 === 0 ? \"even\" : \"odd\") : \"\"\n      // rowBordered ? 'bordered' : ''\n    ].join(\" \");\n  };\n\n  const ExpandIcon = ({ Icon, ...restProps }) =>\n    <span {...restProps} className={`${rtPrefix}-table-expand-icon`}><Icon /></span>;\n\n  const expandIconRender = ({ expanded, onExpand, record }) =>\n    record.children && record.children.length === 0\n      ? <ExpandIcon Icon={CaretUpOutlined} style={{ visibility: \"hidden\" }} />\n      : expanded\n      ? <ExpandIcon Icon={CaretDownOutlined} onClick={e => onExpand(record, e)} />\n      : <ExpandIcon Icon={CaretRightOutlined} onClick={e => onExpand(record, e)} />;\n\n  const _footer = (currentPageData) => {\n    // console.log('_footer => ', currentPageData);\n    return (\n      _footerShow ? (\n        <React.Fragment>\n          {/*className={'BaseTable__footer__counter'}>*/}\n          <div key={\"footer-left-custom-side\"} className={`${rtPrefix}-footer-left-custom-side`}>\n            {footerProps.leftCustomSideElement\n              ? Array.isArray(footerProps.leftCustomSideElement)\n                ? <FormItems items={footerProps.leftCustomSideElement} />\n                : <footerProps.leftCustomSideElement />\n              : null}\n          </div>\n          <div key={\"footer-center-custom-side\"} className={`${rtPrefix}-footer-center-custom-side`}>\n            {footerProps.centerCustomSideElement\n              ? Array.isArray(footerProps.centerCustomSideElement)\n                ? <FormItems items={footerProps.centerCustomSideElement} />\n                : <footerProps.centerCustomSideElement />\n              : null}\n          </div>\n          <div key={\"footer-right-custom-side\"} className={`${rtPrefix}-footer-right-custom-side`}>\n            {footerProps.rightCustomSideElement\n              ? Array.isArray(footerProps.rightCustomSideElement)\n                ? <FormItems items={footerProps.rightCustomSideElement} />\n                : <footerProps.rightCustomSideElement />\n              : null}\n          </div>\n          <div className={`${rtPrefix}-footer-right-system-side`}>\n            <Space>\n              {selectable ? (\n                <React.Fragment>\n                  {footerProps.showElements.includes(\"selected\")\n                    ? <span>{footerProps.selectedTitle} {_selectedRowKeys.length}</span>\n                    : null}\n                  {footerProps.showElements.includes(\"loaded\")\n                    ? <span>{footerProps.loadedTitle} {flatten(getTableRowKeys(_rows, rowKey)).length}</span>\n                    : null}\n                </React.Fragment>\n              ) : null}\n\n              {footerProps.showElements.includes(\"total\")\n                ? requestLoadCount !== noop && !expandColumnKey\n                  ? <span>{footerProps.totalTitle} {_totalCountRows}</span>\n                  : <span>{footerProps.totalTitle} {flatten(getTableRowKeys(_rows, rowKey)).length}</span>\n                : null}\n            </Space>\n          </div>\n        </React.Fragment>\n      ) : undefined\n    );\n  };\n\n  const getColumns = () => {\n    return _columns.map((col, index) => ({\n      ...col,\n      onHeaderCell: (column) =>\n        ({\n          column,\n          // resizable: column.resizable,\n          // width: column.width,\n          onResize: onResizeHandler(index)\n        })\n    }));\n  };\n\n  const restProps = getObjectExcludedProps(props, excludeProps);\n  const expandableProps = expandColumnKey\n    ? {\n      defaultExpandAllRows: expandDefaultAll,\n      expandIcon: expandIconRender,\n      ...expandable,\n      expandedRowKeys: _expandedRowKeys,\n      onExpandedRowsChange: _onExpandedRowsChange\n    } : {};\n\n  const rowSelectionProps = selectable\n    ? {\n      type: \"checkbox\",\n      fixed: true,\n      checkStrictly: !nodeAssociated,\n      selectedRowKeys: _selectedRowKeys,\n      onChange: onChangeSelectedHandler,\n      onSelectAll: onSelectAllHandler,\n      ...rowSelection\n    } : undefined;\n\n  return (\n    <div className={`${rtPrefix}-table ${className}`} style={style}>\n      <div className={`${rtPrefix}-baseTable`}>\n        <AutoResizer\n          // onResize={({ height, width }) => {setHeight(height); setWidth(width)} }\n        >\n          {({ height, width }) => (\n            <div style={{ width: width, height: height }}>\n              <AntTable\n                {...restProps}\n\n                /** Required */\n                columns={getColumns()}\n                dataSource={_rows}\n                // scroll={{ x: width, y: height - headerHeight }}\n                scroll={{ y: height - headerHeight }}\n                pagination={{ position: [\"none\", \"none\"], ...restProps.pagination, pageSize: _rows.length }}\n\n                /** Base Props */\n                loading={loading}\n\n                /** Tree Props */\n                expandable={{ ...expandableProps }}\n                /** Selection Props */\n                rowSelection={rowSelectionProps}\n\n                /** View Props */\n                rowClassName={_rowClassName}\n                footer={_footerShow ? _footer : undefined}\n                components={{\n\n                  header: {\n                    row: HeaderRow,\n                    cell: HeaderCell\n                  },\n                  body: {\n                    cell: BodyCell,\n                  }\n                }}\n\n                /** Events */\n                onChange={onChangeTable}\n                onHeaderRow={onHeaderRowProps}\n                onRow={onRowEvents}\n              />\n            </div>\n          )}\n        </AutoResizer>\n      </div>\n    </div>\n  );\n};\n\nTable.propTypes = {\n  /**\n   * REQUIRED\n   * */\n\n  /** Столбцы таблицы */\n  columns: PropTypes.arrayOf(PropTypes.object).isRequired,\n\n  /** Режим загрузки данных по скроллу */\n  infinityMode: PropTypes.bool,\n\n  /**\n   * ПРОПСЫ ЗАДАНИЯ ЗНАЧЕНИЙ ПО УМОЛЧАНИЮ\n   * */\n\n  /** Строки по умолчанию */\n  defaultRows: PropTypes.arrayOf(PropTypes.object),\n\n  /** Ключи выделенных по умолчанию строк */\n  defaultSelectedRowKeys: PropTypes.arrayOf(\n    PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n  ),\n\n  /** Значение строки поиска по умолчанию строк */\n  defaultSearchValue: PropTypes.string,\n\n  /** Объект фильтрации по умолчанию */\n  defaultFilter: PropTypes.object,\n\n  /** Сортировка по умолчанию */\n  defaultSortBy: PropTypes.shape({\n    /** Ключ поля для сортировки */\n    key: PropTypes.string,\n    /** Направление сортировки */\n    order: PropTypes.oneOf([\"asc\", \"desc\"])\n  }),\n\n  /**\n   * ПРОПРЫ ДЛЯ ВНЕШНЕГО КОНТРОЛЯ ТАБЛИЦЫ\n   * */\n\n  /** Строки таблицы. Используется для контроля таблицы из вне. */\n  rows: PropTypes.arrayOf(PropTypes.object),\n\n  /** Функция задания строк таблицы. */\n  setRows: PropTypes.func,\n\n  /** Выделенные строки таблицы. */\n  selectedRowKeys: PropTypes.arrayOf(\n    PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n  ),\n\n  /** Значение строки поиска */\n  searchValue: PropTypes.string,\n\n  /** Объект фильтрации */\n  filter: PropTypes.object,\n\n  /** Объект сортировки */\n  sortBy: PropTypes.shape({\n    /** Ключ поля для сортировки */\n    key: PropTypes.string,\n    /** Направление сортировки */\n    order: PropTypes.oneOf([\"asc\", \"desc\"])\n  }),\n\n  /**\n   * BASE PROPS\n   * */\n\n  /** Поле для уникальной идентификации строки */\n  rowKey: PropTypes.string,\n\n\n  /** Дополнительные поля и валидация в объекты таблицы\n   * Данный параметр (props) осуществляет дополнительную обработку объекта таблицы после закрытия модалки, но перед добавлением в таблицу.\n   * Можно как изменить существующие поля объекта, так и добавить новые поля объекта.\n   * `customFields` - массив объектов для дополнения или изменения полей объектов таблицы\n   * ```json\n   * [\n   *  {\n   * \t\tname: <String>,\n   * \t\tvalue: <func>,\n   * \t\tvalidate: <func>\n   * \t}\n   * ]\n   * ```\n   * `name` – Имя параметра в объекте\n   * `value` – Функция формирования значения - `(row, rows) => { return {} }`\n   * `validate` – Функция проверки значения - `(row, rows) => { return <Bool> }`\n   * Параметра **validate** работает **только** для модельного окна тип `select`.\n   * Validate можно наложить на любое кол-во полей объекта и если хотя бы один `validate` === `false`, то исключает строку из добавления.\n   */\n  customFields: PropTypes.arrayOf(PropTypes.object),\n\n  /**\n   * Данный параметр (props) позволяет добавить или переопределить пропсы для колонок, которые заданы конфигурацией на сервере\n   * `customColumnProps` - массив объектов `props` к `columns`. Один объект описывает доп. параметры для одной колонки\n   * ```json\n   * [\n   *  {\n   * \t\tname: <String>,\n   * \t\tcellRenderer: <func>,\n   * \t\t...advancedColProps\n   * \t}\n   * ]\n   * ```\n   * `name` – key колонки к которой надо применить дополнительные пропсы\n   * `cellRenderer` – `({ cellData, columns, column, columnIndex, rowData, rowIndex, container, isScrolling }) => return <ReactNode>`\n   * `advancedColProps` – подолнительные свойства колонок тут -> [Column](https://autodesk.github.io/react-base-table/api/column)\n   */\n  customColumnProps: PropTypes.arrayOf(PropTypes.object),\n\n  /**\n   * VIEW PROPS\n   * */\n\n  /** Вывод когда нет данных */\n  empty: PropTypes.element,\n\n  /** Отображение загрузки данных */\n  overlay: PropTypes.element,\n\n  /** Фиксированная ширина столбцов. Появится боковой скрол */\n  fixWidthColumn: PropTypes.bool,\n\n  footerProps: PropTypes.shape({\n\n    /** Высота подвала */\n    height: PropTypes.number,\n\n    /** Массив элементов футтера, которые надо отобразить\n     * ['selected', 'loaded', 'total'] */\n    showElements: PropTypes.arrayOf(PropTypes.string),\n\n    /** Заколовок для кол-ва выбранных объектов */\n    selectedTitle: PropTypes.string,\n\n    /** Заколовок для кол-ва загруженны объектов */\n    loadedTitle: PropTypes.string,\n\n    /** Заколовок для кол-ва всего объектов */\n    totalTitle: PropTypes.string,\n\n    /** Левый кастомный элемент командной панели */\n    leftCustomSideElement: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.object)]),\n\n    /** Центральный кастомный элемент командной панели */\n    centerCustomSideElement: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.object)]),\n\n    /** Правый кастомный элемент командной панели */\n    rightCustomSideElement: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.object)])\n  }),\n\n  /** Высота заголовка таблицы */\n  headerHeight: PropTypes.number,\n\n  /** Высота строки таблицы */\n  rowHeight: PropTypes.number,\n\n  /** Custom row renderer\n   * Параметры - `({ isScrolling, cells, columns, rowData, rowIndex, depth })` */\n  rowRenderer: PropTypes.oneOfType([PropTypes.func, PropTypes.element]),\n\n  /** Строки будут в зебро-стиле */\n  zebraStyle: PropTypes.bool,\n\n  /** Высота расширения */\n  estimatedRowHeight: PropTypes.number,\n\n  /** Отображать ли разделители ячеек в строке */\n  cellBordered: PropTypes.bool,\n\n  /** Отобрадать ли разделители строк */\n  rowBordered: PropTypes.bool,\n\n  /**\n   * LOAD DATA PROPS\n   * */\n\n  /** Порог в пикселях для вызова _onLoad.\n   * Кол-во пикселей от низа таблицы для срабатывания события загрузки (onEndReached) */\n  loadThreshold: PropTypes.number,\n\n  /** Размер страницы */\n  pageSize: PropTypes.number,\n\n  /** Функция запроса для конфигурации */\n  requestLoadConfig: PropTypes.func,\n\n  /** Функция запроса для загрузки строк (данных) */\n  requestLoadRows: PropTypes.func,\n\n  /** Функция запроса для загрузки строк (данных) */\n  requestLoadCount: PropTypes.func,\n\n  /** Имя параметра для поиска */\n  searchParamName: PropTypes.string,\n\n  /**\n   * SELECTABLE PROPS\n   * */\n\n  /** Таблица с возможностью выбора строки */\n  selectable: PropTypes.bool,\n\n  /**\n   * TREE PROPS\n   * */\n\n  /** Родительский узел и дочерние узлы связаны (Работает только при `selectable`) */\n  nodeAssociated: PropTypes.bool,\n\n  /** Ключ колонки по которой строить иерархию */\n  expandColumnKey: PropTypes.string,\n\n  /** Открыть по умолчанию вложенность до уровня N или 'All' */\n  expandDefaultAll: PropTypes.bool,\n\n  /** Загружать ноды иерархии по одной */\n  expandLazyLoad: PropTypes.bool,\n\n  /** Поле в котором хранится ссылка на родителя */\n  expandParentKey: PropTypes.string,\n\n  /**\n   * EVENTS\n   * */\n\n  /** Событие при клике на строку (только при `selectable` = `false`)\n   * `({selected, rowData, rowIndex}) => {}` */\n  onRowClick: PropTypes.func,\n\n  /** Событие при двойном клике на строку.\n   * `({rowData, rowIndex, rowKey}) => {}` */\n  onRowDoubleClick: PropTypes.func,\n\n  /** События при открытии / закрытии ноды\n   * `({ expanded, rowData, rowIndex, rowKey }) => {}` */\n  onRowExpand: PropTypes.func,\n\n  /** Событие при выборе строки.\n   * `([rowKeys], [rowDatas]) => {}` */\n  onSelectedRowsChange: PropTypes.func,\n\n  /** События при открытии / закрытии ноды\n   * `(expandedRowKeys) => {}` - массив ключей открытых нод */\n  onExpandedRowsChange: PropTypes.func,\n\n  /** SELECTED PANEL */\n\n  /** Отображать ли панель выбранных элементов */\n  showSelection: PropTypes.bool,\n\n  /** Строка или функция для отображения элементов списка выбранных\n   * Строка - имя поля\n   * Функция - рендер строк.\n   * `({ rowData, rowIndex }) => { return <Component> }` */\n  rowRenderShowSelection: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.string\n  ]),\n\n  /** Путь в сторе куда класть выбранную строку таблицы */\n  dispatchPath: PropTypes.string,\n\n  /** Объект для подписки на изменения в STORE */\n  subscribe: PropTypes.arrayOf(PropTypes.object)\n};\n\n\nTable.defaultProps = {\n  size: \"small\",\n  bordered: true,\n  infinityMode: false,\n  editMode: false,\n  defaultRows: [],\n  defaultSelectedRowKeys: [],\n  defaultSearchValue: \"\",\n  defaultFilter: {},\n  defaultSortBy: {},\n\n  rows: [],\n  setRows: noop,\n  selectedRowKeys: [],\n  searchValue: \"\",\n  filter: {},\n  sortBy: {},\n\n  rowKey: \"id\",\n\n  empty: empty,\n  overlay: overlay,\n  fixWidthColumn: false,\n  footerProps: {\n    height: 30,\n    showElements: [],\n    selectedTitle: \"Выделено:\",\n    loadedTitle: \"Загружено записей:\",\n    totalTitle: \"Всего записей:\",\n    leftCustomSideElement: null,\n    centerCustomSideElement: null,\n    rightCustomSideElement: null\n  },\n  headerHeight: 30,\n  rowHeight: 30,\n  zebraStyle: false,\n  estimatedRowHeight: undefined,\n  cellBordered: false,\n  rowBordered: true,\n  className: \"\",\n  style: {},\n\n  loadThreshold: 300,\n  pageSize: 50,\n  requestLoadRows: undefined,\n  requestLoadCount: noop,\n  searchParamName: \"searchLine\",\n\n  selectable: false,\n\n  nodeAssociated: true,\n  expandColumnKey: undefined,\n  expandDefaultAll: true,\n  expandLazyLoad: false,\n  expandParentKey: \"parentId\",\n\n  onRowClick: noop,\n  onRowDoubleClick: noop,\n  onRowExpand: noop,\n  onSelectedRowsChange: noop,\n  onExpandedRowsChange: noop,\n\n  showSelection: false,\n\n  dispatchPath: undefined,\n  subscribe: []\n};\n\nconst mapStateToProps = (store, ownProps) => {\n  const { subscribe } = ownProps;\n  let state = {};\n  if (subscribe && subscribe.length > 0) {\n    subscribe.forEach(item => {\n      const { name, path, extraData } = item;\n      if (name && path)\n        state[name] = objectPath.get(store, path);\n      if (name && extraData){\n        if(typeof extraData === 'object')\n          Object.keys(extraData).forEach( (key) => state[`${name}.extraData.${key}`] = objectPath.get(store, extraData[key]) );\n        else\n          state[`${name}ExtraData`] = objectPath.get(store, extraData);\n      }\n    });\n  }\n  return state;\n};\nconst mapDispatchToProps = (dispatch) =>\n  bindActionCreators({ setDateStore: setDateStore }, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })(Table);\n\n","import React, { useEffect, useState } from \"react\";\nimport { getSortBy, noop, notificationError } from \"../../utils/baseUtils\";\nimport Table from \"./Table\";\n\nconst defaultProps = {\n    defaultFilter: {},\n    rowKey: \"id\",\n    pageSize: 50,\n    requestLoadConfig: noop,\n    expandColumnKey: undefined,\n    expandLazyLoad: false,\n    expandParentKey: \"parentId\",\n    customColumnProps: []\n};\n\nconst ConfigLoader = props => {\n\n    /** Конфигурация таблицы */\n    const [tableConfig, setTableConfig] = useState(undefined);\n\n    const {\n        defaultFilter,\n        defaultSortBy,\n        rowKey,\n        pageSize,\n        requestLoadConfig,\n        expandColumnKey,\n        // expandLazyLoad,\n        expandParentKey,\n        customColumnProps,\n        // cellBordered,\n        fixWidthColumn,\n        selectable\n    } = { ...defaultProps, ...props };\n\n    useEffect(() => {\n        let cleanupFunction = false;\n        const loadData = async () => {\n            if (requestLoadConfig) {\n                // console.log(\"requestLoadConfig => \", typeof requestLoadConfig);\n                // console.log(\"requestLoadRows => \", typeof props.requestLoadRows);\n                requestLoadConfig()\n                    .then((response) => {\n                        // let result = response.data;\n                        // console.log('requestLoadConfig -> ', response.data);\n                        if (!cleanupFunction) {\n                            // setTableConfig(response.data);\n                            configParser(response.data);\n                        }\n                    })\n                    .catch(error => notificationError(error, \"Ошибка получения конфигурации\"));\n            }\n        };\n        loadData().then(r => r);\n        return () => cleanupFunction = true;\n    }, [props]);\n\n    const configParser = (config) => {\n\n        // Массив колонок\n        let _columns = [];\n        // Сортировка по умолчанию\n        let _defaultSorter = [];\n        // Счетчик видимых полей\n        let visibleIndex = 0;\n        // Индекс колонки около которой ставить иконку дерева\n        let expandIconColumnIndex = -1;\n        // Ключ иерархии\n        let _expandColumnKey = config && config.hierarchical && config.hierarchyView\n            ? config.hierarchyView\n            : expandColumnKey;\n\n        config && config.fields && config.fields.forEach((item, index) => {\n            // console.log('configParser item => ', item);\n\n            // Дополнительные props колонок\n            const colProps = customColumnProps &&\n                customColumnProps.find((render) =>\n                    render.name === item.name || render.name === item.alias);\n\n            // Если поле не надо показывать, то след цикл\n            if (!item.visible || (colProps && colProps.hidden))\n                return;\n\n            // Индекс или имя поля в данных\n            const dataIndex = (item.alias ? item.alias : item.name);\n            // Сортировка по умолчанию\n            if (_defaultSorter.length === 0 || _defaultSorter[1] === undefined)\n                _defaultSorter = getSortBy(defaultSortBy, item.defaultSort, dataIndex);\n\n            // Ширина колонок\n            const widthCol = fixWidthColumn ? { width: item.width, maxWidth: 1000 } : {};\n            // Увеличить счетчик видимых полей\n            visibleIndex++;\n            // Проверка у этого ли поля ставить иконку дерева\n            if (_expandColumnKey === dataIndex)\n                expandIconColumnIndex = visibleIndex + (selectable ? 1 : -1);\n            // Формирование title колонки\n            let titleNode = colProps && colProps.headerRenderer\n                ? (typeof colProps.headerRenderer === \"function\" ? colProps.headerRenderer() : colProps.headerRenderer)\n                : (item.header ? item.header : item.name);\n\n            const column = {\n                key: dataIndex,\n                title: titleNode,\n                dataIndex: dataIndex,\n                align: item.align,\n                resizable: item.resizable,\n                sorter: item.sortable ? item.sortable : undefined,\n                ellipsis: true,\n                defaultSortOrder: _defaultSorter[1],\n                ...widthCol,\n                ...colProps\n            };\n            // Дополнительные props для компонента ячейки\n            column.onCell = (rowData, rowIndex) => ({ column, rowData, rowIndex });\n            // Рендер ячейки\n            column.render = (cellData, rowData, rowIndex) => {\n                if (colProps && colProps.cellRenderer)\n                    return <colProps.cellRenderer\n                        column={column}\n                        cellData={cellData}\n                        rowData={rowData}\n                        rowIndex={rowIndex} />;\n                else\n                    return item.typeData === \"json\" ? JSON.stringify(cellData) : cellData ? cellData : \"---\";\n            };\n            _columns.push(column);\n        });\n\n        let _defaultFilter;\n        if (config && config.hierarchical && config.hierarchyLazyLoad) {\n            const parentKey = config.hierarchyField\n                ? config.hierarchyField.split(\"/\")[1]\n                : expandParentKey;\n            _defaultFilter = { ...defaultFilter, [parentKey]: null };\n        } else _defaultFilter = defaultFilter;\n\n        // console.log('expandIconColumnIndex => ', _expandColumnKey, expandIconColumnIndex);\n        setTableConfig({\n            columns: _columns,\n            defaultSortBy: _defaultSorter[0],\n            defaultFilter: _defaultFilter,\n            rowKey:\n                config && config.hierarchical && config.hierarchyField\n                    ? config.hierarchyField.split(\"/\")[0]\n                    : rowKey,\n            // expandParentKey:\n            //     config && config.hierarchical && config.hierarchyField\n            //         ? config.hierarchyField.split('/')[1]\n            //         : expandParentKey,\n            expandColumnKey: _expandColumnKey,\n            expandable: { expandIconColumnIndex },\n            // expandLazyLoad:\n            //     config && config.hierarchical && config.hierarchyLazyLoad\n            //         ? config.hierarchyLazyLoad\n            //         : expandLazyLoad,\n            pageSize: config && config.hierarchical ? 1 : pageSize,\n        });\n    };\n\n    if (tableConfig)\n        return (<Table {...props} {...tableConfig} />);\n    else\n        return null;\n};\n\nexport default ConfigLoader;\n","import React, {useEffect, useState} from \"react\";\nimport PropTypes from \"prop-types\";\nimport { notification, Select as AntSelect } from \"antd\";\nimport {\n\tgenerateUUID,\n\tgetObjectExcludedProps,\n\tnotificationError, useMounted\n} from \"../utils/baseUtils\";\n\nimport { CheckOutlined } from '@ant-design/icons';\n\nconst excludeProps = [\n\t'componentType',\n\t'defaultSortBy',\n\t'defaultFilter',\n\t'defaultSearchValue',\n\t'sortBy',\n\t'filter',\n\t'searchValue',\n\t'searchParamName',\n\t'infinityMode',\n\t'requestLoadRows',\n\t'optionConverter',\n\t'options',\n\t'widthControl',\n\t'pageSize'\n];\n\n/** Компонент выбора элемента(ов) из списка */\nconst Select = props => {\n\n\tconst {\n\t\t// Rt Props\n\t\tdefaultSortBy,\n\t\tdefaultFilter,\n\t\tdefaultSearchValue,\n\t\tsortBy,\n\t\tfilter,\n\t\tsearchValue,\n\t\tsearchParamName,\n\t\tlostParamName,\n\t\tinfinityMode,\n\t\trequestLoadRows,\n\t\toptionConverter,\n\t\toptions,\n\t\twidthControl,\n\t\tpageSize,\n\n\t\t// Ant Props\n\t\tmode,\n\t\tonChange,\n\t\tvalue,\n\t} = props;\n\n\t/** Наличие на сервере еще данных */\n\tconst [_hasMore, _setHasMore] = useState(true);\n\t/** Индикатор загрузки данных */\n\tconst [_loading, _setLoading] = useState(false);\n\t/** Опции селекта */\n\tconst [_options, _setOptions] = useState(options);\n\tconst [tmpOption, setTmpOption] = useState({});\n\n\t/** Индикатор достижения низа окна */\n\tconst [isEndReached, setIsEndReached] = useState(false);\n\n\t/** Объект сортировки */\n\tconst [_sortBy, _setSortBy] = useState(undefined);\n\t/** Объект фильтрации */\n\tconst [_filter, _setFilter] = useState({});\n\t/** Строка поиска */\n\tconst [_searchValue, _setSearchValue] = useState(undefined);\n\n\t/** Состояние параметра выбрать все */\n\tconst [_isSelectAll, _setIsSelectAll] = useState(false);\n\n\tconst isMounted = useMounted()\n\n\tuseEffect(() => {\n\t\t_setSearchValue(defaultSearchValue);\n\t\t_loadOptions({\n\t\t\tsortBy: defaultSortBy,\n\t\t\tfilter: defaultFilter,\n\t\t\tsearchValue: defaultSearchValue,\n\t\t\treload: true,\n\t\t});\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif(isMounted) {\n\t\t\t_setRowsHandler(options);\n\t\t}\n\t}, [options]);\n\n\tuseEffect(() => {\n\t\t// console.log(\"Change sortBy, filter, searchValue\", sortBy, filter, searchValue);\n\t\tif(isMounted) {\n\t\t\tconst __sortBy = sortBy ? sortBy : _sortBy;\n\t\t\tconst __filter = filter ? filter : _filter;\n\t\t\tconst __searchValue = searchValue ? searchValue : _searchValue;\n\t\t\t_setSortBy(__sortBy);\n\t\t\t_setFilter(__filter);\n\t\t\t_setSearchValue(__searchValue);\n\t\t\t_loadOptions({\n\t\t\t\tsortBy: __sortBy,\n\t\t\t\tfilter: __filter,\n\t\t\t\tsearchLine: __searchValue,\n\t\t\t\treload: true,\n\t\t\t});\n\t\t}\n\t}, [sortBy, filter, searchValue]);\n\n\tconst _setRowsHandler = (options) => {\n\t\t_setOptions(options);\n\t\t// console.log('Select _setRowsHandler value => ', options)\n\t\tif(mode === 'multiple') {\n\t\t\tif(Array.isArray(value))\n\t\t\t\tif(options.reduce((preValue, item) => value.includes(item.value) ? preValue + 1 : preValue, 0) === options.length)\n\t\t\t\t\t_setIsSelectAll(true);\n\t\t\t\telse\n\t\t\t\t\t_setIsSelectAll(false);\n\t\t\tonChange(value);\n\t\t} else {\n\t\t\tif(options && options.findIndex(option => option.value === value) === -1){\n\t\t\t\t// console.log('Load tmpOption');\n\t\t\t\t_loadTmpOption();\n\t\t\t} else {\n\t\t\t\t// console.log('Clear tmpOption');\n\t\t\t\tsetTmpOption(undefined)\n\t\t\t}\n\t\t}\n\t\t// setRows(rows);\n\t\t// rowsDispatch(rows);\n\t};\n\n\tconst getPageNum = (reload) =>\n\t\treload ? 0 : Math.floor(_options.length / pageSize);\n\n\tconst getSort = (sortBy) =>\n\t\tsortBy && sortBy.key ? sortBy.key + ',' + sortBy.order : null;\n\n\tconst getSearchValue = (searchValue) =>\n\t\tsearchValue ? {[searchParamName]: searchValue} : null\n\n\tconst _loadOptions = (params) => {\n\t\t// console.log('_dataProcessing', params);\n\t\tconst {sortBy, filter, searchValue, reload} = params;\n\t\tif ((_hasMore || reload) && !_loading && requestLoadRows) {\n\t\t\t_setLoading(true);\n\n\t\t\tconst requestOptions = {\n\t\t\t\tparams: {\n\t\t\t\t\tpage: getPageNum(reload),\n\t\t\t\t\tsize: pageSize,\n\t\t\t\t\tsort: getSort(sortBy)\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\t...filter,\n\t\t\t\t\t...getSearchValue(searchValue)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// console.log('dataQuery', dataQuery);\n\n\t\t\trequestLoadRows(requestOptions)\n\t\t\t\t.then((response) => {\n\t\t\t\t\t// console.log(\"infinity then response\", response);\n\t\t\t\t\tconst result = response.data;\n\n\t\t\t\t\tif (result && result.length < pageSize) {\n\t\t\t\t\t\t_setHasMore(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_setHasMore(true);\n\t\t\t\t\t\tsetIsEndReached(false);\n\t\t\t\t\t}\n\t\t\t\t\treload\n\t\t\t\t\t\t? _setRowsHandler(result.map(option => optionConverter(option))) // _setRows\n\t\t\t\t\t\t: _setRowsHandler(_options.concat(result.map(option => optionConverter(option)))); // _setRows\n\n\t\t\t\t\t// console.log('expandDefaultAll ', expandDefaultAll, _expandedRowKeys);\n\n\t\t\t\t\t_setLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tnotificationError(error, 'Ошибка загрузки данных')\n\t\t\t\t\t_setRowsHandler(_options); // _setRows\n\t\t\t\t\t// setHasMore(false);\n\t\t\t\t\t_setLoading(false);\n\t\t\t\t});\n\t\t}\n\t};\n\n\tconst _loadTmpOption = () => {\n\t\tif(requestLoadRows){\n\t\t\trequestLoadRows({params: {}, data: {[lostParamName]: value}})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tif(response.data){\n\t\t\t\t\t\tif(response.data.length === 1){\n\t\t\t\t\t\t\tsetTmpOption(optionConverter(response.data[0]))\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnotification.error({ message: `Ошибка загрузки потерянного элемента` });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tnotificationError(error, 'Ошибка загрузки данных')\n\t\t\t\t\tsetTmpOption(undefined)\n\t\t\t\t});\n\t\t}\n\t}\n\n\tconst onScroll = (event) => {\n\t\tlet scrollTopMax = event.nativeEvent.target.scrollTopMax\n\t\tlet scrollTop = event.nativeEvent.target.scrollTop//.body.scrollTop\n\n\t\tconst onEndReached = scrollTopMax - scrollTop;\n\n\t\tif(onEndReached < 300 && !isEndReached) {\n\t\t\t// console.log('Load Data');\n\t\t\tsetIsEndReached(true);\n\t\t\t_setSearchValue(defaultSearchValue);\n\t\t\tif(infinityMode){\n\t\t\t\t_loadOptions({\n\t\t\t\t\tsortBy: defaultSortBy,\n\t\t\t\t\tfilter: defaultFilter,\n\t\t\t\t\tsearchValue: defaultSearchValue,\n\t\t\t\t\treload: false,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// console.log(\"scrollTopMax / scrollTop\", scrollTopMax, scrollTop, onEndReached);\n\t\t// const lastScrollTop = this._scroll.scrxollTop;\n\t\t// if (args.scrollTop > lastScrollTop) this._maybeCallOnEndReached();\n\t}\n\n\tconst onSearch = (value) => {\n\t\t_setSearchValue(value);\n\t\t_loadOptions({\n\t\t\tsortBy: defaultSortBy,\n\t\t\tfilter: defaultFilter,\n\t\t\tsearchValue: value,\n\t\t\treload: true,\n\t\t});\n\t}\n\n\tconst _onChangeSelectAll = () => {\n\t\t// console.log(`_onChangeSelectAll`, _isSelectAll);\n\t\tif(mode === 'multiple') {\n\t\t\tif (_isSelectAll) {\n\t\t\t\tconst optionsValues = _options.map(item => item.value);\n\t\t\t\tonChange(value.filter(item => !optionsValues.includes(item)));\n\t\t\t\t_setIsSelectAll(false);\n\t\t\t} else {\n\t\t\t\tif (Array.isArray(value) && value.length > 0)\n\t\t\t\t\tonChange([...new Set([...value, ..._options.map(item => item.value)])]);\n\t\t\t\telse\n\t\t\t\t\tonChange([...new Set([..._options.map(item => item.value)])]);\n\t\t\t\t_setIsSelectAll(true);\n\t\t\t}\n\t\t} else\n\t\t\tonChange(undefined);\n\t}\n    const _onChange = (value) => {\n        // console.log(`_onChange selected`, value);\n        if(Array.isArray(value))\n        \tif(_options.reduce((preValue, item) => value.includes(item.value) ? preValue + 1 : preValue, 0) === _options.length)\n        \t\t_setIsSelectAll(true);\n        \telse\n\t\t\t\t_setIsSelectAll(false);\n\n\t\tonChange(value);\n    }\n\n    const getSelectAllCls = () => {\n\t\tlet cls = ['ant-select-item', 'ant-select-item-option', 'ant-select-item-option-select-all'];\n\t\tif(_isSelectAll)\n\t\t\tcls.push('ant-select-item-option-selected');\n\t\treturn cls.join(' ');\n\t}\n\n\tconst childProps = getObjectExcludedProps(props, excludeProps);\n    return (\n\t\t<AntSelect\n\t\t\tshowArrow={true}\n\t\t\tshowSearch={true}\n\t\t\tallowClear={true}\n\t\t\tfilterOption={false}\n\t\t\tautoClearSearchValue={true}\n\n\t\t\t{...childProps}\n\n\t\t\tsearchValue={_searchValue}\n\t\t\tstyle={{ width: widthControl }}\n\t\t\t// listHeight={heightPopup}\n\t\t\t// defaultValue={['a10', 'c12']}\n\t\t\tonChange={_onChange}\n\t\t\tmaxTagCount={0}\n\t\t\tmaxTagPlaceholder={(omittedValues) => `Выбрано: ${omittedValues.length}`}\n\t\t\t// dropdownMatchSelectWidth={200}\n\t\t\t// listItemHeight={10} listHeight={250}\n\t\t\tonPopupScroll={onScroll}\n\t\t\tonSearch={onSearch}\n\t\t\tdropdownRender={menu => (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t{mode === 'multiple' ?\n\t\t\t\t\t\t<div className={getSelectAllCls()} onClick={_onChangeSelectAll}>\n\t\t\t\t\t\t\t<div className=\"ant-select-item-option-content\">\n\t\t\t\t\t\t\t\t<span>Выбрать все</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{_isSelectAll ?\n\t\t\t\t\t\t\t\t<span className=\"ant-select-item-option-state\"><CheckOutlined/></span> : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t{menu}\n\t\t\t\t</React.Fragment>\n\t\t\t)}\n\t\t>\n    \t\t{_options && _options.map(({ label, value, className, disabled }, i) =>\n\t\t\t\t<AntSelect.Option key={i.toString(36) + i} value={value} className={className} disabled={disabled}>{label}</AntSelect.Option>)}\n\t\t\t{tmpOption &&\n\t\t\t\t<AntSelect.Option key={generateUUID()} value={tmpOption.value} className={tmpOption.className} disabled={tmpOption.disabled}>{tmpOption.label}</AntSelect.Option>}\n    \t</AntSelect>\n    );\n};\n\nSelect.propTypes = {\n\t/** Сортировка по умолчанию */\n\tdefaultSortBy: PropTypes.shape({\n\t\t/** Ключ поля для сортировки */\n\t\tkey: PropTypes.string,\n\t\t/** Направление сортировки */\n\t\torder: PropTypes.oneOf(['asc', 'desc']),\n\t}),\n\n\t/** Объект фильтрации по умолчанию */\n\tdefaultFilter: PropTypes.object,\n\n\t/** Значение строки поиска по умолчанию строк */\n\tdefaultSearchValue: PropTypes.string,\n\n\t/** Сортировка */\n\tsortBy: PropTypes.object,\n\n\t/** Фильтр */\n\tfilter: PropTypes.object,\n\n\t/** Значение строки поиска */\n\tsearchValue: PropTypes.string,\n\n\t/** Имя параметра для поиска */\n\tsearchParamName: PropTypes.string,\n\n\tlostParamName: PropTypes.string,\n\n\t/** Режим загружки по скроллу */\n\tinfinityMode: PropTypes.bool,\n\n\t/** Функция запроса для загрузки строк (данных) */\n\trequestLoadRows: PropTypes.func,\n\n\t/** Функция преобразования загруженных объектов в объекты для селекта.\n\t * Сигнатура `(option) => ({})`\n\t * Требоваеть вернуть объект с параметрам\n\t * `{ label: ReactNode, value: any, className: string, disabled: bool }`\n\t * ##### Example:\n\t * ``` JS\n\t * (option) => ({\n\t * \tlabel: (<span><MehOutlined />{option.name}</span>),\n\t * \tvalue: option.id,\n\t * \tclassName: 'some-class',\n\t * \tdisabled: false,\n\t * })\n\t * ```\n\t */\n\toptionConverter: PropTypes.func,\n\n\t/** Select options `[{ label, value, className, disabled }]` */\n\toptions: PropTypes.arrayOf(PropTypes.object),\n\n\t/** Ширина поля выбора в пикселях */\n\twidthControl: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n\n\t/** Размер страницы */\n\tpageSize: PropTypes.number,\n};\n\nSelect.defaultProps = {\n\t// Rt Props\n\tdefaultSortBy: undefined,\n\tdefaultFilter: {},\n\tdefaultSearchValue: undefined,\n\tinfinityMode: false,\n\trequestLoadRows: undefined,\n\toptions: [],\n\twidthControl: '100%',\n\tpageSize: 50,\n\tsearchParamName: 'name',\n\tlostParamName: 'id',\n}\n\nexport default Select;\n","import React, {useEffect, useState} from \"react\";\nimport PropTypes from \"prop-types\";\nimport { TreeSelect as AntTreeSelect } from \"antd\";\nimport { getObjectExcludedProps, notificationError, useMounted } from \"../utils/baseUtils\";\n\nconst excludeProps = [\n    'componentType',\n    'defaultSortBy',\n    'defaultFilter',\n    'defaultSearchValue',\n    'sortBy',\n    'filter',\n    'searchValue',\n    'searchParamName',\n    'requestLoadRows',\n    'optionConverter',\n    'treeData'\n];\n\n/** Компонент выбора элемента(ов) из древовидного списка */\nconst TreeSelect = props => {\n\n    const {\n        // Rt Props\n        defaultSortBy,\n        defaultFilter,\n        defaultSearchValue,\n        sortBy,\n        filter,\n        searchValue,\n        searchParamName,\n        requestLoadRows,\n        optionConverter,\n        treeData,\n    } = props;\n    /** Индикатор загрузки данных */\n    const [_loading, _setLoading] = useState(false);\n    /** Опции селекта */\n    const [_treeData, _setTreeData] = useState(treeData);\n    /** Строка поиска */\n    const [_searchValue, _setSearchValue] = useState(undefined);\n\n    const isMounted = useMounted()\n\n    useEffect(() => {\n        _setSearchValue(defaultSearchValue);\n        _loadOptions({\n            sortBy: defaultSortBy,\n            filter: defaultFilter,\n            searchValue: defaultSearchValue,\n            reload: true,\n        });\n    }, []);\n\n    useEffect(() => {\n        // console.log(\"Change sortBy, filter, searchValue\", sortBy, filter, searchValue);\n        if(isMounted) {\n            _setSearchValue(searchValue);\n            _loadOptions({\n                sortBy: sortBy,\n                filter: filter,\n                searchLine: searchValue,\n                reload: true,\n            });\n        }\n    }, [sortBy, filter, searchValue]);\n\n    const onSearch = (value) => {\n        // console.log('TreeSelect onSearch => ', value);\n        _setSearchValue(value);\n        _loadOptions({\n            sortBy: defaultSortBy,\n            filter: defaultFilter,\n            searchValue: value,\n            reload: true,\n        });\n    }\n\n    const getSort = (sortBy) =>\n        sortBy && sortBy.key ? sortBy.key + ',' + sortBy.order : null;\n\n    const getSearchValue = (searchValue) =>\n        searchValue ? {[searchParamName]: searchValue} : null\n\n    const _optionConverter = (options) => {\n        if(Array.isArray(options))\n            return options.map(option => {\n                if(option.children && Array.isArray(option.children))\n                    option.children = _optionConverter(option.children)\n                return optionConverter(option)\n            })\n    }\n\n    const _loadOptions = (params) => {\n        const {sortBy, filter, searchValue} = params;\n        if (!_loading && requestLoadRows) {\n            _setLoading(true);\n            const requestOptions = {\n                params: {\n                    page: 0,\n                    size: 1,\n                    sort: getSort(sortBy)\n                },\n                data: {\n                    ...filter,\n                    ...getSearchValue(searchValue)\n                }\n            }\n            requestLoadRows(requestOptions)\n                .then((response) => {\n                    // console.log(\"infinity then response\", response);\n                    const result = response.data;\n                    _setTreeData(_optionConverter(result))\n                    _setLoading(false);\n                })\n                .catch((error) => {\n                    notificationError(error, 'Ошибка загрузки данных')\n                    // _setRowsHandler(_options); // _setRows\n                    // setHasMore(false);\n                    _setLoading(false);\n                });\n        }\n    }\n\n    const childProps = getObjectExcludedProps(props, excludeProps);\n    return (\n        <AntTreeSelect\n            showArrow={true}\n            showSearch={true}\n            allowClear={true}\n            filterTreeNode={false}\n            autoClearSearchValue={true}\n            treeDefaultExpandAll={true}\n\n            {...childProps}\n\n            searchValue={_searchValue}\n            onSearch={onSearch}\n            maxTagCount={0}\n            maxTagPlaceholder={(omittedValues) => `Выбрано: ${omittedValues.length}`}\n            treeData={_treeData}\n            // loadData={onLoadData}\n        />\n    );\n};\n\nTreeSelect.propTypes = {\n    /** Сортировка по умолчанию */\n    defaultSortBy: PropTypes.shape({\n        /** Ключ поля для сортировки */\n        key: PropTypes.string,\n        /** Направление сортировки */\n        order: PropTypes.oneOf(['asc', 'desc']),\n    }),\n\n    /** Объект фильтрации по умолчанию */\n    defaultFilter: PropTypes.object,\n\n    /** Значение строки поиска по умолчанию строк */\n    defaultSearchValue: PropTypes.string,\n\n    /** Сортировка */\n    sortBy: PropTypes.object,\n\n    /** Фильтр */\n    filter: PropTypes.object,\n\n    /** Значение строки поиска */\n    searchValue: PropTypes.string,\n\n    /** Имя параметра для поиска */\n    searchParamName: PropTypes.string,\n\n    /** Функция запроса для загрузки строк (данных) */\n    requestLoadRows: PropTypes.func,\n\n    /** Функция преобразования загруженных объектов в объекты для селекта.\n     * Сигнатура `(option) => ({})`\n     * Требоваеть вернуть объект с параметрам\n     * `{ label: ReactNode, value: any, children: any, checkable: bool, selectable: bool }`\n     * ##### Example:\n     * ``` JS\n     * (option) => ({\n     * \tlabel: (<span><MehOutlined />{option.name}</span>),\n     * \tvalue: option.id,\n     * \tchildren: option.children,\n     * \tcheckable: !option.isGroup,\n     * \tselectable: !option.isGroup,\n     * })\n     * ```*/\n    optionConverter: PropTypes.func.isRequired,\n\n    /** Select options `[{ label, value, children, checkable, selectable }]` */\n    options: PropTypes.arrayOf(PropTypes.object),\n};\n\nTreeSelect.defaultProps = {\n    // Rt Props\n    defaultSortBy: undefined,\n    defaultFilter: {},\n    defaultSearchValue: undefined,\n    requestLoadRows: undefined,\n    searchParamName: 'name'\n};\n\nexport default TreeSelect;\n","import React, {useState, useEffect} from \"react\";\nimport PropTypes from \"prop-types\";\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { notification, Button, Tooltip, Modal as AntModal} from \"antd\";\nimport { notificationError, dispatchToStore, useMounted, getObjectExcludedProps } from \"../utils/baseUtils\";\nimport objectPath from \"object-path\";\nimport { setDateStore } from \"../../redux/rtd.actions\";\nimport Form from \"../Form/Form\";\n\nconst excludeProps = [\"buttonProps\", \"toolTipProps\", \"modalConfig\", \"modalData\", \"subscribe\", \"dispatch\"];\nconst modalTypes = ['save', 'select', 'view']\n\nconst defaultProps = {\n    subscribe: [],\n    dispatch: {},\n    methodSaveForm: 'POST'\n}\n\nconst getDefaultFooterProps = (modal) => {\n\n    let okText = '';\n    let cancelText = '';\n    let modalTitle = '';\n\n    switch (modal.type) {\n        case 'save':\n            okText = 'Сохранить';\n            cancelText = 'Отмена';\n            break;\n        case 'select':\n            okText = 'Добавить';\n            cancelText = 'Отмена';\n            break;\n        case 'view':\n            okText = 'Закрыть';\n            break;\n        default: break;\n    }\n\n    if(modal.okText)\n        okText = modal.okText;\n\n    if(modal.cancelText)\n        cancelText = modal.cancelText;\n\n    if(modal.title)\n        modalTitle = modal.title;\n\n    return {okText, cancelText, title: modalTitle, okType: 'primary'}\n};\n\n/**\n * Компонент модального окна\n */\nconst Modal = props => {\n\n    const {buttonProps, toolTipProps, modalConfig, modalData, subscribe, dispatch} = props;\n    const modalProps = { ...getDefaultFooterProps(modalConfig), ...getObjectExcludedProps(modalConfig, excludeProps) };\n\n    const [visible, setVisible] = useState(false);\n    const [_modalData, _setModalData] = useState({});\n    const [_buttonProps, setButtonProps] = useState({});\n\n    const isMounted = useMounted()\n\n    useEffect(() => {\n        _setModalData(modalData);\n    }, []);\n\n    /** Подписка на изменение props[subscribe.name] в сторе */\n    subscribe.map(item => {\n        return useEffect( () => {\n            // if(!isMounted && !item.name)\n            //     return;\n            if((item.withMount || isMounted) && item.name) {\n            // console.log(\"storeHOC => subscribe: \", props[subscribe.name]);\n                item.onChange && item.onChange({\n                    value: props[item.name],\n                    extraData: props[`${item.name}ExtraData`],\n                    setModalData,\n                    setButtonProps,\n                    openModal: _onOpenModal,\n                    closeModal: _onCloseModal\n                });\n            }\n            // console.log(\"Change Props[2]: \", props.subscribeЗф);\n        }, [props[item.name]]);\n    })\n\n    const setModalData = (value) => _setModalData && _setModalData(value);\n    const _onOpenModal = () => setVisible(true)\n    const _onCloseModal = () => setVisible(false)\n\n    const onFinishHandler = (values) => { //} {type, row, requestSaveRow}) => {\n        // console.log(\"Modal Events => before dispatchToStore: \", dispatch);\n        const saveObj = {..._modalData, ...values};\n\n        dispatchToStore({dispatch, setDateStore: props.setDateStore, value: saveObj});\n\n        if (modalProps.requestSaveRow && modalProps.methodSaveForm) {\n            // console.log(\"Modal Events => type: \", type, method, row, _modalData);\n            modalProps.requestSaveRow({\n                method: modalProps.methodSaveForm,\n                data: saveObj,\n            })\n                .then(response => {\n                    notification.success({\n                        message: 'Сохранение прошло успешно'\n                    });\n                    modalProps.onOk && modalProps.onOk(saveObj, response.data);\n                    modalProps.onFinish && modalProps.onFinish(saveObj, response.data);\n                    _onCloseModal();\n                })\n                .catch(error => notificationError(error, 'Ошибка при сохранении'));\n        } else {\n            modalProps.onOk && modalProps.onOk(saveObj);\n            modalProps.onFinish && modalProps.onFinish(saveObj);\n            _onCloseModal();\n        }\n\n\n    };\n\n    const onFinishFailedHandler = (errorInfo) => {\n        // console.log('FormModal Failed:', errorInfo);\n        console.error(\"FormModal fields failed: \", errorInfo);\n        props.onFinishFailed && props.onFinishFailed(errorInfo);\n    };\n\n    const loadInitDataHandler = (callBack) =>\n        formConfig.loadInitData(callBack, _modalData)\n\n\n    const _onCancelHandler = (e) => {\n        // setVisibleModals({ ...visibleModals, [modal.type]: false });\n        // form.resetFields();\n        _onCloseModal()\n        if (modalProps.onCancel) modalProps.onCancel(e)\n    };\n\n    const defaultFooter = [\n        {\n            componentType: 'Item',\n            child: {\n                componentType: 'Button',\n                label: modalProps.cancelText,\n                className: 'mr-8',\n                onClick: _onCancelHandler,\n                ...modalProps.cancelButtonProps\n            }\n        },\n        {\n            componentType: 'Item',\n            child: {\n                componentType: 'Button',\n                label: modalProps.okText,\n                type: modalProps.okType,\n                htmlType: 'submit',\n                ...modalProps.okButtonProps\n            }\n        }\n    ];\n\n    const formConfig =  {\n        footer: defaultFooter,\n        loadInitData: (callBack, row) => callBack(row),\n        ...modalProps.form\n    };\n\n    return (\n        <React.Fragment>\n            <Tooltip {...toolTipProps}>\n                <Button\n                    type=\"primary\"\n                    {...buttonProps}\n                    {..._buttonProps}\n                    onClick={_onOpenModal}\n                >{buttonProps && buttonProps.label}</Button>\n            </Tooltip>\n            <AntModal\n                {...modalProps}\n                centered\n                destroyOnClose\n                visible={visible}\n                onCancel={_onCancelHandler}\n                bodyStyle={{padding: 0, ...modalProps.bodyStyle}}\n                footer={null}\n            >\n                <Form\n                    {...formConfig}\n                    onFinish={onFinishHandler}\n                    onFinishFailed={onFinishFailedHandler}\n                    loadInitData={loadInitDataHandler}\n                >{props.children}</Form>\n            </AntModal>\n        </React.Fragment>\n    )\n};\n\nModal.propTypes = {\n\n    /** Свойства [Button](https://ant.design/components/button/) из Ant Design\n     * Добавлено свойство `label` с типом `ReactNode` или `string` для формирования контента кнопки*/\n    buttonProps: PropTypes.object,\n\n    /** Объект модального окна. Стандартная конфигурация. */\n    modalConfig: PropTypes.shape({\n        /** Тип модального окна */\n        type: PropTypes.oneOf(modalTypes),\n\n        /** Запрос для автоматического сохранения формы */\n        requestSaveForm: PropTypes.func,\n\n        /** HTTP Метод, передаваемый в запрос сохранения */\n        methodSaveForm: PropTypes.string,\n\n        /** Пропсы формы.\n         * Если верстка через конфиги, то пропс body обязателен */\n        form: PropTypes.object\n    }),\n\n    /** Данные для модального окна */\n    modalData: PropTypes.object,\n\n    /** Путь в сторе куда класть данных окна после закрытия */\n    dispatch: PropTypes.object,\n\n    /** Объект для подписки на изменения в STORE.\n     * Параметры в `onChange`:\n     * * `value`: значение за которым ведется наблюдение,\n     * * `extraData`: дополнительные данные, передаваемые при срабатывании события\n     * * `setModalData`: функция задания объекта формы\n     * * `setButtonProps`: функция задания пропсов кнопке\n     * * `openModal`: функция открытия модального окна\n     * * `closeModal`: функция закрытия модального окна */\n    subscribe: PropTypes.arrayOf(PropTypes.object),\n};\n\nModal.defaultProps = defaultProps;\n\nconst mapStateToProps = (store, ownProps) => {\n    const {subscribe} = ownProps;\n    let state = {};\n    if(subscribe && subscribe.length > 0){\n        subscribe.forEach(item => {\n            const {name, path, extraData} = item;\n            if(name && path)\n                state[name] = objectPath.get(store, path);\n            if(name && extraData)\n                state[`${name}ExtraData`] = objectPath.get(store, extraData);\n        })\n    }\n    return state;\n};\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators( { setDateStore: setDateStore, }, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Modal);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, notification as antNotification, Spin, Tooltip, Typography, Upload } from \"antd\";\nimport { LoadingOutlined, CloudUploadOutlined } from \"@ant-design/icons\";\nimport { noop } from \"../utils/baseUtils\";\n\n\nconst defaultProps = {\n    requestUploadFile: noop,\n    dataObject: {},\n    onCompletedUpload: noop,\n    onFailedUpload: noop,\n    uploadProps: {},\n    toolTipProps: {},\n    buttonProps: {}\n}\n\n/** Компонент загрузки файлов */\nconst UploadFile = props => {\n\n    const {\n        requestUploadFile,\n        dataObject,\n        onCompletedUpload,\n        onFailedUpload,\n        uploadProps,\n        toolTipProps,\n        buttonProps,\n    } = props\n\n    const _uploadFile = (file) => {\n        // console.log('beforeUpload dataObject => ', dataObject);\n        notification(file, 'loading');\n        if (requestUploadFile) {\n            requestUploadFile({ file: file, dataObject })\n                .then((response) => {\n                    notification(file, 'success');\n                })\n                .catch(() => {\n                    notification(file, 'error');\n                });\n        }\n        return false;\n    };\n    const notification = (file, type) => {\n        const notifProps = {\n            key: file.uid,\n            duration: type === 'loading' ? 0 : 5,\n            icon: type === 'loading'\n                ? <Spin indicator={<LoadingOutlined style={{ fontSize: 24 }} spin />} />\n                : null,\n            message: <span>Загрузка файла: <Typography.Text code>{file.name}</Typography.Text></span>\n        };\n        switch (type) {\n            case 'loading':\n                antNotification.info(notifProps);\n                break;\n            case 'success':\n                antNotification.success(notifProps);\n                onCompletedUpload(file);\n                props.onChange(file);\n                break;\n            case 'error':\n                antNotification.error(notifProps);\n                onFailedUpload(file);\n                break;\n            case 'close':\n                antNotification.close(file.uid);\n                break;\n            default:\n                break;\n        }\n    };\n    const defaultUploadProps = {\n        multiple: true,\n        showUploadList: false,\n        beforeUpload: _uploadFile\n    };\n\n    return (\n        <Upload {...defaultUploadProps} {...uploadProps}>\n            <Tooltip {...toolTipProps}>\n                <Button\n                    icon={<CloudUploadOutlined />}\n                    {...buttonProps}\n                >{buttonProps && buttonProps.label}</Button>\n            </Tooltip>\n        </Upload>\n    );\n};\n\nUploadFile.propTypes = {\n    /** Функция запроса для отправки файла с данным на сервер */\n    requestUploadFile: PropTypes.func.isRequired,\n\n    /** Данные, прикрепляемые к файлу */\n    dataObject: PropTypes.object,\n\n    /** Функция, вызываемая при удачной загрузке файла */\n    onCompletedUpload: PropTypes.func,\n\n    /** Функция, вызываемая при НЕ удачной загрузке файла */\n    onFailedUpload: PropTypes.func,\n\n    /** Ant Props для [Upload](https://ant.design/components/upload/) компонента */\n    uploadProps: PropTypes.object,\n\n    /** Ant Props для [Tooltip](https://ant.design/components/tooltip/) компонента */\n    toolTipProps: PropTypes.object,\n\n    /** Ant Props для [Button](https://ant.design/components/button/) компонента */\n    buttonProps: PropTypes.object,\n};\n\nUploadFile.defaultProps = defaultProps\n\nexport default UploadFile;\n","import React from \"react\";\nimport {\n    DatePicker as RtDatePicker,\n    TimePicker as RtTimePicker,\n    TypographyDate,\n    Button as RtButton,\n    Custom,\n    FormHeader,\n    FormBody,\n    FormFooter,\n    TabPane as RtTabPane,\n    withStore\n} from \"./Base\";\nimport {\n    Form as AntForm,\n    Typography as AntTypography,\n    Radio as AntRadio,\n    Divider as AntDivider,\n    Checkbox as AntCheckbox,\n    Input as AntInput,\n    InputNumber as AntInputNumber,\n    Switch as AntSwitch,\n    Space as AntSpace,\n    Row as AntRow,\n    Col as AntCol,\n    Tabs as AntTabs,\n    List as AntList,\n    Transfer as AntTransfer,\n} from \"antd\";\nimport RtForm from \"./Form/Form\";\nimport RtLayout from \"./Layout/Layout\";\nimport RtSwitcher from './Switcher/Switcher';\nimport RtTable from \"./Table/ReactBaseTable/ConfigLoader\";\nimport AntTable from \"./Table/AntTable/ConfigLoader\";\nimport RtSelect from \"./Select/Select\";\nimport RtTreeSelect from './TreeSelect/TreeSelect'\nimport RtModal from \"./Modal/Modal\";\nimport RtUploadFile from \"./UploadFile/UploadFile\";\nimport { getObjectExcludedProps } from \"./utils/baseUtils\";\n\n/**\n * Renders\n */\nexport const renderClassic = (Component) => (props) => {\n    return (<Component {...props}>{props.children}</Component>)\n}\n\nexport const renderClassicWithLabel = (Component) => (props) => {\n    return (<Component {...props}>{props.label || props.value || props.children}</Component>)\n}\n\nconst renderClassicWithComponentType = (Component, componentType) => (props) => {\n    return renderClassic(Component)({...props, componentType});\n}\n\nexport const renderClassicByName = (componentName) => (props) => {\n    if(classic[componentName]) {\n        // console.log(\"renderClassicByName => \", props);\n        return renderClassic(classic[componentName])(props)\n    } else {\n        console.log(\"NO renderClassicByName => \", componentName);\n        return null;\n    }\n}\nexport const renderDeclarativeByName = (componentName) => (props) => (children) => {\n    if(classic[componentName]) {\n        // console.log(\"renderDeclarativeByName => \", props);\n        return renderDeclarative(classic[componentName])(props)(children)\n    } else {\n        console.log(\"NO renderDeclarativeByName => \", componentName);\n        return null;\n    }\n}\n\nexport const renderDeclarative = (Component) => (props) => (children) => {\n    // console.log(\"renderDeclarative => \", props);\n    return (<Component {...props}>{children}</Component>)\n}\n\nconst renderFormItemComponent = (Component) => (props) => {\n    const componentProps = getObjectExcludedProps(props, ['itemProps']);\n    return renderDeclarative(AntForm.Item)\n        ({...props.itemProps, noStyle: !(props.itemProps && props.itemProps.label)})\n        (renderClassic(Component)(componentProps))\n}\n\n\n/** */\nconst ComponentClassic = (Component) => (props) => {\n    // console.log(\"ComponentClassic => \", Component)\n    const StoreComponent = withStore(Component, props.itemProps);\n    return renderFormItemComponent(StoreComponent)(props);\n}\nconst ComponentClassicWithLabel = (Component) => (props) => {\n    const StoreComponent = withStore(Component, props.itemProps);\n    return renderFormItemComponent(renderClassicWithLabel(StoreComponent))(props);\n}\nconst ComponentClassicWithPlaceholder = (Component, placeholder) => (props) => {\n    const StoreComponent = withStore(Component, props.itemProps);\n    const _placeholder = (props && props.placeholder) ? props.placeholder : placeholder;\n    return renderFormItemComponent(StoreComponent)({...props, placeholder: _placeholder});\n}\nconst ComponentClassicWithOutStore = (Component) => (props) => {\n    // console.log(\"ComponentClassicWithOutStore => \", Component)\n    return renderFormItemComponent(Component)(props);\n}\n\nconst TableWrapper = (props) => {\n    const {type, ...restProps} = props\n    if(type)\n        return type === 'rt' ? <RtTable {...restProps} /> : <AntTable {...restProps} />\n    else\n        return props.infinityMode ? <RtTable {...props} /> : <AntTable {...props} />\n}\n\nconst classicComponents = {\n    Form:       RtForm,\n    FormHeader: FormHeader,\n    FormBody:   FormBody,\n    FormFooter: FormFooter,\n    FormList:   AntForm.List,\n    Space:      renderFormItemComponent(AntSpace),\n    Row:        renderFormItemComponent(AntRow),\n    Col:        renderFormItemComponent(AntCol),\n    Layout:     renderFormItemComponent(RtLayout),\n    Tabs:       AntTabs,\n    TabPane:    RtTabPane,\n    List:       renderFormItemComponent(AntList),\n}\nconst withComponentType = {\n    Button:     ComponentClassicWithOutStore(RtButton),\n    Title:      ComponentClassicWithLabel(AntTypography.Title),\n    Text:       ComponentClassicWithLabel(AntTypography.Text),\n    Divider:    ComponentClassicWithLabel(AntDivider),\n    Checkbox:   ComponentClassicWithLabel(AntCheckbox),\n    DatePicker: ComponentClassicWithPlaceholder(RtDatePicker, 'Выберите дату'),\n    TimePicker: ComponentClassicWithPlaceholder(RtTimePicker, 'Выберите время'),\n    DateText:   ComponentClassic(TypographyDate),\n    Input:      ComponentClassicWithPlaceholder(AntInput, 'Введите значение'),\n    Search:     ComponentClassicWithPlaceholder(AntInput.Search, 'Поиск'),\n    TextArea:   ComponentClassicWithPlaceholder(AntInput.TextArea, 'Введите текст'),\n    Password:   ComponentClassicWithPlaceholder(AntInput.Password, 'Введите пароль'),\n    InputNumber:ComponentClassicWithPlaceholder(AntInputNumber, 'Введите значение'),\n    Switch:     ComponentClassic(AntSwitch),\n    RadioGroup: ComponentClassic(AntRadio.Group),\n    Select:     ComponentClassicWithPlaceholder(RtSelect, 'Выберите значение'),\n    TreeSelect: ComponentClassicWithPlaceholder(RtTreeSelect, 'Выберите значение'),\n    Table:      ComponentClassicWithOutStore(TableWrapper),\n    RtTable:    ComponentClassicWithOutStore(RtTable),\n    AntTable:   ComponentClassicWithOutStore(AntTable),\n    Modal:      ComponentClassicWithOutStore(RtModal),\n    Custom:     ComponentClassic(Custom),\n    Switcher:   ComponentClassic(RtSwitcher),\n    UploadFile: ComponentClassic(RtUploadFile),\n    Transfer:   ComponentClassic(AntTransfer),\n}\n\nexport const classic = {\n    ...classicComponents,\n    ...Object.keys(withComponentType)\n        .reduce((obj, key) =>\n            ({ ...obj, [key]: renderClassicWithComponentType(withComponentType[key], key) }), {})\n}\n\nexport const declarative =\n    Object.keys(classic)\n    .reduce((obj, key) =>\n        ({ ...obj, [key]: renderDeclarative(classic[key]) }), {});\n","import {Spin} from 'antd';\nimport {LoadingOutlined} from '@ant-design/icons';\nimport React from 'react';\n\nexport const empty = (\n\t<div className={'BaseTable__overlay'}>\n\t\t{' '}\n\t\t<span>Нет данных</span>{' '}\n\t</div>\n);\n\nexport const overlay = (\n\t<div className={'BaseTable__overlay'}>\n\t\t{' '}\n\t\t<Spin\n\t\t\ttip='Загрузка...'\n\t\t\tindicator={<LoadingOutlined style={{fontSize: 24}} spin />}\n\t\t/>{' '}\n\t</div>\n);\n","import React from 'react';\nimport {Checkbox} from 'antd';\nimport { flatten, getTableRowKeys, getTableRowObjects } from \"../../../utils/baseUtils\";\n\nconst SelectionHead = (props) => {\n\tconst {column, container} = props;\n\tconst {rowKey, onSelectAll, selectedRowKeys, selectAll} = column;\n\n\tconst _handleChange = (e) => {\n\t\tconst rowKeys = flatten(getTableRowKeys(container.props.data, column.rowKey));\n\t\tconst rowObjects = flatten(getTableRowObjects(container.props.data, rowKey)).filter((item) => rowKeys.includes(item[rowKey]));\n\t\tconst totalLength = rowKeys.length;\n\t\tconst selectLength = selectedRowKeys.length;\n\t\tconst checked = !(totalLength === selectLength);\n\n\t\t// const newRowKeys = container.props.data.map((item) => { return item[column.rowKey] });\n\t\tonSelectAll({selected: checked, rowKeys: rowKeys, rowObjects: rowObjects});\n\t};\n\n\treturn (\n\t\t<Checkbox\n\t\t\tindeterminate={selectAll === null}\n\t\t\tonChange={_handleChange}\n\t\t\tchecked={selectAll}\n\t\t/>\n\t);\n};\n\nexport default SelectionHead;\n","import React from 'react';\nimport {Checkbox} from 'antd';\nimport {\n\tflatten,\n\tgetTableRowKeys,\n\tfindNodeByRowKey, getTableRowObjects\n} from \"../../../utils/baseUtils\";\n\nconst getRowChildren = (data, rowKey) =>\n\tdata.map((item) => {\n\t\tif (item.children && item.children.length) {\n\t\t\treturn [item[rowKey], getRowChildren(item.children, rowKey)];\n\t\t}\n\t\treturn item[rowKey];\n\t});\n\nconst findBrothers = (data, selfItem, rowKey, parentKey, rowKeys = null) => {\n\tlet arr = [];\n\tdata.forEach((item) => {\n\t\tif (\n\t\t\titem[parentKey] &&\n\t\t\titem[parentKey] === selfItem[parentKey] &&\n\t\t\titem[rowKey] !== selfItem[rowKey]\n\t\t) {\n\t\t\tif (rowKeys !== null) {\n\t\t\t\tif (rowKeys.includes(item[rowKey])) {\n\t\t\t\t\tarr.push(item[rowKey]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tarr.push(item[rowKey]);\n\t\t\t}\n\t\t} else if (item.children && item.children.length) {\n\t\t\tarr.push(\n\t\t\t\tfindBrothers(\n\t\t\t\t\titem.children,\n\t\t\t\t\tselfItem,\n\t\t\t\t\trowKey,\n\t\t\t\t\tparentKey,\n\t\t\t\t\trowKeys\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\treturn arr;\n};\n\nexport const parentAnalysis = ({\n\trowData,\n\trowKey,\n\tparentKey,\n\tchecked,\n\tnodeAssociated,\n\ttreeData,\n\tselectedRowKeys,\n\tindeterminateRowKeys,\n}) => {\n\tlet _selectedRowKeys = [...selectedRowKeys];\n\tlet _indeterminateRowKeys = [...indeterminateRowKeys];\n\n\tlet currentRowData = rowData;\n\tlet parentExist = !!currentRowData[parentKey];\n\tlet lastTypeSelect = checked ? 'checked' : 'square';\n\tlet typeSelect = '';\n\tlet nextSquare = false;\n\n\t/** Пока есть родитель */\n\twhile (parentExist && nodeAssociated) {\n\t\tconst indeterminateBrothers = flatten(\n\t\t\tfindBrothers(\n\t\t\t\ttreeData,\n\t\t\t\tcurrentRowData,\n\t\t\t\trowKey,\n\t\t\t\tparentKey,\n\t\t\t\t_indeterminateRowKeys\n\t\t\t)\n\t\t);\n\t\tconst selectedBrothers = flatten(\n\t\t\tfindBrothers(\n\t\t\t\ttreeData,\n\t\t\t\tcurrentRowData,\n\t\t\t\trowKey,\n\t\t\t\tparentKey,\n\t\t\t\t_selectedRowKeys\n\t\t\t)\n\t\t);\n\t\tconst allBrothers = flatten(\n\t\t\tfindBrothers(treeData, currentRowData, rowKey, parentKey)\n\t\t);\n\n\t\tif (checked) {\n\t\t\tif (\n\t\t\t\tlastTypeSelect === 'checked' &&\n\t\t\t\tselectedBrothers.length === allBrothers.length\n\t\t\t)\n\t\t\t\ttypeSelect = 'checked';\n\t\t\telse typeSelect = 'square';\n\t\t} else {\n\t\t\tif (\n\t\t\t\t!checked &&\n\t\t\t\t!nextSquare &&\n\t\t\t\t(selectedBrothers.length || indeterminateBrothers.length)\n\t\t\t)\n\t\t\t\tnextSquare = true;\n\t\t\tif (nextSquare) typeSelect = 'square';\n\t\t\telse typeSelect = 'none';\n\t\t}\n\n\t\t// console.log(\"allBrothers \", allBrothers);\n\t\t// console.log(\"findParentById \", treeData,\n\t\t//     rowKey,\n\t\t//     parentKey,\n\t\t//     currentRowData[parentKey]);\n\t\t//\n\t\t// console.log(\"findNodeByRowKey \", findNodeByRowKey(treeData, rowKey, currentRowData[parentKey]));\n\n\t\t// Найти родителя\n\t\tcurrentRowData = findNodeByRowKey(\n\t\t\ttreeData,\n\t\t\trowKey,\n\t\t\tcurrentRowData[parentKey]\n\t\t);\n\n\t\tif (typeSelect === 'checked') {\n\t\t\t// Выделить галкой\n\t\t\t// console.log(\"checked\");\n\t\t\tlastTypeSelect = 'checked';\n\t\t\tif (!_selectedRowKeys.includes(currentRowData[rowKey]))\n\t\t\t\t_selectedRowKeys.push(currentRowData[rowKey]);\n\t\t\tconst index = _indeterminateRowKeys.indexOf(currentRowData[rowKey]);\n\t\t\tif (index > -1) _indeterminateRowKeys.splice(index, 1);\n\t\t} else if (typeSelect === 'square') {\n\t\t\t// Выдлеить квадратом\n\t\t\t// console.log(\"square: \");\n\t\t\tlastTypeSelect = 'square';\n\t\t\tif (!_indeterminateRowKeys.includes(currentRowData[rowKey]))\n\t\t\t\t_indeterminateRowKeys.push(currentRowData[rowKey]);\n\t\t\tconst index = _selectedRowKeys.indexOf(currentRowData[rowKey]);\n\t\t\tif (index > -1) _selectedRowKeys.splice(index, 1);\n\t\t} else if (typeSelect === 'none') {\n\t\t\t// Снять выделение\n\t\t\t// console.log(\"none: \");\n\t\t\tlastTypeSelect = 'none';\n\t\t\tconst indexS = _selectedRowKeys.indexOf(currentRowData[rowKey]);\n\t\t\tif (indexS > -1) _selectedRowKeys.splice(indexS, 1);\n\t\t\tconst indexI = _indeterminateRowKeys.indexOf(\n\t\t\t\tcurrentRowData[rowKey]\n\t\t\t);\n\t\t\tif (indexI > -1) _indeterminateRowKeys.splice(indexI, 1);\n\t\t}\n\n\t\tparentExist = !!currentRowData[parentKey];\n\t\t// parentExist = проверка наличия след родителя\n\t}\n\n\treturn [_selectedRowKeys, _indeterminateRowKeys];\n};\n\nconst SelectionCell = (props) => {\n\tconst _handleChange = (checked) => {\n\t\tconst {rowData, rowIndex, column, container} = props;\n\t\tconst {\n\t\t\tonChange,\n\t\t\tselectedRowKeys,\n\t\t\tindeterminateRowKeys,\n\t\t\trowKey,\n\t\t\tparentKey,\n\t\t\tnodeAssociated,\n\t\t} = column;\n\n\t\t// const rowKeys = flatten(getTableRowKeys([rowData], column.rowKey));\n\t\t// const totalLength = container.props.data.length;\n\t\t// const checked = e.target.checked;\n\t\t// const currentRowKey = {[rowKey]: rowData[rowKey], checked};\n\t\t// console.log(\"_handleChange: \", selectedRowKeys);\n\n\t\tlet _selectedRowKeys = [...selectedRowKeys];\n\t\tlet _indeterminateRowKeys = [...indeterminateRowKeys];\n\n\t\t/** Обработка себя, поиск детей, выделение / снятие их */\n\t\tlet rowChildren = [];\n\t\tif (checked) {\n\t\t\tif (rowData.children && nodeAssociated)\n\t\t\t\trowChildren = flatten(getRowChildren(rowData.children, rowKey));\n\n\t\t\t_selectedRowKeys = _selectedRowKeys\n\t\t\t\t.concat([rowData[rowKey]])\n\t\t\t\t.concat(rowChildren);\n\t\t\t_indeterminateRowKeys = _indeterminateRowKeys.filter(\n\t\t\t\t(element) =>\n\t\t\t\t\telement !== rowData[rowKey] &&\n\t\t\t\t\t!rowChildren.includes(element)\n\t\t\t);\n\t\t} else {\n\t\t\tif (rowData.children && nodeAssociated)\n\t\t\t\trowChildren = flatten(\n\t\t\t\t\tgetRowChildren(rowData.children, rowKey, false)\n\t\t\t\t);\n\n\t\t\t_selectedRowKeys = _selectedRowKeys.filter(\n\t\t\t\t(element) =>\n\t\t\t\t\telement !== rowData[rowKey] &&\n\t\t\t\t\t!rowChildren.includes(element)\n\t\t\t);\n\t\t\t_indeterminateRowKeys = _indeterminateRowKeys.filter(\n\t\t\t\t(element) =>\n\t\t\t\t\telement !== rowData[rowKey] &&\n\t\t\t\t\t!rowChildren.includes(element)\n\t\t\t);\n\t\t}\n\n\t\t[_selectedRowKeys, _indeterminateRowKeys] = parentAnalysis({\n\t\t\trowData,\n\t\t\trowKey,\n\t\t\tparentKey,\n\t\t\tchecked,\n\t\t\tnodeAssociated,\n\t\t\ttreeData: container.props.data,\n\t\t\tselectedRowKeys: _selectedRowKeys,\n\t\t\tindeterminateRowKeys: _indeterminateRowKeys,\n\t\t});\n\n\t\tconst keys = [...new Set(_selectedRowKeys)];\n\t\tconst _selectedRowObjects = flatten(getTableRowObjects(container.props.data, rowKey)).filter((item) => keys.includes(item[rowKey]));\n\t\t//return [...new Set(_disabledElements)]\n\t\t// onChange({ selected: checked, totalLength, rowData, rowIndex });\n\n\t\t/** Выясняем новое состояние галочки \"Выделить все\" */\n\t\tlet selectAll;\n\t\tconst selectLength = _selectedRowKeys.length;\n\t\tconst totalLength = flatten(\n\t\t\tgetTableRowKeys(container.props.data, column.rowKey)\n\t\t).length;\n\n\t\tif (selectLength === 0) selectAll = false;\n\t\telse if (totalLength === selectLength) selectAll = true;\n\t\telse if (totalLength !== selectLength) selectAll = null;\n\n\n\n\t\tonChange({\n\t\t\tselected: checked,\n\t\t\t_selectedRow: {\n\t\t\t\trowData: {...rowData},\n\t\t\t\trowIndex: rowIndex,\n\t\t\t\trowKey: rowKey,\n\t\t\t},\n\t\t\t_selectAll: selectAll,\n\t\t\t_selectedRowKeys: keys, //[...new Set(_selectedRowKeys)],\n\t\t\t_selectedRowObjects: _selectedRowObjects,\n\t\t\t_indeterminateRowKeys: [...new Set(_indeterminateRowKeys)],\n\t\t});\n\n\t\t// let uniqIds = {};\n\t\t// onChange({selected: checked, rowKeys: rowKeys.filter(obj => !uniqIds[obj[rowKey]] && (uniqIds[obj[rowKey]] = true)) });\n\t};\n\n\tconst {rowData, column} = props;\n\tconst {selectedRowKeys, indeterminateRowKeys, rowKey} = column;\n\tconst det = indeterminateRowKeys.includes(rowData[rowKey]);\n\tconst checked = selectedRowKeys.includes(rowData[rowKey]);\n\n\treturn (\n\t\t<Checkbox\n\t\t\tindeterminate={det}\n\t\t\tonChange={(e) => _handleChange(e.target.checked)}\n\t\t\tchecked={checked}\n\t\t/>\n\t);\n};\n\nexport default SelectionCell;\n","import React, {useState, useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport {DatePicker} from 'antd';\nimport locale from 'antd/es/date-picker/locale/ru_RU';\nimport {noop} from '../../utils/baseUtils';\nimport {rtPrefix} from '../../utils/variables';\nimport {\n\tgetMomentWithOffset,\n\tgetMomentWithOffsetTruncateDay,\n\tgetMomentFromStringByFormat,\n} from '../../utils/datesUtils';\n\nconst DateRange = (props) => {\n\t/** Состояние первоначалной настройки компонента */\n\tconst [mounted, setMounted] = useState(false);\n\tconst [startValue, setStartValue] = useState(undefined);\n\tconst [endValue, setEndValue] = useState(undefined);\n\n\tconst {\n        className,\n\t\tnameStart,\n\t\tnameEnd,\n\t\tdateFormat,\n\t\tonChange,\n        size,\n\t\ttitle,\n\t\tvalueStart,\n\t\tvalueEnd,\n\t\tshowTime,\n\t} = props;\n\n\tuseEffect(() => {\n\t\tif (!mounted) {\n\t\t\tif (props.defaultValueStart) {\n                // console.log(\"DateRange mounted :\", nameStart, props.defaultValueStart);\n                _onChange(\n\t\t\t\t\tnameStart,\n\t\t\t\t\tgetMomentFromStringByFormat(\n\t\t\t\t\t\tprops.defaultValueStart,\n\t\t\t\t\t\tdateFormat\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\tsetStartValue(\n\t\t\t\t\tgetMomentFromStringByFormat(\n\t\t\t\t\t\tprops.defaultValueStart,\n\t\t\t\t\t\tdateFormat\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (props.defaultValueEnd) {\n\t\t\t\t_onChange(\n\t\t\t\t\tnameEnd,\n\t\t\t\t\tgetMomentFromStringByFormat(\n\t\t\t\t\t\tprops.defaultValueEnd,\n\t\t\t\t\t\tdateFormat\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\tsetEndValue(\n\t\t\t\t\tgetMomentFromStringByFormat(\n\t\t\t\t\t\tprops.defaultValueEnd,\n\t\t\t\t\t\tdateFormat\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\tsetMounted(true);\n\t\t}\n\t}, [mounted]);\n\n\tuseEffect(() => {\n\t\tif (valueStart) {\n\t\t\tsetStartValue(moment(valueStart));\n\t\t\t// console.log('useEffect -> valueStart', valueStart);\n\t\t} else if (!props.defaultValueStart) setStartValue(null);\n\t}, [valueStart]);\n\tuseEffect(() => {\n\t\tif (valueEnd) {\n\t\t\tsetEndValue(moment(valueEnd));\n\t\t\t// console.log('useEffect -> valueEnd', valueEnd);\n\t\t} else if (!props.defaultValueEnd) setEndValue(null);\n\t}, [valueEnd]);\n\n\tconst disabledStartDate = (startValue) => {\n\t\tif (!startValue || !endValue) {\n\t\t\treturn false;\n\t\t}\n\t\treturn startValue.valueOf() > endValue.valueOf();\n\t};\n\n\tconst disabledEndDate = (endValue) => {\n\t\tif (!endValue || !startValue) {\n\t\t\treturn false;\n\t\t}\n\t\treturn endValue.valueOf() <= startValue.valueOf();\n\t};\n\n\tconst onStartChange = (date) => {\n\t\tsetStartValue(date);\n\t\t_onChange(nameStart, date);\n\t};\n\n\tconst onEndChange = (date) => {\n\t\tsetEndValue(date);\n\t\t_onChange(nameEnd, date);\n\t};\n\n\tconst _onChange = (name, value) => {\n\t\tif (value)\n\t\t\tif(showTime)\n\t\t\t\tonChange(name, getMomentWithOffset(value));\n\t\t\telse\n\t\t\t\tonChange(name, getMomentWithOffsetTruncateDay(value));\n\n\t\telse onChange(name, value);\n\t};\n\n\treturn (\n\t\t<div className={`${className} ${rtPrefix}-date-range`}>\n\t\t\t<div>\n                {title ? <div className={'title'}>{title}</div> : null}\n\t\t\t\t<span className={'subtitleStart'}>c</span>\n\t\t\t\t<DatePicker\n\t\t\t\t\tlocale={locale}\n\t\t\t\t\t// defaultValue={ checkDefValue(props.defaultValueStart) }\n\t\t\t\t\tsize={size}\n\t\t\t\t\tstyle={{width: !!showTime ? '160px' : '135px'}}\n\t\t\t\t\tdisabledDate={disabledStartDate}\n\t\t\t\t\tonChange={onStartChange}\n\t\t\t\t\tformat={dateFormat}\n\t\t\t\t\tplaceholder={'Выберите дату'}\n\t\t\t\t\tvalue={startValue}\n\t\t\t\t\tshowTime={showTime}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<span className={'subtitleEnd'}>по</span>\n\t\t\t\t<DatePicker\n\t\t\t\t\tlocale={locale}\n\t\t\t\t\t// defaultValue={ checkDefValue(props.defaultValueEnd) }\n\t\t\t\t\tsize={size}\n\t\t\t\t\tstyle={{width: showTime ? '160px' : '135px'}}\n\t\t\t\t\tdisabledDate={disabledEndDate}\n\t\t\t\t\tonChange={onEndChange}\n\t\t\t\t\tformat={dateFormat}\n\t\t\t\t\tplaceholder={'Выберите дату'}\n\t\t\t\t\tvalue={endValue}\n\t\t\t\t\tshowTime={showTime}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nDateRange.propTypes = {\n\t/** Формат отображения даты (не влияет на формат в onChange) */\n\tdateFormat: PropTypes.string,\n\n\t/** Значение по умолчанию для первого пикера */\n\t// defaultValueStart: PropTypes.string,\n\n\t/** Значение по умолчанию для второго пикера */\n\t// defaultValueEnd: PropTypes.string,\n\n    /** Дополнительное имя класса для элемента */\n    className: PropTypes.string,\n\n\t/** Наименование параметра для первого пикера */\n\tnameStart: PropTypes.string,\n\n\t/** Наименование параметра для второго пикера */\n\tnameEnd: PropTypes.string,\n\n\t/** Событие при изменении любого из пикеров */\n\tonChange: PropTypes.func,\n\n    /** Размер пикера ['small', 'middle', 'large'] */\n    size: PropTypes.oneOf(['small', 'middle', 'large']),\n\n\t/** Заголовок */\n\ttitle: PropTypes.string,\n\n\t/** Значение даты первого пикера (используется для управления датой из родительного компонента) */\n\t// valueStart: PropTypes.string,\n\n\t/** Значение даты второго пикера (используется для управления датой из родительного компонента) */\n\t// valueEnd: PropTypes.string,\n};\n\nDateRange.defaultProps = {\n    className: '',\n\tnameStart: 'dateStart',\n\tnameEnd: 'dateEnd',\n\tdateFormat: 'DD.MM.YYYY',\n\tonChange: noop,\n    size: 'middle',\n    // title: 'Период',\n};\n\nexport default DateRange;\n","import React, {useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {DatePicker} from 'antd';\nimport moment from 'moment';\nimport {noop} from '../../utils/baseUtils';\nimport {\n\tgetMomentFromStringByFormat,\n\tgetMomentWithOffsetTruncateDay,\n} from '../../utils/datesUtils';\n\nconst SingleDate = (props) => {\n\t/** Состояние первоначалной настройки компонента */\n\tconst [mounted, setMounted] = useState(false);\n\tconst [_value, setValue] = useState(null);\n\n\tconst {dateFormat, defaultValue, name, onChange, title, value, className} = props;\n\n\tuseEffect(() => {\n\t\tif (!mounted) {\n\t\t\t// console.log(\"DateRange mounted :\", nameFrom, props.defaultValueFrom);\n\t\t\tif (defaultValue) {\n\t\t\t\t_onChange(\n\t\t\t\t\tname,\n\t\t\t\t\tgetMomentFromStringByFormat(defaultValue, dateFormat)\n\t\t\t\t);\n\t\t\t\tsetValue(getMomentFromStringByFormat(defaultValue, dateFormat));\n\t\t\t}\n\t\t\tsetMounted(true);\n\t\t}\n\t}, [mounted]);\n\n\tuseEffect(() => {\n\t\tif (value) {\n\t\t\tsetValue(moment(value));\n\t\t} else if (!defaultValue) setValue(null);\n\t}, [value]);\n\n\tconst _onChangePicker = (date) => {\n\t\tsetValue(date);\n\t\t_onChange(name, date);\n\t};\n\n\tconst _onChange = (name, value) => {\n\t\tif (value) onChange(name, getMomentWithOffsetTruncateDay(value));\n\t\telse onChange(name, value);\n\t};\n\n\treturn (\n\t\t<div className={`single-date-container ${className}`}>\n\t\t\t<div className={'title'}>{title}</div>\n\t\t\t<DatePicker\n\t\t\t\tsize={'small'}\n\t\t\t\tstyle={{width: '135px'}}\n\t\t\t\tonChange={_onChangePicker}\n\t\t\t\tformat={dateFormat}\n\t\t\t\tplaceholder={'Выберите дату'}\n\t\t\t\tvalue={_value}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nSingleDate.propTypes = {\n\t/** Формат отображения даты (не влияет на формат в onChange) */\n\tdateFormat: PropTypes.string,\n\n\t/** Значение по умолчанию */\n\tdefaultValue: PropTypes.string,\n\n\t/** Наименование параметра */\n\tname: PropTypes.string,\n\n    /** Дополнительное имя класса для элемента */\n    className: PropTypes.string,\n\n\t/** Событие при изменении пикера */\n\tonChange: PropTypes.func,\n\n\t/** Заголовок */\n\ttitle: PropTypes.string,\n\n\t/** Значение даты */\n\tvalue: PropTypes.string,\n};\n\nSingleDate.defaultProps = {\n\tname: 'date',\n\tdateFormat: 'DD.MM.YYYY',\n\tonChange: noop,\n\ttitle: 'Дата',\n};\n\nexport default SingleDate;\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Tooltip } from \"antd\";\nimport { noop } from \"../../utils/baseUtils\";\nimport DateRange from \"../DateRange/DateRange\";\nimport SingleDate from \"../SingleDate/SingleDate\";\nimport Select from \"../Select/Select\";\nimport { rtPrefix } from \"../../utils/variables\";\n\nconst FilterPanel = (props) => {\n  /**\n   * Период с, по (день / месяц / год)\n   * Множественный выбор (дерево с галочками с поиском) (ajax / const)\n   * Множественный выбор (список с поиском) (ajax / const)\n   * Единственный выбор (список с поиском) (ajax / const)\n   */\n\n  const [filter, setFilter] = useState(props.defaultFilter);\n  // const [multiSelectObjects, setMultiSelectObjects] = useState([]);\n\n  const {\n    applyFilterTooltip,\n    applyFilterSize,\n    applyFilterRender,\n    borderStyle,\n    onChangeFilter,\n    onApplyFilter,\n    configFilter,\n    resetFilterRender,\n    resetFilterTooltip,\n    resetFilterSize\n  } = props;\n\n  useEffect(() => {\n    setFilter(props.defaultFilter);\n  }, []);\n\n  const _onChangeData = (name, value) => {\n    // console.log(\"FilterPanel -> onChangeData\", name, value);\n    let _filter = { ...filter };\n    if (value === null) {\n      delete _filter[name];\n    } else {\n      _filter = { ..._filter, ...{ [name]: value } };\n    }\n    // console.log(\"onChangeData:\", _filter);\n    setFilter(_filter);\n    onChangeFilter(_filter);\n  };\n\n  const _applyFilter = () => {\n    // console.log(\"_applyFilter:\", filter);\n    onApplyFilter(filter);\n  };\n  const _resetFilter = () => {\n    // console.log(\"_resetFilter:\", props.defaultFilter);\n    setFilter(props.defaultFilter);\n    onChangeFilter(props.defaultFilter);\n    onApplyFilter(props.defaultFilter);\n    // setMultiSelectObjects([]);\n  };\n\n  // const _onChangeObjects = (name, value) => {\n  // \tlet _multiSelectObjects = {...multiSelectObjects};\n  // \tif (value === null) {\n  // \t\tdelete _multiSelectObjects[name];\n  // \t} else {\n  // \t\t_multiSelectObjects = {..._multiSelectObjects, ...{[name]: value}};\n  // \t}\n  // \t// console.log(\"onChangeData:\", _filter);\n  // \tsetMultiSelectObjects(_multiSelectObjects);\n  // };\n  const getPanelCls = () => {\n    let cls = [`${rtPrefix}-filter-panel`];\n    cls.push(`border-${borderStyle}`);\n    if (configFilter.findIndex((item) => !!item.title) === -1)\n      cls.push(`${rtPrefix}-filter-panel-no-title`);\n    return cls.join(\" \");\n  };\n\n  return (\n    <React.Fragment>\n      {configFilter && configFilter.length ? (\n        <div className={getPanelCls()}>\n          {configFilter.map((item, index) => {\n            // console.log(\"item.defaultRows\", item.defaultRows);\n            let cls = [`${rtPrefix}-filter-panel-item`];\n            item.className && cls.push(item.className);\n            switch (item.componentType) {\n              case \"DateRange\":\n                return (\n                  <DateRange\n                    key={index}\n                    {...item}\n                    className={cls.join(\" \")}\n                    defaultValueStart={\n                      filter[item.nameStart]\n                        ? filter[item.nameStart]\n                        : null\n                    }\n                    defaultValueEnd={\n                      filter[item.nameEnd]\n                        ? filter[item.nameEnd]\n                        : null\n                    }\n                    onChange={_onChangeData}\n                    valueStart={filter[item.nameStart]}\n                    valueEnd={filter[item.nameEnd]}\n                  />\n                );\n              case \"SingleDate\":\n                return (\n                  <SingleDate\n                    key={index}\n                    {...item}\n                    className={cls.join(\" \")}\n                    dateFormat={\n                      item.dateFormat\n                        ? item.dateFormat\n                        : undefined\n                    }\n                    defaultValue={\n                      filter[item.name]\n                        ? filter[item.name]\n                        : null\n                    }\n                    onChange={_onChangeData}\n                    value={filter[item.name]}\n                  />\n                );\n              case \"MultiSelect\":\n              case \"SingleSelect\":\n                return (\n                  <Select\n                    key={index}\n                    {...item}\n                    type={item.componentType}\n                    defaultSelectedRowKeys={\n                      filter[item.name]\n                        ? filter[item.name]\n                        : null\n                    }\n                    selectedRowKeys={filter[item.name] ? filter[item.name] : []}\n                    className={cls.join(\" \")}\n                    onChangeKeys={_onChangeData}\n                    defaultValue={\n                      filter[item.name]\n                        ? filter[item.name]\n                        : null\n                    }\n                    value={filter[item.name]}\n                  />\n                );\n              case \"Custom\":\n                return (\n                  <React.Fragment key={index}>\n                    {\n                      item.render({\n                        onChange: _onChangeData,\n                        defaultValue: filter[item.name]\n                          ? filter[item.name]\n                          : null,\n                        value: filter[item.name]\n                      })\n                    }\n                  </React.Fragment>);\n              default:\n                return null;\n            }\n          })}\n          <Tooltip title={applyFilterTooltip}>\n            <Button\n              type='primary'\n              size={applyFilterSize}\n              style={{ marginLeft: \"auto\" }}\n              onClick={_applyFilter}\n            >\n              {applyFilterRender}\n            </Button>\n          </Tooltip>\n          <Tooltip title={resetFilterTooltip}>\n            <Button\n              size={resetFilterSize}\n              style={{ marginLeft: \"10px\" }}\n              onClick={_resetFilter}\n            >\n              {resetFilterRender}\n            </Button>\n          </Tooltip>\n        </div>\n      ) : null}\n    </React.Fragment>\n  );\n};\n\nFilterPanel.propTypes = {\n\n  /** Тест Tooltip для кнопки \"Применить фильтр\" */\n  applyFilterTooltip: PropTypes.string,\n\n  /** Размер кнопки \"Применить фильтр\" ['small', 'middle', 'large'] */\n  applyFilterSize: PropTypes.oneOf([\"small\", \"middle\", \"large\"]),\n\n  /** Строка / функция / элемент для отображения в кнопке \"Применить фильтр\" */\n  applyFilterRender: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.element,\n    PropTypes.string\n  ]),\n\n  /** Тип бордера панели (по умолчанию 'none')\n   * ['all', 'none', 'top', 'left', 'bottom', 'right', 'top-bottom', 'left-right'] */\n  borderStyle: PropTypes.oneOf([\n    \"all\",\n    \"none\",\n    \"top\",\n    \"left\",\n    \"bottom\",\n    \"right\",\n    \"top-bottom\",\n    \"left-right\"\n  ]),\n\n  /** Объект фильтра по умолчанию */\n  defaultFilter: PropTypes.object,\n\n  /** Конфигурация панели фильтров */\n  configFilter: PropTypes.arrayOf(PropTypes.object),\n\n  /** Событие по кнопке выполнить фильтр */\n  onApplyFilter: PropTypes.func,\n\n  /** Событие по изменение объекта фильтра */\n  onChangeFilter: PropTypes.func,\n\n  /** Тест Tooltip для кнопки \"Сбросить фильтр\" */\n  resetFilterTooltip: PropTypes.string,\n\n  /** Размер кнопки \"Сбросить фильтр\" ['small', 'middle', 'large'] */\n  resetFilterSize: PropTypes.oneOf([\"small\", \"middle\", \"large\"]),\n\n  /** Строка / функция / элемент для отображения в кнопке \"Сбросить фильтр\" */\n  resetFilterRender: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.element,\n    PropTypes.string\n  ])\n};\n\nFilterPanel.defaultProps = {\n  applyFilterTooltip: \"Применить фильтр\",\n  applyFilterSize: \"middle\",\n  applyFilterRender: \"Применить\",\n  borderStyle: \"none\",\n  defaultFilter: {},\n  configFilter: [],\n  onApplyFilter: noop,\n  onChangeFilter: noop,\n  resetFilterTooltip: \"Сбросить фильтр\",\n  resetFilterSize: \"middle\",\n  resetFilterRender: \"Сбросить\"\n};\n\nexport default FilterPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {CloseCircleOutlined} from '@ant-design/icons';\nimport {rtPrefix} from '../../../utils/variables';\n\nconst SelectionList = (props) => {\n\tconst {selectedRowObjects, rowRender, onClickDropSelect} = props;\n\n\t// console.log(\"SelectionList typeof -> \", typeof(rowRender));\n\treturn (\n\t\t<div className={`${rtPrefix}-table-selected-rows`}>\n\t\t\t{selectedRowObjects && selectedRowObjects.length > 0 ? (\n\t\t\t\t<ul>\n\t\t\t\t\t{selectedRowObjects.map((item, index) => (\n\t\t\t\t\t\t<li key={index}>\n\t\t\t\t\t\t\t{/*{(typeof(rowRender) === 'string') ? <div>{item[rowRender]}</div> : rowRender }*/}\n\t\t\t\t\t\t\t{typeof rowRender === 'function' ? (\n\t\t\t\t\t\t\t\trowRender({rowData: item, rowIndex: index})\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div>{item[rowRender]}</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div onClick={() => onClickDropSelect(item)}>\n\t\t\t\t\t\t\t\t<CloseCircleOutlined />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t) : (\n\t\t\t\t<div>Нет выбранных записей</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nSelectionList.propTypes = {\n\t/** Строка или функция для отображения элементов списка\n\t * Строка - имя поля\n\t * Функция - рендер строк. Параметры v\n\t * { rowData, rowIndex }) */\n\trowRender: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n\n\t/** Список выделенных объектов */\n\tselectedRowObjects: PropTypes.arrayOf(PropTypes.object).isRequired,\n\n\t/** Событие удаления элемента */\n\tonClickDropSelect: PropTypes.func.isRequired,\n};\n\nSelectionList.defaultProps = {};\n\nexport default SelectionList;\n","import React, {useRef, forwardRef, useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport {notification} from 'antd';\nimport SortOrder from 'react-base-table/lib/SortOrder';\nimport BaseTable, {AutoResizer, callOrReturn, Column} from 'react-base-table';\nimport {empty, overlay} from './defaultSettings';\nimport SelectionHead from '../Table/Selectable/SelectionHead';\nimport SelectionCell, {parentAnalysis} from '../Table/Selectable/SelectionCell';\nimport CommandPanel from '../CommandPanel/CommandPanel';\nimport FilterPanel from '../FilterPanel/FilterPanel';\nimport SelectionList from '../Table/SelectionList/SelectionList';\nimport {rtPrefix} from '../../utils/variables';\nimport {\n\tflatten,\n\tgenerateUUID,\n\tgetTableRowKeys,\n\tfindNodeByRowKey,\n\tnoop,\n\tgetTableRowObjects, notificationError\n} from \"../../utils/baseUtils\";\nimport objectPath from \"object-path\";\nimport { setDateStore } from \"../../../redux/rtd.actions\";\nimport FormItems from \"../Form/FormItems\";\n\nconst Table = forwardRef((props, ref) => {\n\t/** Состояние первоначалной настройки компонента*/\n\tconst [mounted, setMounted] = useState(false);\n\t/** Наличие на сервере еще данных */\n\tconst [hasMore, setHasMore] = useState(true);\n\t/** Индикатор загрузки данных */\n\tconst [loading, setLoading] = useState(false);\n\n\t/** Indoor control */\n\tconst [_rows, _setRows] = useState([]);\n\tconst [_selectedRowKeys, setSelectedRowKeys] = useState([]);\n\tconst [_searchValue, setSearchValue] = useState({});\n\tconst [_filter, setFilter] = useState(false);\n\tconst [_sortBy, setSortBy] = useState(false);\n\n\t/** Selectable States */\n\tconst [selectAll, setSelectAll] = useState(false);\n\n\t/** Tree States */\n\tconst [_indeterminateRowKeys, setIndeterminateRowKeys] = useState([]);\n    const [_expandedRowKeys, setExpandedRowKeys] = useState([]);\n\n    const [_totalCountRows, setTotalCountRows] = useState(0);\n\n    const [_footerShow, _setFooterShow] = useState(false);\n\n    const tableRef = useRef();\n\n\tconst {\n\t\t/** Def values */\n\t\tdefaultRows,\n\t\tdefaultSelectedRowKeys,\n\t\tdefaultSearchValue,\n\t\tdefaultFilter,\n\t\tdefaultSortBy,\n\n\t\t/** Outdoor control */\n\t\trows,\n\t\tsetRows,\n\t\tselectedRowKeys,\n\t\tsearchValue,\n\t\tfilter,\n\t\tsortBy,\n\n\t\t/** Required */\n\t\tcolumns,\n\t\ttype,\n\n\t\t/** Base Props */\n\t\tautoDeleteRows,\n\t\trowKey,\n\n\t\t/** View Props */\n\t\tempty,\n\t\tfixWidthColumn,\n\t\tfooterHeight,\n\t\tfooterShow,\n        footerTitles,\n\t\t// footerProps,\n\t\theaderHeight,\n\t\trowHeight,\n\t\tzebraStyle,\n\t\trowRenderer,\n\t\testimatedRowHeight,\n\n\t\t/** Load Data Props */\n\t\tloadThreshold,\n\t\tpageSize,\n\t\trequestLoadRows,\n        requestLoadCount,\n\t\tsearchParamName,\n\n\t\t/** Selectable Props */\n\t\tselectable,\n\n\t\t/** Tree Props */\n\t\tnodeAssociated,\n\t\texpandColumnKey,\n\t\texpandParentKey,\n\t\texpandLazyLoad,\n\t\texpandDefaultAll,\n\n\t\t/** Events */\n\t\tonRowClick,\n\t\tonRowDoubleClick,\n\t\tonRowExpand,\n\t\tonSelectedRowsChange,\n\t\tonExpandedRowsChange,\n\n\t\t/** SELECTED PANEL */\n\t\tshowSelection,\n\t\trowRenderShowSelection,\n\n\t\t/** REDUX PROPS */\n\t\tdispatchPath,\n\t\tsubscribe,\n\t} = props;\n\n\t// console.log('props.commandPanelProps => ', props.commandPanelProps);\n\tconst commandPanelProps = {\n\t\t...CommandPanel.defaultProps,\n\t\t...props.commandPanelProps,\n\t};\n\tconst filterPanelProps = {\n\t\t...FilterPanel.defaultProps,\n\t\t...props.filterPanelProps,\n\t};\n\n\tconst footerProps = {\n\t\t...Table.defaultProps.footerProps,\n\t\t...props.footerProps,\n\t};\n\n\tconst selectedDispatchPath = dispatchPath && `${dispatchPath}.selected`;\n\tconst rowsDispatchPath = dispatchPath && `${dispatchPath}.rows`;\n\n\n\tuseEffect(() => {\n        // console.log(\"Инициализация дефолтных значений \");\n        // console.log(\"Инициализация дефолтных значений defaultSelectedRowKeys > \", defaultSelectedRowKeys);\n\n\t\t// Инициализация дефолтных значений\n\t\t// _setRows(defaultRows);\n\t\t_setRowsHandler(defaultRows);\n\t\tsetSelectedRowKeys(defaultSelectedRowKeys);\n\t\tsetSearchValue(defaultSearchValue);\n\t\tsetFilter(defaultFilter);\n\t\tsetSortBy(defaultSortBy);\n\t\tsetSelectAll(\n\t\t\tdefaultRows.length > 0 &&\n\t\t\t\tdefaultRows.length === defaultSelectedRowKeys.length\n\t\t);\n\t\t// Определение нужно ли отображать подвал\n\t\t_setFooterShow(\n\t\t\t(footerProps.showElements.length ||\n\t\t\tfooterProps.leftCustomSideElement ||\n\t\t\tfooterProps.centerCustomSideElement ||\n\t\t\tfooterProps.rightCustomSideElement));\n\n\t\tif (!!expandColumnKey && !expandLazyLoad) {\n\t\t\t// Открытие всех нод\n\t\t\tif (expandDefaultAll)\n\t\t\t\tsetExpandedRowKeys(\n\t\t\t\t\tflatten(getTableRowKeys(defaultRows, rowKey))\n\t\t\t\t);\n\t\t\t// Установка квадратиков на нужных нодах\n\t\t\tif (defaultSelectedRowKeys && defaultSelectedRowKeys.length > 0) {\n\t\t\t\tlet flatRows = flatten(getTableRowKeys(defaultRows, rowKey));\n\t\t\t\tlet selectedRow = flatRows.filter((item) =>\n\t\t\t\t\tdefaultSelectedRowKeys.includes(item[rowKey])\n\t\t\t\t);\n\t\t\t\tlet _indeterminateRowKeys = [];\n\t\t\t\tselectedRow.forEach((item) => {\n\t\t\t\t\tconst [ss, ii] = parentAnalysis({\n\t\t\t\t\t\trowData: item,\n\t\t\t\t\t\trowKey,\n\t\t\t\t\t\tparentKey: expandParentKey,\n\t\t\t\t\t\tchecked: true,\n\t\t\t\t\t\tnodeAssociated,\n\t\t\t\t\t\ttreeData: defaultRows,\n\t\t\t\t\t\tselectedRowKeys: defaultSelectedRowKeys,\n\t\t\t\t\t\tindeterminateRowKeys: _indeterminateRowKeys,\n\t\t\t\t\t});\n\t\t\t\t\t_indeterminateRowKeys.push(...ii);\n\t\t\t\t});\n\t\t\t\tsetIndeterminateRowKeys([...new Set(_indeterminateRowKeys)]);\n\t\t\t}\n\t\t}\n\n\t\tif (type !== 'localSide') {\n\t\t\t_dataProcessing({\n\t\t\t\tsortBy: defaultSortBy,\n\t\t\t\tfilter: defaultFilter,\n\t\t\t\tsearchLine: defaultSearchValue,\n\t\t\t\treload: true,\n\t\t\t});\n\t\t}\n\t\t// console.log(\"Table => props \", props);\n\t\tsetMounted(true);\n\t\tif (ref && typeof ref === 'function') ref({reloadData});\n\t\telse if (ref && typeof ref === 'object') ref.current = {reloadData};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (type === 'localSide') {\n\t\t\t// console.log(\"Control useEffect => \", rows, selectedRowKeys, searchValue, filter, sortBy);\n\t\t\t// _setRows(rows);\n\t\t\t_setRowsHandler(rows);\n\t\t\tsetSelectedRowKeys(selectedRowKeys);\n\t\t\tsetSearchValue(searchValue);\n\t\t\tsetFilter(filter);\n\t\t\tsetSortBy(sortBy);\n\t\t\tif (!!expandColumnKey && !expandLazyLoad) {\n\t\t\t\t// Открытие всех нод\n\t\t\t\tif (expandDefaultAll)\n\t\t\t\t\tsetExpandedRowKeys(flatten(getTableRowKeys(rows, rowKey)));\n\t\t\t}\n\t\t}\n    }, [rows, selectedRowKeys, searchValue, filter, sortBy]);\n\n\t/** Подписка на изменение props[subscribe.name] в сторе */\n\tuseEffect( () => {\n\t\tif(subscribe.name) {\n\t\t\t// console.log(\"Table => useEffect => subscribe.value \", props[subscribe.name]);\n\t\t\tsubscribe.onChange && subscribe.onChange({value: props[subscribe.name], setReloadTable: reloadData});\n\t\t}\n\t}, [props[subscribe.name]]);\n\n\n\t/** BASE FUNCTIONS */\n\tconst _setRowsHandler = (rows) => {\n\t\t_setRows(rows);\n\t\trowsDispatch(rows);\n\t};\n\tconst setRowsHandler = (rows) => {\n\t\tsetRows(rows);\n\t\trowsDispatch(rows);\n\t};\n\tconst rowsDispatch = (rows) => {\n\t\trowsDispatchPath && props.setDateStore && props.setDateStore(rowsDispatchPath, rows);\n\t};\n\n\tconst reloadData = ({sortBy, filter, searchValue}) => {\n\t\t// console.log(\"reloadData params \", sortBy, filter, searchValue, loading);\n        if(props.value && props.value.length > 0)\n            setSelectedRowKeys(props.value.map(item => item[rowKey]));\n        else\n            setSelectedRowKeys([]);\n\t\t// setSelectedRowKeys([]);\n\t\tif(sortBy) setSortBy(sortBy);\n\t\tif(filter) setFilter(filter);\n\t\tif(searchValue) setSearchValue(searchValue);\n\t\t_dataProcessing({\n\t\t\tsortBy: sortBy ? sortBy : _sortBy,\n\t\t\tfilter: filter ? filter : _filter,\n\t\t\tsearchLine: searchValue ? searchValue : _searchValue,\n\t\t\treload: true,\n\t\t});\n        // console.log(\"reloadData loading \", loading);\n    };\n\n\tconst _dataProcessing = (params) => {\n\t\t// console.log('_dataProcessing', params);\n\t\tconst {sortBy, filter, searchLine, expandRow, reload} = params;\n\t\tswitch (type) {\n\t\t\tcase 'infinity':\n\t\t\tcase 'serverSide':\n\t\t\t\tif ((hasMore || reload) && !loading) {\n\t\t\t\t\tsetLoading(true);\n\t\t\t\t\tconst pageNum = reload\n\t\t\t\t\t\t? 0\n\t\t\t\t\t\t: Math.floor(_rows.length / pageSize);\n\t\t\t\t\tconst params = {\n\t\t\t\t\t\tpage: pageNum,\n\t\t\t\t\t\tsize: pageSize,\n\t\t\t\t\t\tsort:\n\t\t\t\t\t\t\tsortBy && sortBy.key\n\t\t\t\t\t\t\t\t? sortBy.key + ',' + sortBy.order\n\t\t\t\t\t\t\t\t: null,\n\t\t\t\t\t};\n\t\t\t\t\tconst dataQuery = {\n                        ...filter,\n                        ...(searchLine\n                            ? {[searchParamName]: searchLine}\n                            : null),\n                    };\n\t\t\t\t\t// console.log('dataQuery', dataQuery);\n\n                    if(type === 'infinity' && reload && requestLoadCount !== noop && !expandColumnKey && !expandLazyLoad) {\n                        requestLoadCount({\n                            params,\n                            data: dataQuery,\n                        })\n                            .then((response) => {\n                                // console.log(\"infinity then response\", response);\n                                // const result = response.data;\n                                setTotalCountRows(response.data);\n                            })\n\t\t\t\t\t\t\t.catch(error =>\n\t\t\t\t\t\t\t\tnotificationError(error, 'Ошибка получения количества записей по фильтру') );\n                    }\n\n                    // console.log('requestLoadRows => ', typeof requestLoadRows);\n                    // if(typeof requestLoadRows !== 'function'){\n                    //     setLoading(false);\n                    // }\n                    requestLoadRows({\n\t\t\t\t\t\tparams,\n\t\t\t\t\t\tdata: dataQuery,\n\t\t\t\t\t})\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\t// console.log(\"infinity then response\", response);\n\t\t\t\t\t\t\tconst result = response.data;\n\t\t\t\t\t\t\t// Если иерархия и ленивая, то ищим кому добавть полученные записи\n\t\t\t\t\t\t\tif (!!expandColumnKey && expandLazyLoad) {\n\t\t\t\t\t\t\t\t// lastExpandRow//, setLastExpandRow\n\t\t\t\t\t\t\t\t// console.log('!!expandColumnKey && expandLazyLoad', result);\n\t\t\t\t\t\t\t\tif (pageNum === 0) {\n\t\t\t\t\t\t\t\t\tresult.forEach((child) => {\n\t\t\t\t\t\t\t\t\t\tchild.children = [\n\t\t\t\t\t\t\t\t\t\t\t{[rowKey]: generateUUID()},\n\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t// _setRows(result);\n\t\t\t\t\t\t\t\t\t_setRowsHandler(result);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tlet newRows = [..._rows];\n\t\t\t\t\t\t\t\t\t// (data, rowKey, rowValue)\n\t\t\t\t\t\t\t\t\tresult.forEach((child) => {\n\t\t\t\t\t\t\t\t\t\tchild.children = [\n\t\t\t\t\t\t\t\t\t\t\t{[rowKey]: generateUUID()},\n\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tlet node = findNodeByRowKey(\n\t\t\t\t\t\t\t\t\t\tnewRows,\n\t\t\t\t\t\t\t\t\t\trowKey,\n\t\t\t\t\t\t\t\t\t\texpandRow[rowKey]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tnode.children = result;\n\t\t\t\t\t\t\t\t\t// console.log('newRows -> ', newRows);\n\t\t\t\t\t\t\t\t\t// _setRows(newRows);\n\t\t\t\t\t\t\t\t\t_setRowsHandler(newRows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (result && result.length < pageSize) {\n\t\t\t\t\t\t\t\t\tsetHasMore(false);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetHasMore(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tpageNum === 0\n\t\t\t\t\t\t\t\t\t? _setRowsHandler(result) // _setRows\n\t\t\t\t\t\t\t\t\t: _setRowsHandler(_rows.concat(result)); // _setRows\n\n\t\t\t\t\t\t\t\t// console.log('expandDefaultAll ', expandDefaultAll, _expandedRowKeys);\n\t\t\t\t\t\t\t\tif (expandDefaultAll)\n\t\t\t\t\t\t\t\t\tsetExpandedRowKeys(\n\t\t\t\t\t\t\t\t\t\tflatten(getTableRowKeys(result, rowKey))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tnotificationError(error, 'Ошибка загрузки данных')\n\t\t\t\t\t\t\t_setRowsHandler(_rows); // _setRows\n\t\t\t\t\t\t\t// setHasMore(false);\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t// case 'serverSide':\n\t\t\t// \tsetLoading(true);\n\t\t\t// \tbreak;\n\t\t\tcase 'localSide':\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t/** Событие выделение одной строки в режиме без галочек */\n\tconst _rowEventHandlers = {\n\t\tonClick: ({rowData, rowIndex, rowKey, event}) => {\n\t\t\tif (!selectable) {\n\t\t\t\t// if (_selectedRowKeys.includes(rowKey)) {\n\t\t\t\t//     setSelectedRowKeys([]);\n\t\t\t\t//     // setSelectedRow([]);\n\t\t\t\t//     // setSelectedRowObjects([]);\n\t\t\t\t//     onRowClick({\n\t\t\t\t//         selected: false,\n\t\t\t\t//         rowData,\n\t\t\t\t//         rowIndex,\n\t\t\t\t//         rowKey,\n\t\t\t\t//     });\n\t\t\t\t//     onSelectedRowsChange([]);\n\t\t\t\t// } else {\n\t\t\t\t// console.log('_rowEventHandlers -> onClick', rowKey, rowIndex);\n\t\t\t\tconst newRowObject = {\n\t\t\t\t\trowData: {...rowData},\n\t\t\t\t\trowIndex: rowIndex,\n\t\t\t\t\trowKey: rowKey,\n\t\t\t\t};\n\t\t\t\t// if(type !== 'localSide')\n\t\t\t\tsetSelectedRowKeys([rowKey]);\n\t\t\t\t// setSelectedRow(newRowObject);\n\t\t\t\t// setSelectedRowObjects([newRowObject]);\n\t\t\t\tselectedDispatchPath && props.setDateStore && props.setDateStore(selectedDispatchPath, rowData);\n\t\t\t\tonRowClick({\n\t\t\t\t\tselected: true,\n\t\t\t\t\t...newRowObject,\n\t\t\t\t});\n\t\t\t\tonSelectedRowsChange([rowKey], [rowData]);\n\t\t\t\t// }\n\t\t\t}\n\t\t},\n\t\tonDoubleClick: ({rowData, rowIndex, rowKey}) => {\n\t\t\t// console.log('onDoubleClick', rowData, rowIndex, rowKey);\n\t\t\tonRowDoubleClick({rowData, rowIndex, rowKey});\n\t\t},\n\t\t// onContextMenu: console.log('context menu'),\n\t\t// onMouseEnter: console.log('mouse enter'),\n\t\t// onMouseLeave: console.log('mouse leave'),\n\t};\n\n\t/** Событие при сортировке */\n\tconst _onColumnSort = (sortBy) => {\n\t\t// console.log(\"sortBy\", sortBy);\n\t\ttableRef.current.scrollToRow(0, 'auto');\n\t\tsetSortBy(sortBy);\n\n\t\t// Для серверной сортировки - сбросить выделение\n\t\tif (type !== 'localSide') {\n\t\t\tsetSelectedRowKeys([]);\n\t\t}\n\t\tconst loadParams = {\n\t\t\tsortBy: sortBy,\n\t\t\tfilter: _filter,\n\t\t\tsearchLine: _searchValue,\n\t\t\treload: true,\n\t\t};\n\t\t_dataProcessing(loadParams);\n\t};\n\n\t/** Получение колонок таблицы */\n\tconst _getColumns = () => {\n\t\tlet _columns = [...columns];\n\n\t\t/** Создаем колонку с галочками (если надо) */\n\t\tif (selectable) {\n\t\t\tconst selectColumn = {\n\t\t\t\tkey: '__selection__',\n\t\t\t\theaderRenderer: SelectionHead,\n\t\t\t\tcellRenderer: SelectionCell,\n\t\t\t\twidth: 40,\n\t\t\t\tflexShrink: 0,\n\t\t\t\tresizable: false,\n\t\t\t\tfrozen: 'left',\n\t\t\t\trowKey: rowKey,\n\t\t\t\tparentKey: expandParentKey,\n\t\t\t\tselectedRowKeys: _selectedRowKeys,\n\t\t\t\tindeterminateRowKeys: _indeterminateRowKeys,\n\t\t\t\tnodeAssociated: nodeAssociated,\n\t\t\t\tonChange: _onChangeSelectHandler,\n\t\t\t\tselectAll: selectAll,\n\t\t\t\tonSelectAll: _onSelectAllHandler,\n\t\t\t};\n\t\t\t_columns.unshift(selectColumn);\n\t\t}\n\t\treturn _columns;\n\t};\n\n\t/** VIEW FUNCTIONS */\n\n\tconst _footer = (\n\t\t<React.Fragment>\n\t\t\t{_footerShow ? (\n\t\t\t\t\t<React.Fragment>\n                        {/*className={'BaseTable__footer__counter'}>*/}\n\t\t\t\t\t\t<div key={'footer-left-custom-side'} className={'left-custom-side'}>\n\t\t\t\t\t\t\t{footerProps.leftCustomSideElement ? <FormItems items={footerProps.leftCustomSideElement} /> : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div key={'footer-center-custom-side'} className={'center-custom-side'}>\n\t\t\t\t\t\t\t{footerProps.centerCustomSideElement ? <FormItems items={footerProps.centerCustomSideElement} /> : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div key={'footer-right-custom-side'} className={'right-custom-side'}>\n\t\t\t\t\t\t\t{footerProps.rightCustomSideElement ? <FormItems items={footerProps.rightCustomSideElement} /> : null}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{selectable ? (\n\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t{footerProps.showElements.includes('selected')\n\t\t\t\t\t\t\t\t\t? <span>{footerProps.selectedTitle} {_selectedRowKeys.length}</span>\n\t\t\t\t\t\t\t\t\t: null }\n\t\t\t\t\t\t\t\t{footerProps.showElements.includes('loaded')\n\t\t\t\t\t\t\t\t\t? <span>{footerProps.loadedTitle} {flatten(getTableRowKeys(_rows, rowKey)).length}</span>\n\t\t\t\t\t\t\t\t\t: null }\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t{footerProps.showElements.includes('total')\n\t\t\t\t\t\t\t? type === 'infinity' && requestLoadCount !== noop && !expandColumnKey && !expandLazyLoad\n\t\t\t\t\t\t\t\t? <span>{footerProps.totalTitle} {_totalCountRows}</span>\n\t\t\t\t\t\t\t\t: <span>{footerProps.totalTitle} {flatten(getTableRowKeys(_rows, rowKey)).length}</span>\n\t\t\t\t\t\t\t: null}\n\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t) : null}\n\t\t</React.Fragment>\n\t);\n\n\t/** Событие при рендере для стилизации */\n\tconst _rowClassName = ({rowData, rowIndex}) => {\n\t\tconst {rowClassName} = props;\n\t\treturn [\n\t\t\trowClassName,\n\t\t\t_selectedRowKeys.includes(rowData[rowKey]) && 'row-selected',\n\t\t\tzebraStyle ? (rowIndex % 2 === 0 ? 'even' : 'odd') : '',\n\t\t\t'bordered'\n\t\t].join(' ')\n\t};\n\n\t/** LOAD DATA FUNCTIONS */\n\tconst onEndReached = () => {\n\t\tlet selectAll;\n\t\tconst selectLength = _selectedRowKeys.length;\n\t\tif (selectLength === 0) selectAll = false;\n\t\telse if (selectLength > 0) selectAll = null;\n\n\t\tsetSelectAll(selectAll);\n\n\t\tif (type === 'infinity') {\n\t\t\tconst loadParams = {\n\t\t\t\tsortBy: _sortBy,\n\t\t\t\tfilter: _filter,\n\t\t\t\tsearchLine: _searchValue,\n\t\t\t\treload: false,\n\t\t\t};\n\t\t\t_dataProcessing(loadParams);\n\t\t}\n\t};\n\n\t/** SELECTABLE FUNCTIONS */\n\n\t/** Событие при изменении галочки одной строки */\n\tconst _onChangeSelectHandler = ({\n\t\tselected,\n\t\t_selectedRow,\n\t\t_selectAll,\n\t\t_selectedRowKeys,\n\t\t_selectedRowObjects,\n\t\t_indeterminateRowKeys,\n\t}) => {\n\t\tsetSelectedRowKeys(_selectedRowKeys);\n\t\tsetIndeterminateRowKeys(_indeterminateRowKeys);\n\t\tsetSelectAll(_selectAll);\n\t\t// setSelectedRow(_selectedRow);\n\n\t\t// let newSelectedObjects = [];\n\t\t// if (selected) {\n\t\t// \tif (!!expandColumnKey)\n\t\t// \t\tnewSelectedObjects = flatten(\n\t\t// \t\t\tgetTableRowObjects(rows, rowKey)\n\t\t// \t\t).filter((item) => _selectedRowKeys.includes(item[rowKey]));\n\t\t// \telse\n\t\t// \t\tnewSelectedObjects = selectedRowObjects.concat([\n\t\t// \t\t\t_selectedRow.rowData,\n\t\t// \t\t]);\n\t\t// \t// setSelectedRowObjects(newSelectedObjects);\n\t\t// } else {\n\t\t// \tnewSelectedObjects = selectedRowObjects.filter(\n\t\t// \t\t(item) => item[rowKey] !== _selectedRow.rowData[rowKey]\n\t\t// \t);\n\t\t// \t// setSelectedRowObjects(newSelectedObjects);\n\t\t// }\n\t\t// console.log(\"_handleSelectChange\", props);\n\t\t// dispatchPath && props.setTableSelectedRow && props.setTableSelectedRow(dispatchPath, _selectedRow.rowData);\n\t\tselectedDispatchPath && props.setDateStore && props.setDateStore(selectedDispatchPath, _selectedRowObjects);\n\t\tonRowClick({\n\t\t\tselected,\n\t\t\trowData: _selectedRow.rowData,\n\t\t\trowIndex: _selectedRow.rowIndex,\n\t\t\trowKey,\n\t\t});\n\t\tonSelectedRowsChange(_selectedRowKeys, _selectedRowObjects);\n\t};\n\n\t/** Событие при изменении галочки \"Выделить все\" */\n\tconst _onSelectAllHandler = ({selected, rowKeys, rowObjects}) => {\n\t\tconst selectedKeys = selected ? rowKeys : [];\n\t\tsetSelectedRowKeys(selectedKeys);\n\t\tsetIndeterminateRowKeys([]);\n\t\tsetSelectAll(selected);\n\t\tselectedDispatchPath && props.setDateStore && props.setDateStore(selectedDispatchPath, selected ? rowObjects : []);\n\t\t// setSelectedRowObjects(rows);\n\t\t// console.log(\"_handleSelectAll\", selectedKeys);\n\t\tonSelectedRowsChange(selectedKeys, rowObjects);\n\t};\n\n\t/** TREE FUNCTIONS */\n\n\t/** Анализ дерева на пердмет квадратиков\n\t * Нужно для выделения по умолчанию свернутых элементов */\n\t// const _postLoadTreeAnalysis = () => {\n\t//     if (!!expandColumnKey && !expandLazyLoad) {\n\t//         let _indeterminateRowKeys = [];\n\t//         // console.log(\"mounted->selectedRowObjects: \", selectedRowObjects);\n\t//         selectedRowObjects.map((item) => {\n\t//             const [ss, ii] = parentAnalysis({\n\t//                 rowData: item,\n\t//                 rowKey,\n\t//                 parentKey: expandParentKey,\n\t//                 checked: true,\n\t//                 nodeAssociated,\n\t//                 treeData: _rows,\n\t//                 selectedRowKeys: _selectedRowKeys,\n\t//                 indeterminateRowKeys: _indeterminateRowKeys,\n\t//             });\n\t//             _indeterminateRowKeys.push(...ii);\n\t//         });\n\t//         setIndeterminateRowKeys([...new Set(_indeterminateRowKeys)]);\n\t//     }\n\t// }\n\n\tconst _onExpandedRowsChange = (expandedRowKeys) => {\n\t\t// console.log(\"_onExpandedRowsChange\", expandedRowKeys);\n\t\tonExpandedRowsChange(expandedRowKeys);\n\t};\n\tconst _onRowExpand = ({expanded, rowData, rowIndex, rowKey}) => {\n\t\t// console.log(\"_onRowExpand\", rowData, expanded, rowIndex, rowKey);\n\t\tif (expanded) {\n\t\t\tsetExpandedRowKeys([..._expandedRowKeys, rowKey]);\n\n\t\t\tif (expandLazyLoad) {\n\t\t\t\tconst loadParams = {\n\t\t\t\t\tsortBy: _sortBy,\n\t\t\t\t\tfilter: {..._filter, [expandParentKey]: rowKey},\n\t\t\t\t\tsearchLine: _searchValue,\n\t\t\t\t\treload: false,\n\t\t\t\t\texpandRow: rowData,\n\t\t\t\t};\n\t\t\t\t// _callPropsOnLoad(loadParams);\n\t\t\t\t_dataProcessing(loadParams);\n\t\t\t}\n\t\t} else {\n\t\t\tlet expandedRowKeys = [..._expandedRowKeys];\n\t\t\tlet allChildKeys = flatten(\n\t\t\t\tgetTableRowKeys(rowData.children, props.rowKey)\n\t\t\t);\n\t\t\tallChildKeys.push(rowKey);\n\t\t\t// console.log('allChildKeys', allChildKeys);\n\t\t\tsetExpandedRowKeys(\n\t\t\t\texpandedRowKeys.filter((item) => !allChildKeys.includes(item))\n\t\t\t);\n\t\t}\n\t\tonRowExpand({expanded, rowData, rowIndex, rowKey});\n\t};\n\n\t/** COMMAND PANEL FUNCTIONS */\n\n\tconst _getDisabledElementsOfCommandPanel = () => {\n\t\t// console.log('commandPanelProps', commandPanelProps);\n\t\tlet _disabledElements = [...commandPanelProps.disabledElements];\n\t\tif (type === 'infinity') {\n\t\t\t_disabledElements.push('up', 'down');\n            // console.log('_getDisabledElementsOfCommandPanel => infinity');\n        }\n\t\tif (selectable && _selectedRowKeys.length > 1) {\n\t\t\t_disabledElements.push('addAsCopy', 'edit', 'up', 'down');\n            // console.log('_getDisabledElementsOfCommandPanel => selectable');\n        }\n\t\tif (_selectedRowKeys.length === 0) {\n\t\t\t_disabledElements.push('addAsCopy', 'edit', 'delete', 'up', 'down');\n            // console.log('_getDisabledElementsOfCommandPanel => NO select');\n        }\n\t\t// if (expandColumnKey) {\n\t\t\t//|| !selectedRow) {\n\t\t\t// _disabledElements.push('up', 'down');\n            // console.log('_getDisabledElementsOfCommandPanel => expandColumnKey');\n        // }\n        // console.log('_getDisabledElementsOfCommandPanel => ', _disabledElements, _selectedRowKeys);\n\n        return [...new Set(_disabledElements)];\n\t};\n\n\tconst _onClickAddAsCopy = (event) => {\n\t\t// console.log(\"_onClickAddAsCopy\", selectedRow);\n\t\tcommandPanelProps.onClickAddAsCopy(\n\t\t\tevent,\n\t\t\tfindNodeByRowKey(_rows, rowKey, _selectedRowKeys[0])\n\t\t);\n\t};\n\n\tconst _onClickEdit = (event) => {\n\t\t// console.log(\"_onClickEdit\", selectedRow);\n\t\tcommandPanelProps.onClickEdit(event, {\n\t\t\trowData: findNodeByRowKey(_rows, rowKey, _selectedRowKeys[0]),\n\t\t});\n\t\t// props.onClickEdit(event, selectedRow);\n\t};\n\n\tconst _onClickDelete = (event) => {\n\t\t// console.log(\"_onClickDelete\", autoDeleteRows, selectedRowKeys);\n\t\tif (autoDeleteRows) {\n\t\t\tif (type === 'localSide') {\n\t\t\t\tsetRowsHandler(\n\t\t\t\t\t_rows.filter(\n\t\t\t\t\t\t(item) => !_selectedRowKeys.includes(item[rowKey])\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t_setRowsHandler(\n\t\t\t\t\t_rows.filter(\n\t\t\t\t\t\t(item) => !_selectedRowKeys.includes(item[rowKey])\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\tsetSelectedRowKeys([]);\n\t\t}\n\t\tcommandPanelProps.onClickDelete(event, _selectedRowKeys);\n\t};\n\n\tconst loop = (data, key, callback) => {\n\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\tif (data[i][rowKey] === key) {\n\t\t\t\t// console.log(`Selected => index: [${i}], path: [${data[i].path}]`, data);\n\t\t\t\treturn callback(data[i], i, data);\n\t\t\t} else {\n\t\t\t\t// console.log(`Other => index: [${i}], path: [${data[i].path}]`);\n\t\t\t}\n\t\t\tif (data[i].children) {\n\t\t\t\tloop(data[i].children, key, callback);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst _onClickUp = (event) => {\n\t\tconst data = [..._rows];\n\t\tconst key = _selectedRowKeys[0];\n\t\tloop(data, key, (item, index, arr)  => {\n\t\t\tconst newRowIndex = _getNewIndexRow(index, index - 1);\n\t\t\t_changeIndexRow(index, newRowIndex, arr, data);\n\t\t\tcommandPanelProps.onClickUp(event, {\n\t\t\t\trowIndex: newRowIndex,\n\t\t\t\trowData: findNodeByRowKey(_rows, rowKey, _selectedRowKeys[0]),\n\t\t\t}, data);\n\t\t})\n\t};\n\n\tconst _onClickDown = (event) => {\n\t\tconst data = [..._rows];\n\t\tconst key = _selectedRowKeys[0];\n\t\tloop(data, key, (item, index, arr)  => {\n\t\t\tconst newRowIndex = _getNewIndexRow(index, index + 1);\n\t\t\t_changeIndexRow(index, newRowIndex, arr, data);\n\t\t\tcommandPanelProps.onClickDown(event, {\n\t\t\t\trowIndex: newRowIndex,\n\t\t\t\trowData: findNodeByRowKey(_rows, rowKey, _selectedRowKeys[0]),\n\t\t\t}, data);\n\t\t})\n\t};\n\n\tconst _getNewIndexRow = (oldIndex, newIndex) =>\n\t\tnewIndex >= 0 && newIndex < _rows.length ? newIndex : oldIndex;\n\n\tconst _changeIndexRow = (oldIndex, newIndex, arr, data) => {\n\t\tif (newIndex >= 0 && newIndex < arr.length) {\n\t\t\t// let arr = [..._rows]; // Копируем массив\n\t\t\tconst item = arr.splice(oldIndex, 1); // Удаляем элемент со старого места\n\t\t\t// console.log('_changeIndexRow => ',item);\n\t\t\tarr.splice(newIndex > 0 ? newIndex : 0, 0, item[0]); // Ставим элемент на новое место\n\t\t\t// console.log(\"_changeIndexRow\", item[0]);\n\t\t\tif (type === 'localSide') {\n\t\t\t\tsetRowsHandler(data);\n\t\t\t} else {\n\t\t\t\t_setRowsHandler(data);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst _onSearch = (searchLine, e) => {\n        e.preventDefault();\n\t\t// console.log(\"_onSearch\", searchLine);\n        tableRef.current.scrollToRow(0, 'auto');\n\t\tsetSearchValue(searchLine);\n\t\tconst loadParams = {\n\t\t\tsortBy: _sortBy,\n\t\t\tfilter: _filter,\n\t\t\tsearchLine: searchLine,\n\t\t\treload: true,\n\t\t};\n\t\t_dataProcessing(loadParams);\n\t\tcommandPanelProps.onSearch(searchLine);\n\t};\n\n\t/** FILTER PANEL FUNCTIONS */\n\n\tconst _onChangeFilter = (filter) => {\n\t\t// console.log('_onChangeFilter', filter);\n\t\tsetHasMore(true);\n\t\tsetFilter(filter);\n\t\tfilterPanelProps.onChangeFilter(filter);\n\t};\n\tconst _onApplyFilter = (filter) => {\n\t\t// console.log('_onApplyFilter', filter);\n\t\tconst loadParams = {\n\t\t\tsortBy: _sortBy,\n\t\t\tfilter: filter,\n\t\t\tsearchLine: _searchValue,\n\t\t\treload: true,\n\t\t};\n\t\t_dataProcessing(loadParams);\n\t\tfilterPanelProps.onApplyFilter(filter);\n\t};\n\n\t/** SELECTED PANEL */\n\n\tconst _onClickDropSelectHandler = (dropObject) => {\n\t\tconst newSelectedKeys = _selectedRowKeys.filter(\n\t\t\t(item) => item !== dropObject[rowKey]\n\t\t);\n\t\tsetSelectedRowKeys(newSelectedKeys);\n\t\tonSelectedRowsChange(newSelectedKeys);\n\t};\n\n\t// const rowProps = {\n\t//     // tagName: 'button',\n\t//     // onClick: e => {\n\t//     //     e.preventDefault();\n\t//     //     e.stopPropagation();\n\t//     //     console.log(`You clicked row onClick`)\n\t//     // },\n\t//     onDoubleClick: e => {\n\t//         e.preventDefault();\n\t//         e.stopPropagation();\n\t//         console.log(`You clicked row onDoubleClick`)\n\t//     }\n\t// };\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`${rtPrefix}-table`}\n\t\t\tstyle={{width: '100%', height: '100%'}}\n\t\t>\n\t\t\t<div className={`${rtPrefix}-table-top-panel`}>\n\t\t\t\t<CommandPanel\n\t\t\t\t\t{...commandPanelProps}\n\t\t\t\t\tdefaultValueSearch={defaultSearchValue}\n\t\t\t\t\tdisabledElements={_getDisabledElementsOfCommandPanel()}\n\t\t\t\t\tonClickAddAsCopy={_onClickAddAsCopy}\n\t\t\t\t\tonClickDelete={_onClickDelete}\n\t\t\t\t\tonClickDown={_onClickDown}\n\t\t\t\t\tonClickEdit={_onClickEdit}\n\t\t\t\t\tonClickUp={_onClickUp}\n\t\t\t\t\tonSearch={_onSearch}\n\t\t\t\t/>\n\t\t\t\t{/*{!filter ? (*/}\n\t\t\t\t<FilterPanel\n\t\t\t\t\t{...filterPanelProps}\n\t\t\t\t\tdefaultFilter={defaultFilter}\n\t\t\t\t\tonChangeFilter={_onChangeFilter}\n\t\t\t\t\tonApplyFilter={_onApplyFilter}\n\t\t\t\t/>\n\t\t\t\t{/*) : null}*/}\n\t\t\t</div>\n\t\t\t<div className={`${rtPrefix}-baseTable`}>\n\t\t\t\t<AutoResizer>\n\t\t\t\t\t{({width, height}) => (\n\t\t\t\t\t\t<BaseTable\n\t\t\t\t\t\t\tref={tableRef}\n\t\t\t\t\t\t\t/** Required */\n\t\t\t\t\t\t\tcolumns={_getColumns()}\n\t\t\t\t\t\t\tdata={_rows}\n\t\t\t\t\t\t\t/** Control Props */\n\t\t\t\t\t\t\tsortBy={_sortBy}\n\t\t\t\t\t\t\t/** Base Props */\n\t\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\t\theight={height}\n\t\t\t\t\t\t\trowKey={rowKey}\n\t\t\t\t\t\t\t// rowProps={rowProps}\n\n\t\t\t\t\t\t\t/** View Props */\n\t\t\t\t\t\t\trowClassName={_rowClassName}\n\t\t\t\t\t\t\temptyRenderer={empty}\n\t\t\t\t\t\t\tfixed={fixWidthColumn}\n\t\t\t\t\t\t\tfooterHeight={_footerShow ? footerProps.height : 0}\n\t\t\t\t\t\t\theaderHeight={headerHeight}\n\t\t\t\t\t\t\trowHeight={rowHeight}\n\t\t\t\t\t\t\toverlayRenderer={loading ? overlay : null}\n\t\t\t\t\t\t\tfooterRenderer={_footer}\n\t\t\t\t\t\t\trowRenderer={rowRenderer}\n\t\t\t\t\t\t\testimatedRowHeight={estimatedRowHeight}\n\t\t\t\t\t\t\t/** Load Data Props */\n\t\t\t\t\t\t\tonEndReachedThreshold={loadThreshold}\n\t\t\t\t\t\t\tonEndReached={\n\t\t\t\t\t\t\t\ttype === 'infinity' ? onEndReached : undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t/** Tree Props */\n\t\t\t\t\t\t\texpandColumnKey={expandColumnKey}\n\t\t\t\t\t\t\texpandedRowKeys={_expandedRowKeys}\n\t\t\t\t\t\t\t/** Events */\n\t\t\t\t\t\t\tonColumnSort={_onColumnSort}\n\t\t\t\t\t\t\trowEventHandlers={_rowEventHandlers}\n\t\t\t\t\t\t\tonExpandedRowsChange={_onExpandedRowsChange}\n\t\t\t\t\t\t\tonRowExpand={_onRowExpand}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</AutoResizer>\n\t\t\t</div>\n\t\t\t{showSelection && selectable && !expandColumnKey ? (\n\t\t\t\t<SelectionList\n\t\t\t\t\tonClickDropSelect={_onClickDropSelectHandler}\n\t\t\t\t\tselectedRowObjects={flatten(\n\t\t\t\t\t\tgetTableRowObjects(_rows, rowKey)\n\t\t\t\t\t).filter((item) => _selectedRowKeys.includes(item[rowKey]))}\n\t\t\t\t\trowRender={rowRenderShowSelection}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t</div>\n\t);\n});\n\nTable.propTypes = {\n\t/**\n\t * REQUIRED\n\t * */\n\n\t/** Столбцы таблицы */\n\tcolumns: PropTypes.arrayOf(PropTypes.object).isRequired,\n\n\t/** Тип таблицы\n\t * **infinity** - загрузка данных по скроллу. Фильтрация, сортировка и поиск через сервер.\n\t * **serverSide** - первичная загрузка таблицы с сервера. Фильтрация, сортировка и поиск через сервер. Lazy Load для дерева тоже тут.\n\t * **localSide** - полностью локальная таблица. Фильтрация, сортировка и поиск через локальный rows */\n\ttype: PropTypes.oneOf(['infinity', 'serverSide', 'localSide']).isRequired,\n\n\t/** Объект со свойствами Command Panel */\n\tcommandPanelProps: PropTypes.object,\n\n\t/** Объект со свойствами Filter Panel */\n\tfilterPanelProps: PropTypes.object,\n\n\t/**\n\t * ПРОПСЫ ЗАДАНИЯ ЗНАЧЕНИЙ ПО УМОЛЧАНИЮ\n\t * */\n\n\t/** Строки по умолчанию */\n\tdefaultRows: PropTypes.arrayOf(PropTypes.object),\n\n\t/** Ключи выделенных по умолчанию строк */\n\tdefaultSelectedRowKeys: PropTypes.arrayOf(\n\t\tPropTypes.oneOfType([PropTypes.string, PropTypes.number])\n\t),\n\n\t/** Значение строки поиска по умолчанию строк */\n\tdefaultSearchValue: PropTypes.string,\n\n\t/** Объект фильтрации по умолчанию */\n\tdefaultFilter: PropTypes.object,\n\n\t/** Сортировка по умолчанию */\n\tdefaultSortBy: PropTypes.shape({\n\t\t/** Ключ поля для сортировки */\n\t\tkey: PropTypes.string,\n\t\t/** Направление сортировки */\n\t\torder: PropTypes.oneOf(['asc', 'desc']),\n\t}),\n\n\t/**\n\t * ПРОПРЫ ДЛЯ ВНЕШНЕГО КОНТРОЛЯ ТАБЛИЦЫ\n\t * */\n\n\t/** Строки таблицы. Используется для контроля таблицы из вне. */\n\trows: PropTypes.arrayOf(PropTypes.object),\n\n    /** Функция задания строк таблицы. */\n    setRows: PropTypes.func,\n\n\t/** Выделенные строки таблицы. */\n\tselectedRowKeys: PropTypes.arrayOf(\n\t\tPropTypes.oneOfType([PropTypes.string, PropTypes.number])\n\t),\n\n\t/** Значение строки поиска */\n\tsearchValue: PropTypes.string,\n\n\t/** Объект фильтрации */\n\tfilter: PropTypes.object,\n\n\t/** Объект сортировки */\n\tsortBy: PropTypes.shape({\n\t\t/** Ключ поля для сортировки */\n\t\tkey: PropTypes.string,\n\t\t/** Направление сортировки */\n\t\torder: PropTypes.oneOf(['asc', 'desc']),\n\t}),\n\n\t/**\n\t * BASE PROPS\n\t * */\n\n\t/** Автоудаление строк из таблицы по кнопке в командной панели*/\n\tautoDeleteRows: PropTypes.bool,\n\n\t/** Поле для уникальной идентификации строки */\n\trowKey: PropTypes.string,\n\n\t/**\n\t * VIEW PROPS\n\t * */\n\n\t/** Вывод когда нет данных */\n\tempty: PropTypes.element,\n\n\t/** Отображение загрузки данных */\n\toverlay: PropTypes.element,\n\n\t/** Фиксированная ширина столбцов. Появится боковой скрол */\n\tfixWidthColumn: PropTypes.bool,\n\n\t/** Высота подвала */\n\tfooterHeight: PropTypes.number,\n\n\t/** Отображать ли подвал */\n\tfooterShow: PropTypes.bool,\n\n    /** Заголовки футтера */\n    footerTitles: PropTypes.shape({\n\t\t/** Заголовок выделенных элементов */\n        selectedRows: PropTypes.string,\n\t\t/** Заголовок загруженных элементов */\n        loadedRows: PropTypes.string,\n\t\t/** Заголовок всего элементов */\n\t\ttotalRows: PropTypes.string,\n    }),\n\n\tfooterProps: PropTypes.shape({\n\n\t\t/** Высота подвала */\n\t\theight: PropTypes.number,\n\n\t\t/** Массив элементов футтера, которые надо отобразить\n\t\t * ['selected', 'loaded', 'total'] */\n\t\tshowElements: PropTypes.arrayOf(PropTypes.string),\n\n\t\t/** Заколовок для кол-ва выбранных объектов */\n\t\tselectedTitle: PropTypes.string,\n\n\t\t/** Заколовок для кол-ва загруженны объектов */\n\t\tloadedTitle: PropTypes.string,\n\n\t\t/** Заколовок для кол-ва всего объектов */\n\t\ttotalTitle: PropTypes.string,\n\n\t\t/** Левый кастомный элемент командной панели */\n\t\tleftCustomSideElement: PropTypes.arrayOf(PropTypes.object),\n\n\t\t/** Центральный кастомный элемент командной панели */\n\t\tcenterCustomSideElement: PropTypes.arrayOf(PropTypes.object),\n\n\t\t/** Правый кастомный элемент командной панели */\n\t\trightCustomSideElement: PropTypes.arrayOf(PropTypes.object),\n\t}),\n\n\t/** Высота заголовка таблицы */\n\theaderHeight: PropTypes.number,\n\n\t/** Высота строки таблицы */\n\trowHeight: PropTypes.number,\n\n\t/** Custom row renderer\n\t * Параметры - ({ isScrolling, cells, columns, rowData, rowIndex, depth }) */\n\trowRenderer: PropTypes.oneOfType([PropTypes.func, PropTypes.element]),\n\n\t/** Строки будут в зебро-стиле */\n\tzebraStyle: PropTypes.bool,\n\n\t/**\n\t * LOAD DATA PROPS\n\t * */\n\n\t/** Порог в пикселях для вызова _onLoad.\n\t * Кол-во пикселей от низа таблицы для срабатывания события загрузки (onEndReached) */\n\tloadThreshold: PropTypes.number,\n\n\t/** Размер страницы */\n\tpageSize: PropTypes.number,\n\n\t/** Функция запроса для загрузки строк (данных) */\n\trequestLoadRows: PropTypes.func,\n\n    /** Функция запроса для загрузки строк (данных) */\n    requestLoadCount: PropTypes.func,\n\n\t/** Имя параметра для поиска */\n\tsearchParamName: PropTypes.string,\n\n\t/**\n\t * SELECTABLE PROPS\n\t * */\n\n\t/** Таблица с возможностью выбора строки */\n\tselectable: PropTypes.bool,\n\n\t/**\n\t * TREE PROPS\n\t * */\n\n\t/** Родительский узел и дочерние узлы связаны (Работает только при selectable) */\n\tnodeAssociated: PropTypes.bool,\n\n\t/** Ключ колонки по которой строить иерархию */\n\texpandColumnKey: PropTypes.string,\n\n\t/** Открыть по умолчанию вложенность до уровня N или 'All' */\n\texpandDefaultAll: PropTypes.bool,\n\n\t/** Загружать ноды иерархии по одной */\n\texpandLazyLoad: PropTypes.bool,\n\n\t/** Поле в котором хранится ссылка на родителя */\n\texpandParentKey: PropTypes.string,\n\n\t/**\n\t * EVENTS\n\t * */\n\n\t/** Событие при клике на строку (только при selectable = false)\n\t * Параметр - ({selected, rowData, rowIndex}) */\n\tonRowClick: PropTypes.func,\n\n\t/** Событие при двойном клике на строку.\n\t * Параметр - ({rowData, rowIndex, rowKey}) */\n\tonRowDoubleClick: PropTypes.func,\n\n\t/** События при открытии / закрытии ноды\n\t * Парметры - ({ expanded, rowData, rowIndex, rowKey }) */\n\tonRowExpand: PropTypes.func,\n\n\t/** Событие при выборе строки.\n\t * Параметр - массив выбранных строе (только rowKey) */\n\tonSelectedRowsChange: PropTypes.func,\n\n\t/** События при открытии / закрытии ноды\n\t * Парметры - (expandedRowKeys) - массив ключей открытых нод */\n\tonExpandedRowsChange: PropTypes.func,\n\n\t/** SELECTED PANEL */\n\n\t/** Отображать ли панель выбранных элементов */\n\tshowSelection: PropTypes.bool,\n\n\t/** Строка или функция для отображения элементов списка выбранных\n\t * Строка - имя поля\n\t * Функция - рендер строк.\n\t * `({ rowData, rowIndex }) => { return <Component> }` */\n\trowRenderShowSelection: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\n\t/** Путь в сторе куда класть выбранную строку таблицы */\n\tdispatchPath: PropTypes.string,\n\n\t/** Объект для подписки на изменения в STORE */\n\tsubscribe: PropTypes.object,\n};\n\nTable.defaultProps = {\n\tdefaultRows: [],\n\tdefaultSelectedRowKeys: [],\n\tdefaultSearchValue: '',\n\tdefaultFilter: {},\n\tdefaultSortBy: {},\n\n\trows: [],\n\tselectedRowKeys: [],\n\tsearchValue: '',\n\tfilter: {},\n\tsortBy: {},\n\n\tautoDeleteRows: true,\n\trowKey: 'id',\n\n\tempty: empty,\n\toverlay: overlay,\n\tfixWidthColumn: false,\n\tfooterHeight: 30,\n\tfooterShow: false,\n    footerTitles: {\n        selectedRows: 'Выделено:',\n        loadedRows: 'Загружено записей:',\n        totalRows: 'Всего записей:',\n    },\n\tfooterProps: {\n\t\theight: 30,\n\t\tshowElements: [],\n\t\tselectedTitle: 'Выделено:',\n\t\tloadedTitle: 'Загружено записей:',\n\t\ttotalTitle: 'Всего записей:',\n\t\tleftCustomSideElement: null,\n\t\tcenterCustomSideElement: null,\n\t\trightCustomSideElement: null\n\t},\n\theaderHeight: 30,\n\trowHeight: 30,\n\tzebraStyle: false,\n\n\tloadThreshold: 300,\n\tpageSize: 50,\n\trequestLoadRows: noop,\n    requestLoadCount: noop,\n\tsearchParamName: 'searchLine',\n\n\tselectable: false,\n\n\tnodeAssociated: true,\n\texpandColumnKey: undefined,\n\texpandDefaultAll: true,\n\texpandLazyLoad: false,\n\texpandParentKey: 'parentId',\n\n\tonRowClick: noop,\n\tonRowDoubleClick: noop,\n\tonRowExpand: noop,\n\tonSelectedRowsChange: noop,\n\tonExpandedRowsChange: noop,\n\n\tshowSelection: false,\n\n\tsubscribe: {},\n};\n\nconst mapStateToProps = (store, ownProps) => {\n\tconst {subscribe} = ownProps;\n\tif(subscribe){\n\t\tconst {name, path} = subscribe;\n\t\tif(name && path)\n\t\t\treturn { [name]: objectPath.get(store, path) };\n\t}\n\n\treturn {};\n};\nconst mapDispatchToProps = (dispatch) =>\n\tbindActionCreators({ setDateStore: setDateStore}, dispatch);\n\n// const mapStateToProps = (store, ownProps) => {\n//     // console.log(\"mapStateToProps -> store\", store);\n//     // const {match , section} = ownProps;\n//     // const { path } = match;\n//     // const rows = store.table[path] && store.table[path][section] ? store.table[path][section].rows : [];\n//     // console.log(\"mapStateToProps -> rows\", rows);\n//     return { store: store };\n// };\n// const mapDispatchToProps = (dispatch, ownProps) => {\n//     // console.log(\"mapDispatchToProps -> ownProps\", ownProps);\n//     // const {match , section} = ownProps;\n//     // const { path } = match;\n//     // initTableStore(path, section);\n//     return bindActionCreators(\n//         {\n//             initTableStore,\n//             setRows,\n//         },\n//         dispatch\n//     );\n// };\n//\n// export default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })(Table);\n\n/**\n * @deprecated [#1] since version 0.0.54 [#2].\n * */\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })(Table);\n","import React, {useEffect, useState, useRef} from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { flatten, getTableRowKeys, noop, notificationError } from \"../../utils/baseUtils\";\nimport {rtPrefix} from '../../utils/variables';\nimport {Button, Typography} from 'antd';\nimport { DownOutlined, UpOutlined, CloseCircleFilled } from '@ant-design/icons'\nimport Table from '../Table/Table';\nimport { setDateStore } from \"../../../redux/rtd.actions\";\nconst {Paragraph} = Typography;\n\nconst Select = (props) => {\n\tconst [_selectedRowKeys, setSelectedRowKeys] = useState([]);\n\tconst [_selectedRowData, _setSelectedRowData] = useState(null);\n\tconst [isSelectOpened, setIsSelectOpened] = useState(false);\n\tconst [isClickInSelect, setIsClickInSelect] = useState(false);\n\n\tconst {\n\t\tname,\n\t\trowRender,\n        className,\n\t\ttype,\n\t\ttitle,\n\t\tplaceholder,\n        selectedRowKeys,\n\t\t// searchable,\n        size,\n\t\twidthControl,\n\t\twidthPopup,\n\t\theightPopup,\n\n\t\tonChangeKeys,\n        defaultValue,\n        value,\n\n\t\t/** Table Props */\n\t\tdefaultSelectedRowKeys,\n\t\trowKey,\n\t\texpandColumnKey,\n\t\tshowSelection,\n\t\trequestLoadRows,\n\t\trequestLoadDefault,\n        commandPanelProps,\n\t\trows,\n\t\tdispatchPath,\n\t} = props;\n\n\tconst selectedDispatchPath = dispatchPath && `${dispatchPath}.selected`;\n\tconst searchable = commandPanelProps && commandPanelProps.showElements && commandPanelProps.showElements.includes('search');\n\tconst node = useRef(null);\n\n\tconst setSelectedRowData = (rowData) => {\n\t\tselectedDispatchPath && props.setDateStore && props.setDateStore(selectedDispatchPath, rowData);\n\t\t_setSelectedRowData(rowData);\n\t}\n\n\tconst loadSelectedObject = ({selectedRowKeys}) => {\n        if(selectedRowKeys) {\n            let _selectedRowKeys;\n\t\t\tif(Array.isArray(selectedRowKeys)) {\n\t\t\t\tsetSelectedRowKeys(selectedRowKeys);\n\t\t\t\t_selectedRowKeys = selectedRowKeys\n\t\t\t}\n            else {\n            \tsetSelectedRowKeys([selectedRowKeys]);\n\t\t\t\t_selectedRowKeys = [selectedRowKeys]\n\t\t\t}\n\n\t\t\t// console.log(\"setSelectedRowKeys[70] -> \", _selectedRowKeys);\n\n\t\t\tconst request = requestLoadDefault\n                ? requestLoadDefault\n                : requestLoadRows;\n\n            if (!!request && !rows && _selectedRowKeys.length > 0) {\n                // console.log('defaultSelectedRowKeys ', defaultSelectedRowKeys, defaultSelectedRowKeys.length);\n                request({\n                    data: {\n                        [rowKey]:  _selectedRowKeys, //defaultSelectedRowKeys,\n                    },\n                })\n                    .then((response) => {\n                        let result = response.data;\n\t\t\t\t\t\t// console.log(\"setSelectedRowData[84] => \", response.data);\n\t\t\t\t\t\tif (result.length > 0) setSelectedRowData(result[0]);\n                    })\n\t\t\t\t\t.catch(error => notificationError(error, 'Ошибка загрузки данных в Select') );\n\n            } else if (rows && _selectedRowKeys && type === 'SingleSelect') {\n            \tlet srk = _selectedRowKeys[0];\n\t\t\t\t// if(Array.isArray(selectedRowKeys) && selectedRowKeys.length > 0)\n\t\t\t\t// \tsrk = selectedRowKeys[0];\n            \t// else\n\t\t\t\t// \tsrk = selectedRowKeys;\n\n                const findRow = rows.find((row) => row[rowKey] === srk);\n                // console.log(\"setSelectedRowData[98] => \", findRow, rows, srk);\n                setSelectedRowData(findRow);\n            } else {\n                setSelectedRowData(null);\n            }\n        }\n\t};\n\n\tuseEffect(() => {\n        loadSelectedObject({selectedRowKeys: defaultSelectedRowKeys});\n\t\twindow.addEventListener('mousedown', handleMouseClick, false);\n\t\treturn () => {\n\t\t\twindow.removeEventListener('mousedown', handleMouseClick, false);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\t// console.log(\"selectedRowKeys\", selectedRowKeys);\n        loadSelectedObject({selectedRowKeys: selectedRowKeys});\n    }, [selectedRowKeys]);\n\n\tuseEffect(() => {\n\t\tif(_selectedRowKeys !== undefined && _selectedRowData === undefined){\n\t\t\t// console.log(\"useEffect rows\", _selectedRowKeys, _selectedRowData, rows);\n\t\t\tloadSelectedObject({selectedRowKeys: _selectedRowKeys});\n\t\t}\n\t}, [rows])\n\n\tuseEffect(() => {\n\t\t// console.log(\"isClickInSelect \", isClickInSelect);\n\t\t// console.log(\"isSelectOpened \", isSelectOpened);\n\t\tif(!isClickInSelect && isSelectOpened)\n\t\t\tonClosePopup();\n\t}, [isClickInSelect]);\n\n\t// useEffect(() => {\n\t// \t// console.log(\"setSelectedRowData[117] => \", props.value, props.defaultValue);\n\t// }, [props])\n\n\tconst columns = [\n\t\t{\n\t\t\tkey: rowKey,\n\t\t\ttitle: title,\n\t\t\tdataKey: rowKey,\n\t\t\twidth: 500,\n\t\t\tcellRenderer:\n\t\t\t\ttypeof rowRender === 'function'\n\t\t\t\t\t? rowRender\n\t\t\t\t\t: ({rowData}) => <div className={'rt-table-cell'}>{rowData[rowRender]}</div>,\n\t\t},\n\t];\n\n\tconst _getHeadCls = () => {\n\t    let cls = [`${rtPrefix}-select-header`];\n\n\t    if(isSelectOpened)\n            cls.push('opened');\n\n\t    if(_selectedRowKeys && _selectedRowKeys.length > 0)\n\t        cls.push('selected');\n\n\t    switch (size) {\n            case 'small':\n                cls.push(`${rtPrefix}-select-header-sm`);\n                break;\n            case 'large':\n                cls.push(`${rtPrefix}-select-header-lg`);\n                break;\n            default: break;\n        }\n\n\t    return cls.join(' ');\n    };\n\n\tconst _getHeadText = () => {\n\t\tif (type === 'SingleSelect') {\n\t\t\t\tif(_selectedRowData)\n\t\t\t\t\tif(typeof rowRender === 'function')\n\t\t\t\t\t\treturn rowRender({rowData: _selectedRowData});\n\t\t\t\t\telse\n\t\t\t\t\t\treturn `${_selectedRowData[rowRender]}`;\n\t\t\t\telse\n\t\t\t\t\treturn `${placeholder}`;\n\t\t} else {\n\t\t\treturn _selectedRowKeys.length > 0\n\t\t\t\t? `Выбрано: ${_selectedRowKeys.length}`\n\t\t\t\t: `${placeholder}`;\n\t\t}\n\t};\n\n    const _getPopupCls = () => {\n    \t// console.log('_getPopupCls _selectedRowKeys => ', _selectedRowKeys);\n        let cls = [`${rtPrefix}-select-popup`];\n\n        if(title)\n            cls.push(`${rtPrefix}-select-popup-with-title`);\n\n        return cls.join(' ');\n    };\n\tconst _getPopupStyle = () => {\n\t\t// if (heightPopup)\n\t\t// \treturn {height: `${heightPopup}px`, width: `${widthPopup}px`};\n\n\t\tlet height = {};\n\t\tlet defRowsLen = 0;\n\n\t\tif (!requestLoadRows && rows)\n\t\t\tif (expandColumnKey)\n\t\t\t\tdefRowsLen = flatten(getTableRowKeys(rows, rowKey)).length;\n\t\t\telse defRowsLen = rows.length;\n\n\t\t// console.log('_getPopupStyle', defRowsLen);\n\t\tif (defRowsLen && defRowsLen > 0) {\n\t\t\theight =\n\t\t\t\tdefRowsLen * 30 + // Кол-во строк * высоту строки\n\t\t\t\t(searchable ? 46 : 0) + // Размер поисковой строки или 0\n\t\t\t\t(type === 'MultiSelect' ? 65 : 0) + // Размер футтера (30) + размер кнопки 35 или 0\n\t\t\t\t(showSelection ? 200 : 0) + // Размер панели выбранных элементов или 0\n\t\t\t\t22; // Паддинги и бордер\n\t\t\t// console.log('heightPopup', height);\n\t\t\tif (height > heightPopup) height = `${heightPopup}px`;\n\t\t\telse height = `${height}px`;\n\t\t} else {\n\t\t\t// console.log(\"heightPopup\", heightPopup);\n\t\t\theight = `${heightPopup}px`;\n\t\t}\n\n\t\t// console.log(\"heightPopup, widthPopup\", heightPopup, widthPopup);\n\t\treturn {height, width: `${widthPopup}px`};\n\t};\n\n\tconst getEvents = () => {\n\t\treturn (commandPanelProps && commandPanelProps.systemBtnProps && Object.keys(commandPanelProps.systemBtnProps)) || [];\n\t};\n\n\tconst _onChange = (selectedKeys) => {\n\t\t// console.log('_onChange [176]', selectedKeys);\n\t\tsetSelectedRowKeys(selectedKeys);\n\t\t// setSelectedRowData(selectedObjects);\n\t\tonChangeKeys(name, selectedKeys.length ? selectedKeys : null);\n\t\t// onChangeObjects(name, selectedObjects.length ? selectedObjects : null);\n\t\t// setCountSelect(selectedKeys.length);\n\t\tif (type === 'SingleSelect') {\n\t\t\tsetIsSelectOpened(false);\n\t\t}\n\t};\n\n\tconst _SingleSelectRow = ({selected, rowData, rowIndex}) => {\n\t\t// console.log(\"_SingleSelectRow => \", rowData);\n\t\tsetSelectedRowData(rowData);\n\t\t// selected ? setSingleSelectRowData(rowData) : setSingleSelectRowData({})\n\t};\n\n\tconst handleMouseClick = (e) => {\n\t\tnode && node.current && setIsClickInSelect(node.current.contains(e.target))\n\t};\n\n\tconst onClosePopup  = () => {\n\t\tsetIsSelectOpened(false);\n\t};\n\n\tconst onOpenPopup = () => {\n\t\tif(!isSelectOpened)\n\t\t\tsetIsSelectOpened(true);\n\t\telse\n\t\t\tsetIsSelectOpened(false);\n\t};\n\n\tconst onClickClear = () => {\n\t\t// console.log(\"delete Selected\");\n\t\tsetSelectedRowData(null);\n\t\t_onChange([]);\n\t};\n\n\treturn (\n\t\t<div\n            className={`${rtPrefix}-select ${className ? className : ''}`}\n\t\t\tref={node}\n\t\t>\n\t\t\t{title ? <div className={'title'}>{title}</div> : null}\n\t\t\t<div\n\t\t\t\tclassName={_getHeadCls()}\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: widthControl === 0 ? '100%' : `${widthControl}px`,\n\t\t\t\t}}\n\n\t\t\t>\n\t\t\t\t<div className={`${rtPrefix}-select-selector`}\n\t\t\t\t\t // onFocus={ () => {setIsSelectOpened(true)} }\n\t\t\t\t\t onClick={ onOpenPopup }\n\t\t\t\t>\n\t\t\t\t\t<Paragraph ellipsis> {_getHeadText()} </Paragraph>\n\t\t\t\t</div>\n                {isSelectOpened ? <UpOutlined onClick={ onOpenPopup } className={`${rtPrefix}-select-header-icon`} /> : <DownOutlined onClick={ onOpenPopup } className={`${rtPrefix}-select-header-icon`}/> }\n\t\t\t\t{/*<Button shape=\"circle\" icon={<CloseCircleFilled />} onClick={() => console.log(\"delete Selected\")} className={`${rtPrefix}-select-header-clear`} />*/}\n\t\t\t\t{_selectedRowKeys.length > 0 ? <CloseCircleFilled onClick={onClickClear} className={`${rtPrefix}-select-header-clear`}/> : null }\n\t\t\t</div>\n\n\t\t\t{isSelectOpened ? (\n\t\t\t\t<div className={_getPopupCls()} style={_getPopupStyle()}>\n\t\t\t\t\t<Table\n\t\t\t\t\t\t{...props}\n\t\t\t\t\t\tcommandPanelProps={{\n\t\t\t\t\t\t\t...props.commandPanelProps,\n\t\t\t\t\t\t\tshowElements: getEvents(),// getShowElements(),\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdefaultSelectedRowKeys={_selectedRowKeys}\n                        selectedRowKeys={_selectedRowKeys}\n\t\t\t\t\t\theaderHeight={0}\n\t\t\t\t\t\tcolumns={columns}\n\t\t\t\t\t\ttype={!!requestLoadRows ? 'serverSide' : 'localSide'}\n\t\t\t\t\t\t// showElements={searchable ? ['search'] : undefined}\n\t\t\t\t\t\tselectable={type === 'MultiSelect'}\n\t\t\t\t\t\tfooterShow={type === 'MultiSelect'}\n\t\t\t\t\t\tshowSelection={showSelection}\n\t\t\t\t\t\trowRenderShowSelection={rowRender}\n\t\t\t\t\t\tonRowClick={_SingleSelectRow}\n\t\t\t\t\t\tonSelectedRowsChange={_onChange}\n\t\t\t\t\t/>\n\t\t\t\t\t{type === 'MultiSelect' ? (\n\t\t\t\t\t\t<div className={'close-panel'}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={() => setIsSelectOpened(false)}\n\t\t\t\t\t\t\t\tsize={'small'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tOk\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n};\n\nSelect.propTypes = {\n\t/** Имя параметра селекта (вернется в onChangeKeys и onChangeObjects) */\n\tname: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.number,\n\t\tPropTypes.arrayOf(\n\t\t\tPropTypes.oneOfType(\n\t\t\t\t[PropTypes.string, PropTypes.number]\n\t\t\t)\n\t\t)]).isRequired,\n\n\t/** Строка или функция для отображения элементов списка\n\t * Строка - имя поля\n\t * Функция - рендер строк. Параметры v\n\t * { rowData, rowIndex }) */\n\trowRender: PropTypes.oneOfType([PropTypes.func, PropTypes.string])\n\t\t.isRequired,\n\n\t/** Тип селекта (SingleSelect и MultiSelect) */\n\ttype: PropTypes.oneOf(['SingleSelect', 'MultiSelect']).isRequired,\n\n    /** Дополнительное имя класса для элемента */\n    className: PropTypes.string,\n\n\t/** Заголовок фильтра */\n\ttitle: PropTypes.string,\n\n\t/** Строка, когда ничего не выбрано */\n\tplaceholder: PropTypes.string,\n\n\t/** Запрос на загрузку дефолтных данных */\n\trequestLoadDefault: PropTypes.func,\n\n    /** Массив выбранных значений */\n    selectedRowKeys: PropTypes.arrayOf(\n        PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    ),\n\n    /** Размер селектора ['small', 'middle', 'large'] */\n    size: PropTypes.oneOf(['small', 'middle', 'large']),\n\n\t// /** Показывать ли поисковую строку */\n\t// searchable: PropTypes.bool,\n\n\t/** Ширина поля выбора в пикселях */\n\twidthControl: PropTypes.number,\n\n\t/** Ширина выпадающего меню */\n\twidthPopup: PropTypes.number,\n\n\t/** Высота выпадающего меню (по умолчанию считается сама) */\n\theightPopup: PropTypes.number,\n\n    /** Событие об изменении состояния селектора */\n\tonChangeKeys: PropTypes.func,\n\n\t/** Поле для уникальной идентификации строки */\n\trowKey: PropTypes.string,\n\n\t/** Высота строки таблицы */\n\trowHeight: PropTypes.number,\n\n\t/** Строки будут в зебро-стиле */\n\tzebraStyle: PropTypes.bool,\n\n\t/** Функция запроса для загрузки строк (данных) */\n\trequestLoadRows: PropTypes.func,\n\n\t/** Функция запроса для загрузки строк (данных) */\n\trequestLoadCount: PropTypes.func,\n\n\t/** Значение строки поиска */\n\tsearchValue: PropTypes.string,\n\n\t/** Имя параметра для поиска */\n\tsearchParamName: PropTypes.string,\n\n\t/** Родительский узел и дочерние узлы связаны (Работает только при selectable) */\n\tnodeAssociated: PropTypes.bool,\n\n\t/** Ключ колонки по которой строить иерархию */\n\texpandColumnKey: PropTypes.string,\n\n\t/** Открыть по умолчанию вложенность до уровня N или 'All' */\n\texpandDefaultAll: PropTypes.bool,\n\n\t/** Загружать ноды иерархии по одной */\n\texpandLazyLoad: PropTypes.bool,\n\n\t/** Поле в котором хранится ссылка на родителя */\n\texpandParentKey: PropTypes.string,\n};\n\nSelect.defaultProps = {\n\tonChangeKeys: noop,\n\t// onChangeObjects: noop,\n\tplaceholder: 'Выбрать',\n\t// searchable: false,\n    size: 'middle',\n\twidthControl: 110,\n\twidthPopup: 400,\n\theightPopup: 600,\n    rowKey: 'id',\n\trowHeight: 30,\n\tzebraStyle: false,\n\n\trequestLoadDefault: undefined,\n\trequestLoadRows: undefined,\n\trequestLoadCount: undefined,\n\tsearchValue: '',\n\tsearchParamName: 'searchLine',\n\n\tnodeAssociated: true,\n\texpandColumnKey: undefined,\n\texpandDefaultAll: true,\n\texpandLazyLoad: false,\n\texpandParentKey: 'parentId',\n};\nconst mapDispatchToProps = (dispatch) =>\n\tbindActionCreators({ setDateStore: setDateStore}, dispatch);\n\nexport default connect(null, mapDispatchToProps)(Select);\n","import React, {forwardRef, useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport Table from '../Table/Table';\nimport { notification, Typography } from \"antd\";\nimport { notificationError } from \"../../utils/baseUtils\";\n\nconst AdvancedTable = forwardRef((props, ref) => {\n\tconst [config, setConfig] = useState({});\n\n\tconst {\n\t\tconfigData,\n        customColumnProps,\n\t\tdefaultFilter,\n\t\texpandColumnKey,\n\t\texpandLazyLoad,\n\t\texpandParentKey,\n\t\tpageSize,\n\t\trowKey,\n\t\trequestLoadConfig,\n\t} = props;\n\n\tuseEffect(() => {\n        let cleanupFunction = false;\n        const loadData = async () => {\n            if (requestLoadConfig) {\n                // console.log('requestLoadConfig => ', typeof requestLoadConfig);\n                // console.log('requestLoadRows => ', typeof props.requestLoadRows);\n                requestLoadConfig()\n                    .then((response) => {\n                        // let result = response.data;\n                        // console.log('requestLoadConfig -> ', response.data);\n                        if(!cleanupFunction)\n                            setConfig(response.data);\n                    })\n                    .catch(error => notificationError(error, 'Ошибка получения конфигурации') );\n            } else {\n                if(!cleanupFunction)\n                    setConfig(configData);\n            }\n        };\n        loadData();\n        return () => cleanupFunction = true;\n\t}, []);\n\n\tconst columnsByConfig = () =>\n\t\tconfig &&\n\t\tconfig.fields &&\n\t\tconfig.fields.map((item) => {\n\n\t\t\tconst colProps =\n                customColumnProps &&\n                customColumnProps.find(\n                    (render) =>\n                        render.name === item.name || render.name === item.alias\n                );\n\t\t\treturn {\n\t\t\t\tkey: item.name,\n\t\t\t\ttitle: item.header ? item.header : item.name,\n\t\t\t\tdataKey: item.alias ? item.alias : item.name,\n\t\t\t\talign: item.align,\n\t\t\t\twidth: item.width,\n\t\t\t\tresizable: item.resizable,\n\t\t\t\tsortable: item.sortable,\n\t\t\t\thidden: !item.visible,\n\t\t\t\t// cellRenderer: cellR && cellR.cellRender,\n                ...colProps,\n                cellRenderer: (object) => {\n\t\t\t\t\tif (colProps && colProps.cellRenderer)\n\t\t\t\t\t\treturn <colProps.cellRenderer {...object}/>\n\t\t\t\t\t// return colProps.cellRenderer(object) ? colProps.cellRenderer(object) : '---';\n\t\t\t\t\telse\n\t\t\t\t\t\treturn object.cellData\n\t\t\t\t\t\t\t? <Typography.Text ellipsis={true} style={{width: '100%'}} className={'rt-table-cell'}>{object.cellData}</Typography.Text>\n\t\t\t\t\t\t\t: <Typography.Text ellipsis={true} style={{width: '100%'}} className={'rt-table-cell'}>---</Typography.Text> ;\n\t\t\t\t\t// return object.cellData ? object.cellData : '---';\n                },\n\t\t\t};\n\t\t});\n\n\tconst getDefaultFilter = () => {\n\t\tif (config && config.hierarchical && config.hierarchyLazyLoad) {\n\t\t\tconst parentKey = config.hierarchyField\n\t\t\t\t? config.hierarchyField.split('/')[1]\n\t\t\t\t: expandParentKey;\n\t\t\treturn {...defaultFilter, [parentKey]: null};\n\t\t} else return defaultFilter;\n\t};\n\n\tif (config && config.fields) {\n\t\t// console.log('AdvancedTable render table -> ', config);\n\t\treturn (\n\t\t\t<Table\n\t\t\t\t{...props}\n\t\t\t\tref={ref}\n\t\t\t\tcolumns={columnsByConfig()}\n\t\t\t\tdefaultFilter={getDefaultFilter()}\n\t\t\t\trowKey={\n\t\t\t\t\tconfig && config.hierarchical && config.hierarchyField\n\t\t\t\t\t\t? config.hierarchyField.split('/')[0]\n\t\t\t\t\t\t: rowKey\n\t\t\t\t}\n\t\t\t\texpandParentKey={\n\t\t\t\t\tconfig && config.hierarchical && config.hierarchyField\n\t\t\t\t\t\t? config.hierarchyField.split('/')[1]\n\t\t\t\t\t\t: expandParentKey\n\t\t\t\t}\n\t\t\t\texpandColumnKey={\n\t\t\t\t\tconfig && config.hierarchical && config.hierarchyView\n\t\t\t\t\t\t? config.hierarchyView\n\t\t\t\t\t\t: expandColumnKey\n\t\t\t\t}\n\t\t\t\texpandLazyLoad={\n\t\t\t\t\tconfig && config.hierarchical && config.hierarchyLazyLoad\n\t\t\t\t\t\t? config.hierarchyLazyLoad\n\t\t\t\t\t\t: expandLazyLoad\n\t\t\t\t}\n\t\t\t\tpageSize={config && config.hierarchical ? 1 : pageSize}\n\t\t\t/>\n\t\t);\n\t} else return null;\n});\n\nAdvancedTable.propTypes = {\n\t/** Функция запроса на получение конфига для таблицы */\n\trequestLoadConfig: PropTypes.func,\n\n\t/** Конфигурация внешнего вида таблицы */\n\tconfigData: PropTypes.shape({\n\t\thierarchical: PropTypes.bool,\n\t\thierarchyField: PropTypes.string,\n\t\thierarchyView: PropTypes.string,\n\t\thierarchyLazyLoad: PropTypes.bool,\n\t\tfields: PropTypes.arrayOf(\n\t\t\tPropTypes.shape({\n\t\t\t\tname: PropTypes.string,\n\t\t\t\talias: PropTypes.string,\n\t\t\t\theader: PropTypes.string,\n\t\t\t\tvisible: PropTypes.bool,\n\t\t\t\tresizable: PropTypes.bool,\n\t\t\t\tsortable: PropTypes.bool,\n\t\t\t\talign: PropTypes.oneOf(['left', 'center', 'right']),\n\t\t\t\twidth: PropTypes.number,\n\t\t\t})\n\t\t),\n\t}),\n\n\t/** Дополнительные пропсы для колонок */\n    customColumnProps: PropTypes.arrayOf(PropTypes.object),\n};\n\nAdvancedTable.defaultProps = {};\n\nexport default AdvancedTable;\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport FormItems from \"./FormItems\";\nimport { Form as AntForm, notification } from \"antd\";\nimport { getObjectExcludedProps, noop, notificationError } from \"../../utils/baseUtils\";\nimport { rtPrefix } from \"../../utils/variables\";\n\nconst excludeProps = [\"noPadding\", \"scrollable\", \"header\", \"body\", \"footer\", \"loadInitData\", \"autoSaveForm\", \"requestSaveForm\", \"methodSaveForm\", \"processBeforeSaveForm\"];\n\n\nconst Form = (props) => {\n    const { loadInitData, header, body, footer,\n        autoSaveForm, requestSaveForm, methodSaveForm, processBeforeSaveForm } = props;\n\n    /** Состояние первоначалной настройки компонента*/\n    const [loaded, setLoaded] = useState(false);\n    const [antFormProps, setAntFormProps] = useState({});\n    const [initFormData, setInitFormData] = useState({});\n\n    useEffect(() => {\n        if (!loaded) {\n            if (loadInitData !== noop)\n                loadInitData(_setInitFormData);\n            else\n                setLoaded(true);\n        }\n    }, [loaded]);\n\n    useEffect(() => {\n        setAntFormProps(getObjectExcludedProps(props, excludeProps));\n        // console.log('antFormProps props => ', getObjectExcludedProps(props, excludeProps));\n    }, [props]);\n\n\n    const _setInitFormData = (data) => {\n        // console.log(\"Form loaded init data => \", data);\n        setInitFormData(data);\n        setLoaded(true);\n    };\n\n\n    let antForm;\n    if (props && props.form) {\n        antForm = props.form;\n    } else {\n        const [form] = AntForm.useForm();\n        antForm = form;\n    }\n\n    const getBodyCls = () => {\n        let cls = [`${rtPrefix}-form-body`];\n        props.noPadding && cls.push(`${rtPrefix}-form-body-no-padding`);\n        props.scrollable && cls.push(`${rtPrefix}-form-body-scrollable`);\n        return cls.join(\" \");\n    };\n\n    const onFinish = (rawValues) => {\n        const values = processBeforeSaveForm ? processBeforeSaveForm(rawValues) : rawValues;\n        console.log(`Success form [${props.name ? props.name : 'no name form'}]: `, values);\n        if (autoSaveForm && requestSaveForm) {\n            const saveObject = {\n                ...initFormData,\n                ...values,\n                // dateStart: getISO(values['dateStart'])\n            };\n            requestSaveForm({\n                method: methodSaveForm,\n                data: saveObject\n            })\n                .then(response => {\n                    notification.success({\n                        message: \"Сохранение прошло успешно\"\n                    });\n                    if (props.onFinish)\n                        props.onFinish(values);\n                })\n                .catch(error => notificationError(error, 'Ошибка при сохранении') );\n        } else if (props.onFinish)\n            props.onFinish(values);\n    };\n\n    const onFinishFailed = errorInfo => {\n        console.error(\"Failed:\", errorInfo);\n        props.onFinishFailed && props.onFinishFailed(errorInfo);\n    };\n\n    return (\n        <React.Fragment>\n            {loaded ?\n                <AntForm\n                    form={antForm}\n                    {...antFormProps}\n                    className={`${antFormProps.className} ${rtPrefix}-form`}\n                    style={{ ...antFormProps.style, width: '100%', height: '100%' }}\n                    initialValues={{ ...antFormProps.initialValues, ...initFormData }}\n                    onFinish={onFinish}\n                    onFinishFailed={onFinishFailed}\n                >\n                    {header ? <div className={`${rtPrefix}-form-header`}><FormItems items={header}/></div> : null}\n                    <div className={getBodyCls()}><FormItems items={body}/></div>\n                    {footer ? <div className={`${rtPrefix}-form-footer`}><FormItems items={footer}/></div> : null}\n                </AntForm>\n                : null}\n        </React.Fragment>\n    );\n};\n\nForm.propTypes = {\n\n    /** Не делать отступы у формы от краев блока */\n    noPadding: PropTypes.bool,\n\n    /** scrollable\n     */\n    scrollable: PropTypes.bool,\n\n    /** Массив объектов для шапки формы. Как правило только заголовок. */\n    header: PropTypes.arrayOf(PropTypes.object),\n\n    /** Массив объектов для тела формы */\n    body: PropTypes.arrayOf(PropTypes.object).isRequired,\n\n    /** Массив объектов для подвала формы. Как правило только кнопки \"Сохранить\" и \"Отмена\" */\n    footer: PropTypes.arrayOf(PropTypes.object),\n\n    /** Ссылка на функцию загрузки значений по умолчанию\n     * (callBack) => callBack(initObject) */\n    loadInitData: PropTypes.func,\n\n    /** Производить ли автоматическое сохранение по параметрам requestSaveForm и methodSaveForm */\n    autoSaveForm: PropTypes.bool,\n\n    /** Запрос для автоматического сохранения формы */\n    requestSaveForm: PropTypes.func,\n\n    /** HTTP Метод, передаваемый в запрос сохранения */\n    methodSaveForm: PropTypes.string,\n\n    /** Функция обработки перед сохранением формы */\n    processBeforeSaveForm: PropTypes.func,\n};\n\nForm.defaultProps = {\n    noPadding: false,\n    scrollable: false,\n    loadInitData: noop,\n    autoSaveForm: true\n};\n\nexport default Form;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {getObjectExcludedProps} from '../../utils/baseUtils';\nimport Form from './Form';\nimport {Modal} from 'antd';\n\nconst excludeProps = ['type', 'initialValues', 'form'];\n\nconst FormModal = props => {\n\n    const {\n        modal,\n        selectedRow,\n        visible,\n        setVisible,\n        saveRow,\n    } = props;\n\n    const getDefaultFooterProps = () => {\n\n        let okText = '';\n        let cancelText = '';\n        let modalTitle = '';\n\n        switch (modal.type) {\n            case 'addOnServer':\n            case 'addGroupOnServer':\n                okText = 'Сохранить';\n                cancelText = 'Отмена';\n                modalTitle = 'Сохранить на сервере';\n                break;\n            case 'addOnLocal':\n            case 'addGroupOnLocal':\n                okText = 'Сохранить';\n                cancelText = 'Отмена';\n                modalTitle = 'Сохранить локально';\n                break;\n            case 'editOnServer':\n            case 'editGroupOnServer':\n                okText = 'Сохранить';\n                cancelText = 'Отмена';\n                modalTitle = 'Измененить на сервере';\n                break;\n            case 'editOnLocal':\n            case 'editGroupOnLocal':\n                okText = 'Сохранить';\n                cancelText = 'Отмена';\n                modalTitle = 'Изменение локально';\n                break;\n            case 'select':\n                okText = 'Добавить';\n                cancelText = 'Отмена';\n                modalTitle = 'Выбор';\n                break;\n            case 'viewGroup':\n            case 'viewObject':\n                okText = 'Закрыть';\n                modalTitle = 'Просмотр';\n                break;\n            default: break;\n        }\n\n        if(modal.okText)\n            okText = modal.okText;\n\n        if(modal.cancelText)\n            cancelText = modal.cancelText;\n\n        if(modal.title)\n            modalTitle = modal.title;\n\n        return {okText, cancelText, title: modalTitle, okType: 'primary'}\n    };\n\n    let modalProps = { ...getDefaultFooterProps(), ...getObjectExcludedProps(modal, excludeProps) };\n\n    const onFinish = values => {\n        // console.log('FormModal Success:', values, selectedRow);\n        let saveObj = {};\n        if(modal.type.startsWith('add'))\n            saveObj = {...values};\n        else\n            saveObj = {...selectedRow, ...values};\n\n        saveRow({type: modal.type, row: saveObj, requestSaveRow: modal.requestSaveRow});\n\n        if (modalProps.onOk) modalProps.onOk(values);\n        if (modalProps.onFinish) modalProps.onFinish(values);\n    };\n\n    const onFinishFailed = errorInfo => {\n        // console.log('FormModal Failed:', errorInfo);\n        console.error(\"FormModal fields failed: \", errorInfo);\n        props.onFinishFailed && props.onFinishFailed(errorInfo);\n    };\n\n    const _onCancelHandler = (e) => {\n        // setVisibleModals({ ...visibleModals, [modal.type]: false });\n        // form.resetFields();\n        setVisible(modal.type, false);\n        if (modalProps.onCancel) modalProps.onCancel(e)\n    };\n\n    const _onLoadInitData = (callBack) => {\n        // console.log(\"Modal => loadInitData\", selectedRow);\n        formConfig.loadInitData(callBack, selectedRow)\n    }\n\n    const defaultFooter = [\n        {\n            componentType: 'Item',\n            child: {\n                componentType: 'Button',\n                label: modalProps.cancelText,\n                className: 'mr-8',\n                onClick: _onCancelHandler,\n                ...modalProps.cancelButtonProps\n            }\n        },\n        {\n            componentType: 'Item',\n            child: {\n                componentType: 'Button',\n                label: modalProps.okText,\n                type: modalProps.okType,\n                htmlType: 'submit',\n                ...modalProps.okButtonProps\n            }\n        }\n    ];\n\n    const formConfig =  {\n        footer: defaultFooter,\n        ...modal.form\n    };\n    return (\n        <Modal\n            {...modalProps}\n            centered\n            destroyOnClose\n            visible={visible}\n            onCancel={_onCancelHandler}\n            bodyStyle={{padding: 0, ...modalProps.bodyStyle}}\n            footer={null}\n        >\n            <Form\n                {...formConfig}\n                onFinish={onFinish}\n                onFinishFailed={onFinishFailed}\n                loadInitData={_onLoadInitData}\n            />\n        </Modal>\n    )\n};\n\nFormModal.propTypes = {\n    /** Объект модального окна */\n    modal: PropTypes.object,\n\n    /** Выделенная строка таблицы */\n    selectedRow: PropTypes.object,\n\n    /** Состояние видимости модалки */\n    visible: PropTypes.bool,\n\n    /** Задание состояния видимости модалки */\n    setVisible: PropTypes.func,\n\n    /** CallBack функция для сохранения данных */\n    saveRow: PropTypes.func,\n};\n\nexport default FormModal;\n","import React, {forwardRef, useState, useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport SortOrder from 'react-base-table/lib/SortOrder';\nimport AdvancedTable from '../AdvancedTable/AdvancedTable';\nimport { generateUUID, getObjectExcludedProps, noop, notificationError } from \"../../utils/baseUtils\";\nimport FormModal from './FormModal';\nimport { notification as antNotification, notification } from \"antd\";\nimport { rtPrefix } from \"../../utils/variables\";\nimport { empty, overlay } from \"../Table/defaultSettings\";\n\n\nconst excludeProps = ['onChange', 'defaultValue', 'modals', 'events', 'history'];\n\nconst FormTable = forwardRef((props, ref) => {\n\n    /** Состояние первоначалной настройки компонента*/\n    const [loading, setLoading] = useState(false);\n\n    /** Состояние отображения модалок таблицы */\n    const [visibleModals, setVisibleModals] = useState({\n        addOnServer: false,\n        editOnServer: false,\n        addOnLocal: false,\n        editOnLocal: false,\n        addGroupOnServer: false,\n        editGroupOnServer: false,\n        addGroupOnLocal: false,\n        editGroupOnLocal: false,\n        select: false,\n        viewGroup: false,\n        viewObject: false});\n    const [tableRows, setTableRows] = useState([]);\n    const [tableSelectedRowKeys, setTableSelectedRowKeys] = useState([]);\n    const [tableSelectedRow, setTableSelectedRow] = useState({});\n\n    /** Ссылка на объект таблицы */\n    const [tableRef, setTableRef] = useState({});\n    const _setTableRef = (_ref) => {\n        setTableRef(_ref);\n        ref && ref(_ref)\n    };\n\n    const {\n        rowKey,\n        rowKeyType,\n        customFields,\n        modals,\n        isGroupKey,\n        history,\n\n        componentType,\n        name,\n\n        // Form.Item props\n        value,\n\n        // Requests\n        requestDeleteRow,\n\n        dataDeleteRow\n    } = props;\n    const cmdProps = props.commandPanelProps;\n\n    // let advancedTableProps = getObjectExcludedProps(props, excludeProps);\n\n    /** Аналог componentDidMounted */\n    useEffect(() => {\n        // Если таблица локальная, то пробуем загрузить исходные данные\n        if(!loading && props.type === 'localSide') {\n            let cleanupFunction = false;\n            setLoading(true);\n            const loadData = async () => {\n                if (!loading && props.requestLoadRows) {\n                    props.requestLoadRows({params: {page: 0, size: 1}, data: {}})\n                        .then((response) => {\n                            // console.log('FormTable -> requestLoadRows -> response', response);\n                            // console.log('FormTable -> requestLoadRows -> value', value);\n                            if (!cleanupFunction)\n                                _addRowsToLocalTable(response.data, value);\n                        })\n                        .catch(error => notificationError(error, 'Ошибка загрузки данных') );\n                }\n                // console.log('FormTable -> setMounted ', advancedTableProps.type);\n                setLoading(false);\n            };\n            loadData();\n            return () => cleanupFunction = true;\n        }\n    }, [props.type]);\n\n    useEffect(() => {\n        if(props.selectable) {\n            console.log(\"FormTable => useEffect => value: \", value);\n            if(value && value.length > 0)\n                setTableSelectedRowKeys(value.map(item => item[rowKey]));\n            else\n                setTableSelectedRowKeys([]);\n\n        }\n    }, [value]);\n\n    /** Получить список кнопок для Command Panel */\n    const getEvents = () => {\n        return (cmdProps && cmdProps.systemBtnProps && Object.keys(cmdProps.systemBtnProps)) || [];\n    };\n\n    /** Получить рендер модалок */\n    const getModals = () => {\n        return modals.map((modal, index) => {\n            return (\n                <FormModal\n                    key={index}\n                    modal={modal}\n                    selectedRow={tableSelectedRow}\n                    visible={visibleModals[modal.type]}\n                    setVisible={(type, value) => setVisibleModals({ ...visibleModals, [type]: value })}\n                    saveRow={_onSaveRow}\n                />\n            )\n\n        })\n    };\n\n    /** Проверка существования кнопки в Command Panel */\n    const isExistCmdBtn = (btnType) => (cmdProps && cmdProps.systemBtnProps && cmdProps.systemBtnProps[btnType]);\n\n    /** Проверка соответствия типа кнопки и события ? (params) === (props) */\n    const equalsActionTypeCmdBtn = (btnType, actionType) => {\n        if(isExistCmdBtn(btnType)) {\n            if(btnType === 'edit') {\n                const aTypes = actionType.split('/');\n                if(aTypes[0] === 'g') {\n                    return !!(cmdProps.systemBtnProps[btnType].actionType\n                        && cmdProps.systemBtnProps[btnType].actionType.length === 2\n                        && cmdProps.systemBtnProps[btnType].actionType[1] === aTypes[1]);\n                }\n                else if (aTypes[0] === 'i') {\n                    return !!(cmdProps.systemBtnProps[btnType].actionType\n                        && cmdProps.systemBtnProps[btnType].actionType.length === 2\n                        && cmdProps.systemBtnProps[btnType].actionType[0] === aTypes[1]);\n                }\n            } else {\n                return !!(cmdProps.systemBtnProps[btnType].actionType\n                    && cmdProps.systemBtnProps[btnType].actionType === actionType);\n            }\n        }\n        return false;\n    };\n\n    /** Command Panel Events */\n    /** Добавить */\n    const _onClickAddHandler = () => {\n        if(equalsActionTypeCmdBtn('add', 'modal')) {\n            // console.log(\"FormTable => _onClickAddHandler => modal\");\n            if (props.type !== 'localSide') {\n                setVisibleModals({...visibleModals, addOnServer: true});\n            } else {\n                if (modals && (modals.find(modal => modal.type === 'select') !== undefined)) {\n                    setVisibleModals({...visibleModals, select: true});\n                    // console.log(\"FormTable => _onClickAddHandler => select\", modals.find(modal => modal.type === 'select'));\n                } else {\n                    setVisibleModals({...visibleModals, addOnLocal: true});\n                    // console.log(\"FormTable => _onClickAddHandler => addOnLocal\"); location.pathname\n                }\n            }\n        } else if (equalsActionTypeCmdBtn('add', 'page')) {\n            history.push(`${history.location.pathname}/new`);\n        }\n    };\n\n    /** Добавить копированием */\n    const _onClickAddAsCopyHandler = (event, row) => {\n        _addRowToLocalTable(row);\n    };\n\n    /** Добавить группу */\n    const _onClickAddGroupHandler = () => {\n        if(equalsActionTypeCmdBtn('addGroup', 'modal')) {\n            // console.log(\"FormTable => _onClickAddGroupHandler => modal\");\n            if (props.type !== 'localSide')\n                setVisibleModals({...visibleModals, addGroupOnServer: true});\n            else\n                setVisibleModals({...visibleModals, addGroupOnLocal: true});\n        } else if (equalsActionTypeCmdBtn('addGroup', 'page')) {\n            // console.log(\"FormTable => _onClickAddGroupHandler => page\");\n            history.push(`${history.location.pathname}/newGroup`);\n        }\n    };\n\n    /** Изменить */\n    const _onClickEditHandler = (event, {rowData}) => {\n        // console.log(\"FormTable -> _onClickEditHandler -> row \", rowData, props.type);\n        if (rowData[isGroupKey]) {\n            if (equalsActionTypeCmdBtn('edit', 'g/modal')) {\n                // console.log(\"FormTable => _onClickEditHandler => g/modal\");\n                if (props.type !== 'localSide')\n                    setVisibleModals({...visibleModals, editGroupOnServer: true});\n                else\n                    setVisibleModals({...visibleModals, editGroupOnLocal: true});\n            } else if (equalsActionTypeCmdBtn('edit', 'g/page')) {\n                // console.log(\"FormTable => _onClickEditHandler => g/page\");\n                history.push(`${history.location.pathname}/${rowData[rowKey]}`);\n            }\n        } else {\n            if (equalsActionTypeCmdBtn('edit', 'i/modal')) {\n                // console.log(\"FormTable => _onClickEditHandler => i/modal\");\n                if (props.type !== 'localSide')\n                    setVisibleModals({...visibleModals, editOnServer: true});\n                else\n                    setVisibleModals({...visibleModals, editOnLocal: true});\n            } else if (equalsActionTypeCmdBtn('edit', 'i/page')) {\n                // console.log(\"FormTable => _onClickEditHandler => i/page\");\n                history.push(`${history.location.pathname}/${rowData[rowKey]}`);\n            }\n        }\n    };\n\n    /** Удалить */\n    const _onClickDelete = (event, _selectedRowKeys) => {\n        if(props.type === 'localSide') {\n            const _rows = tableRows.filter(\n                (item) => !_selectedRowKeys.includes(item[rowKey])\n            );\n            setTableRows(_rows);\n            _onChange(_rows);\n        } else {\n            if(_selectedRowKeys && _selectedRowKeys.length > 0 && requestDeleteRow){\n                const deleteData = _selectedRowKeys.map(item => { return {[rowKey]: item, ...dataDeleteRow} } );\n                requestDeleteRow({data: {deleteData: deleteData}})\n                    .then((response) => {\n                        antNotification.success({message: 'Успешное удаленение'});\n                        tableRef && tableRef.reloadData({});\n\n                    })\n                    .catch(error => {\n                        notificationError(error, 'Ошибка удаления записи');\n                        tableRef && tableRef.reloadData({});\n                    });\n            }\n        }\n        cmdProps.onClickDelete && cmdProps.onClickDelete(event, _selectedRowKeys);\n    };\n\n    /** Переместить вверх / вниз */\n    const _onClickUpHandler = (event, row, rows) => {\n        _onChange(rows);\n        cmdProps.onClickUp && cmdProps.onClickUp(event, row, rows);\n    };\n\n    const _onClickDownHandler = (event, row, rows) => {\n        _onChange(rows);\n        cmdProps.onClickDown && cmdProps.onClickDown(event, row, rows);\n    };\n\n    /** Modal Events */\n    const _onSaveRow = ({type, row, requestSaveRow}) => {\n        // console.log(\"FormTable -> _saveRow -> row \", row);\n        if(type === 'select') {\n            // Получить массив строк из таблицы в модальной форме\n            let selectRows = row[name];\n            // console.log(\"FormTable -> _onSaveRow -> row [0]\", row);\n            // console.log(\"FormTable -> _onSaveRow -> saveRows [0]\", selectRows);\n\n            // Фильтрация выбранных строк, оставить только те которых еще нет в таблице\n            let saveRows = selectRows.filter((sRow) =>\n                tableRows.findIndex((tRow) => tRow[rowKey] === sRow[rowKey]) === -1\n            );\n            // console.log(\"FormTable -> _onSaveRow -> saveRows [1]\", saveRows);\n            if (customFields)\n                // Фильтрация по пользовательским параметрам\n                saveRows = saveRows.filter((sRow) => {\n                    let isValid = [];\n                    customFields.forEach((field) => {\n                        // Валидация по пользовательской логике функции validate\n                        if(field.validate)\n                            isValid.push(field.validate(sRow, tableRows));\n\n                        // Создание или переобразование по пользовательской логике функции value\n                        if(field.value)\n                            sRow[field.name] = field.value(sRow, tableRows);\n                    });\n                    // console.log('_addRows isValid', isValid);\n                    if(!isValid.includes(false))\n                        return sRow;\n                });\n            setVisibleModals({ ...visibleModals, [type]: false });\n            notification.success({\n                message: `Добавлено ${saveRows.length} строк`\n            });\n            // console.log(\"FormTable -> _onSaveRow -> saveRows [2]\", saveRows);\n            _addRowsToLocalTable([...tableRows, ...saveRows]);\n        }\n        else {\n            let saveRow = {...row};\n            if(type.indexOf('Group') !== -1)\n                saveRow[isGroupKey] = true;\n            else\n                saveRow[isGroupKey] = false;\n            if (customFields)\n                customFields.forEach((field) => saveRow[field.name] = field.value(saveRow, tableRows));\n            switch (type) {\n                case 'addOnServer':\n                case 'editOnServer':\n                case 'addGroupOnServer':\n                case 'editGroupOnServer':\n                    _addRowToServerTable({requestSaveRow, type, saveRow});\n                    break;\n                case 'addOnLocal':\n                case 'addGroupOnLocal':\n                    setVisibleModals({ ...visibleModals, [type]: false });\n                    _addRowToLocalTable(saveRow);\n                    break;\n                case 'editOnLocal':\n                case 'editGroupOnLocal':\n                    setVisibleModals({ ...visibleModals, [type]: false });\n                    _editRowToLocalTable(saveRow);\n                    break;\n\n                //            addGroupOnServer: false,\n                //         editGroupOnServer: false,\n                //         addGroupOnLocal: false,\n                //         editGroupOnLocal: false,\n                // case 'select':\n                case 'viewGroup':\n                case 'viewObject':\n                    setVisibleModals({ ...visibleModals, [type]: false });\n                    break;\n            }\n            // console.log(\"Modal Events => type: \", type, itemName, componentType, saveRow);\n        }\n\n    };\n\n    const _addRowToLocalTable = (row) => {\n        let saveObj = {...row};\n        if(rowKeyType === 'uuid')\n            saveObj[rowKey] = generateUUID();\n\n        // console.log('_addRowToLocalTable', tableRows);\n        _addRowsToLocalTable([...tableRows, saveObj]);\n    };\n\n    const _editRowToLocalTable = (row) => {\n        let arr = [...tableRows];\n        const rowIndex = arr.findIndex(item => item[rowKey] === row[rowKey]);\n        arr.splice(rowIndex, 1, row);\n        setTableRows(arr);\n        setTableSelectedRow(row);\n        _onChange(arr);\n    };\n\n    const _addRowsToLocalTable = (rows, keys) => {\n        // console.log('FormTable -> _addRowsToLocalTable -> rows', rows, keys);\n        setTableRows(rows);\n        if(props.selectable)\n            _onChange(keys);\n        else\n            _onChange(rows);\n    };\n\n    const _addRowToServerTable = ({requestSaveRow, type, saveRow}) => {\n        if (requestSaveRow\n            && ['addOnServer', 'editOnServer', 'addGroupOnServer', 'editGroupOnServer'].includes(type)\n        ) {\n            const method = (type === 'addOnServer' || type === 'addGroupOnServer') ? 'POST' : 'PUT';\n            // console.log(\"Modal Events => type: \", type, itemName, componentType, saveRow);\n            requestSaveRow({\n                method,\n                data: saveRow,\n            })\n                .then(response => {\n                    notification.success({\n                        message: 'Сохранение прошло успешно'\n                    });\n                    setVisibleModals({ ...visibleModals, [type]: false });\n                    tableRef && tableRef.reloadData({ filter: props.defaultFilter});\n                    // ref && ref.current && ref.current.reloadData({ filter: props.defaultFilter});\n                    // console.log('_addRowToServerTable tableRef =>', tableRef);\n                })\n                .catch(error => notificationError(error, 'Ошибка при сохранении') );\n        }\n    };\n\n    const _onRowClick = ({selected, rowData, rowIndex, rowKey}) => {\n        if(!props.selectable) {\n            setTableSelectedRow(rowData);\n            setTableSelectedRowKeys([rowKey]);\n            if(componentType === 'SelectTable')\n                _onChange([rowData]);\n        }\n        props.onRowClick && props.onRowClick({selected, rowData, rowIndex, rowKey});\n    };\n\n    const _onRowDoubleClick = ({rowData, rowIndex, rowKey}) => {\n        if (rowData[isGroupKey]) {\n            setVisibleModals({...visibleModals, viewGroup: true});\n        } else {\n            setVisibleModals({...visibleModals, viewObject: true});\n        }\n        props.onRowDoubleClick && props.onRowDoubleClick({rowData, rowIndex, rowKey});\n    };\n\n    const _onSelectedRowsChange = (keys, rows) => {\n        // console.log(\"_onSelectedRowsChange\", keys, rows);\n        if(props.selectable) {\n            setTableSelectedRow(rows[0]);\n            setTableSelectedRowKeys(keys);\n            _onChange(rows);\n        }\n    };\n\n    const _onChange = (rows) => {\n        if(rows !== undefined)\n            props.onChange(rows);\n        else\n            props.onChange(tableRows);\n    };\n\n    const getTableCls = () => {\n        let cls = [`${rtPrefix}-form-table`];\n        if (props.className)\n            cls.push(props.className);\n        return cls.join(' ');\n    };\n\n    return (\n        <div className={getTableCls()} style={props.style} >\n            <AdvancedTable\n                ref={_setTableRef}\n                {...getObjectExcludedProps(props, excludeProps)}\n                rows={tableRows}\n                setRows={setTableRows}\n                // selectedRowKeys={tableSelectedRow[rowKey] ? [tableSelectedRow[rowKey]] : []}\n                selectedRowKeys={tableSelectedRowKeys}\n                onRowClick={_onRowClick}\n                onRowDoubleClick={_onRowDoubleClick}\n                onSelectedRowsChange={_onSelectedRowsChange}\n                autoDeleteRows={false}\n                commandPanelProps={{\n                    ...props.commandPanelProps,\n                    showElements: getEvents(),// getShowElements(),\n                    onClickAdd: _onClickAddHandler,\n                    onClickAddAsCopy: _onClickAddAsCopyHandler,\n                    onClickAddGroup: _onClickAddGroupHandler,\n                    onClickEdit: _onClickEditHandler,\n                    onClickDelete: _onClickDelete,\n                    onClickDown: _onClickDownHandler,\n                    onClickUp: _onClickUpHandler,\n                }}\n                filterPanelProps={{\n                    ...props.filterPanelProps,\n                    // onApplyFilter: (filter) => console.log('filter', filter)\n                }}\n            />\n            {modals && getModals()}\n        </div>\n    );\n});\n\nFormTable.propTypes = {\n    /** Объект со свойствами Command Panel */\n    commandPanelProps: PropTypes.object,\n\n    /** Объект со свойствами Filter Panel */\n    filterPanelProps: PropTypes.object,\n\n    /**\n     * ПРОПСЫ ЗАДАНИЯ ЗНАЧЕНИЙ ПО УМОЛЧАНИЮ\n     * */\n\n    /** Строки по умолчанию */\n    defaultRows: PropTypes.arrayOf(PropTypes.object),\n\n    /** Ключи выделенных по умолчанию строк */\n    defaultSelectedRowKeys: PropTypes.arrayOf(\n        PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    ),\n\n    /** Значение строки поиска по умолчанию строк */\n    defaultSearchValue: PropTypes.string,\n\n    /** Объект фильтрации по умолчанию */\n    defaultFilter: PropTypes.object,\n\n    /** Сортировка по умолчанию */\n    defaultSortBy: PropTypes.shape({\n        key: PropTypes.string,\n        order: PropTypes.oneOf([SortOrder.ASC, SortOrder.DESC]),\n    }),\n\n    /**\n     * ПРОПРЫ ДЛЯ ВНЕШНЕГО КОНТРОЛЯ ТАБЛИЦЫ\n     * */\n\n    /** Значение строки поиска */\n    searchValue: PropTypes.string,\n\n    /** Фильтр */\n    filter: PropTypes.object,\n\n    /** Объект сортировки ({ key: 'string', order: 'asc' }).\n     * key - поле по которому сотрировать,\n     * order - направление сортировки (\"asc\", \"desc\")\n     * */\n    sortBy: PropTypes.shape({\n        key: PropTypes.string,\n        order: PropTypes.oneOf([SortOrder.ASC, SortOrder.DESC]),\n    }),\n\n    /**\n     * BASE PROPS\n     * */\n\n    /** Автоудаление строк из таблицы по кнопке в командной панели*/\n    autoDeleteRows: PropTypes.bool,\n\n    /** Поле для уникальной идентификации строки */\n    rowKey: PropTypes.string,\n\n    /** Тип поля для уникальной идентификации строки */\n    rowKeyType: PropTypes.oneOf(['uuid', 'number']),\n\n    /**\n     * VIEW PROPS\n     * */\n\n    /** Вывод когда нет данных. JSX для заглушки \"Нет данных\".  */\n    empty: PropTypes.element,\n\n    /** Отображение загрузки данных. JSX для загрузки данных. */\n    overlay: PropTypes.element,\n\n    /** Фиксированная ширина столбцов. Появится боковой скрол */\n    fixWidthColumn: PropTypes.bool,\n\n    /** Высота подвала */\n    footerHeight: PropTypes.number,\n\n    /** Отображать ли подвал */\n    footerShow: PropTypes.bool,\n\n    /** Названия футтера */\n    footerTitles: PropTypes.shape({\n        selectedRows: PropTypes.string,\n        loadedRows: PropTypes.string,\n        totalRows: PropTypes.string,\n    }),\n\n    /** Высота заголовка таблицы */\n    headerHeight: PropTypes.number,\n\n    /** Высота строки таблицы */\n    rowHeight: PropTypes.number,\n\n    /** Custom row renderer\n     * Параметры - ({ isScrolling, cells, columns, rowData, rowIndex, depth }) */\n    rowRenderer: PropTypes.oneOfType([PropTypes.func, PropTypes.element]),\n\n    /** Строки будут в зебро-стиле */\n    zebraStyle: PropTypes.bool,\n\n    /**\n     * LOAD DATA PROPS\n     * */\n\n    /** Порог в пикселях для вызова _onLoad.\n     * Кол-во пикселей от низа таблицы для срабатывания события загрузки (onEndReached) */\n    loadThreshold: PropTypes.number,\n\n    /** Размер страницы */\n    pageSize: PropTypes.number,\n\n    /** Функция запроса для загрузки строк (данных) */\n    requestLoadRows: PropTypes.func,\n\n    /** Функция запроса для загрузки строк (данных) */\n    requestLoadCount: PropTypes.func,\n\n    /** Имя параметра для поиска */\n    searchParamName: PropTypes.string,\n\n    /**\n     * SELECTABLE PROPS\n     * */\n\n    /** Таблица с возможностью выбора строки */\n    selectable: PropTypes.bool,\n\n    /**\n     * TREE PROPS\n     * */\n\n    /** Родительский узел и дочерние узлы связаны (Работает только при selectable) */\n    nodeAssociated: PropTypes.bool,\n\n    /** Ключ колонки по которой строить иерархию */\n    expandColumnKey: PropTypes.string,\n\n    /** Открыть по умолчанию вложенность до уровня N или 'All' */\n    expandDefaultAll: PropTypes.bool,\n\n    /** Загружать ноды иерархии по одной */\n    expandLazyLoad: PropTypes.bool,\n\n    /** Поле в котором хранится ссылка на родителя */\n    expandParentKey: PropTypes.string,\n\n    /**\n     * EVENTS\n     * */\n\n    /** Событие при клике на строку (только при selectable = false)\n     * Параметр - ({selected, rowData, rowIndex}) */\n    onRowClick: PropTypes.func,\n\n    /** Событие при двойном клике на строку.\n     * Параметр - ({rowData, rowIndex, rowKey}) */\n    onRowDoubleClick: PropTypes.func,\n\n    /** События при открытии / закрытии ноды\n     * Парметры - ({ expanded, rowData, rowIndex, rowKey }) */\n    onRowExpand: PropTypes.func,\n\n    /** Событие при выборе строки.\n     * Параметр - массив выбранных строе (только rowKey) */\n    onSelectedRowsChange: PropTypes.func,\n\n    /** События при открытии / закрытии ноды\n     * Парметры - (expandedRowKeys) - массив ключей открытых нод */\n    onExpandedRowsChange: PropTypes.func,\n\n    /** SELECTED PANEL */\n\n    /** Отображать ли панель выбранных элементов */\n    showSelection: PropTypes.bool,\n\n    /** Строка или функция для отображения элементов списка выбранных\n     * Строка - имя поля\n     * Функция - рендер строк.\n     * Параметры - ({ rowData, rowIndex }) */\n    rowRenderShowSelection: PropTypes.oneOfType([\n        PropTypes.func,\n        PropTypes.string,\n    ]),\n\n\n    /** Дополнительные пропсы для колонок */\n    customColumnProps: PropTypes.arrayOf(PropTypes.object),\n\n    /** Дополнительные поля и валидация в объекты таблицы */\n    customFields: PropTypes.arrayOf(PropTypes.object),\n\n    /** Модальные окна */\n    modals: PropTypes.arrayOf(PropTypes.object),\n\n    /** Событие об изменении объектов таблицы\n     * Параметр - (rows)*/\n    onChange: PropTypes.func,\n\n    /** implemented - только для (LocalTable + selectable) - Контроль значение из вне */\n    // value: PropTypes.arrayOf(PropTypes.object),\n\n    /** Not implemented - Задание значений по умолчанию */\n    defaultValue: PropTypes.arrayOf(PropTypes.object),\n\n    /** Классы стилей */\n    className: PropTypes.string,\n\n    /** Стили */\n    style: PropTypes.object,\n\n    /** Поле для идентификации группы */\n    isGroupKey: PropTypes.string,\n\n    /** Объект history для перемещения по путям */\n    history: PropTypes.object,\n\n    /** Функция запроса на получение конфига для таблицы */\n    requestLoadConfig: PropTypes.func,\n\n    /** Функция запроса на уделание данных */\n    requestDeleteRow: PropTypes.func,\n\n    /** Параметры объекта удаления */\n    dataDeleteRow: PropTypes.object,\n};\n\nFormTable.defaultProps = {\n    defaultRows: [],\n    defaultSelectedRowKeys: [],\n    defaultSearchValue: '',\n    defaultFilter: {},\n    defaultSortBy: {},\n\n    searchValue: '',\n    filter: {},\n    sortBy: {},\n\n    autoDeleteRows: true,\n    rowKey: 'id',\n\n    empty: empty,\n    overlay: overlay,\n    fixWidthColumn: false,\n    footerHeight: 30,\n    footerShow: false,\n    footerTitles: {\n        selectedRows: 'Выделено:',\n        loadedRows: 'Загружено записей:',\n        totalRows: 'Всего записей:',\n    },\n    headerHeight: 30,\n    rowHeight: 30,\n    zebraStyle: false,\n\n    loadThreshold: 300,\n    pageSize: 50,\n    requestLoadRows: noop,\n    requestLoadCount: noop,\n    searchParamName: 'searchLine',\n\n    selectable: false,\n\n    nodeAssociated: true,\n    expandColumnKey: undefined,\n    expandDefaultAll: true,\n    expandLazyLoad: false,\n    expandParentKey: 'parentId',\n\n    onRowClick: noop,\n    onRowDoubleClick: noop,\n    onRowExpand: noop,\n    onSelectedRowsChange: noop,\n    onExpandedRowsChange: noop,\n\n    showSelection: false,\n\n    rowKeyType: 'uuid',\n    onChange: noop,\n    isGroupKey: 'isGroup',\n};\n\nexport default FormTable;\n","import React, {useState, useEffect} from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport objectPath from \"object-path\";\nimport { setDateStore } from \"../../../redux/rtd.actions\";\nimport {getObjectExcludedProps} from '../../utils/baseUtils';\nimport moment from \"moment\";\nimport { Typography as AntTypography } from \"antd\";\nimport { getISO, toFormat } from \"../../utils/datesUtils\";\n\nexport const withStore = (Component, antFormItemProps) => {\n\n    const mapStateToProps = (store, ownProps) => {\n        const {subscribe} = ownProps;\n        if(subscribe){\n            const {name, path} = subscribe;\n            if(name && path)\n                return { [name]: objectPath.get(store, path) };\n        }\n\n        return {};\n    };\n    const mapDispatchToProps = (dispatch) =>\n        bindActionCreators({ setDateStore: setDateStore}, dispatch);\n\n    const defaultGetValueFromEvent = (valuePropName, event) => {\n        if (event && event.target && valuePropName in event.target) {\n            return event.target[valuePropName];\n        }\n        return event;\n    };\n\n    const defaultProps = {\n        trigger: 'onChange',\n        valuePropName: 'value',\n    };\n\n    const withStoreProps = { ...defaultProps, ...antFormItemProps };\n\n    return connect(mapStateToProps, mapDispatchToProps)( (props) => {\n\n        const {dispatchPath} = props;\n\n        const subscribe = props.subscribe ? props.subscribe : {};\n\n        const [subscribeProps, setSubscribeProps] = useState({});\n\n        const {trigger, getValueFromEvent, valuePropName} = withStoreProps;\n\n        const excludeProps = ['componentType', 'setDateStore', 'subscribe', subscribe.name, 'dispatchPath'];\n\n        const getValue = (...args) => {\n            let newValue;\n            if (getValueFromEvent) {\n                newValue = getValueFromEvent(...args);\n                // console.log(\"storeHOC => getValueFromEvent: \", newValue);\n            } else {\n                newValue = defaultGetValueFromEvent(valuePropName, ...args);\n                // console.log(\"storeHOC => defaultGetValueFromEvent: \", newValue);\n            }\n            return newValue;\n        };\n\n        /** Подписка на изменение props[subscribe.name] в сторе */\n        useEffect( () => {\n            if(subscribe.name) {\n                // console.log(\"storeHOC => subscribe: \", props[subscribe.name]);\n                subscribe.onChange && subscribe.onChange({value: props[subscribe.name], setSubscribeProps});\n            }\n            // console.log(\"Change Props[2]: \", props.subscribeЗф);\n        }, [props[subscribe.name]]);\n\n        useEffect(() => {\n            // dispatchPath && props.setDateStore && props.setDateStore(dispatchPath, props.value);\n            if(dispatchPath) {\n                const newValue = props[valuePropName];\n                // console.log(\"storeHOC => dispatch: \", newValue);\n                dispatchPath && props.setDateStore && props.setDateStore(dispatchPath, newValue);\n            }\n        }, [props]);\n\n        useEffect(() => {\n            if(subscribeProps.value) {\n                // console.log('subscribeProps.value => ', subscribeProps.value);\n                props[trigger] && props[trigger](subscribeProps.value);\n            }\n        }, [subscribeProps.value]);\n\n        const onChange = (...args) => {\n            // const newValue = getValue(...args);\n            // dispatchPath && props.setDateStore && props.setDateStore(dispatchPath, newValue);\n            props[trigger] && props[trigger](...args);\n        };\n\n        const childProps = getObjectExcludedProps(props, excludeProps);\n        return <Component {...childProps} {...subscribeProps} {...{[trigger]: onChange }}/>\n    })\n};\n\n\nexport const DatePickerHOC = (Component) => {\n    return props => {\n        // console.log(\"DatePickerHOC => \", props);\n        if(props.value){\n            if(typeof props.value === 'string'){\n                // console.log(\"DatePickerHOC => onChange => string\");\n                props.onChange(moment(props.value), props.value);\n            }\n            // else {\n            // \tconsole.log(\"DatePickerHOC => onChange => moment\");\n            // \tprops.onChange(props.value, props.format ? toFormat(props.value,props.format) : getISO(props.value));\n            // }\n        }\n        const value = props.value ? (typeof props.value === 'string' ? moment(props.value) : props.value) : null;\n        return <Component {...props} value={value} />\n    };\n};\n\nexport const TypographyTitle = (props) =>\n    <AntTypography.Title {...props}> {props.label || props.value} </AntTypography.Title>;\n\nexport const TypographyText = (props) =>\n    <AntTypography.Text {...props}> {props.label || props.value} </AntTypography.Text>;\n\nexport const TypographyDate = (props) => {\n    const {label, value, format } = props;\n    const _value = value ? (format ? toFormat(value, format) : getISO(value)) : null;\n    return <AntTypography.Text {...props}> {label || _value} </AntTypography.Text>;\n}\n","const getTitle = (type, element) => {\n    if(element === 'Group')\n        if(type === 'edit')\n            return 'Изменение папки';\n        else\n            return 'Создание папки';\n    else\n        return 'Изменение файла';\n};\n\nconst Modal = (type, element, requestSaveRow, processBeforeSaveForm, parentLoadHandler, requestLoadRows) => {\n    // console.log(\"FolderModal\", type, requestSaveRow, processBeforeSaveForm, parentLoadHandler, requestLoadRows);\n    let selectedRow;\n    return {\n        type: `${type}${element}OnServer`,\n        title: getTitle(type, element),\n        requestSaveRow: requestSaveRow,\n        width: 500,\n        // bodyStyle: {height: 650},\n        form: {\n            name: 'FileManagerModalModal',\n            labelCol: {span: 8},\n            wrapperCol: {span: 16},\n            processBeforeSaveForm: (rawValues) => processBeforeSaveForm(rawValues, type, element),\n            loadInitData: (callBack, row) => {\n                selectedRow = row;\n                callBack(type === 'edit' ? row : null);\n            },\n            body: [\n                {\n                    componentType: 'Item',\n                    label: 'Наименование',\n                    name: 'name',\n                    rules: [\n                        {\n                            message: `Заполните наименование`,\n                            required: true,\n                        },\n                    ],\n                    child: {componentType: 'Input'},\n                },\n                type === 'edit'\n                    ? {\n                        componentType: 'Item',\n                        label: 'Родитель',\n                        name: 'parentId',\n                        child: {\n                            componentType: 'SingleSelect',\n                            widthControl: 0,\n                            heightPopup: 300,\n                            expandColumnKey: 'id',\n                            rowRender: 'name',\n                            nodeAssociated: false,\n                            expandDefaultAll: true,\n                            // (info) аналогично ({params, data})\n                            // Но поскольку тут раскрывать объект не нужно, мы можем просто передать его дальше\n                            requestLoadRows: (info) => parentLoadHandler(type, selectedRow, info),\n                            requestLoadDefault: requestLoadRows,\n                        },\n                    }\n                    : {},\n            ],\n        },\n    };\n};\n\nexport const AddFolderModal = (...args) => Modal('add', 'Group', ...args);\nexport const EditFolderModal = (...args) => Modal('edit', 'Group', ...args);\nexport const EditFileModal = (...args) => Modal('edit', '', ...args);\n\n","import {notification} from 'antd';\n\nexport const copyTextToClipboard = text => {\n\tif (!navigator.clipboard) {\n\t\tfallbackCopyTextToClipboard(text);\n\t\treturn;\n\t}\n\tnavigator.clipboard.writeText(text).then(\n\t\tfunction() {\n\t\t\topenNotificationWithIcon(\n\t\t\t\t'success',\n\t\t\t\t'Успешно',\n\t\t\t\t`[${text}] успешно копирован в буфер обмена`\n\t\t\t);\n\t\t},\n\t\tfunction(err) {\n\t\t\topenNotificationWithIcon(\n\t\t\t\t'error',\n\t\t\t\t'Ошибка',\n\t\t\t\t`[${text}] НЕ успешно копирован в буфер обмена`\n\t\t\t);\n\t\t}\n\t);\n};\n\nconst fallbackCopyTextToClipboard = text => {\n\tlet textArea = document.createElement('textarea');\n\ttextArea.value = text;\n\n\t// Avoid scrolling to bottom\n\ttextArea.style.top = '0';\n\ttextArea.style.left = '0';\n\ttextArea.style.position = 'fixed';\n\n\tdocument.body.appendChild(textArea);\n\ttextArea.focus();\n\ttextArea.select();\n\n\ttry {\n\t\tlet successful = document.execCommand('copy');\n\t\tif (successful) {\n\t\t\topenNotificationWithIcon(\n\t\t\t\t'success',\n\t\t\t\t'Успешно',\n\t\t\t\t`[${text}] успешно копирован в буфер обмена`\n\t\t\t);\n\t\t} else {\n\t\t\topenNotificationWithIcon(\n\t\t\t\t'error',\n\t\t\t\t'Ошибка',\n\t\t\t\t`[${text}] НЕ успешно копирован в буфер обмена`\n\t\t\t);\n\t\t}\n\t} catch (err) {\n\t\topenNotificationWithIcon(\n\t\t\t'error',\n\t\t\t'Ошибка',\n\t\t\t`[${text}] НЕ успешно копирован в буфер обмена`\n\t\t);\n\t}\n\tdocument.body.removeChild(textArea);\n};\n\nconst openNotificationWithIcon = (type, title, msg) => {\n\tnotification[type]({\n\t\tmessage: title,\n\t\tdescription: msg\n\t});\n};\n","import React, {useState} from \"react\";\nimport PropTypes from \"prop-types\";\nimport FormTable from \"../Form/FormTable\";\nimport {Button, Upload, notification as antNotification, Spin, Typography, Tooltip} from 'antd';\nimport {\n    HomeOutlined,\n    RollbackOutlined,\n    FolderFilled,\n    FileOutlined,\n    PlusOutlined,\n    LoadingOutlined,\n    FileWordOutlined,\n    FileExcelOutlined,\n    FileImageOutlined,\n    FileMarkdownOutlined,\n    FilePdfOutlined,\n    FilePptOutlined,\n    FileTextOutlined,\n    FileZipOutlined,\n    CopyOutlined\n} from '@ant-design/icons';\nimport { AddFolderModal, EditFileModal, EditFolderModal } from \"./AddFolderModal\";\nimport { rtPrefix } from \"../../utils/variables\";\nimport { toDDMMYYYYHHMMSS } from \"../../utils/datesUtils\";\nimport { copyTextToClipboard } from \"../../utils/clipboardUtils\";\nimport { notificationError } from \"../../utils/baseUtils\";\n\nconst FileManager = props => {\n\n    const {\n        rowKey,\n        isGroupKey,\n        expandParentKey\n    } = props;\n\n    const [tableRef, setTableRef] = useState({});\n    const _setTableRef = (ref) => setTableRef(ref);\n\n    // const tableRef = React.createRef();\n\n    const [breadcrumb, setBreadcrumb] = useState([{[rowKey]: null, name: <HomeOutlined />}]);\n    const [tableFilter, setTableFilter] = useState({deleted: false, [expandParentKey]: null});\n\n\n\n    /**\n     * TABLE EVENTS\n     */\n\n    // Down to folder OR download file\n    const _onRowDoubleClick = ({rowData, rowIndex, rowKey}) => {\n        if(rowData.isGroup) {\n            loadTable([...breadcrumb, rowData], { [expandParentKey]: rowKey });\n        } else {\n            props.requestDownloadFile(rowKey)\n        }\n        props.onRowDoubleClick && props.onRowDoubleClick({rowData, rowIndex, rowKey});\n    };\n\n    // Jump to folder\n    const _onClickBreadcrumb = (parentId, index) => {\n        loadTable(breadcrumb.slice(0, index), {[expandParentKey]: parentId})\n    };\n\n    // Up to folder\n    const _onClickBack = () => {\n        if(breadcrumb.length > 1) {\n            const newBreadcrumb = breadcrumb.slice(0, breadcrumb.length - 1);\n            // setBreadcrumb(newBreadcrumb);\n            // tableRef && tableRef.reloadData({ filter: { parentId: newBreadcrumb[newBreadcrumb.length - 1].id } });\n            loadTable(newBreadcrumb, { [expandParentKey]: newBreadcrumb[newBreadcrumb.length - 1][rowKey] })\n        }\n    };\n\n    // Delete folder OR file\n    const _onClickDelete = (event, _selectedRowKeys) => {\n        if(_selectedRowKeys && _selectedRowKeys.length > 0){\n            props.requestDeleteRow({data: {[rowKey]: _selectedRowKeys[0], deleted: true}})\n                .then((response) => {\n                    antNotification.success({message: 'Файл успешно удален'});\n                    tableRef && tableRef.reloadData({filter: tableFilter});\n                })\n                .catch(error => {\n                    notificationError(error, 'Ошибка удаления файла');\n                    tableRef && tableRef.reloadData({filter: tableFilter});\n                });\n        }\n    };\n\n    /**\n     * TABLE FUNCs\n     */\n    const loadTable = (breadcrumb, filter) => {\n        setBreadcrumb(breadcrumb);\n        const newFilter = {...tableFilter, ...filter};\n        setTableFilter(newFilter);\n        tableRef && tableRef.reloadData({filter: newFilter});\n    };\n\n\n    /**\n     * MODAL FUNCs\n     */\n    const processBeforeSaveModal = (rawValues, type, element) => {\n        let values = {...rawValues};\n        if(type === 'add')\n            values[expandParentKey] = breadcrumb[breadcrumb.length - 1][rowKey];\n\n        if(element === 'Group')\n            values.extension = 'dir';\n        // console.log(\"FileManager values =>\", values);\n        return values;\n    };\n\n    const parentLoadHandler = (type, selectedRow, {params, data}) => {\n        let newData = {...data, [isGroupKey]: true};\n        if (type === 'edit') newData.owner = selectedRow && selectedRow[rowKey];\n        return props.requestLoadParent({ params, data: newData, });\n    };\n\n    // const _onChangeViewDeleted = (checked) => {\n    //     const newFilter = {...tableFilter, deleted: checked };//? undefined : checked};\n    //     setTableFilter(newFilter);\n    //     tableRef && tableRef.reloadData({filter: newFilter});\n    // };\n\n    // console.log(\"EditFolderModal\", EditFolderModal(props.requestSaveRow, processBeforeSaveForm));\n\n\n    /**\n     * UPLOAD FUNCs\n     */\n\n    const _uploadFile = (file) => {\n        // console.log('beforeUpload fileList => ', fileList);\n        notification(file, 'loading');\n        if (props.requestUploadFile) {\n            props.requestUploadFile({ file: file, [expandParentKey]: breadcrumb[breadcrumb.length - 1][rowKey] })\n                .then((response) => {\n                    notification(file, 'success');\n                    tableRef && tableRef.reloadData({ filter: tableFilter });\n                })\n                .catch(() => {\n                    notification(file, 'error');\n                    tableRef && tableRef.reloadData({ filter: tableFilter });\n                });\n        }\n        return false;\n    };\n\n    const notification = (file, type) => {\n        const notifProps = {\n            key: file.uid,\n            duration: type === 'loading' ? 0 : 5,\n            icon: type === 'loading'\n                ? <Spin indicator={<LoadingOutlined style={{ fontSize: 24 }} spin />} />\n                : null,\n            message: <span>Загрузка файла: <Typography.Text code>{file.name}</Typography.Text></span>\n        };\n        switch (type) {\n            case 'loading':\n                antNotification.info(notifProps);\n                break;\n            case 'success':\n                antNotification.success(notifProps);\n                break;\n            case 'error':\n                antNotification.error(notifProps);\n                break;\n            case 'close':\n                antNotification.close(file.uid);\n                break;\n            default:\n                break;\n        }\n    };\n\n    /**\n     * RENDER PARAMS\n     */\n    const customColumnProps = [\n        {\n            name: 'dateCreate',\n            cellRenderer: ({cellData}) => toDDMMYYYYHHMMSS(cellData),\n        },\n        {\n            name: 'dateUpdate',\n            cellRenderer: ({cellData}) => toDDMMYYYYHHMMSS(cellData),\n        },\n        {\n            name: 'path',\n            cellRenderer: ({rowData}) =>\n                rowData[isGroupKey] ? null\n                    :\n                <Tooltip title=\"Скопировать путь к файлу\">\n                    <CopyOutlined onClick={() => copyTextToClipboard(props.pathDownloadFile(rowData[rowKey]))}/>\n                </Tooltip>,\n        },\n        {\n            name: 'name',\n            cellRenderer: ({rowData}) => {\n                const styleDiv = {display: 'flex', alignItems: 'center'};\n                let Icon;\n                let styleIcon = {marginRight: '10px', fontSize: '16px'};\n                switch (rowData.extension) {\n                    case 'dir':\n                        Icon = FolderFilled;\n                        styleIcon.color = '#3a88c9';\n                        break;\n                    case 'doc':\n                    case 'docm':\n                    case 'docx':\n                    case 'dot':\n                    case 'dotx':\n                        Icon = FileWordOutlined;\n                        styleIcon.color = '#185abc';\n                        break;\n                    case 'xlm':\n                    case 'xls':\n                    case 'xlsm':\n                    case 'xlt':\n                    case 'xltm':\n                    case 'xltx':\n                    case 'xlsx':\n                        Icon = FileExcelOutlined;\n                        styleIcon.color = '#1f7244';\n                        break;\n                    case 'png':\n                    case 'jpg':\n                    case 'jpeg':\n                    case 'tiff':\n                    case 'bmp':\n                    case 'ico':\n                    case 'gif':\n                    case 'svg':\n                        Icon = FileImageOutlined;\n                        break;\n                    case 'markdown':\n                    case 'md':\n                        Icon = FileMarkdownOutlined;\n                        styleIcon.color = '#175987';\n                        break;\n                    case 'pdf':\n                        Icon = FilePdfOutlined;\n                        styleIcon.color = '#bd1f07';\n                        break;\n                    case 'ppt':\n                        Icon = FilePptOutlined;\n                        styleIcon.color = '#be5239';\n                        break;\n                    case 'txt':\n                        Icon = FileTextOutlined;\n                        break;\n                    case 'zip':\n                        Icon = FileZipOutlined;\n                        break;\n                    default:\n                        Icon = FileOutlined;\n                }\n\n\n                return (\n                    <div style={styleDiv}>\n                        {/*{rowData.isGroup*/}\n                        {/*    ? <FolderFilled style={{ marginRight: '10px', color: '#3a88c9'}}/>*/}\n                        {/*    : <FileOutlined style={{ marginRight: '10px' }}/>*/}\n                        {/*}*/}\n                        <Icon style={styleIcon}/>\n                        {rowData.name}\n                    </div>\n                );\n            },\n        }\n    ];\n\n    const uploadProps = {\n        multiple: true,\n        showUploadList: false,\n        beforeUpload: _uploadFile\n    };\n\n    const uploadRender = () => {\n        return (\n            <Upload {...uploadProps}>\n                <Button icon={<PlusOutlined />}/>\n            </Upload>\n        )\n    };\n\n    const breadcrumbRender = () => {\n        return (\n            <span className={`${rtPrefix}-file-manager-breadcrumb ml-8`}>\n                {breadcrumb.map((item, index) =>\n                    <span\n                        key={item[rowKey]}\n                        // type=\"text\"\n                        className={`${rtPrefix}-file-manager-breadcrumb-btn`}\n                        onClick={() => _onClickBreadcrumb(item[rowKey], index + 1)}\n                    >\n                        <span>/</span><span>{item.name}</span>\n                    </span>\n                )}\n            </span>\n        )\n    };\n\n    return (\n        <FormTable\n            {...props}\n            ref={_setTableRef}\n            type={'serverSide'}\n            componentType={'FilesTable'}\n            onRowDoubleClick={_onRowDoubleClick}\n            defaultFilter={tableFilter}\n            customColumnProps={customColumnProps}\n            commandPanelProps={{\n                ...props.commandPanelProps,\n                onClickDelete: _onClickDelete,\n                systemBtnProps: {\n                    add: {\n                        actionType: 'modal',\n                        tooltip: 'Загрузить файл(ы)',\n                        render: uploadRender\n                    },\n                    addGroup: {actionType: 'modal', tooltip: 'Создать папку'},\n                    edit: {actionType: ['modal', 'modal']},\n                    delete: {}\n                },\n                leftCustomSideElement: [\n                    {\n                        componentType: 'Item',\n                        child: {\n                            componentType: 'Button',\n                            icon: <RollbackOutlined />,\n                            label: 'Back',\n                            className: 'ml-4',\n                            disabled: (breadcrumb.length === 1),\n                            onClick: _onClickBack\n                        }\n                    },\n                    {\n                        componentType: 'Item',\n                        child: {\n                            componentType: 'Custom',\n                            render: breadcrumbRender\n                        }\n                    }\n                ],\n                // rightCustomSideElement: [\n                //     {\n                //         componentType: 'Item',\n                //         label: 'View deleted',\n                //         className: 'mb-0',\n                //         child: {\n                //             componentType: 'Switch',\n                //             checked: tableFilter.deleted,\n                //             onChange: _onChangeViewDeleted\n                //         }\n                //     },\n                // ]\n            }}\n            modals={[\n                AddFolderModal(props.requestSaveRow, processBeforeSaveModal, parentLoadHandler, props.requestLoadRows),\n                EditFolderModal(props.requestSaveRow, processBeforeSaveModal, parentLoadHandler, props.requestLoadRows),\n                EditFileModal(props.requestSaveRow, processBeforeSaveModal, parentLoadHandler, props.requestLoadRows)\n            ]}\n        />\n    );\n};\n\nFileManager.propTypes = {\n\n    /** Функция запроса для загрузки строк (данных) */\n    requestLoadRows: PropTypes.func,\n\n    /** Функция запроса на получение конфига для таблицы */\n    requestLoadConfig: PropTypes.func,\n};\n\nFileManager.defaultProps = {\n    rowKey: 'id',\n    isGroupKey: 'isGroup',\n    expandParentKey: 'parentId',\n};\n\nexport default FileManager;\n","import React, {useState, useEffect} from \"react\";\nimport PropTypes from \"prop-types\";\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport FormModal from \"../Form/FormModal\";\nimport { notification, Button} from \"antd\";\nimport { notificationError } from \"../../utils/baseUtils\";\nimport objectPath from \"object-path\";\nimport { setDateStore } from \"../../../redux/rtd.actions\";\n\nconst Modal = props => {\n\n    const {buttonProps, modalConfig, modalData, dispatchPath} = props;\n\n    const [visible, setVisible] = useState(false);\n    const [_modalData, _setModalData] = useState({});\n    const [_buttonProps, setButtonProps] = useState({});\n\n    const subscribe = props.subscribe ? props.subscribe : {};\n\n    const setModalData = (value) => {\n        // console.log(\"setModalData: \", value);\n        _setModalData && _setModalData(value);\n    }\n\n    useEffect(() => {\n        _setModalData(modalData);\n    }, []);\n\n    /** Подписка на изменение props[subscribe.name] в сторе */\n    useEffect( () => {\n        if(subscribe.name) {\n            // console.log(\"Modal => subscribe: \", props[subscribe.name]);\n            subscribe.onChange && subscribe.onChange({value: props[subscribe.name], setModalData, setButtonProps});\n        }\n        // console.log(\"Change Props[2]: \", props.subscribeЗф);\n    }, [props[subscribe.name]]);\n\n    const _onOpenModal = () => {\n        // console.log(\"Modal => _modalData: \", _modalData);\n        setVisible(true)\n    }\n\n    const _onCloseModal = () => {\n        setVisible(false)\n    }\n\n    const _onSaveRow = ({type, row, requestSaveRow}) => {\n        dispatchPath && props.setDateStore && props.setDateStore(dispatchPath, row);\n\n        if (requestSaveRow\n            && ['addOnServer', 'editOnServer', 'addGroupOnServer', 'editGroupOnServer'].includes(type)\n        ) {\n            const method = (type === 'addOnServer' || type === 'addGroupOnServer') ? 'POST' : 'PUT';\n            // console.log(\"Modal Events => type: \", type, method, row, _modalData);\n            requestSaveRow({\n                method,\n                data: row,\n            })\n                .then(response => {\n                    notification.success({\n                        message: 'Сохранение прошло успешно'\n                    });\n                    _onCloseModal();\n                })\n                .catch(error => notificationError(error, 'Ошибка при сохранении'));\n        } else _onCloseModal();\n    };\n\n    return (\n        <React.Fragment>\n            <Button\n                type=\"primary\"\n                {...buttonProps}\n                {..._buttonProps}\n                onClick={_onOpenModal}\n            >{buttonProps && buttonProps.label}</Button>\n            <FormModal\n                modal={modalConfig}\n                selectedRow={_modalData}\n                visible={visible}\n                setVisible={_onCloseModal}\n                saveRow={_onSaveRow}\n            />\n        </React.Fragment>\n    )\n};\n\nModal.propTypes = {\n\n    /** Свойства [Button](https://ant.design/components/button/) из Ant Design\n     * Добавлено свойство `label` с типом `ReactNode` или `string` для формирования контента кнопки*/\n    buttonProps: PropTypes.object,\n\n    /** Объект модального окна. Стандартная конфигурация. */\n    modalConfig: PropTypes.object,\n\n    /** Данные для модального окна */\n    modalData: PropTypes.object,\n\n    /** Путь в сторе куда класть данных окна после закрытия */\n    dispatchPath: PropTypes.string,\n\n    /** Объект для подписки на изменения в STORE */\n    subscribe: PropTypes.object,\n};\n\nconst mapStateToProps = (store, ownProps) => {\n    const {subscribe} = ownProps;\n    if(subscribe){\n        const {name, path} = subscribe;\n        if(name && path)\n            return { [name]: objectPath.get(store, path) };\n    }\n    return {};\n};\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators( { setDateStore: setDateStore, }, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Modal);\n","import React, {useState, useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport Select from '../Select/Select';\nimport {\n\tInput,\n\tInputNumber,\n\tForm as AntForm,\n\tButton,\n\tCheckbox,\n\tSwitch,\n\tDatePicker,\n\tRadio,\n    Divider,\n} from 'antd';\nimport { getObjectExcludedProps, getValueFromMultiSelect, getValueFromSingleSelect } from \"../../utils/baseUtils\";\nimport FormTable from './FormTable';\n// import Typography from './Typography';\nimport { withStore, DatePickerHOC, TypographyTitle, TypographyText, TypographyDate } from \"./HOCs\";\nimport FileManager from \"../FileManager/FileManager\";\nimport Modal from \"../Modal/Modal\";\n\nconst excludeProps = ['child', 'componentType', 'field'];\nconst noAntItemTypes = ['Title', 'Text', 'Divider', 'Button', 'LocalTable', 'ServerTable', 'InfinityTable'];\n\nconst FormItem = (props) => {\n\n\tconst {child, field} = props;\n\tlet antFormItemProps = getObjectExcludedProps(props, excludeProps);\n\n\t// Если тип элемента Select -> добавить доп свойства к Form.Item\n    if (child && child.componentType && (child.componentType === 'SingleSelect' || child.componentType === 'MultiSelect')) {\n        antFormItemProps.valuePropName = 'defaultSelectedRowKeys';\n        antFormItemProps.getValueFromEvent = child.componentType === 'SingleSelect' ? getValueFromSingleSelect : getValueFromMultiSelect;\n        antFormItemProps.trigger = 'onChangeKeys';\n    } else if (child && child.componentType && child.componentType === 'SelectTable') {\n        // antFormItemProps.getValueFromEvent = getValueFromSelectTable;\n        // antFormItemProps.trigger = 'onRowClick';\n    }\n\n\t// console.log('FormItem props => ', props);\n\n\tconst getItem = () => {\n\t\tif (child) {\n\t\t    // const childProps = getObjectExcludedProps(child, ['componentType']);\n\t\t\tconst childProps = {...child};\n            // console.log('FormItem childProps => ', childProps);\n\t\t\tlet Component;\n\t\t\tlet placeholder;\n            switch (child.componentType) {\n\t\t\t\tcase 'Button':\n\t\t\t\t\tComponent = withStore(Button, antFormItemProps);\n\t\t\t\t\t// console.log('Props field => ', field);\n\t\t\t\t\tconst onClick = (e) => childProps.onClick && childProps.onClick(e, field);\n\t\t\t\t\treturn (<Component {...childProps} onClick={onClick}>{childProps && childProps.label}</Component>);\n\t\t\t\tcase 'Title':\n\t\t\t\t\tComponent = withStore(TypographyTitle, antFormItemProps);\n\t\t\t\t\treturn (<Component {...child} componentType={child.componentType}/>);\n\t\t\t\tcase 'Text':\n\t\t\t\t\tComponent = withStore(TypographyText, antFormItemProps);\n\t\t\t\t\treturn (<Component {...child} componentType/>);\n\t\t\t\tcase 'Divider':\n\t\t\t\t\tComponent = withStore(Divider, antFormItemProps);\n\t\t\t\t\treturn (<Component {...childProps}>{childProps && childProps.label}</Component>);\n\t\t\t\tcase 'Checkbox':\n\t\t\t\t\tComponent = withStore(Checkbox, antFormItemProps);\n\t\t\t\t\treturn (<Component {...childProps}>{childProps && childProps.label}</Component>);\n\t\t\t\tcase 'DatePicker':\n\t\t\t\t\tComponent = withStore(DatePickerHOC(DatePicker), antFormItemProps);\n\t\t\t\t\tplaceholder = childProps && childProps.placeholder ? childProps.placeholder : 'Выберите дату';\n\t\t\t\t\tconst style = {width: '100%', ...(childProps && childProps.style)};\n\t\t\t\t\treturn (<Component{...childProps} style={style} placeholder={placeholder}/>);\n\t\t\t\tcase 'DateText':\n\t\t\t\t\tComponent = withStore(TypographyDate, antFormItemProps);\n\t\t\t\t\treturn (<Component {...child} />);\n\t\t\t\tcase 'Input':\n\t\t\t\t\tComponent = withStore(Input, antFormItemProps);\n\t\t\t\t\tplaceholder = childProps && childProps.placeholder ? childProps.placeholder : 'Введите значение';\n\t\t\t\t\treturn (<Component {...childProps} placeholder={placeholder} />);\n\t\t\t\tcase 'TextArea':\n\t\t\t\t\tComponent = withStore(Input.TextArea, antFormItemProps);\n\t\t\t\t\treturn (<Component {...childProps} />);\n\t\t\t\tcase 'Password':\n\t\t\t\t\tComponent = withStore(Input.Password, antFormItemProps);\n\t\t\t\t\tplaceholder = childProps && childProps.placeholder ? childProps.placeholder : 'Введите пароль';\n\t\t\t\t\treturn (<Component {...childProps} placeholder={placeholder}/>);\n\t\t\t\tcase 'InputNumber':\n\t\t\t\t\tComponent = withStore(InputNumber, antFormItemProps);\n\t\t\t\t\tplaceholder = childProps && childProps.placeholder ? childProps.placeholder : 'Введите значение';\n\t\t\t\t\treturn (<Component {...childProps} style={{width: '100%'}} placeholder={placeholder}/>);\n\t\t\t\tcase 'Radio':\n\t\t\t\t\tComponent = withStore(Radio, antFormItemProps);\n\t\t\t\t\treturn <Component {...childProps}>{childProps && childProps.label}</Component>;\n\t\t\t\tcase 'RadioButton':\n\t\t\t\t\tComponent = withStore(Radio.Button, antFormItemProps);\n\t\t\t\t\treturn (<Component {...childProps}>{childProps && childProps.label}</Component>);\n\t\t\t\tcase 'Switch':\n\t\t\t\t\tComponent = withStore(Switch, antFormItemProps);\n\t\t\t\t\treturn <Component {...childProps} />;\n                case \"RadioGroup\":\n                    Component = withStore(Radio.Group, antFormItemProps);\n                    return (<Component {...childProps} />);\n\t\t\t\tcase 'SingleSelect':\n                case 'MultiSelect':\n\t\t\t\t\treturn <Select {...childProps} type={child.componentType} name={antFormItemProps.name}/>;\n\t\t\t\t\t//'infinity', 'serverSide', 'localSide'\n                case 'InfinityTable':\n                    childProps.type = 'infinity';\n                    return <FormTable {...childProps} name={props.name} componentType={child.componentType}/> ;\n                case 'ServerTable':\n                    childProps.type = 'serverSide';\n                    return <FormTable {...childProps} name={props.name} componentType={child.componentType}/> ;\n                case 'LocalTable':\n                    childProps.type = 'localSide';\n                    return <FormTable {...childProps} name={props.name} componentType={child.componentType}/> ;\n                case 'SelectTable':\n\t\t\t\t\tchildProps.type = 'localSide';\n\t\t\t\t\treturn <FormTable {...childProps} name={props.name} componentType={child.componentType} /> ;\n\t\t\t\tcase 'FileManager':\n\t\t\t\t\treturn <FileManager {...childProps} name={props.name} />;\n\t\t\t\tcase 'Modal':\n\t\t\t\t\treturn <Modal {...childProps} name={props.name} />;\n\t\t\t\tcase 'Custom':\n\t\t\t\t\tComponent = withStore(child.render, antFormItemProps);\n\t\t\t\t\treturn <Component {...childProps}/>;\n\t\t\t\tdefault:\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t};\n\n    if(!antFormItemProps.label)\n        return <AntForm.Item {...antFormItemProps} noStyle>{getItem()}</AntForm.Item>;\n    else\n        return <AntForm.Item {...antFormItemProps}>{getItem()}</AntForm.Item>;\n};\n\nFormItem.propTypes = {\n\tchild: PropTypes.object.isRequired\n};\n\nexport default FormItem;\n","import React from 'react';\nimport {rtPrefix} from '../../utils/variables';\nimport PropTypes from \"prop-types\";\n\nconst Layout = props => {\n\n    let itemProps = {};\n    Object.keys(props).forEach((key) =>\n        key !== 'children' ? (itemProps[key] = props[key]) : null\n    );\n\n    const getCls = () => {\n        let cls = [`${rtPrefix}-layout`];\n        itemProps.className && cls.push(itemProps.className);\n        return cls.join(' ');\n    };\n\n    return (\n        <div {...itemProps} className={getCls()}>\n            {props.children}\n        </div>\n    );\n};\n\nLayout.propTypes = {\n    /** Строка класса */\n    className: PropTypes.string,\n\n    /** Объект стиля */\n    style: PropTypes.object,\n};\n\nexport default Layout;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport FormItem from \"./FormItem\";\nimport Layout from \"../Layout/Layout\";\nimport { Row, Col, Tabs, Radio, Form as AntForm, Input, Space } from \"antd\";\nimport { getObjectExcludedProps } from \"../../utils/baseUtils\";\n\nconst excludeProps = [\"children\", \"componentType\"];\n\nconst FormItems = (props) => {\n    const { items } = props;\n\n    // console.log('FormItems props => ', props);\n\n    const getItems = (data, antFormListParams) => {\n\n        return (data && data.map((item, index) => {\n            let itemProps = getObjectExcludedProps(item, excludeProps);\n            // console.log('FormItems index => ', index);\n\n            switch (item.componentType) {\n                case \"Row\":\n                    return (\n                        <Row key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Row>\n                    );\n                case \"Col\":\n                    return (\n                        <Col key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Col>\n                    );\n                case \"Layout\":\n                    return (\n                        <Layout key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Layout>\n                    );\n                case \"Tabs\":\n                    return (\n                        <Tabs key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Tabs>\n                    );\n                case \"TabPane\":\n                    return (\n                        <Tabs.TabPane key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Tabs.TabPane>\n                    );\n                case \"RadioGroup\":\n                    return (\n                        <Radio.Group key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Radio.Group>\n                    );\n                case \"Item\":\n                    let _item = { ...item };\n                    let _key = index;\n                    if (antFormListParams && antFormListParams.field) {\n                        if (_item.name) {\n                            if (Array.isArray(_item.name)) {\n                                _item.name = [antFormListParams.field.name, ..._item.name];\n                                _item.fieldKey = [antFormListParams.field.name, ..._item.name];\n                            } else {\n                                _item.name = [antFormListParams.field.name, _item.name];\n                                _item.fieldKey = [antFormListParams.field.name, ..._item.name];\n                            }\n                        }\n                    }\n                    // console.log('_item ', _item.name);\n                    return <FormItem key={`${_key}`} {..._item} field={{ ...antFormListParams }}/>;\n                case \"ListItems\":\n                    return (\n                        <AntForm.List key={index} {...itemProps}>\n                            {(fields, operation) => {\n                                const param = { fields: [...fields], operation: { ...operation } };\n                                return getItems(item.children, param);\n                            }}\n                        </AntForm.List>\n                    );\n                case \"ListItem\":\n                    // console.log('antFormListParams => ', antFormListParams);\n                    return (\n                        <div key={index}>\n                            {antFormListParams && antFormListParams.fields && antFormListParams.fields.map((field, fIndex) => {\n                                // console.log('index field.key', index, field);\n                                const param = { field: { ...field }, ...antFormListParams };\n                                return <div key={field.key}>{getItems(item.children, param)} </div>;\n                            })}\n                        </div>\n                    );\n\n\n                default:\n                    return null;\n            }\n        })) || null;\n    };\n\n    return getItems(items);\n};\n\nFormItems.propTypes = {\n    items: PropTypes.arrayOf(PropTypes.object).isRequired\n};\n\nexport default FormItems;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {noop} from '../../utils/baseUtils';\nimport {rtPrefix} from '../../utils/variables';\nimport {Input, Tooltip, Popconfirm, Modal, Button} from 'antd';\nimport {\n\tPlusOutlined,\n\tCopyOutlined,\n\tFolderAddOutlined,\n\tDeleteOutlined,\n\tEditOutlined,\n\tArrowUpOutlined,\n\tArrowDownOutlined,\n\tSettingOutlined,\n\tFilterOutlined,\n\tExclamationCircleOutlined,\n} from '@ant-design/icons';\nimport FormItems from \"../Form/FormItems\";\nconst {confirm} = Modal;\n\nconst CommandPanel = (props) => {\n\tconst {\n\t\tborderStyle,\n\t\tdefaultValueSearch,\n\t\tdeleteConfirm,\n\t\tdeleteConfirmType,\n\t\tdeleteConfirmTitle,\n\t\tdeleteConfirmDescription,\n\t\tonClickAdd,\n\t\tonClickAddAsCopy,\n\t\tonClickAddGroup,\n\t\tonClickDelete,\n\t\tonClickEdit,\n\t\tonClickUp,\n\t\tonClickDown,\n\t\tonSearch,\n\t\tshowElements,\n        systemBtnProps,\n\t\tdisabledElements,\n\t\tleftCustomSideElement,\n\t\tcenterCustomSideElement,\n\t\trightCustomSideElement,\n\t} = props;\n\n    const defaultSystemBtnProps = {\n        add: {\n            tooltip: 'Добавить',\n            onClick: onClickAdd,\n            icon: <PlusOutlined />\n        },\n        addAsCopy: {\n            tooltip: 'Добавить копированием',\n            onClick: onClickAddAsCopy,\n            icon: <CopyOutlined />\n        },\n        addGroup: {\n            tooltip: 'Добавить группу',\n            onClick: onClickAddGroup,\n            icon: <FolderAddOutlined />\n        },\n        edit: {\n            tooltip: 'Изменить',\n            onClick: onClickEdit,\n            icon: <EditOutlined />\n        },\n        delete: {\n            tooltip: 'Удалить',\n            icon: <DeleteOutlined />\n        },\n        up: {\n            tooltip: 'Переместить вверх',\n            onClick: onClickUp,\n            icon: <ArrowUpOutlined />\n        },\n        down: {\n            tooltip: 'Переместить вниз',\n            onClick: onClickDown,\n            icon: <ArrowDownOutlined />\n        },\n\t\tsearch: {\n\t\t\tplaceholder: 'Поиск',\n\t\t\tonSearch: onSearch,\n\t\t},\n        settings: {\n            tooltip: 'Настройки таблицы',\n            tooltipPlacement: 'topRight',\n            onClick: () => {},\n            icon: <SettingOutlined />\n        },\n        filter: {\n            tooltip: 'Настройки фильтров',\n            tooltipPlacement: 'topRight',\n            onClick: () => {},\n            icon: <FilterOutlined />\n        }\n    };\n\n\tconst _onClickDelete = (event) => {\n\t\tif (deleteConfirmType === 'Modal') {\n\t\t\tdeleteButtonModalConfirm();\n\t\t} else {\n\t\t\tonClickDelete(event);\n\t\t}\n\t};\n\n\tconst deleteButtonPopupConfirm = () => {\n\t\treturn (\n\t\t\t<Popconfirm\n\t\t\t\tplacement='top'\n\t\t\t\ttitle={deleteConfirmDescription}\n\t\t\t\tonConfirm={onClickDelete}\n\t\t\t\tokText='Да'\n\t\t\t\tcancelText='Нет'\n\t\t\t>\n\t\t\t\t{renderDeleteBtn(false)}\n\t\t\t</Popconfirm>\n\t\t);\n\t};\n\n    const deleteButtonModalConfirm = () => {\n\t\tconfirm({\n\t\t\ttitle: deleteConfirmTitle,\n\t\t\ticon: <ExclamationCircleOutlined />,\n\t\t\tcontent: deleteConfirmDescription,\n\t\t\tcentered: true,\n\t\t\tokText: 'Ок',\n\t\t\tcancelText: 'Отмена',\n\t\t\tonOk() {\n\t\t\t\tonClickDelete();\n\t\t\t},\n\t\t});\n\t};\n\n    const renderDeleteBtn = (withOnClick) => {\n        const genProps = {...defaultSystemBtnProps['all'], ...systemBtnProps['all']};\n        const btnProps = {...defaultSystemBtnProps['delete'], ...systemBtnProps['delete']};\n\n        return (\n            <Tooltip title={btnProps.tooltip}>\n                <Button\n                    {...genProps}\n                    className={`${rtPrefix}-btn`}\n                    icon={btnProps.icon}\n                    onClick={withOnClick ? _onClickDelete : null}\n                    disabled={disabledElements.includes('delete')}\n                />\n            </Tooltip>\n        );\n    };\n\n    const renderBtn = (type) => {\n        const genProps = {...defaultSystemBtnProps['all'], ...systemBtnProps['all']};\n        const btnProps = {...defaultSystemBtnProps[type], ...systemBtnProps[type]};\n\n        if(showElements.includes(type)) {\n            if(btnProps.render)\n                return btnProps.render({\n                    disabled: disabledElements.includes(type),\n                    onClick: btnProps.onClick,\n\t\t\t\t\tonSearch: btnProps.onSearch\n\t\t\t\t});\n             else\n             \tif (type === 'search')\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Input.Search\n\t\t\t\t\t\t\tdisabled={disabledElements.includes(type)}\n\t\t\t\t\t\t\tdefaultValue={defaultValueSearch}\n\t\t\t\t\t\t\tplaceholder={btnProps.placeholder}\n\t\t\t\t\t\t\tonSearch={btnProps.onSearch}\n\t\t\t\t\t\t\tclassName={'search'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\telse\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Tooltip title={btnProps.tooltip} placement={btnProps.tooltipPlacement ? btnProps.tooltipPlacement : 'top'}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t{...genProps}\n\t\t\t\t\t\t\t\tclassName={`${rtPrefix}-btn`}\n\t\t\t\t\t\t\t\ticon={btnProps.icon}\n\t\t\t\t\t\t\t\tonClick={btnProps.onClick}\n\t\t\t\t\t\t\t\tdisabled={disabledElements.includes(type)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t)\n        }\n        else\n            return null\n    };\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{showElements.length ||\n\t\t\tleftCustomSideElement ||\n\t\t\tcenterCustomSideElement ||\n\t\t\trightCustomSideElement ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={`${rtPrefix}-command-panel border-${borderStyle}`}\n\t\t\t\t>\n\t\t\t\t\t<div className={'left-system-side'}>\n                        {renderBtn('add')}\n                        {renderBtn('addAsCopy')}\n                        {renderBtn('addGroup')}\n                        {renderBtn('edit')}\n\n\t\t\t\t\t\t{showElements.includes('delete')\n\t\t\t\t\t\t\t? deleteConfirm\n\t\t\t\t\t\t\t\t? deleteConfirmType === 'Popup'\n\t\t\t\t\t\t\t\t\t? deleteButtonPopupConfirm()\n\t\t\t\t\t\t\t\t\t: renderDeleteBtn(true)\n\t\t\t\t\t\t\t\t: renderDeleteBtn(true)\n\t\t\t\t\t\t\t: null}\n\n                        {renderBtn('up')}\n                        {renderBtn('down')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={'left-custom-side'}>\n\t\t\t\t\t\t{leftCustomSideElement ? <FormItems items={leftCustomSideElement} /> : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={'center-custom-side'}>\n\t\t\t\t\t\t{centerCustomSideElement ? <FormItems items={centerCustomSideElement} /> : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={'right-custom-side'}>\n\t\t\t\t\t\t{rightCustomSideElement ? <FormItems items={rightCustomSideElement} /> : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={'right-system-side'}>\n\t\t\t\t\t\t{renderBtn('search')}\n                        {renderBtn('settings')}\n                        {renderBtn('filter')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</React.Fragment>\n\t);\n};\n\nCommandPanel.propTypes = {\n\t/** Центральный кастомный элемент командной панели */\n\tcenterCustomSideElement: PropTypes.arrayOf(PropTypes.object), // PropTypes.element,\n\n\t/** Тип бордера панели (по умолчанию 'bottom')\n\t * ['all', 'none', 'top', 'left', 'bottom', 'right', 'top-bottom', 'left-right'] */\n\tborderStyle: PropTypes.oneOf([\n\t\t'all',\n\t\t'none',\n\t\t'top',\n\t\t'left',\n\t\t'bottom',\n\t\t'right',\n\t\t'top-bottom',\n\t\t'left-right',\n\t]),\n\n\t/** Значение по умолчанию для строки поиска */\n\tdefaultValueSearch: PropTypes.string,\n\n\t/** Нужно ли делать подтверждение на кнопке удалить */\n\tdeleteConfirm: PropTypes.bool,\n\n\t/** Тип подтверждения удаления 'Popup' / 'Modal' */\n\tdeleteConfirmType: PropTypes.oneOf(['Popup', 'Modal']),\n\n\t/** Текст подтверждения на удаление элемента */\n\tdeleteConfirmTitle: PropTypes.string,\n\n\t/** Текст подтверждения на удаление элемента */\n\tdeleteConfirmDescription: PropTypes.string,\n\n\t/** Массив элементов командной панели для блокировки\n     ['add', 'addAsCopy', 'addGroup', 'delete', 'edit', 'up', 'down', 'search', 'settings', 'filter'] */\n\tdisabledElements: PropTypes.arrayOf(PropTypes.string),\n\n\t/** Левый кастомный элемент командной панели */\n\tleftCustomSideElement: PropTypes.arrayOf(PropTypes.object),\n\n\t/** Событие при нажатии на кнопку \"Добавить\" */\n\tonClickAdd: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Добавить копированием\" */\n\tonClickAddAsCopy: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Добавить группу\" */\n\tonClickAddGroup: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Удалить\" */\n\tonClickDelete: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Переместить вниз\" */\n\tonClickDown: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Изменить\" */\n\tonClickEdit: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Переместить вверх\" */\n\tonClickUp: PropTypes.func,\n\n\t/** Событие при поиске */\n\tonSearch: PropTypes.func,\n\n\t/** Правый кастомный элемент командной панели */\n\trightCustomSideElement: PropTypes.arrayOf(PropTypes.object),\n\n\t/** Массив элементов командной панели, которые надо отобразить\n     ['add', 'addAsCopy', 'addGroup', 'delete', 'edit', 'up', 'down', 'search', 'settings', 'filter'] */\n\tshowElements: PropTypes.arrayOf(PropTypes.string),\n\n    /** Объект кастомизации системных кнопок\n     { [btnType]: { tooltip: <String>, icon: <Icon />, render: ({disabled, onClick}) => <Component /> } } */\n    systemBtnProps: PropTypes.object\n};\n\nCommandPanel.defaultProps = {\n\tcenterCustomSideElement: null,\n\tborderStyle: 'bottom',\n\tdefaultValueSearch: undefined,\n\tdeleteConfirm: true,\n\tdeleteConfirmType: 'Modal',\n\tdeleteConfirmTitle: 'Подтвержение удаления',\n\tdeleteConfirmDescription: 'Вы действительно хотите удалить?',\n\tdisabledElements: [],\n\tleftCustomSideElement: null,\n\tonClickAdd: noop,\n\tonClickAddAsCopy: noop,\n\tonClickAddGroup: noop,\n\tonClickDelete: noop,\n\tonClickEdit: noop,\n\tonClickUp: noop,\n\tonClickDown: noop,\n\tonSearch: noop,\n\trightCustomSideElement: null,\n\tshowElements: [],\n    systemBtnProps: {},\n};\nexport default CommandPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Table from '../Table/Table';\n\n/**\n * ### Список / Дерево.\n */\nconst List = (props) => {\n\tconst {rowKey, rowRender, title} = props;\n\n\tconst columns = [\n\t\t{\n\t\t\tkey: rowKey,\n\t\t\ttitle: title,\n\t\t\tdataKey: rowKey,\n\t\t\twidth: 500,\n\t\t\tcellRenderer:\n\t\t\t\ttypeof rowRender === 'function'\n\t\t\t\t\t? rowRender\n\t\t\t\t\t: ({rowData}) => <div>{rowData[rowRender]}</div>,\n\t\t},\n\t];\n\treturn <Table {...props} columns={columns} headerHeight={title ? 30 : 0} />;\n};\n\nList.propTypes = {\n\t/** Поле для уникальной идентификации строки */\n\trowKey: PropTypes.string,\n\n\t/** Строка или функция для отображения элементов списка\n\t * Строка - имя поля\n\t * Функция - рендер строк. Параметры v\n\t * { cellData, columns, column, columnIndex, rowData, rowIndex, container, isScrolling }) */\n\trowRender: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n\n\t/** Заголовок списка (по умолчанию скрыт)*/\n\ttitle: PropTypes.string,\n};\n\nList.defaultProps = {\n\trowKey: 'id',\n\trowRender: 'id',\n\ttitle: undefined,\n};\n\nexport default List;\n","/** deprecated */\nimport CommandPanel from './CommandPanel/CommandPanel';\nimport FilterPanel from './FilterPanel/FilterPanel';\nimport Table from './Table/Table';\nimport AdvancedTable from './AdvancedTable/AdvancedTable';\nimport List from './List/List';\nimport Select from './Select/Select';\nimport SingleDate from './SingleDate/SingleDate';\nimport DateRange from './DateRange/DateRange';\nimport Form from './Form/Form';\nimport FileManager from './FileManager/FileManager';\nimport Modal from './Modal/Modal';\n\n// export {default as CommandPanel} from './CommandPanel/CommandPanel';\n// export {default as FilterPanel} from './FilterPanel/FilterPanel';\n// export {default as Table} from './Table/Table';\n// export {default as AdvancedTable} from './AdvancedTable/AdvancedTable';\n// export {default as List} from './List/List';\n// export {default as Select} from './Select/Select';\n// export {default as SingleDate} from './SingleDate/SingleDate';\n// export {default as DateRange} from './DateRange/DateRange';\n//\n// // Компоненты формы\n// export {default as Form} from './Form/Form';\n// export {default as FileManager} from './FileManager/FileManager';\n// export {default as Modal} from './Modal/Modal';\n\n\nexport const deprecated = {\n    CommandPanel,\n    FilterPanel,\n    Table,\n    AdvancedTable,\n    List,\n    Select,\n    SingleDate,\n    DateRange,\n    Form,\n    FileManager,\n    Modal,\n}","import objectPath from 'object-path';\nimport {actionTypes} from './rtd.action.types';\n\nconst rtdReducer = (state = {}, action) => {\n    switch (action.type) {\n        case actionTypes.INIT_STORE: {\n            const {path} = action.payload;\n            // console.log(\"INIT_TABLE_STORE: \", path);\n            let newState = {...state};\n            objectPath.set(newState, path, {});\n            return newState;\n        }\n        case actionTypes.SET_DATA_STORE: {\n            const {path, row} = action.payload;\n\n            let newState = {...state};\n            if(row === undefined)\n                objectPath.del(newState, path); // newState[path] is now undefined\n            else\n                objectPath.set(newState, path, row); // newState[path] is now row\n\n            console.debug(\"Store change: \", path, row);\n            // console.group(\"Store\");\n            // console.log(\"Store: \", newState);\n            // console.log(\"New Data: \", path, row);\n            // console.groupEnd();\n\n            return newState;\n        }\n        default:\n            return state;\n    }\n};\n\nexport default rtdReducer;\n","import { notification } from \"antd\";\nimport { notificationError } from \"./baseUtils\";\n\nexport const executeRequest = (request) => (options) => request(options)\n    .then(response => {\n        notification.success({\n            message: \"Сохранение прошло успешно\"\n        });\n    })\n    .catch(error => notificationError(error, 'Ошибка при сохранении') );","import {classic} from './components/declarative'\n\nexport {deprecated} from './components/deprecated'\n// Store\nexport {default as rtdReducer} from './redux/rtd.reducer';\nexport {setDateStore} from './redux/rtd.actions';\n// Utils\nexport {notificationError} from './components/utils/baseUtils'\nexport {executeRequest} from \"./components/utils/api\";\n// export * from './components/utils/datesUtils';\n\n// General\nexport const { Button } = classic\nexport const { Title } = classic\nexport const { Text } = classic\nexport const { DateText } = classic\n// Layout\nexport const { Divider } = classic\nexport const { Layout } = classic\nexport const { Row } = classic\nexport const { Col } = classic\nexport const { Space } = classic\n// Data Entry\nexport const { Checkbox } = classic\nexport const { DatePicker } = classic\nexport const { Form } = classic\nexport const { FormHeader } = classic\nexport const { FormBody } = classic\nexport const { FormFooter } = classic\nexport const { FormList } = classic\nexport const { InputNumber } = classic\nexport const { Input } = classic\nexport const { Search } = classic\nexport const { TextArea } = classic\nexport const { Password } = classic\nexport const { RadioGroup } = classic\nexport const { Switch } = classic\nexport const { Slider } = classic\nexport const { Select } = classic\nexport const { TreeSelect } = classic\nexport const { Transfer } = classic\nexport const { TimePicker } = classic\nexport const { UploadFile } = classic\n// Data Display\nexport const { Collapse } = classic\nexport const { List } = classic\nexport const { Popover } = classic\nexport const { Tooltip } = classic\nexport const { Tabs } = classic\nexport const { TabPane } = classic\n// Feedback\nexport const { Modal } = classic\n// Rt-design\nexport const { Table } = classic\nexport const { RtTable } = classic\nexport const { AntTable } = classic\nexport const { Custom } = classic\nexport const { Switcher } = classic"],"names":["APP_TIME_OFFSET","getMomentFromStringByFormat","date","format","moment","utcOffset","getMomentWithOffset","getMomentWithOffsetTruncateDay","startOf","toFormat","dateString","mom","isValid","toDDMMYYYYHHMMSS","getISO","toISOString","types","INIT_STORE","SET_DATA_STORE","setDateStore","path","row","type","actionTypes","payload","noop","flatten","arrayOfArrays","reduce","flattened","item","concat","Array","isArray","getTableRowObjects","data","rowKeys","map","children","length","getTableRowKeys","rowKey","findNodeByRowKey","rowValue","node","i","_findNodeByRowKey","currentNode","value","currentChild","result","generateUUID","replace","c","crypto","getRandomValues","Uint8Array","toString","getValueFromSingleSelect","name","keys","getValueFromMultiSelect","getObjectExcludedProps","object","exclude","returnObject","Object","forEach","key","includes","undefined","notificationError","error","message","response","console","status","errorDescription","description","dispatchToStore","dispatch","extraData","timestamp","useMounted","React","useState","isMounted","setIsMounted","useEffect","getSortBy","clientSortBy","serverSortBy","dataIndex","order","withStore","Component","antFormItemProps","mapStateToProps","store","ownProps","subscribe","state","objectPath","get","dispatchExtraData","mapDispatchToProps","bindActionCreators","defaultProps","trigger","valuePropName","withStoreProps","connect","props","componentType","subscribeProps","setSubscribeProps","excludeProps","withMount","onChange","setSubscribePropsHandler","_value","_subscribeProps","prevState","has","_searchDispatchToStore","del","_onSearch","searchLine","e","preventDefault","childProps","onSearchProps","onSearch","rtPrefix","DatePicker","TimePicker","DateTimePicker","restProps","style","width","TypographyDate","label","Button","onClick","field","renderClassicWithLabel","Custom","childNode","warn","render","renderClassic","isValidElement","cloneElement","FormHeader","FormBody","cls","noPadding","push","scrollable","join","FormFooter","TabPane","className","FormItem","child","renderClassicByName","itemProps","propTypes","PropTypes","isRequired","FormItems","items","getItems","antFormListParams","index","_item","_key","fieldKey","fields","operation","param","fIndex","renderDeclarativeByName","arrayOf","Form","loadInitData","header","body","footer","requestSaveForm","methodSaveForm","processBeforeSaveForm","loaded","setLoaded","antFormProps","setAntFormProps","initFormData","setInitFormData","_setInitFormData","antForm","form","useForm","getBodyCls","onFinish","rawValues","values","saveObject","log","method","then","success","catch","onFinishFailed","errorInfo","Header","Footer","height","initialValues","changedFields","allFields","getFieldsValue","bool","func","string","Layout","getCls","Switcher","_setValue","empty","overlay","fontSize","SelectionHead","column","container","onSelectAll","selectedRowKeys","selectAll","_handleChange","rowObjects","filter","totalLength","selectLength","checked","selected","getRowChildren","findBrothers","selfItem","parentKey","arr","parentAnalysis","rowData","nodeAssociated","treeData","indeterminateRowKeys","_selectedRowKeys","_indeterminateRowKeys","currentRowData","parentExist","lastTypeSelect","typeSelect","nextSquare","indeterminateBrothers","selectedBrothers","allBrothers","indexOf","splice","indexS","indexI","onChangeSelectionCell","rowIndex","rows","rowChildren","element","Set","_selectedRowObjects","_selectedRow","_selectAll","SelectionCell","det","SelectionList","selectedRowObjects","rowRender","onClickDropSelect","oneOfType","Table","forwardRef","ref","hasMore","setHasMore","loading","setLoading","_rows","_setRows","setSelectedRowKeys","_searchValue","setSearchValue","_filter","setFilter","_sortBy","setSortBy","setSelectAll","setIndeterminateRowKeys","_expandedRowKeys","setExpandedRowKeys","_footerShow","_setFooterShow","_totalCountRows","setTotalCountRows","tableRef","useRef","columns","infinityMode","editMode","defaultRows","defaultSelectedRowKeys","defaultSearchValue","defaultFilter","defaultSortBy","setRows","searchValue","sortBy","customFields","fixWidthColumn","headerHeight","rowHeight","rowRenderer","zebraStyle","estimatedRowHeight","rowBordered","loadThreshold","pageSize","requestLoadRows","requestLoadCount","searchParamName","selectable","expandColumnKey","expandDefaultAll","expandLazyLoad","expandParentKey","onRowClick","onRowDoubleClick","onRowExpand","onSelectedRowsChange","onExpandedRowsChange","showSelection","rowRenderShowSelection","dispatchPath","footerProps","selectedDispatchPath","rowsDispatchPath","_setRowsHandler","_setSelectedRowsHandler","setFilterHandler","showElements","leftCustomSideElement","centerCustomSideElement","rightCustomSideElement","flatRows","selectedRow","ii","_dataProcessing","reload","reloadData","current","babelHelpers.typeof","onChangeObject","reloadTable","addRows","_addRows","addRow","_addRow","addRowAsCopy","_addRowAsCopy","editRow","_editRow","removeRow","_removeRow","moveUpRow","_moveUpRow","moveDownRow","_moveDownRow","_setSubscribeProps","_setLoadedRowsHandler","rowsDispatch","selectedKeys","selectedObjects","selectedDispatch","onTableEventsDispatch","nameEvent","dp","appendParams","scrollToRow","__sortBy","__filter","__searchValue","params","expandRow","pageNum","Math","floor","page","size","sort","dataQuery","newRows","_onRowClick","_rowSelectAfterClick","_onRowDoubleClick","newRowObject","_getSelectionColumnProps","_rowEventHandlers","onDoubleClick","_onColumnSort","localSortBy","loadParams","_footer","selectedTitle","loadedTitle","totalTitle","_rowClassName","rowClassName","onEndReached","_onChangeSelectHandler","_onSelectAllHandler","_getColumns","selectColumn","headerRenderer","cellRenderer","flexShrink","resizable","frozen","_onExpandedRowsChange","expandedRowKeys","_onRowExpand","expanded","allChildKeys","loop","callback","saveRows","sRow","validate","_localRows","_row","validations","event","newRowIndex","_getNewIndexRow","_changeIndexRow","oldIndex","newIndex","_onClickDropSelectHandler","dropObject","newSelectedKeys","number","shape","oneOf","customColumnProps","cellBordered","requestLoadConfig","ConfigLoader","tableConfig","setTableConfig","cleanupFunction","loadData","configParser","r","config","_columns","_defaultSorter","colProps","find","alias","defaultSort","title","dataKey","align","sortable","hidden","visible","headerClassName","cellData","_defaultFilter","hierarchical","hierarchyLazyLoad","hierarchyField","split","hierarchyView","HeaderCell","onResize","maxWidth","HeaderRow","headerRowRef","setHeaderHeight","newHeight","clientHeight","BodyCell","cellComponent","padding","_setColumns","rowSelection","expandable","_loadRows","_moveUpSelectedRow","moveUpRowByKey","_moveUpRowByKey","_moveDownSelectedRow","moveDownRowByKey","_moveDownRowByKey","onChangeTable","pagination","filters","sorter","extra","action","onSort","onHeaderRowProps","onRowEvents","onResizeHandler","nextColumns","onChangeSelectedHandler","selectedRows","onSelectAllHandler","changeRows","ExpandIcon","Icon","expandIconRender","onExpand","record","CaretUpOutlined","visibility","CaretDownOutlined","CaretRightOutlined","currentPageData","getColumns","col","onHeaderCell","expandableProps","defaultExpandAllRows","expandIcon","rowSelectionProps","fixed","checkStrictly","y","position","cell","bordered","visibleIndex","expandIconColumnIndex","_expandColumnKey","widthCol","titleNode","ellipsis","defaultSortOrder","onCell","typeData","JSON","stringify","Select","lostParamName","optionConverter","options","widthControl","mode","_hasMore","_setHasMore","_loading","_setLoading","_options","_setOptions","tmpOption","setTmpOption","isEndReached","setIsEndReached","_setSortBy","_setFilter","_setSearchValue","_isSelectAll","_setIsSelectAll","_loadOptions","preValue","findIndex","option","_loadTmpOption","getPageNum","getSort","getSearchValue","requestOptions","onScroll","scrollTopMax","nativeEvent","target","scrollTop","_onChangeSelectAll","optionsValues","_onChange","getSelectAllCls","omittedValues","menu","disabled","TreeSelect","_treeData","_setTreeData","_optionConverter","modalTypes","getDefaultFooterProps","modal","okText","cancelText","modalTitle","okType","Modal","buttonProps","toolTipProps","modalConfig","modalData","modalProps","setVisible","_modalData","_setModalData","_buttonProps","setButtonProps","setModalData","openModal","_onOpenModal","closeModal","_onCloseModal","onFinishHandler","saveObj","requestSaveRow","onOk","onFinishFailedHandler","loadInitDataHandler","callBack","formConfig","_onCancelHandler","onCancel","defaultFooter","cancelButtonProps","htmlType","okButtonProps","bodyStyle","requestUploadFile","dataObject","onCompletedUpload","onFailedUpload","uploadProps","UploadFile","_uploadFile","file","notification","notifProps","uid","duration","icon","info","close","defaultUploadProps","multiple","showUploadList","beforeUpload","renderClassicWithComponentType","componentName","classic","renderDeclarative","renderFormItemComponent","componentProps","Item","noStyle","ComponentClassic","StoreComponent","ComponentClassicWithLabel","ComponentClassicWithPlaceholder","placeholder","_placeholder","ComponentClassicWithOutStore","TableWrapper","RtTable","AntTable","classicComponents","RtForm","FormList","List","Space","Row","Col","RtLayout","Tabs","RtTabPane","withComponentType","RtButton","Title","Text","Divider","Checkbox","RtDatePicker","RtTimePicker","DateText","Input","Search","TextArea","Password","InputNumber","Switch","RadioGroup","Group","RtSelect","RtTreeSelect","RtModal","RtSwitcher","RtUploadFile","Transfer","obj","DateRange","mounted","setMounted","startValue","setStartValue","endValue","setEndValue","nameStart","nameEnd","dateFormat","valueStart","valueEnd","showTime","defaultValueStart","defaultValueEnd","disabledStartDate","valueOf","disabledEndDate","onStartChange","onEndChange","locale","SingleDate","setValue","defaultValue","_onChangePicker","FilterPanel","applyFilterTooltip","applyFilterSize","applyFilterRender","borderStyle","onChangeFilter","onApplyFilter","configFilter","resetFilterRender","resetFilterTooltip","resetFilterSize","_onChangeData","_applyFilter","_resetFilter","getPanelCls","marginLeft","autoDeleteRows","footerHeight","footerShow","footerTitles","commandPanelProps","CommandPanel","filterPanelProps","setReloadTable","setRowsHandler","unshift","_getDisabledElementsOfCommandPanel","_disabledElements","disabledElements","_onClickAddAsCopy","onClickAddAsCopy","_onClickEdit","onClickEdit","_onClickDelete","onClickDelete","_onClickUp","onClickUp","_onClickDown","onClickDown","_onChangeFilter","_onApplyFilter","loadedRows","totalRows","Paragraph","_selectedRowData","_setSelectedRowData","isSelectOpened","setIsSelectOpened","isClickInSelect","setIsClickInSelect","widthPopup","heightPopup","onChangeKeys","requestLoadDefault","searchable","setSelectedRowData","loadSelectedObject","request","srk","findRow","window","addEventListener","handleMouseClick","removeEventListener","onClosePopup","_getHeadCls","_getHeadText","_getPopupCls","_getPopupStyle","defRowsLen","getEvents","systemBtnProps","_SingleSelectRow","contains","onOpenPopup","onClickClear","AdvancedTable","setConfig","configData","columnsByConfig","getDefaultFilter","autoSaveForm","FormModal","saveRow","startsWith","_onLoadInitData","FormTable","addOnServer","editOnServer","addOnLocal","editOnLocal","addGroupOnServer","editGroupOnServer","addGroupOnLocal","editGroupOnLocal","select","viewGroup","viewObject","visibleModals","setVisibleModals","tableRows","setTableRows","tableSelectedRowKeys","setTableSelectedRowKeys","tableSelectedRow","setTableSelectedRow","setTableRef","_setTableRef","_ref","rowKeyType","modals","isGroupKey","history","requestDeleteRow","dataDeleteRow","cmdProps","_addRowsToLocalTable","getModals","_onSaveRow","isExistCmdBtn","btnType","equalsActionTypeCmdBtn","actionType","aTypes","_onClickAddHandler","location","pathname","_onClickAddAsCopyHandler","_addRowToLocalTable","_onClickAddGroupHandler","_onClickEditHandler","deleteData","_onClickUpHandler","_onClickDownHandler","selectRows","tRow","_addRowToServerTable","_editRowToLocalTable","_onSelectedRowsChange","getTableCls","onClickAdd","onClickAddGroup","SortOrder","ASC","DESC","getValueFromEvent","newValue","DatePickerHOC","TypographyTitle","TypographyText","getTitle","parentLoadHandler","labelCol","span","wrapperCol","rules","required","AddFolderModal","args","EditFolderModal","EditFileModal","copyTextToClipboard","navigator","clipboard","fallbackCopyTextToClipboard","text","writeText","openNotificationWithIcon","err","textArea","document","createElement","top","left","appendChild","focus","successful","execCommand","removeChild","msg","FileManager","breadcrumb","setBreadcrumb","deleted","tableFilter","setTableFilter","isGroup","loadTable","requestDownloadFile","_onClickBreadcrumb","parentId","slice","_onClickBack","newBreadcrumb","newFilter","processBeforeSaveModal","extension","newData","owner","requestLoadParent","pathDownloadFile","styleDiv","display","alignItems","styleIcon","marginRight","FolderFilled","color","FileWordOutlined","FileExcelOutlined","FileImageOutlined","FileMarkdownOutlined","FilePdfOutlined","FilePptOutlined","FileTextOutlined","FileZipOutlined","FileOutlined","uploadRender","breadcrumbRender","add","tooltip","addGroup","edit","delete","getItem","confirm","defaultValueSearch","deleteConfirm","deleteConfirmType","deleteConfirmTitle","deleteConfirmDescription","defaultSystemBtnProps","addAsCopy","up","down","search","settings","tooltipPlacement","deleteButtonModalConfirm","deleteButtonPopupConfirm","renderDeleteBtn","content","centered","withOnClick","genProps","btnProps","renderBtn","deprecated","rtdReducer","newState","set","debug","executeRequest","Slider","Collapse","Popover","Tooltip"],"mappings":"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"}