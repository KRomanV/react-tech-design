{"version":3,"file":"index.js","sources":["../src/components/utils/datesUtils.js","../src/redux/rtd.action.types.js","../src/redux/rtd.actions.js","../src/components/utils/baseUtils.js","../src/components/Base/withStore.js","../src/components/utils/variables.js","../src/components/Base/index.js","../src/components/Form/FormItem.js","../src/components/Form/FormItems.js","../src/components/Form/Form.js","../src/components/Layout/Layout.js","../src/components/Switcher/Switcher.js","../src/components/Table/defaultSettings.js","../src/components/Table/Selectable/SelectionHead.js","../src/components/Table/Selectable/SelectionCell.js","../src/components/Table/SelectionList/SelectionList.js","../src/components/Table/Table.js","../src/components/Table/ConfigLoader.js","../src/components/Select/Select.js","../src/components/TreeSelect/TreeSelect.js","../src/components/Modal/Modal.js","../src/components/UploadFile/UploadFile.js","../src/components/declarative.js","../src/components/deprecated/Table/defaultSettings.js","../src/components/deprecated/Table/Selectable/SelectionHead.js","../src/components/deprecated/Table/Selectable/SelectionCell.js","../src/components/deprecated/DateRange/DateRange.js","../src/components/deprecated/SingleDate/SingleDate.js","../src/components/deprecated/FilterPanel/FilterPanel.js","../src/components/deprecated/Table/SelectionList/SelectionList.js","../src/components/deprecated/Table/Table.js","../src/components/deprecated/Select/Select.js","../src/components/deprecated/AdvancedTable/AdvancedTable.js","../src/components/deprecated/Form/Form.js","../src/components/deprecated/Form/FormModal.js","../src/components/deprecated/Form/FormTable.js","../src/components/deprecated/Form/HOCs.js","../src/components/deprecated/FileManager/AddFolderModal.js","../src/components/utils/clipboardUtils.js","../src/components/deprecated/FileManager/FileManager.js","../src/components/deprecated/Modal/Modal.js","../src/components/deprecated/Form/FormItem.js","../src/components/deprecated/Layout/Layout.js","../src/components/deprecated/Form/FormItems.js","../src/components/deprecated/CommandPanel/CommandPanel.js","../src/components/deprecated/List/List.js","../src/redux/rtd.reducer.js","../src/components/utils/api.js","../src/index.js"],"sourcesContent":["import moment from 'moment';\n\nexport const APP_TIME_OFFSET = 3;\n\nexport const getMomentFromStringByFormat = (date, format) =>\n\tdate ? moment(date, format).utcOffset(APP_TIME_OFFSET) : null;\n\n// export const getMomentWithOffset = (date) =>\n// \tmoment(date).utcOffset(APP_TIME_OFFSET);\nexport const getMomentWithOffset = (date) => moment(date).format();\n\nexport const getMomentWithOffsetTruncateDay = (date) =>\n\tmoment(date).startOf('day')\n\t\t// .hours(0)\n\t\t// .minutes(0)\n\t\t// .seconds(0)\n\t\t// .milliseconds(0)\n\t\t.format();\n\n\nexport const toFormat = (dateString, format) => {\n\tif (!dateString) {\n\t\treturn '';\n\t}\n\tconst mom = moment(dateString);\n\treturn mom.isValid() ? mom.format(format) : dateString;\n};\n\nexport const toDDMMYYYYdot = (dateString) => toFormat(dateString, 'DD.MM.YYYY');\n\nexport const toDDMMYYYYdotAltDashDash = (dateString) =>\n\ttoDDMMYYYYdot(dateString) || '--';\n\nexport const toDDMMYYYYHHMMSS = (dateString) =>\n\ttoFormat(dateString, 'DD.MM.YYYY HH:mm:ss') || '--';\n\nexport const toDDMMYYYYdash = (dateString) =>\n\ttoFormat(dateString, 'DD-MM-YYYY');\n\nexport const getISO = (date) =>\n\tmoment(date).utcOffset(APP_TIME_OFFSET).toISOString();\n","const types =\n{\n    INIT_STORE: 'INIT_STORE',\n    SET_DATA_STORE: 'SET_DATA_STORE',\n};\n\nexport {types as actionTypes};\n","import {actionTypes} from './rtd.action.types';\n\nexport const initStore = (path) => ({\n    type: actionTypes.INIT_STORE,\n    payload: {path}\n});\n\nexport const setDateStore = (path, row) => ({\n    type: actionTypes.SET_DATA_STORE,\n    payload: {path, row}\n});\n","import React from 'react';\nimport {notification} from 'antd';\nimport moment from \"moment\";\n\nexport const noop = () => {};\n\nexport const flatten = (arrayOfArrays) =>\n\tarrayOfArrays.reduce(\n\t\t(flattened, item) =>\n\t\t\tflattened.concat(Array.isArray(item) ? flatten(item) : [item]),\n\t\t[]\n\t);\n\nexport const getTableRowObjects = (data) => {\n\tconst rowKeys = data.map((item) => {\n\t\tif (item.children && item.children.length) {\n\t\t\treturn [item, getTableRowObjects(item.children)];\n\t\t}\n\t\treturn item;\n\t});\n\treturn rowKeys;\n};\n\nexport const getTableRowKeys = (data, rowKey) => {\n\tconst rowKeys = data.map((item) => {\n\t\tif (item.children && item.children.length) {\n\t\t\treturn [item[rowKey], getTableRowKeys(item.children, rowKey)];\n\t\t}\n\t\treturn item[rowKey];\n\t});\n\treturn rowKeys;\n};\n\nexport const findNodeByRowKey = (data, rowKey, rowValue) => {\n\tlet node = {};\n\tlet item = {};\n\tfor (let i = 0; i < data.length; i++) {\n\t\titem = _findNodeByRowKey(data[i], rowKey, rowValue);\n\t\tif (item !== false) return item;\n\t}\n\treturn node;\n};\n\nconst _findNodeByRowKey = (currentNode, rowKey, value) => {\n\tlet i, currentChild, result;\n\n\tif (value === currentNode[rowKey]) {\n\t\treturn currentNode;\n\t} else {\n\t\tif (currentNode.children) {\n\t\t\tfor (i = 0; i < currentNode.children.length; i += 1) {\n\t\t\t\tcurrentChild = currentNode.children[i];\n\t\t\t\tresult = _findNodeByRowKey(currentChild, rowKey, value);\n\t\t\t\tif (result !== false) return result;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n};\n\nexport const generateUUID = () => {\n\treturn ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>\n\t\t(\n\t\t\tc ^\n\t\t\t(crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\n\t\t).toString(16)\n\t);\n};\n\n\nexport const getValueFromSingleSelect = (name, keys) => (keys && keys.length > 0) ? keys[0] : null;\n\nexport const getValueFromMultiSelect = (name, keys) => (keys && keys.length > 0) ? keys : null;\n\nexport const getValueFromSelectTable = (rows) => {\n    if (rows && rows.length > 0) return rows[0];\n    else return null;\n};\n\nexport const getObjectExcludedProps = (object, exclude) => {\n    let returnObject = {};\n    Object.keys(object).forEach((key) =>\n        !exclude.includes(key) ? (returnObject[key] = object[key]) : undefined // было null\n    );\n    return returnObject;\n};\n\nexport const notificationError = (error, message) => {\n\tif (error.response) {\n\t\tconsole.error(error.response.status, error.response.data);\n\t\tconst errorDescription = (error.response.data && error.response.data.error)\n\t\t\t? error.response.data.error\n\t\t\t: \"Нет описания ошибки\";\n\t\tnotification.error({\n\t\t\tmessage: `[${error.response.status}] ${message}`,\n\t\t\tdescription: errorDescription,\n\t\t});\n\t} else {\n\t\tconsole.error(error);\n\t\tnotification.error({\n\t\t\tmessage: 'Не удалось детектировать ошибку. См. console.error',\n\t\t});\n\t}\n};\n\nexport const dispatchToStore = ({dispatch, setDateStore, value, extraData}) => {\n\tif(dispatch.path) {\n\t\t// console.log(\"storeHOC => dispatchToStore\");\n\t\tif(dispatch.type === 'event')\n\t\t\tsetDateStore && setDateStore(dispatch.path,  {\n\t\t\t\ttimestamp: moment(),\n\t\t\t\t// type: dispatch.type,\n\t\t\t\tvalue: value,\n\t\t\t\textraData: extraData\n\t\t\t});\n\t\telse\n\t\t\tsetDateStore && setDateStore(dispatch.path, value);\n\t}\n}\n\nexport function useMounted() {\n\tconst [isMounted, setIsMounted] = React.useState(false)\n\n\tReact.useEffect(() => {\n\t\tsetIsMounted(true)\n\t}, [])\n\treturn isMounted\n}\n","import React, {useState, useEffect} from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport objectPath from \"object-path\";\nimport { setDateStore } from \"../../redux/rtd.actions\";\nimport { dispatchToStore, getObjectExcludedProps, useMounted } from \"../utils/baseUtils\";\n\nexport const withStore = (Component, antFormItemProps) => {\n\n    const mapStateToProps = (store, ownProps) => {\n        const {subscribe, dispatch} = ownProps;\n        let state = {};\n        if(subscribe && subscribe.length > 0){\n            subscribe.forEach(item => {\n                const {name, path, extraData} = item;\n                if(name && path)\n                    state[name] = objectPath.get(store, path);\n                if(name && extraData)\n                    state[`${name}ExtraData`] = objectPath.get(store, extraData);\n            })\n        }\n        if(dispatch && dispatch.extraData) {\n            // console.log('subscribe to ', dispatch.extraData)\n            state.dispatchExtraData = objectPath.get(store, dispatch.extraData);\n        }\n\n        return state;\n    };\n    const mapDispatchToProps = (dispatch) =>\n        bindActionCreators({ setDateStore: setDateStore}, dispatch);\n\n    const defaultProps = {\n        trigger: 'onChange',\n        valuePropName: 'value',\n    };\n\n    const withStoreProps = { ...defaultProps, ...antFormItemProps };\n\n    return connect(mapStateToProps, mapDispatchToProps)( (props) => {\n\n        const {componentType, setDateStore, dispatchExtraData} = props;\n\n        // Объект подписки на стор\n        const subscribe = props.subscribe ? props.subscribe : [];\n\n        // Объект публикации в стор\n        const dispatch = props.dispatch ? props.dispatch : {};\n\n        const [subscribeProps, setSubscribeProps] = useState({});\n\n        const {trigger, valuePropName} = withStoreProps;\n\n        const excludeProps = ['componentType', 'setDateStore', 'subscribe', ...subscribe.map(item => item.name), 'dispatch', 'dispatchExtraData'];\n\n        const isMounted = useMounted()\n\n        const setSubscribePropsHandler = (value) =>\n            setSubscribeProps((prevState) => ({ ...prevState, ...value}) );\n\n        /** Подписка на изменение props[subscribe.name] в сторе */\n        subscribe.map(item => {\n            return useEffect( () => {\n                if(isMounted && item.name) {\n                    // console.log(\"storeHOC => subscribe: \", props[subscribe.name]);\n                    item.onChange && item.onChange({\n                        value: props[item.name],\n                        extraData: props[`${item.name}ExtraData`],\n                        setSubscribeProps: setSubscribePropsHandler});\n                }\n                // console.log(\"Change Props[2]: \", props.subscribeЗф);\n            }, [props[item.name]]);\n        })\n\n        /** Подписка на изменение props и отправка данных в стор */\n        useEffect(() => {\n            // dispatchPath && props.setDateStore && props.setDateStore(dispatchPath, props.value);\n            let _value = props[valuePropName];\n            if (_value === null || _value === undefined || (typeof _value === 'string' && _value.trim() === ''))\n                _value = undefined;\n\n            // console.log(`storeHOC [${dispatch.name}] => `, _value);\n            // console.log(`storeHOC => `, props);\n\n            if (componentType !== 'Button' && componentType !== 'Search')\n                dispatchToStore({ dispatch, setDateStore, value: _value });\n        }, [props]);\n\n        /** Подписка на изменение subscribeProps.value и отправка данных в props[trigger] (как правило это onChange) */\n        useEffect(() => {\n            if(subscribeProps && subscribeProps.value) {\n                // console.log('subscribeProps.value => ', subscribeProps.value);\n                props[trigger] && props[trigger](subscribeProps.value);\n            }\n        }, [subscribeProps.value]);\n\n        const onChange = (...args) => {\n            // console.log('withStore [trigger] ', subscribeProps)\n            // const newValue = getValue(...args);\n            // dispatchPath && props.setDateStore && props.setDateStore(dispatchPath, newValue);\n            if(componentType === 'Button')\n                dispatchToStore({dispatch, setDateStore, value: args[0], extraData: dispatchExtraData});\n            // else if(componentType === 'Search')\n            //     args[1].preventDefault();\n\n            if(subscribeProps && subscribeProps.hasOwnProperty('value')) {\n                const {value, ..._subscribeProps} = subscribeProps\n                setSubscribePropsHandler(_subscribeProps)\n            }\n\n            props[trigger] && props[trigger](...args);\n        };\n\n        const _onSearch = (searchLine, e) => {\n            e.preventDefault();\n            // console.log(\"_onSearch\", searchLine);\n            dispatchToStore({dispatch, setDateStore, value: searchLine, extraData: dispatchExtraData});\n        };\n\n        const childProps = getObjectExcludedProps(props, excludeProps);\n        const onSearchProps = (componentType === 'Search') ? {onSearch: _onSearch} : {}\n        // console.log(`storeHOC Component => `, componentType, Component);\n        return (\n            <Component\n                {...childProps}\n                {...subscribeProps}\n                {...{[trigger]: onChange}}\n                {...onSearchProps}\n            >{props.children}</Component>\n        )\n    })\n};\n","export const rtPrefix = 'rt';\n","import React from \"react\";\nimport moment from \"moment\";\nimport { Button as AntButton, DatePicker as AntDatePicker, Typography as AntTypography, Tabs as AntTabs,  } from \"antd\";\nimport { getISO, toFormat } from \"../utils/datesUtils\";\nimport {withStore} from \"./withStore\";\nimport { rtPrefix } from \"../utils/variables\";\nimport { renderClassic, renderClassicWithLabel } from \"../declarative\";\n\n/** Компонент выбора даты */\nconst DatePicker = (props) => {\n    // console.log(\"DatePickerHOC => \", props);\n    if(props.value){\n        if(typeof props.value === 'string'){\n            // console.log(\"DatePickerHOC => onChange => string\");\n            props.onChange(moment(props.value), props.value);\n        }\n        // else {\n        // \tconsole.log(\"DatePickerHOC => onChange => moment\");\n        // \tprops.onChange(props.value, props.format ? toFormat(props.value,props.format) : getISO(props.value));\n        // }\n    }\n    const value = props.value ? (typeof props.value === 'string' ? moment(props.value) : props.value) : undefined;\n    const style = {width: '100%', ...(props && props.style)}; // locale={locale}\n    // console.log(\"DatePickerHOC value => \", value);\n    return <AntDatePicker {...props} style={style} value={value} />\n};\n\n/** Компонент вывода даты в текстовом виде */\nconst TypographyDate = (props) => {\n    const {label, value, format } = props;\n    const _value = value ? (format ? toFormat(value, format) : getISO(value)) : undefined;\n    return <AntTypography.Text {...props}> {label || _value} </AntTypography.Text>;\n}\n\n/** Компонент кнопки со всеми пропрами AntButton */\nconst Button = (props) => {\n    const Component = withStore(AntButton, { trigger: 'onClick' });\n    // console.log('Props classic field renderClassic => ', props.field);\n    // const onClick = (e) => childProps.onClick && childProps.onClick(e, field);\n    const onClick = (e) => props.onClick && props.onClick(e, props.field);\n    return renderClassicWithLabel(Component)({...props, onClick: onClick})\n}\n\n/** Custom компонент */\nconst Custom = (props) => {\n    const {children} = props\n    let childNode = null;\n    let childProps = null;\n\n    if (Array.isArray(children)) {\n        console.warn('Custom component: `children` is array. Don\\'t render component')\n        return null;\n    } else if(props.render) {\n        // console.log('childNode = props.render')\n        childNode = props.render;\n        childProps = { ...props, componentType: 'Custom' };\n        return renderClassic(childNode)(childProps)\n    } else if(React.isValidElement(children)) {\n        // console.log('childNode = children')\n        childProps = { ...children.props, ...props, componentType: 'Custom' };\n        return  React.cloneElement(children, childProps);\n    } else {\n        console.warn('Custom component: not exist valid render')\n        return null;\n    }\n}\n\n/** Компонент заголовка формы */\nconst FormHeader = (props) => {\n    return <div className={`${rtPrefix}-form-header`}>{props.children}</div>\n}\n\n/** Компонент тела формы */\nconst FormBody = (props) => {\n    let cls = [`${rtPrefix}-form-body`];\n    props.noPadding && cls.push(`${rtPrefix}-form-body-no-padding`);\n    props.scrollable && cls.push(`${rtPrefix}-form-body-scrollable`);\n    return <div className={cls.join(\" \")}>{props.children}</div>\n}\n\n/** Компонент подвала формы */\nconst FormFooter = (props) => {\n    return <div className={`${rtPrefix}-form-footer`}>{props.children}</div>\n}\n\nconst TabPane = (props) => {\n    let cls = [];\n    props.className && cls.push(props.className);\n    props.scrollable && cls.push(`${rtPrefix}-tabs-tabpane-scrollable`);\n    return <AntTabs.TabPane {...props} className={cls.join(\" \")}>{props.children}</AntTabs.TabPane>\n}\n\n\nexport {\n    DatePicker,\n    TypographyDate,\n    Button,\n    Custom,\n    FormHeader,\n    FormBody,\n    FormFooter,\n    TabPane,\n    withStore\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { getObjectExcludedProps } from \"../utils/baseUtils\";\nimport {renderClassicByName} from \"../declarative\";\nconst excludeProps = ['child', 'componentType', 'field'];\nconst FormItem = (props) => {\n\n\tconst {child, field} = props;\n\tlet antFormItemProps = getObjectExcludedProps(props, excludeProps);\n\tif (child)\n\t\treturn renderClassicByName(child.componentType)\n\t\t\t({itemProps: {...antFormItemProps}, ...child, field})\n\telse\n\t\treturn null;\n};\n\nFormItem.propTypes = {\n\tchild: PropTypes.object.isRequired\n};\n\nexport default FormItem;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport FormItem from \"./FormItem\";\nimport { Form as AntForm } from \"antd\";\nimport { getObjectExcludedProps } from \"../utils/baseUtils\";\nimport { renderDeclarativeByName } from \"../declarative\";\n\nconst excludeProps = [\"children\", \"componentType\"];\n\nconst FormItems = (props) => {\n    const { items } = props;\n\n    // console.log('FormItems props => ', props);\n\n    const getItems = (data, antFormListParams) => {\n\n        return (data && data.map((item, index) => {\n            let itemProps = getObjectExcludedProps(item, excludeProps);\n            // console.log('FormItems index => ', index);\n\n            switch (item.componentType) {\n                case \"Item\":\n                    let _item = { ...item };\n                    let _key = index;\n                    if (antFormListParams && antFormListParams.field) {\n                        if (_item.name) {\n                            if (Array.isArray(_item.name)) {\n                                _item.name = [antFormListParams.field.name, ..._item.name];\n                                _item.fieldKey = [antFormListParams.field.name, ..._item.name];\n                            } else {\n                                _item.name = [antFormListParams.field.name, _item.name];\n                                _item.fieldKey = [antFormListParams.field.name, ..._item.name];\n                            }\n                        }\n                    }\n                    // console.log('_item ', _item.name);\n                    return <FormItem key={`${_key}`} {..._item} field={{ ...antFormListParams }}/>;\n                case \"ListItems\":\n                    return (\n                        <AntForm.List key={index} {...itemProps}>\n                            {(fields, operation) => {\n                                const param = { fields: [...fields], operation: { ...operation } };\n                                return getItems(item.children, param);\n                            }}\n                        </AntForm.List>\n                    );\n                case \"ListItem\":\n                    // console.log('antFormListParams => ', antFormListParams);\n                    return (\n                        <div key={index}>\n                            {antFormListParams && antFormListParams.fields && antFormListParams.fields.map((field, fIndex) => {\n                                // console.log('index field.key', index, field);\n                                const param = { field: { ...field }, ...antFormListParams };\n                                return <div key={field.key}>{getItems(item.children, param)} </div>;\n                            })}\n                        </div>\n                    );\n                default:\n                    return renderDeclarativeByName(item.componentType)({ key: index, ...itemProps })(getItems(item.children, antFormListParams))\n            }\n        })) || null;\n    };\n\n    return getItems(items);\n};\n\nFormItems.propTypes = {\n    items: PropTypes.arrayOf(PropTypes.object).isRequired\n};\n\nexport default FormItems;\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport FormItems from \"./FormItems\";\nimport { Form as AntForm, notification } from \"antd\";\nimport { getObjectExcludedProps, noop, notificationError } from \"../utils/baseUtils\";\nimport { rtPrefix } from \"../utils/variables\";\n\nconst excludeProps = [\n    \"componentType\",\n    \"noPadding\",\n    \"scrollable\",\n    \"header\",\n    \"body\",\n    \"footer\",\n    \"loadInitData\",\n    \"autoSaveForm\",\n    \"requestSaveForm\",\n    \"methodSaveForm\",\n    \"processBeforeSaveForm\"\n];\n\n/** Компонент формы */\nconst Form = (props) => {\n    const {\n        loadInitData,\n        header,\n        body,\n        footer,\n        autoSaveForm,\n        requestSaveForm,\n        methodSaveForm,\n        processBeforeSaveForm\n    } = props;\n\n    /** Состояние первоначалной настройки компонента*/\n    const [loaded, setLoaded] = useState(false);\n    const [antFormProps, setAntFormProps] = useState({});\n    const [initFormData, setInitFormData] = useState({});\n\n    useEffect(() => {\n        if (!loaded) {\n            if (loadInitData !== noop)\n                loadInitData(_setInitFormData);\n            else\n                setLoaded(true);\n        }\n    }, [loaded]);\n\n    useEffect(() => {\n        setAntFormProps(getObjectExcludedProps(props, excludeProps));\n        // console.log('antFormProps props => ', getObjectExcludedProps(props, excludeProps));\n    }, [props]);\n\n\n    const _setInitFormData = (data) => {\n        // console.log(\"Form loaded init data => \", data);\n        setInitFormData(data);\n        setLoaded(true);\n    };\n\n\n    let antForm;\n    if (props && props.form) {\n        antForm = props.form;\n    } else {\n        const [form] = AntForm.useForm();\n        antForm = form;\n    }\n\n    const getBodyCls = () => {\n        let cls = [`${rtPrefix}-form-body`];\n        props.noPadding && cls.push(`${rtPrefix}-form-body-no-padding`);\n        props.scrollable && cls.push(`${rtPrefix}-form-body-scrollable`);\n        return cls.join(\" \");\n    };\n\n    const onFinish = (rawValues) => {\n        const values = processBeforeSaveForm ? processBeforeSaveForm(rawValues) : rawValues;\n        // console.log(`Success form [${props.name ? props.name : 'no name form'}]: `, values);\n        const saveObject = {\n            ...initFormData,\n            ...values,\n            // dateStart: getISO(values['dateStart'])\n        };\n\n        // console.group(`Success form [${props.name ? props.name : 'no name form'}]:`);\n        // console.log(\"values: \", values);\n        // console.log(\"saveObject: \", saveObject);\n        // console.groupEnd();\n        console.log(`Success form [${props.name ? props.name : 'no name form'}]: `, saveObject);\n        if (autoSaveForm && requestSaveForm) {\n            // const saveObject = {\n            //     ...initFormData,\n            //     ...values,\n            //     // dateStart: getISO(values['dateStart'])\n            // };\n            requestSaveForm({\n                method: methodSaveForm,\n                data: saveObject\n            })\n                .then(response => {\n                    notification.success({\n                        message: \"Сохранение прошло успешно\"\n                    });\n                    if (props.onFinish)\n                        props.onFinish(values);\n                })\n                .catch(error => notificationError(error, 'Ошибка при сохранении') );\n        } else if (props.onFinish)\n            props.onFinish(values);\n    };\n\n    const onFinishFailed = errorInfo => {\n        console.error(\"Failed:\", errorInfo);\n        props.onFinishFailed && props.onFinishFailed(errorInfo);\n    };\n\n    const Header = (header) => <div className={`${rtPrefix}-form-header`}><FormItems items={header}/></div>\n    const Footer = (footer) => <div className={`${rtPrefix}-form-footer`}><FormItems items={footer}/></div>\n\n    return (\n        <React.Fragment>\n            {loaded\n                ? <AntForm\n                    form={antForm}\n                    {...antFormProps}\n                    className={`${antFormProps.className} ${rtPrefix}-form`}\n                    style={{ ...antFormProps.style, width: '100%', height: '100%' }}\n                    initialValues={{ ...antFormProps.initialValues, ...initFormData }}\n                    onFinish={onFinish}\n                    onFinishFailed={onFinishFailed}\n                >\n                    <React.Fragment>\n                        {header ? Header(header) : null}\n                        {body ? <div className={getBodyCls()}><FormItems items={body}/></div> : null}\n                        {props.children}\n                        {footer ? Footer(footer) : null}\n                    </React.Fragment>\n                </AntForm>\n                : null}\n        </React.Fragment>\n    );\n};\n\nForm.propTypes = {\n\n    /** Не делать отступы у формы от краев блока. **Only config Form** */\n    noPadding: PropTypes.bool,\n\n    /** Разрешит скролл внтри формы. **Only config Form** */\n    scrollable: PropTypes.bool,\n\n    /** Массив объектов для шапки формы. Как правило только заголовок. */\n    header: PropTypes.arrayOf(PropTypes.object),\n\n    /** Массив объектов для тела формы */\n    body: PropTypes.arrayOf(PropTypes.object),\n\n    /** Массив объектов для подвала формы. Как правило только кнопки \"Сохранить\" и \"Отмена\" */\n    footer: PropTypes.arrayOf(PropTypes.object),\n\n    /** Ссылка на функцию загрузки значений по умолчанию\n     * `(callBack) => callBack(initObject)` */\n    loadInitData: PropTypes.func,\n\n    /** Производить ли автоматическое сохранение по параметрам `requestSaveForm` и `methodSaveForm` */\n    autoSaveForm: PropTypes.bool,\n\n    /** Запрос для автоматического сохранения формы */\n    requestSaveForm: PropTypes.func,\n\n    /** HTTP Метод, передаваемый в запрос сохранения */\n    methodSaveForm: PropTypes.string,\n\n    /** Функция обработки перед сохранением формы */\n    processBeforeSaveForm: PropTypes.func\n};\n\nForm.defaultProps = {\n    noPadding: false,\n    scrollable: false,\n    loadInitData: noop,\n    autoSaveForm: true\n};\n\nexport default Form;\n","import React from 'react';\nimport {rtPrefix} from '../utils/variables';\n\n/** Компонент обертка со всеми пропрами div */\nconst Layout = props => {\n\n    const getCls = () => {\n        let cls = [`${rtPrefix}-layout`];\n        props.className && cls.push(props.className);\n        return cls.join(' ');\n    };\n\n    return (\n        <div {...props} className={getCls()}>\n            {props.children}\n        </div>\n    );\n};\n\nexport default Layout;\n","import React, {useState, useEffect} from 'react';\n\nconst Switcher = props => {\n\n    const { value } = props;\n\n    const [_value, _setValue] = useState(0);\n\n    useEffect(() => {\n        if(value !== undefined && value < props.children.length) {\n            _setValue(value);\n        }\n    }, [value])\n\n    return (props.children[_value]);\n};\n\n\nexport default Switcher;\n","import {Spin} from 'antd';\nimport {LoadingOutlined} from '@ant-design/icons';\nimport React from 'react';\n\nexport const empty = (\n\t<div className={'BaseTable__overlay'}>\n\t\t{' '}\n\t\t<span>Нет данных</span>{' '}\n\t</div>\n);\n\nexport const overlay = (\n\t<div className={'BaseTable__overlay'}>\n\t\t{' '}\n\t\t<Spin\n\t\t\ttip='Загрузка...'\n\t\t\tindicator={<LoadingOutlined style={{fontSize: 24}} spin />}\n\t\t/>{' '}\n\t</div>\n);\n","import React from 'react';\nimport {Checkbox} from 'antd';\nimport { flatten, getTableRowKeys, getTableRowObjects } from \"../../utils/baseUtils\";\n\nconst SelectionHead = (props) => {\n\tconst {column, container} = props;\n\tconst {rowKey, onSelectAll, selectedRowKeys, selectAll} = column;\n\n\tconst _handleChange = (e) => {\n\t\tconst rowKeys = flatten(getTableRowKeys(container.props.data, column.rowKey));\n\t\tconst rowObjects = flatten(getTableRowObjects(container.props.data, rowKey)).filter((item) => rowKeys.includes(item[rowKey]));\n\t\tconst totalLength = rowKeys.length;\n\t\tconst selectLength = selectedRowKeys.length;\n\t\tconst checked = !(totalLength === selectLength);\n\n\t\t// const newRowKeys = container.props.data.map((item) => { return item[column.rowKey] });\n\t\tonSelectAll({selected: checked, rowKeys: rowKeys, rowObjects: rowObjects});\n\t};\n\n\treturn (\n\t\t<Checkbox\n\t\t\tindeterminate={selectAll === null}\n\t\t\tonChange={_handleChange}\n\t\t\tchecked={selectAll}\n\t\t/>\n\t);\n};\n\nexport default SelectionHead;\n","import React from 'react';\nimport {Checkbox} from 'antd';\nimport {\n\tflatten,\n\tgetTableRowKeys,\n\tfindNodeByRowKey, getTableRowObjects\n} from \"../../utils/baseUtils\";\n\nconst getRowChildren = (data, rowKey) =>\n\tdata.map((item) => {\n\t\tif (item.children && item.children.length) {\n\t\t\treturn [item[rowKey], getRowChildren(item.children, rowKey)];\n\t\t}\n\t\treturn item[rowKey];\n\t});\n\nconst findBrothers = (data, selfItem, rowKey, parentKey, rowKeys = null) => {\n\tlet arr = [];\n\tdata.forEach((item) => {\n\t\tif (\n\t\t\titem[parentKey] &&\n\t\t\titem[parentKey] === selfItem[parentKey] &&\n\t\t\titem[rowKey] !== selfItem[rowKey]\n\t\t) {\n\t\t\tif (rowKeys !== null) {\n\t\t\t\tif (rowKeys.includes(item[rowKey])) {\n\t\t\t\t\tarr.push(item[rowKey]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tarr.push(item[rowKey]);\n\t\t\t}\n\t\t} else if (item.children && item.children.length) {\n\t\t\tarr.push(\n\t\t\t\tfindBrothers(\n\t\t\t\t\titem.children,\n\t\t\t\t\tselfItem,\n\t\t\t\t\trowKey,\n\t\t\t\t\tparentKey,\n\t\t\t\t\trowKeys\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\treturn arr;\n};\n\nexport const parentAnalysis = ({\n\trowData,\n\trowKey,\n\tparentKey,\n\tchecked,\n\tnodeAssociated,\n\ttreeData,\n\tselectedRowKeys,\n\tindeterminateRowKeys,\n}) => {\n\tlet _selectedRowKeys = [...selectedRowKeys];\n\tlet _indeterminateRowKeys = [...indeterminateRowKeys];\n\n\tlet currentRowData = rowData;\n\tlet parentExist = !!currentRowData[parentKey];\n\tlet lastTypeSelect = checked ? 'checked' : 'square';\n\tlet typeSelect = '';\n\tlet nextSquare = false;\n\n\t/** Пока есть родитель */\n\twhile (parentExist && nodeAssociated) {\n\t\tconst indeterminateBrothers = flatten(\n\t\t\tfindBrothers(\n\t\t\t\ttreeData,\n\t\t\t\tcurrentRowData,\n\t\t\t\trowKey,\n\t\t\t\tparentKey,\n\t\t\t\t_indeterminateRowKeys\n\t\t\t)\n\t\t);\n\t\tconst selectedBrothers = flatten(\n\t\t\tfindBrothers(\n\t\t\t\ttreeData,\n\t\t\t\tcurrentRowData,\n\t\t\t\trowKey,\n\t\t\t\tparentKey,\n\t\t\t\t_selectedRowKeys\n\t\t\t)\n\t\t);\n\t\tconst allBrothers = flatten(\n\t\t\tfindBrothers(treeData, currentRowData, rowKey, parentKey)\n\t\t);\n\n\t\tif (checked) {\n\t\t\tif (\n\t\t\t\tlastTypeSelect === 'checked' &&\n\t\t\t\tselectedBrothers.length === allBrothers.length\n\t\t\t)\n\t\t\t\ttypeSelect = 'checked';\n\t\t\telse typeSelect = 'square';\n\t\t} else {\n\t\t\tif (\n\t\t\t\t!checked &&\n\t\t\t\t!nextSquare &&\n\t\t\t\t(selectedBrothers.length || indeterminateBrothers.length)\n\t\t\t)\n\t\t\t\tnextSquare = true;\n\t\t\tif (nextSquare) typeSelect = 'square';\n\t\t\telse typeSelect = 'none';\n\t\t}\n\n\t\t// console.log(\"allBrothers \", allBrothers);\n\t\t// console.log(\"findParentById \", treeData,\n\t\t//     rowKey,\n\t\t//     parentKey,\n\t\t//     currentRowData[parentKey]);\n\t\t//\n\t\t// console.log(\"findNodeByRowKey \", findNodeByRowKey(treeData, rowKey, currentRowData[parentKey]));\n\n\t\t// Найти родителя\n\t\tcurrentRowData = findNodeByRowKey(\n\t\t\ttreeData,\n\t\t\trowKey,\n\t\t\tcurrentRowData[parentKey]\n\t\t);\n\n\t\tif (typeSelect === 'checked') {\n\t\t\t// Выделить галкой\n\t\t\t// console.log(\"checked\");\n\t\t\tlastTypeSelect = 'checked';\n\t\t\tif (!_selectedRowKeys.includes(currentRowData[rowKey]))\n\t\t\t\t_selectedRowKeys.push(currentRowData[rowKey]);\n\t\t\tconst index = _indeterminateRowKeys.indexOf(currentRowData[rowKey]);\n\t\t\tif (index > -1) _indeterminateRowKeys.splice(index, 1);\n\t\t} else if (typeSelect === 'square') {\n\t\t\t// Выдлеить квадратом\n\t\t\t// console.log(\"square: \");\n\t\t\tlastTypeSelect = 'square';\n\t\t\tif (!_indeterminateRowKeys.includes(currentRowData[rowKey]))\n\t\t\t\t_indeterminateRowKeys.push(currentRowData[rowKey]);\n\t\t\tconst index = _selectedRowKeys.indexOf(currentRowData[rowKey]);\n\t\t\tif (index > -1) _selectedRowKeys.splice(index, 1);\n\t\t} else if (typeSelect === 'none') {\n\t\t\t// Снять выделение\n\t\t\t// console.log(\"none: \");\n\t\t\tlastTypeSelect = 'none';\n\t\t\tconst indexS = _selectedRowKeys.indexOf(currentRowData[rowKey]);\n\t\t\tif (indexS > -1) _selectedRowKeys.splice(indexS, 1);\n\t\t\tconst indexI = _indeterminateRowKeys.indexOf(\n\t\t\t\tcurrentRowData[rowKey]\n\t\t\t);\n\t\t\tif (indexI > -1) _indeterminateRowKeys.splice(indexI, 1);\n\t\t}\n\n\t\tparentExist = !!currentRowData[parentKey];\n\t\t// parentExist = проверка наличия след родителя\n\t}\n\n\treturn [_selectedRowKeys, _indeterminateRowKeys];\n};\n\nexport const onChangeSelectionCell = (props) => {\n\tconst {rowData, rowIndex, column, rows, checked} = props;\n\tconst {\n\t\trowKey,\n\t\tparentKey,\n\t\tnodeAssociated,\n\t\tselectedRowKeys,\n\t\tindeterminateRowKeys,\n\t\tonChange\n\t} = column;\n\n\t// const rowKeys = flatten(getTableRowKeys([rowData], column.rowKey));\n\t// const totalLength = container.props.data.length;\n\t// const checked = e.target.checked;\n\t// const currentRowKey = {[rowKey]: rowData[rowKey], checked};\n\t// console.log(\"_handleChange: \", container);\n\n\tlet _selectedRowKeys = [...selectedRowKeys];\n\tlet _indeterminateRowKeys = [...indeterminateRowKeys];\n\n\t/** Обработка себя, поиск детей, выделение / снятие их */\n\tlet rowChildren = [];\n\tif (checked) {\n\t\tif (rowData.children && nodeAssociated)\n\t\t\trowChildren = flatten(getRowChildren(rowData.children, rowKey));\n\n\t\t_selectedRowKeys = _selectedRowKeys\n\t\t\t.concat([rowData[rowKey]])\n\t\t\t.concat(rowChildren);\n\t\t_indeterminateRowKeys = _indeterminateRowKeys.filter(\n\t\t\t(element) =>\n\t\t\t\telement !== rowData[rowKey] &&\n\t\t\t\t!rowChildren.includes(element)\n\t\t);\n\t} else {\n\t\tif (rowData.children && nodeAssociated)\n\t\t\trowChildren = flatten(\n\t\t\t\tgetRowChildren(rowData.children, rowKey, false)\n\t\t\t);\n\n\t\t_selectedRowKeys = _selectedRowKeys.filter(\n\t\t\t(element) =>\n\t\t\t\telement !== rowData[rowKey] &&\n\t\t\t\t!rowChildren.includes(element)\n\t\t);\n\t\t_indeterminateRowKeys = _indeterminateRowKeys.filter(\n\t\t\t(element) =>\n\t\t\t\telement !== rowData[rowKey] &&\n\t\t\t\t!rowChildren.includes(element)\n\t\t);\n\t}\n\n\t[_selectedRowKeys, _indeterminateRowKeys] = parentAnalysis({\n\t\trowData,\n\t\trowKey,\n\t\tparentKey,\n\t\tchecked,\n\t\tnodeAssociated,\n\t\ttreeData: rows,\n\t\tselectedRowKeys: _selectedRowKeys,\n\t\tindeterminateRowKeys: _indeterminateRowKeys,\n\t});\n\n\tconst keys = [...new Set(_selectedRowKeys)];\n\tconst _selectedRowObjects = flatten(getTableRowObjects(rows, rowKey)).filter((item) => keys.includes(item[rowKey]));\n\t//return [...new Set(_disabledElements)]\n\t// onChange({ selected: checked, totalLength, rowData, rowIndex });\n\n\t/** Выясняем новое состояние галочки \"Выделить все\" */\n\tlet selectAll;\n\tconst selectLength = keys.length;\n\tconst totalLength = flatten(\n\t\tgetTableRowKeys(rows, column.rowKey)\n\t).length;\n\n\tif (selectLength === 0) selectAll = false;\n\telse if (totalLength === selectLength) selectAll = true;\n\telse if (totalLength !== selectLength) selectAll = null;\n\n\n\n\tonChange({\n\t\tselected: checked,\n\t\t_selectedRow: {\n\t\t\trowData: {...rowData},\n\t\t\trowIndex: rowIndex,\n\t\t\trowKey: rowKey,\n\t\t},\n\t\t_selectAll: selectAll,\n\t\t_selectedRowKeys: keys, //[...new Set(_selectedRowKeys)],\n\t\t_selectedRowObjects: _selectedRowObjects,\n\t\t_indeterminateRowKeys: [...new Set(_indeterminateRowKeys)],\n\t});\n\n\t// let uniqIds = {};\n\t// onChange({selected: checked, rowKeys: rowKeys.filter(obj => !uniqIds[obj[rowKey]] && (uniqIds[obj[rowKey]] = true)) });\n};\n\nconst SelectionCell = (props) => {\n\n\tconst {rowData, column} = props;\n\tconst {selectedRowKeys, indeterminateRowKeys, rowKey} = column;\n\tconst det = indeterminateRowKeys.includes(rowData[rowKey]);\n\tconst checked = selectedRowKeys.includes(rowData[rowKey]);\n\n\t// React.useEffect(() => {\n\t// \tconsole.log(\"selectionCell\", props);\n\t// }, [props]);\n\n\tconst _onChangeHandler = (checked) => {\n\t\tconst {rowData, rowIndex, column, container} = props;\n\t\tonChangeSelectionCell({\n\t\t\trowData, rowIndex, column, rows: container.props.data, checked\n\t\t})\n\t}\n\n\treturn (\n\t\t<Checkbox\n\t\t\tindeterminate={det}\n\t\t\t// onChange={(e) => _onChangeHandler(e.target.checked)}\n\t\t\tchecked={checked}\n\t\t/>\n\t);\n};\n\nexport default SelectionCell;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {CloseCircleOutlined} from '@ant-design/icons';\nimport {rtPrefix} from '../../utils/variables';\n\nconst SelectionList = (props) => {\n\tconst {selectedRowObjects, rowRender, onClickDropSelect} = props;\n\n\t// console.log(\"SelectionList typeof -> \", typeof(rowRender));\n\treturn (\n\t\t<div className={`${rtPrefix}-table-selected-rows`}>\n\t\t\t{selectedRowObjects && selectedRowObjects.length > 0 ? (\n\t\t\t\t<ul>\n\t\t\t\t\t{selectedRowObjects.map((item, index) => (\n\t\t\t\t\t\t<li key={index}>\n\t\t\t\t\t\t\t{/*{(typeof(rowRender) === 'string') ? <div>{item[rowRender]}</div> : rowRender }*/}\n\t\t\t\t\t\t\t{typeof rowRender === 'function' ? (\n\t\t\t\t\t\t\t\trowRender({rowData: item, rowIndex: index})\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div>{item[rowRender]}</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div onClick={() => onClickDropSelect(item)}>\n\t\t\t\t\t\t\t\t<CloseCircleOutlined />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t) : (\n\t\t\t\t<div>Нет выбранных записей</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nSelectionList.propTypes = {\n\t/** Строка или функция для отображения элементов списка\n\t * Строка - имя поля\n\t * Функция - рендер строк. Параметры v\n\t * { rowData, rowIndex }) */\n\trowRender: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n\n\t/** Список выделенных объектов */\n\tselectedRowObjects: PropTypes.arrayOf(PropTypes.object).isRequired,\n\n\t/** Событие удаления элемента */\n\tonClickDropSelect: PropTypes.func.isRequired,\n};\n\nSelectionList.defaultProps = {};\n\nexport default SelectionList;\n","import React, {useRef, forwardRef, useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport BaseTable, {AutoResizer, callOrReturn} from 'react-base-table';\n// import BaseTable from \"./BaseTable/BaseTable\";\nimport {empty, overlay} from './defaultSettings';\nimport SelectionHead from './Selectable/SelectionHead';\nimport SelectionCell, {parentAnalysis, onChangeSelectionCell} from './Selectable/SelectionCell';\nimport SelectionList from './SelectionList/SelectionList';\nimport {rtPrefix} from '../utils/variables';\nimport {\n\tflatten,\n\tgenerateUUID,\n\tgetTableRowKeys,\n\tfindNodeByRowKey,\n\tnoop,\n\tgetTableRowObjects, notificationError, useMounted\n} from \"../utils/baseUtils\";\nimport objectPath from \"object-path\";\nimport { setDateStore } from \"../../redux/rtd.actions\";\nimport FormItems from \"../Form/FormItems\";\nimport moment from \"moment\";\n\n/** Компонент таблицы */\nconst Table = forwardRef((props, ref) => {\n\n\t/** LOADING AND INFINITY MODE STATES */\n\t/** Наличие на сервере еще данных */\n\tconst [hasMore, setHasMore] = useState(true);\n\t/** Индикатор загрузки данных */\n\tconst [loading, setLoading] = useState(false);\n\n\t/** TABLE STATES */\n\t/** Колонки таблицы */\n\t// const [_columns, _setColumns] = useState([]);\n\t/** Строки таблицы */\n\tconst [_rows, _setRows] = useState([]);\n\t/** Ключи выделенных строк */\n\tconst [_selectedRowKeys, setSelectedRowKeys] = useState([]);\n\t/** Значение строки поиска */\n\tconst [_searchValue, setSearchValue] = useState('');\n\t/** Объект фильтра */\n\tconst [_filter, setFilter] = useState({});\n\t/** Объект соритировки */\n\tconst [_sortBy, setSortBy] = useState({});\n\t/** Состояние selectAll галочки */\n\tconst [selectAll, setSelectAll] = useState(false);\n\n\t/** TREE STATES */\n\t/** Ключи строк с кубиками при selectable = true */\n\tconst [_indeterminateRowKeys, setIndeterminateRowKeys] = useState([]);\n\t/** Ключи раскрытых строк при selectable = true */\n\tconst [_expandedRowKeys, setExpandedRowKeys] = useState([]);\n\n\t/** FOOTER STATES */\n\t/** Отображать ли footer */\n\tconst [_footerShow, _setFooterShow] = useState(false);\n\t/** Всего строк по фильтру в таблице */\n    const [_totalCountRows, setTotalCountRows] = useState(0);\n\n\n\tconst [subscribeProps, setSubscribeProps] = useState({});\n\n\tconst tableRef = useRef();\n\n\tconst isMounted = useMounted()\n\n\tconst {\n\t\t/** Required */\n\t\tcolumns,\n\t\t// type,\n\t\tinfinityMode,\n\t\teditMode, // need Props.types\n\n\t\t/** Def values */\n\t\tdefaultRows,\n\t\tdefaultSelectedRowKeys,\n\t\tdefaultSearchValue,\n\t\tdefaultFilter,\n\t\tdefaultSortBy,\n\n\t\t/** Outdoor control */\n\t\trows,\n\t\tsetRows, // ???\n\t\tselectedRowKeys,\n\t\tsearchValue,\n\t\tfilter,\n\t\tsortBy,\n\n\t\t/** Base Props */\n\t\trowKey,\n\t\tcustomFields,\n\n\t\t/** View Props */\n\t\tempty,\n\t\toverlay,\n\t\tfixWidthColumn,\n\t\t// footerProps,\n\t\theaderHeight,\n\t\trowHeight,\n\t\trowRenderer,\n\t\tzebraStyle,\n\t\testimatedRowHeight,\n\t\t// cellBordered, // need Props.types\n\t\trowBordered,  // need Props.types\n\n\t\t/** Load Data Props */\n\t\tloadThreshold,\n\t\tpageSize,\n\t\trequestLoadRows,\n        requestLoadCount,\n\t\tsearchParamName,\n\n\t\t/** Selectable Props */\n\t\tselectable,\n\n\t\t/** Tree Props */\n\t\tnodeAssociated,\n\t\texpandColumnKey,\n\t\texpandDefaultAll,\n\t\texpandLazyLoad,\n\t\texpandParentKey,\n\n\t\t/** Events */\n\t\tonRowClick,\n\t\tonRowDoubleClick,\n\t\tonRowExpand,\n\t\tonSelectedRowsChange,\n\t\tonExpandedRowsChange,\n\n\t\t/** SELECTED PANEL */\n\t\tshowSelection,\n\t\trowRenderShowSelection,\n\n\t\t/** REDUX PROPS */\n\t\tdispatchPath,\n\t\tsubscribe,\n\n\t\tvalue,\n\t\tonChange,\n\t} = {...props, ...subscribeProps};\n\n\tconst footerProps = {\n\t\t...Table.defaultProps.footerProps,\n\t\t...props.footerProps,\n\t};\n\n\tconst selectedDispatchPath = dispatchPath && `${dispatchPath}.selected`;\n\tconst rowsDispatchPath = dispatchPath && `${dispatchPath}.rows`;\n\tconst rowDoubleClickDispatchPath = dispatchPath && `${dispatchPath}.events.onRowDoubleClick`;\n\n\tuseEffect(() => {\n        // console.log(\"Инициализация дефолтных значений \", selectColumn, columns);\n        // console.log(\"Инициализация дефолтных значений defaultSelectedRowKeys > \", defaultSelectedRowKeys);\n\n\t\t// Инициализация дефолтных значений\n\t\t// _setRows(defaultRows);\n\t\tif(defaultRows.length > 0) _setRowsHandler(defaultRows);\n\t\telse if(rows.length > 0) _setRowsHandler(rows);\n\t\t// setSelectedRowKeys(defaultSelectedRowKeys);\n\t\t_setSelectedRowsHandler(defaultSelectedRowKeys,undefined, defaultRows)\n\t\tsetSearchValue(defaultSearchValue);\n\t\tsetFilterHandler(defaultFilter);\n\t\tsetSortBy(defaultSortBy);\n\t\tsetSelectAll(\n\t\t\tdefaultRows.length > 0 &&\n\t\t\t\tdefaultRows.length === defaultSelectedRowKeys.length\n\t\t);\n\t\t// Определение нужно ли отображать подвал\n\t\t_setFooterShow(\n\t\t\t(footerProps.showElements.length ||\n\t\t\tfooterProps.leftCustomSideElement ||\n\t\t\tfooterProps.centerCustomSideElement ||\n\t\t\tfooterProps.rightCustomSideElement));\n\n\t\t// Only tree table\n\t\tif (!!expandColumnKey && !expandLazyLoad) {\n\t\t\t// Открытие всех нод\n\t\t\tif (expandDefaultAll)\n\t\t\t\tsetExpandedRowKeys(\n\t\t\t\t\tflatten(getTableRowKeys(defaultRows, rowKey))\n\t\t\t\t);\n\t\t\t// Установка квадратиков на нужных нодах\n\t\t\tif (defaultSelectedRowKeys && defaultSelectedRowKeys.length > 0) {\n\t\t\t\tlet flatRows = flatten(getTableRowKeys(defaultRows, rowKey));\n\t\t\t\tlet selectedRow = flatRows.filter((item) =>\n\t\t\t\t\tdefaultSelectedRowKeys.includes(item[rowKey])\n\t\t\t\t);\n\t\t\t\tlet _indeterminateRowKeys = [];\n\t\t\t\tselectedRow.forEach((item) => {\n\t\t\t\t\tconst [ss, ii] = parentAnalysis({\n\t\t\t\t\t\trowData: item,\n\t\t\t\t\t\trowKey,\n\t\t\t\t\t\tparentKey: expandParentKey,\n\t\t\t\t\t\tchecked: true,\n\t\t\t\t\t\tnodeAssociated,\n\t\t\t\t\t\ttreeData: defaultRows,\n\t\t\t\t\t\tselectedRowKeys: defaultSelectedRowKeys,\n\t\t\t\t\t\tindeterminateRowKeys: _indeterminateRowKeys,\n\t\t\t\t\t});\n\t\t\t\t\t_indeterminateRowKeys.push(...ii);\n\t\t\t\t});\n\t\t\t\tsetIndeterminateRowKeys([...new Set(_indeterminateRowKeys)]);\n\t\t\t}\n\t\t}\n\n\t\t// if (type !== 'localSide') {\n\t\t_dataProcessing({\n\t\t\tsortBy: defaultSortBy,\n\t\t\tfilter: defaultFilter,\n\t\t\tsearchLine: defaultSearchValue,\n\t\t\treload: true,\n\t\t});\n\t\t// }\n\t\t// console.log(\"Table => useEffect start \");\n\t\t// setMounted(true);\n\t\tif (ref && typeof ref === 'function') ref({reloadData});\n\t\telse if (ref && typeof ref === 'object') ref.current = {reloadData};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif(isMounted) {\n\t\t\t// console.log('useEffect rows');\n\t\t\t_setRowsHandler(rows);\n\t\t\t// setSelectedRowKeys(selectedRowKeys);\n\t\t\t_setSelectedRowsHandler(selectedRowKeys, undefined, rows);\n\t\t\tsetSearchValue(searchValue);\n\t\t\tsetFilterHandler(filter);\n\t\t\tsetSortBy(sortBy);\n\t\t\tif (!!expandColumnKey && !expandLazyLoad) {\n\t\t\t\t// Открытие всех нод\n\t\t\t\tif (expandDefaultAll)\n\t\t\t\t\tsetExpandedRowKeys(flatten(getTableRowKeys(rows, rowKey)));\n\t\t\t}\n\t\t}\n    }, [rows, selectedRowKeys, searchValue, filter, sortBy]);\n\n\tuseEffect(() => {\n\t\t// console.log('useEffect editMode');\n\t\t_setSelectedRowsHandler([], [])\n\t}, [editMode])\n\n\tuseEffect(() => {\n\t\t// console.log('useEffect value');\n\t\t_setRowsHandler(value)\n\t}, [value])\n\n\t/** Подписка на изменение props[subscribe.name] в сторе */\n\tsubscribe.map(item => {\n\t\treturn useEffect( () => {\n\t\t\tif(isMounted && item.name) {\n\t\t\t\t// console.log(\"Table => useEffect => [%s] \", item.name, props[item.name]);\n\t\t\t\tconst onChangeObject = {\n\t\t\t\t\tvalue: props[item.name],\n\t\t\t\t\textraData: props[`${item.name}ExtraData`],\n\t\t\t\t\treloadTable: reloadData,\n\t\t\t\t\taddRows: _addRows,\n\t\t\t\t\taddRow: _addRow,\n\t\t\t\t\taddRowAsCopy: _addRowAsCopy,\n\t\t\t\t\teditRow: _editRow,\n\t\t\t\t\tremoveRow: _removeRow,\n\t\t\t\t\tmoveUpRow: _moveUpRow,\n\t\t\t\t\tmoveDownRow: _moveDownRow,\n\t\t\t\t\tsetSubscribeProps: _setSubscribeProps,\n\t\t\t\t}\n\t\t\t\titem.onChange && item.onChange(onChangeObject);\n\t\t\t}\n\t\t}, [props[item.name]]);\n\t})\n\n\t/** BASE FUNCTIONS */\n\n\tconst _setSubscribeProps = (props) => {\n\t\t// setTimeout(() => {\n\t\t// \tconsole.log('_setSubscribeProps');\n\t\tsetSubscribeProps({...subscribeProps, ...props});\n\t\t// }, 2000)\n\t}\n\n\tconst _setRowsHandler = (rows) => {\n\t\t// console.log('_setRowsHandler onChange');\n\t\t_setRows(rows);\n\t\tsetRows(rows);\n\t\trowsDispatch(rows);\n\t};\n\n\tconst _setSelectedRowsHandler = (selectedKeys = [], selectedObjects = undefined, rows = []) => {\n\t\t// console.log('_setSelectedRowsHandler => ', selectedKeys)\n\t\tsetSelectedRowKeys(selectedKeys);\n\t\tif(selectedKeys.length === 0)\n\t\t\tif (selectable)\n\t\t\t\tselectedDispatch([]);\n\t\t\telse\n\t\t\t\tselectedDispatch(undefined);\n\t\telse if(selectedKeys.length > 0 && !selectedObjects)\n\t\t\tif (selectable)\n\t\t\t\tselectedDispatch (flatten( getTableRowObjects(rows, rowKey) ).filter((item) => selectedKeys.includes(item[rowKey])))\n\t\t\telse\n\t\t\t\tselectedDispatch (findNodeByRowKey(rows, rowKey, selectedKeys[0]))\n\t\telse\n\t\t\tselectedDispatch(selectedObjects);\n\t}\n\n\tconst rowsDispatch = (rows) => {\n\t\trowsDispatchPath && props.setDateStore && props.setDateStore(rowsDispatchPath, rows);\n\t};\n\n\tconst selectedDispatch = (data) => {\n\t\tselectedDispatchPath && props.setDateStore && props.setDateStore(selectedDispatchPath, data);\n\t}\n\n\tconst rowDoubleClickDispatch = (value) => {\n\t\trowDoubleClickDispatchPath\n\t\t&& props.setDateStore\n\t\t&& props.setDateStore(rowDoubleClickDispatchPath, {\n\t\t\ttimestamp: moment(),\n\t\t\tvalue: value\n\t\t});\n\t}\n\n\tconst onTableEventsDispatch = (nameEvent, value) => {\n\t\tconst dp = dispatchPath && `${dispatchPath}.events.${nameEvent}`;\n\t\tdp && props.setDateStore && props.setDateStore(dp, {\n\t\t\ttimestamp: moment(),\n\t\t\tvalue: value\n\t\t});\n\t\t// console.log('onTableEventsDispatch onChange');\n\t\tonChange && onChange(value)\n\t}\n\n\tconst setFilterHandler = (filter) => {\n\t\t// console.log('setFilterHandler => ', filter);\n\t\tsetFilter(filter);\n\t}\n\n\tconst reloadData = ({sortBy, filter, searchValue}, appendParams) => {\n\t\t// console.log(\"reloadData params \", sortBy, filter, searchValue, loading);\n\t\ttableRef.current && tableRef.current.scrollToRow(0, 'auto');\n\t\tif(props.value && props.value.length > 0)\n\t\t\t_setSelectedRowsHandler(props.value.map(item => item[rowKey]), props.value);\n\t\telse\n\t\t\t_setSelectedRowsHandler()\n\n\t\tconst __sortBy = appendParams ? (sortBy ? sortBy : _sortBy) : sortBy;\n\t\tconst __filter = appendParams ? {..._filter, ...filter} : filter;\n\t\tconst __searchValue = appendParams ? (searchValue ? searchValue : _searchValue) : searchValue;\n\t\tif(sortBy) setSortBy(__sortBy);\n\t\tif(filter) setFilterHandler(__filter);\n\t\tif(searchValue) setSearchValue(__searchValue);\n\t\t_dataProcessing({\n\t\t\tsortBy: __sortBy,\n\t\t\tfilter: __filter,\n\t\t\tsearchLine: __searchValue,\n\t\t\treload: true,\n\t\t});\n        // console.log(\"reloadData loading \", loading);\n    };\n\n\tconst _dataProcessing = (params) => {\n\t\t// console.log('_dataProcessing', params);\n\t\tconst {sortBy, filter, searchLine, expandRow, reload} = params;\n\t\tif ((hasMore || reload) && !loading) {\n\t\t\tsetLoading(true);\n\t\t\tconst pageNum = reload\n\t\t\t\t? 0\n\t\t\t\t: Math.floor(_rows.length / pageSize);\n\t\t\tconst params = {\n\t\t\t\tpage: pageNum,\n\t\t\t\tsize: pageSize,\n\t\t\t\tsort:\n\t\t\t\t\tsortBy && sortBy.key\n\t\t\t\t\t\t? sortBy.key + ',' + sortBy.order\n\t\t\t\t\t\t: null,\n\t\t\t};\n\t\t\tconst dataQuery = {\n\t\t\t\t...filter,\n\t\t\t\t...(searchLine\n\t\t\t\t\t? {[searchParamName]: searchLine}\n\t\t\t\t\t: null),\n\t\t\t};\n\t\t\t// console.log('dataQuery', dataQuery);\n\n\t\t\tif(infinityMode && reload && requestLoadCount !== noop && !expandColumnKey && !expandLazyLoad) {\n\t\t\t\trequestLoadCount({\n\t\t\t\t\tparams,\n\t\t\t\t\tdata: dataQuery,\n\t\t\t\t})\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t// console.log(\"infinity then response\", response);\n\t\t\t\t\t\t// const result = response.data;\n\t\t\t\t\t\tsetTotalCountRows(response.data);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(error =>\n\t\t\t\t\t\tnotificationError(error, 'Ошибка получения количества записей по фильтру') );\n\t\t\t}\n\n\t\t\t// console.log('requestLoadRows => ', typeof requestLoadRows);\n\t\t\t// if(typeof requestLoadRows !== 'function'){\n\t\t\t//     setLoading(false);\n\t\t\t// }\n\t\t\tif(requestLoadRows) {\n\t\t\t\trequestLoadRows({\n\t\t\t\t\tparams,\n\t\t\t\t\tdata: dataQuery,\n\t\t\t\t})\n\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t// console.log(\"infinity then response\", response);\n\t\t\t\t\t\tconst result = response.data;\n\t\t\t\t\t\t// Если иерархия и ленивая, то ищим кому добавть полученные записи\n\t\t\t\t\t\tif (!!expandColumnKey && expandLazyLoad) {\n\t\t\t\t\t\t\t// lastExpandRow//, setLastExpandRow\n\t\t\t\t\t\t\t// console.log('!!expandColumnKey && expandLazyLoad', result);\n\t\t\t\t\t\t\tif (pageNum === 0) {\n\t\t\t\t\t\t\t\tresult.forEach((child) => {\n\t\t\t\t\t\t\t\t\tchild.children = [\n\t\t\t\t\t\t\t\t\t\t{ [rowKey]: generateUUID() },\n\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t// _setRows(result);\n\t\t\t\t\t\t\t\t_setRowsHandler(result);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlet newRows = [..._rows];\n\t\t\t\t\t\t\t\t// (data, rowKey, rowValue)\n\t\t\t\t\t\t\t\tresult.forEach((child) => {\n\t\t\t\t\t\t\t\t\tchild.children = [\n\t\t\t\t\t\t\t\t\t\t{ [rowKey]: generateUUID() },\n\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tlet node = findNodeByRowKey(\n\t\t\t\t\t\t\t\t\tnewRows,\n\t\t\t\t\t\t\t\t\trowKey,\n\t\t\t\t\t\t\t\t\texpandRow[rowKey]\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tnode.children = result;\n\t\t\t\t\t\t\t\t// console.log('newRows -> ', newRows);\n\t\t\t\t\t\t\t\t// _setRows(newRows);\n\t\t\t\t\t\t\t\t_setRowsHandler(newRows);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (result && result.length < pageSize) {\n\t\t\t\t\t\t\t\tsetHasMore(false);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tsetHasMore(true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpageNum === 0\n\t\t\t\t\t\t\t\t? _setRowsHandler(result) // _setRows\n\t\t\t\t\t\t\t\t: _setRowsHandler(_rows.concat(result)); // _setRows\n\n\t\t\t\t\t\t\t// console.log('expandDefaultAll ', expandDefaultAll, _expandedRowKeys);\n\t\t\t\t\t\t\tif (expandDefaultAll)\n\t\t\t\t\t\t\t\tsetExpandedRowKeys(\n\t\t\t\t\t\t\t\t\tflatten(getTableRowKeys(result, rowKey))\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\tnotificationError(error, 'Ошибка загрузки данных')\n\t\t\t\t\t\t_setRowsHandler(_rows); // _setRows\n\t\t\t\t\t\t// setHasMore(false);\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t});\n\t\t\t} else setLoading(false);\n\t\t}\n\t};\n\n\t/** Событие выделение одной строки в режиме без галочек */\n\tconst useSimpleAndDoubleClick = (actionSimpleClick, actionDoubleClick, delay = 200) => {\n\t\tconst [click, setClick] = useState(0);\n\t\tconst [data, setData] = useState(undefined);\n\t\tuseEffect(() => {\n\t\t\tconst timer = setTimeout(() => {\n\t\t\t\t// simple click\n\t\t\t\tif (click === 1) actionSimpleClick(data);\n\t\t\t\tsetClick(0);\n\t\t\t}, delay);\n\t\t\tif (click === 2) actionDoubleClick(data);\n\t\t\treturn () => clearTimeout(timer);\n\t\t}, [click]);\n\t\treturn (_data) => {setClick(prev => prev + 1); setData(() => _data);}\n\t}\n\n\tlet timer;\n\tconst simpleAndDoubleClick = (actionSimpleClick, actionDoubleClick, data) => (event) => {\n\t\tclearTimeout(timer);\n\t\tif (event.detail === 1) {\n\t\t\t// console.log('actionSimpleClick', data)\n\t\t\ttimer = setTimeout(() => actionSimpleClick(data), 200)\n\t\t} else if (event.detail === 2) {\n\t\t\t// console.log('actionDoubleClick', data)\n\t\t\tactionDoubleClick(data)\n\t\t}\n\t}\n\n\tconst _onRowClick = ({rowData, rowIndex, rowKey}) => {\n\t\t// console.log('actionSimpleClick')\n\t\t_rowSelectAfterClick({rowData, rowIndex, rowKey, onClick: onRowClick})\n\t}\n\tconst _onRowDoubleClick = ({rowData, rowIndex, rowKey}) => {\n\t\t// console.log('onDoubleClick', rowData, rowIndex, rowKey);\n\t\t// console.log('actionDoubleClick')\n\t\trowDoubleClickDispatch(rowData);\n\t\t_rowSelectAfterClick({rowData, rowIndex, rowKey, onClick: onRowDoubleClick})\n\t}\n\n\tconst _rowSelectAfterClick = ({rowData, rowIndex, rowKey, onClick}) => {\n\t\tconst checked = !_selectedRowKeys.includes(rowKey);\n\t\tconst newRowObject = {\n\t\t\trowData: {...rowData},\n\t\t\trowIndex: rowIndex,\n\t\t\trowKey: rowKey,\n\t\t};\n\t\tif (!selectable) {\n\t\t\t// console.log('_rowEventHandlers -> onClick', rowKey, rowIndex);\n\t\t\t// console.log('q onRowClick => ', rowData)\n\t\t\t// if(_selectedRowKeys)\n\t\t\tif(checked && !editMode)\n\t\t\t\t_setSelectedRowsHandler([rowKey], rowData);\n\t\t\tonSelectedRowsChange([rowKey], [rowData]);\n\t\t} else {\n\t\t\tonChangeSelectionCell({\n\t\t\t\t...newRowObject,\n\t\t\t\tcolumn: _getSelectionColumnProps(),\n\t\t\t\trows: _rows,\n\t\t\t\tchecked: checked,\n\t\t\t})\n\t\t}\n\t\tonClick({ selected: checked, ...newRowObject });\n\t}\n\n\tconst _rowEventHandlers = {\n\t\tonClick: _onRowClick,\n\t\tonDoubleClick: _onRowDoubleClick,\n\n\t\t// onClick: useSimpleAndDoubleClick(_onRowClick, _onRowDoubleClick),\n\t\t// onClick: simpleAndDoubleClick(_onRowClick, _onRowDoubleClick),\n\n\t\t// onDoubleClick: console.log('onDoubleClick'),\n\t\t// onContextMenu: console.log('context menu'),\n\t\t// onMouseEnter: console.log('mouse enter'),\n\t\t// onMouseLeave: console.log('mouse leave'),\n\t};\n\n\n\t/** Событие при сортировке */\n\tconst _onColumnSort = (sortBy) => {\n\t\t// console.log(\"sortBy\", sortBy);\n\t\ttableRef.current.scrollToRow(0, 'auto');\n\t\tsetSortBy(sortBy);\n\n\t\t// Для серверной сортировки - сбросить выделение\n\t\t// if (type !== 'localSide') {\n\t\t// setSelectedRowKeys([]);\n\t\t_setSelectedRowsHandler();\n\t\t// }\n\t\tconst loadParams = {\n\t\t\tsortBy: sortBy,\n\t\t\tfilter: _filter,\n\t\t\tsearchLine: _searchValue,\n\t\t\treload: true,\n\t\t};\n\t\t_dataProcessing(loadParams);\n\t};\n\n\t/** VIEW FUNCTIONS */\n\n\n\tconst _footer = (\n\t\t<React.Fragment>\n\t\t\t{_footerShow ? (\n\t\t\t\t\t<React.Fragment>\n                        {/*className={'BaseTable__footer__counter'}>*/}\n\t\t\t\t\t\t<div key={'footer-left-custom-side'} className={'left-custom-side'}>\n\t\t\t\t\t\t\t{footerProps.leftCustomSideElement\n\t\t\t\t\t\t\t\t? Array.isArray(footerProps.leftCustomSideElement)\n\t\t\t\t\t\t\t\t\t? <FormItems items={footerProps.leftCustomSideElement} />\n\t\t\t\t\t\t\t\t\t: <footerProps.leftCustomSideElement/>\n\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div key={'footer-center-custom-side'} className={'center-custom-side'}>\n\t\t\t\t\t\t\t{footerProps.centerCustomSideElement\n\t\t\t\t\t\t\t\t? Array.isArray(footerProps.centerCustomSideElement)\n\t\t\t\t\t\t\t\t\t? <FormItems items={footerProps.centerCustomSideElement} />\n\t\t\t\t\t\t\t\t\t: <footerProps.centerCustomSideElement/>\n\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div key={'footer-right-custom-side'} className={'right-custom-side'}>\n\t\t\t\t\t\t\t{footerProps.rightCustomSideElement\n\t\t\t\t\t\t\t\t? Array.isArray(footerProps.rightCustomSideElement)\n\t\t\t\t\t\t\t\t\t? <FormItems items={footerProps.rightCustomSideElement} />\n\t\t\t\t\t\t\t\t\t: <footerProps.rightCustomSideElement/>\n\t\t\t\t\t\t\t\t: null}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{selectable ? (\n\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t{footerProps.showElements.includes('selected')\n\t\t\t\t\t\t\t\t\t? <span>{footerProps.selectedTitle} {_selectedRowKeys.length}</span>\n\t\t\t\t\t\t\t\t\t: null }\n\t\t\t\t\t\t\t\t{footerProps.showElements.includes('loaded')\n\t\t\t\t\t\t\t\t\t? <span>{footerProps.loadedTitle} {flatten(getTableRowKeys(_rows, rowKey)).length}</span>\n\t\t\t\t\t\t\t\t\t: null }\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t{footerProps.showElements.includes('total')\n\t\t\t\t\t\t\t? infinityMode && requestLoadCount !== noop && !expandColumnKey && !expandLazyLoad\n\t\t\t\t\t\t\t\t? <span>{footerProps.totalTitle} {_totalCountRows}</span>\n\t\t\t\t\t\t\t\t: <span>{footerProps.totalTitle} {flatten(getTableRowKeys(_rows, rowKey)).length}</span>\n\t\t\t\t\t\t\t: null}\n\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t) : null}\n\t\t</React.Fragment>\n\t);\n\n\t/** Событие при рендере для стилизации */\n\tconst _rowClassName = ({rowData, rowIndex}) => {\n\t\tconst {rowClassName} = props;\n\t\treturn [\n\t\t\trowClassName,\n\t\t\t_selectedRowKeys.includes(rowData[rowKey]) && 'row-selected',\n\t\t\tzebraStyle ? (rowIndex % 2 === 0 ? 'even' : 'odd') : '',\n\t\t\trowBordered ? 'bordered' : ''\n\t\t].join(' ')\n\t};\n\n\t// const _cellProps = () => ({ className: [cellBordered ? 'cellBordered' : ''].join(' ')})\n\n\tconst _rowRenderer = (props) => {\n\t\tconst { cells, rowData, rowIndex } = props;\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\twidth: '100%',\n\t\t\t\t\theight: '100%'\n\t\t\t\t}}\n\t\t\t\tonClick={(e) =>\n\t\t\t\tsimpleAndDoubleClick(_onRowClick, _onRowDoubleClick, {rowData, rowIndex, rowKey: rowData[rowKey]})(e)}\n\t\t\t>\n\t\t\t\t{cells}\n\t\t\t</div>\n\t\t)\n\t}\n\n\tconst _rowProps = ({ columns, rowData, rowIndex }) => ({\n\t\tonClick: (e) =>\n\t\tsimpleAndDoubleClick(_onRowClick, _onRowDoubleClick, {rowData, rowIndex, rowKey: rowData[rowKey]})(e)\n\n})\n\n\t/** LOAD DATA FUNCTIONS */\n\tconst onEndReached = () => {\n\t\tlet selectAll;\n\t\tconst selectLength = _selectedRowKeys.length;\n\t\tif (selectLength === 0) selectAll = false;\n\t\telse if (selectLength > 0) selectAll = null;\n\n\t\tsetSelectAll(selectAll);\n\t\t// console.log('_filter', _filter);\n\n\t\tif (infinityMode) {\n\t\t\tconst loadParams = {\n\t\t\t\tsortBy: _sortBy,\n\t\t\t\tfilter: _filter,\n\t\t\t\tsearchLine: _searchValue,\n\t\t\t\treload: false,\n\t\t\t};\n\t\t\t_dataProcessing(loadParams);\n\t\t}\n\t};\n\n\t/** SELECTABLE FUNCTIONS */\n\n\t/** Событие при изменении галочки одной строки */\n\tconst _onChangeSelectHandler = ({\n\t\tselected,\n\t\t_selectedRow,\n\t\t_selectAll,\n\t\t_selectedRowKeys,\n\t\t_selectedRowObjects,\n\t\t_indeterminateRowKeys,\n\t}) => {\n\t\t// console.group(\"_onChangeSelectHandler\", _selectedRowKeys);\n\t\t// console.log(\"_selectedRowKeys\", _selectedRowKeys);\n\t\t// console.log(\"_indeterminateRowKeys\", _indeterminateRowKeys);\n\t\t// console.log(\"_selectAll\", _selectAll);\n\t\t// console.groupEnd();\n\n\t\t// setSelectedRowKeys(_selectedRowKeys);\n\t\t// selectedDispatch(_selectedRowObjects);\n\t\t_setSelectedRowsHandler(_selectedRowKeys, _selectedRowObjects)\n\t\tsetIndeterminateRowKeys(_indeterminateRowKeys);\n\t\tsetSelectAll(_selectAll);\n\t\tonSelectedRowsChange(_selectedRowKeys, _selectedRowObjects);\n\t};\n\n\t/** Событие при изменении галочки \"Выделить все\" */\n\tconst _onSelectAllHandler = ({selected, rowKeys, rowObjects}) => {\n\t\tconst selectedKeys = selected ? rowKeys : [];\n\t\t// setSelectedRowKeys(selectedKeys);\n\t\t// selectedDispatch(selected ? rowObjects : []);\n\t\t_setSelectedRowsHandler(selectedKeys, selected ? rowObjects : [])\n\t\tsetIndeterminateRowKeys([]);\n\t\tsetSelectAll(selected);\n\t\t// setSelectedRowObjects(rows);\n\t\t// console.log(\"_handleSelectAll\", selectedKeys);\n\t\tonSelectedRowsChange(selectedKeys, rowObjects);\n\t};\n\t//\n\t// const SelectionCell = (props) => {\n\t// \tconst {rowData, column} = props;\n\t// \tconst {selectedRowKeys, indeterminateRowKeys, rowKey} = column;\n\t// \tconst det = indeterminateRowKeys.includes(rowData[rowKey]);\n\t// \tconst checked = selectedRowKeys.includes(rowData[rowKey]);\n\t// \tReact.useEffect(() => {\n\t// \t\tconsole.log(\"selectionCell\", props);\n\t// \t}, []);\n\t//\n\t// \tconst _handleChange = (checked) => {\n\t// \t\tconsole.log(\"_handleChange\", checked);\n\t// \t}\n\t//\n\t// \treturn (\n\t// \t\t<Checkbox\n\t// \t\t\tindeterminate={det}\n\t// \t\t\tonChange={(e) => _handleChange(e.target.checked)}\n\t// \t\t\tchecked={checked}\n\t// \t\t/>\n\t// \t);\n\t// };\n\n\tconst _getSelectionColumnProps = () => ({\n\t\trowKey: rowKey,\n\t\tparentKey: expandParentKey,\n\t\tnodeAssociated: nodeAssociated,\n\t\tselectedRowKeys: _selectedRowKeys,\n\t\tindeterminateRowKeys: _indeterminateRowKeys,\n\t\tonChange: _onChangeSelectHandler,\n\t})\n\n\tconst _getColumns = () => {\n\t\tconst selectColumn = {\n\t\t\tkey: '__selection__',\n\t\t\theaderRenderer: SelectionHead,\n\t\t\tcellRenderer: <SelectionCell/>,\n\t\t\twidth: 40,\n\t\t\tflexShrink: 0,\n\t\t\tresizable: false,\n\t\t\tfrozen: 'left',\n\t\t\tselectAll: selectAll,\n\t\t\tonSelectAll: _onSelectAllHandler,\n\t\t\t..._getSelectionColumnProps()\n\t\t};\n\t\treturn selectable ? [selectColumn, ...columns] : [...columns];\n\t}\n\n\n\n\t/** TREE FUNCTIONS */\n\n\tconst _onExpandedRowsChange = (expandedRowKeys) => {\n\t\t// console.log(\"_onExpandedRowsChange\", expandedRowKeys);\n\t\tonExpandedRowsChange(expandedRowKeys);\n\t};\n\tconst _onRowExpand = ({expanded, rowData, rowIndex, rowKey}) => {\n\t\t// console.log(\"_onRowExpand\", rowData, expanded, rowIndex, rowKey);\n\t\tif (expanded) {\n\t\t\tsetExpandedRowKeys([..._expandedRowKeys, rowKey]);\n\n\t\t\tif (expandLazyLoad) {\n\t\t\t\tconst loadParams = {\n\t\t\t\t\tsortBy: _sortBy,\n\t\t\t\t\tfilter: {..._filter, [expandParentKey]: rowKey},\n\t\t\t\t\tsearchLine: _searchValue,\n\t\t\t\t\treload: false,\n\t\t\t\t\texpandRow: rowData,\n\t\t\t\t};\n\t\t\t\t// _callPropsOnLoad(loadParams);\n\t\t\t\t_dataProcessing(loadParams);\n\t\t\t}\n\t\t} else {\n\t\t\tlet expandedRowKeys = [..._expandedRowKeys];\n\t\t\tlet allChildKeys = flatten(\n\t\t\t\tgetTableRowKeys(rowData.children, props.rowKey)\n\t\t\t);\n\t\t\tallChildKeys.push(rowKey);\n\t\t\t// console.log('allChildKeys', allChildKeys);\n\t\t\tsetExpandedRowKeys(\n\t\t\t\texpandedRowKeys.filter((item) => !allChildKeys.includes(item))\n\t\t\t);\n\t\t}\n\t\tonRowExpand({expanded, rowData, rowIndex, rowKey});\n\t};\n\n\n\t/** ROW CHANGE FUNCTIONS */\n\n\t/**\n\t * Find row by key\n\t * @param data - table rows\n\t * @param key - key row for find\n\t * @param callback - function for return result\n\t * @returns {*}\n\t */\n\tconst loop = (data, key, callback) => {\n\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\tif (data[i][rowKey] === key) {\n\t\t\t\t// console.log(`Selected => index: [${i}], path: [${data[i].path}]`, data);\n\t\t\t\treturn callback(data[i], i, data);\n\t\t\t} else {\n\t\t\t\t// console.log(`Other => index: [${i}], path: [${data[i].path}]`);\n\t\t\t}\n\t\t\tif (data[i].children) {\n\t\t\t\tloop(data[i].children, key, callback);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst _addRows = (rows) => {\n\t\tlet saveRows = [...rows];\n\t\tif (customFields)\n\t\t\t// Фильтрация по пользовательским параметрам\n\t\t\tsaveRows = saveRows.filter((sRow) => {\n\t\t\t\tlet isValid = true;\n\t\t\t\tcustomFields.forEach((field) => {\n\t\t\t\t\t// Валидация по пользовательской логике функции validate\n\t\t\t\t\tif(field.validate)\n\t\t\t\t\t\tisValid = field.validate(sRow, _rows);\n\n\t\t\t\t\t// Создание или переобразование по пользовательской логике функции value\n\t\t\t\t\tif(field.value)\n\t\t\t\t\t\tsRow[field.name] = field.value(sRow, _rows);\n\t\t\t\t});\n\t\t\t\tif(isValid)\n\t\t\t\t\treturn sRow;\n\t\t\t});\n\t\tconst _localRows = [..._rows, ...saveRows]\n\t\t_setRowsHandler(_localRows);\n\t\tonTableEventsDispatch('onAddRows', _localRows);\n\n\t}\n\n\tconst _addRow = (row) => {\n\t\tlet _row = {...row}\n\t\tif (customFields)\n\t\t\tcustomFields.forEach((field) => _row[field.name] = field.value(_row, _rows));\n\t\tconst _localRows = [..._rows, _row]\n\t\t_setRowsHandler(_localRows);\n\t\tonTableEventsDispatch('onAddRow', _localRows);\n\n\t}\n\n\tconst _addRowAsCopy = () => {\n\t\t// console.log(\"_onClickAddAsCopy\", selectedRow);\n\t\tconst _localRows = [..._rows, findNodeByRowKey(_rows, rowKey, _selectedRowKeys[0])]\n\t\t_setRowsHandler(_localRows);\n\t\tonTableEventsDispatch('onAddRowAsCopy', _localRows);\n\n\t};\n\n\tconst _editRow = (row) => {\n\t\t// console.log(\"_onClickEdit\", selectedRow);\n\t\tconst data = [..._rows];\n\t\tconst key = row[rowKey];\n\t\tloop(data, key, (item, index, arr)  => {\n\t\t\tdata[index] = row;\n\t\t\t_setRowsHandler(data);\n\t\t\t// selectedDispatch(row)\n\t\t\t_setSelectedRowsHandler(_selectedRowKeys, undefined, data);\n\t\t\tonTableEventsDispatch('onEditRow', data);\n\n\t\t\t// setSelectedRowKeys([]);\n\t\t})\n\t\t// props.onClickEdit(event, selectedRow);\n\t};\n\n\tconst _removeRow = (event) => {\n\t\t// console.log(\"_onClickDelete\", autoDeleteRows, selectedRowKeys);\n\t\tconst _localRows = _rows.filter(\n\t\t\t(item) => !_selectedRowKeys.includes(item[rowKey]) )\n\t\t_setRowsHandler(_localRows);\n\t\t_setSelectedRowsHandler();\n\t\tonTableEventsDispatch('onRemoveRow', _localRows);\n\n\t\t// setSelectedRowKeys([]);\n\t\t// if (selectable)\n\t\t// \tselectedDispatch([]);\n\t\t// else\n\t\t// \tselectedDispatch(undefined);\n\t\t// commandPanelProps.onClickDelete(event, _selectedRowKeys);\n\t};\n\n\t// const _moveUpRow\n\n\tconst _moveUpRow = (event) => {\n\t\tconst data = [..._rows];\n\t\tconst key = _selectedRowKeys[0];\n\t\tloop(data, key, (item, index, arr)  => {\n\t\t\tconst newRowIndex = _getNewIndexRow(index, index - 1);\n\t\t\t_changeIndexRow(index, newRowIndex, arr, data, 'onMoveUpRow');\n\t\t\t// commandPanelProps.onClickUp(event, {\n\t\t\t// \trowIndex: newRowIndex,\n\t\t\t// \trowData: findNodeByRowKey(_rows, rowKey, _selectedRowKeys[0]),\n\t\t\t// }, data);\n\t\t})\n\t};\n\n\tconst _moveDownRow = (event) => {\n\t\tconst data = [..._rows];\n\t\tconst key = _selectedRowKeys[0];\n\t\tloop(data, key, (item, index, arr)  => {\n\t\t\tconst newRowIndex = _getNewIndexRow(index, index + 1);\n\t\t\t_changeIndexRow(index, newRowIndex, arr, data, 'onMoveDownRow');\n\t\t\t// commandPanelProps.onClickDown(event, {\n\t\t\t// \trowIndex: newRowIndex,\n\t\t\t// \trowData: findNodeByRowKey(_rows, rowKey, _selectedRowKeys[0]),\n\t\t\t// }, data);\n\t\t})\n\t};\n\n\tconst _getNewIndexRow = (oldIndex, newIndex) =>\n\t\tnewIndex >= 0 && newIndex < _rows.length ? newIndex : oldIndex;\n\n\tconst _changeIndexRow = (oldIndex, newIndex, arr, data, nameEvent) => {\n\t\tif (newIndex >= 0 && newIndex < arr.length) {\n\t\t\t// let arr = [..._rows]; // Копируем массив\n\t\t\tconst item = arr.splice(oldIndex, 1); // Удаляем элемент со старого места\n\t\t\t// console.log('_changeIndexRow => ',item);\n\t\t\tarr.splice(newIndex > 0 ? newIndex : 0, 0, item[0]); // Ставим элемент на новое место\n\t\t\t// console.log(\"_changeIndexRow\", item[0]);\n\t\t\t_setRowsHandler(data);\n\t\t\tonTableEventsDispatch(nameEvent, data);\n\n\t\t}\n\t};\n\n\t// const _onSearch = (searchLine, e) => {\n\t// \te.preventDefault();\n\t// \t// console.log(\"_onSearch\", searchLine);\n\t// \ttableRef.current.scrollToRow(0, 'auto');\n\t// \tsetSearchValue(searchLine);\n\t// \tconst loadParams = {\n\t// \t\tsortBy: _sortBy,\n\t// \t\tfilter: _filter,\n\t// \t\tsearchLine: searchLine,\n\t// \t\treload: true,\n\t// \t};\n\t// \t_dataProcessing(loadParams);\n\t// \tcommandPanelProps.onSearch(searchLine);\n\t// };\n\n\t/** SELECTED PANEL */\n\n\tconst _onClickDropSelectHandler = (dropObject) => {\n\t\tconst newSelectedKeys = _selectedRowKeys.filter(\n\t\t\t(item) => item !== dropObject[rowKey]\n\t\t);\n\t\t// setSelectedRowKeys(newSelectedKeys);\n\t\t_setSelectedRowsHandler(newSelectedKeys, undefined, _rows);\n\t\tsetSelectAll((newSelectedKeys.length === 0 ? false : null));\n\t\tonSelectedRowsChange(newSelectedKeys);\n\t};\n\n\treturn (\n\t\t<div className={`${rtPrefix}-table`}>\n\t\t\t<div className={`${rtPrefix}-baseTable`}>\n\t\t\t\t<AutoResizer>\n\t\t\t\t\t{({width, height}) => (\n\t\t\t\t\t\t<BaseTable\n\t\t\t\t\t\t\tref={tableRef}\n\t\t\t\t\t\t\t/** Required */\n\t\t\t\t\t\t\tcolumns={_getColumns()}\n\t\t\t\t\t\t\tdata={_rows}\n\t\t\t\t\t\t\t/** Control Props */\n\t\t\t\t\t\t\tsortBy={_sortBy}\n\t\t\t\t\t\t\t/** Base Props */\n\t\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\t\theight={height}\n\t\t\t\t\t\t\trowKey={rowKey}\n\t\t\t\t\t\t\t// rowProps={rowProps}\n\n\t\t\t\t\t\t\t/** View Props */\n\t\t\t\t\t\t\trowClassName={_rowClassName}\n\t\t\t\t\t\t\temptyRenderer={empty}\n\t\t\t\t\t\t\tfixed={fixWidthColumn}\n\t\t\t\t\t\t\tfooterHeight={_footerShow ? footerProps.height : 0}\n\t\t\t\t\t\t\theaderHeight={headerHeight}\n\t\t\t\t\t\t\trowHeight={rowHeight}\n\t\t\t\t\t\t\toverlayRenderer={loading ? overlay : null}\n\t\t\t\t\t\t\tfooterRenderer={_footer}\n\t\t\t\t\t\t\trowRenderer={rowRenderer}\n\t\t\t\t\t\t\t// rowProps={_rowProps}\n\t\t\t\t\t\t\t// cellProps={_cellProps}\n\t\t\t\t\t\t\testimatedRowHeight={estimatedRowHeight}\n\t\t\t\t\t\t\t/** Load Data Props */\n\t\t\t\t\t\t\tonEndReachedThreshold={loadThreshold}\n\t\t\t\t\t\t\tonEndReached={infinityMode ? onEndReached : undefined}\n\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t/** Tree Props */\n\t\t\t\t\t\t\texpandColumnKey={expandColumnKey}\n\t\t\t\t\t\t\texpandedRowKeys={_expandedRowKeys}\n\t\t\t\t\t\t\t/** Events */\n\t\t\t\t\t\t\tonColumnSort={_onColumnSort}\n\t\t\t\t\t\t\trowEventHandlers={_rowEventHandlers}\n\t\t\t\t\t\t\tonExpandedRowsChange={_onExpandedRowsChange}\n\t\t\t\t\t\t\tonRowExpand={_onRowExpand}\n\t\t\t\t\t\t\teditMode={editMode}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</AutoResizer>\n\t\t\t</div>\n\t\t\t{showSelection && selectable && !expandColumnKey ? (\n\t\t\t\t<SelectionList\n\t\t\t\t\tonClickDropSelect={_onClickDropSelectHandler}\n\t\t\t\t\tselectedRowObjects={flatten(\n\t\t\t\t\t\tgetTableRowObjects(_rows, rowKey)\n\t\t\t\t\t).filter((item) => _selectedRowKeys.includes(item[rowKey]))}\n\t\t\t\t\trowRender={rowRenderShowSelection}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t</div>\n\t);\n});\n\nTable.propTypes = {\n\t/**\n\t * REQUIRED\n\t * */\n\n\t/** Столбцы таблицы */\n\tcolumns: PropTypes.arrayOf(PropTypes.object).isRequired,\n\n\t/** Режим загрузки данных по скроллу */\n\tinfinityMode: PropTypes.bool,\n\n\t/**\n\t * ПРОПСЫ ЗАДАНИЯ ЗНАЧЕНИЙ ПО УМОЛЧАНИЮ\n\t * */\n\n\t/** Строки по умолчанию */\n\tdefaultRows: PropTypes.arrayOf(PropTypes.object),\n\n\t/** Ключи выделенных по умолчанию строк */\n\tdefaultSelectedRowKeys: PropTypes.arrayOf(\n\t\tPropTypes.oneOfType([PropTypes.string, PropTypes.number])\n\t),\n\n\t/** Значение строки поиска по умолчанию строк */\n\tdefaultSearchValue: PropTypes.string,\n\n\t/** Объект фильтрации по умолчанию */\n\tdefaultFilter: PropTypes.object,\n\n\t/** Сортировка по умолчанию */\n\tdefaultSortBy: PropTypes.shape({\n\t\t/** Ключ поля для сортировки */\n\t\tkey: PropTypes.string,\n\t\t/** Направление сортировки */\n\t\torder: PropTypes.oneOf(['asc', 'desc']),\n\t}),\n\n\t/**\n\t * ПРОПРЫ ДЛЯ ВНЕШНЕГО КОНТРОЛЯ ТАБЛИЦЫ\n\t * */\n\n\t/** Строки таблицы. Используется для контроля таблицы из вне. */\n\trows: PropTypes.arrayOf(PropTypes.object),\n\n    /** Функция задания строк таблицы. */\n    setRows: PropTypes.func,\n\n\t/** Выделенные строки таблицы. */\n\tselectedRowKeys: PropTypes.arrayOf(\n\t\tPropTypes.oneOfType([PropTypes.string, PropTypes.number])\n\t),\n\n\t/** Значение строки поиска */\n\tsearchValue: PropTypes.string,\n\n\t/** Объект фильтрации */\n\tfilter: PropTypes.object,\n\n\t/** Объект сортировки */\n\tsortBy: PropTypes.shape({\n\t\t/** Ключ поля для сортировки */\n\t\tkey: PropTypes.string,\n\t\t/** Направление сортировки */\n\t\torder: PropTypes.oneOf(['asc', 'desc']),\n\t}),\n\n\t/**\n\t * BASE PROPS\n\t * */\n\n\t/** Поле для уникальной идентификации строки */\n\trowKey: PropTypes.string,\n\n\n\t/** Дополнительные поля и валидация в объекты таблицы\n\t * Данный параметр (props) осуществляет дополнительную обработку объекта таблицы после закрытия модалки, но перед добавлением в таблицу.\n\t * Можно как изменить существующие поля объекта, так и добавить новые поля объекта.\n\t * `customFields` - массив объектов для дополнения или изменения полей объектов таблицы\n\t * ```json\n\t * [\n\t * \t{\n\t * \t\tname: <String>,\n\t * \t\tvalue: <func>,\n\t * \t\tvalidate: <func>\n\t * \t}\n\t * ]\n\t * ```\n\t * `name` – Имя параметра в объекте\n\t * `value` – Функция формирования значения - `(row, rows) => { return {} }`\n\t * `validate` – Функция проверки значения - `(row, rows) => { return <Bool> }`\n\t * Параметра **validate** работает **только** для модельного окна тип `select`.\n\t * Validate можно наложить на любое кол-во полей объекта и если хотя бы один `validate` === `false`, то исключает строку из добавления.\n\t */\n\tcustomFields: PropTypes.arrayOf(PropTypes.object),\n\n\t/**\n\t * Данный параметр (props) позволяет добавить или переопределить пропсы для колонок, которые заданы конфигурацией на сервере\n\t * `customColumnProps` - массив объектов `props` к `columns`. Один объект описывает доп. параметры для одной колонки\n\t * ```json\n\t * [\n\t * \t{\n\t * \t\tname: <String>,\n\t * \t\tcellRenderer: <func>,\n\t * \t\t...advancedColProps\n\t * \t}\n\t * ]\n\t * ```\n\t * `name` – key колонки к которой надо применить дополнительные пропсы\n\t * `cellRenderer` – `({ cellData, columns, column, columnIndex, rowData, rowIndex, container, isScrolling }) => return <ReactNode>`\n\t * `advancedColProps` – подолнительные свойства колонок тут -> [Column](https://autodesk.github.io/react-base-table/api/column)\n\t */\n\tcustomColumnProps: PropTypes.arrayOf(PropTypes.object),\n\n\t/**\n\t * VIEW PROPS\n\t * */\n\n\t/** Вывод когда нет данных */\n\tempty: PropTypes.element,\n\n\t/** Отображение загрузки данных */\n\toverlay: PropTypes.element,\n\n\t/** Фиксированная ширина столбцов. Появится боковой скрол */\n\tfixWidthColumn: PropTypes.bool,\n\n\tfooterProps: PropTypes.shape({\n\n\t\t/** Высота подвала */\n\t\theight: PropTypes.number,\n\n\t\t/** Массив элементов футтера, которые надо отобразить\n\t\t * ['selected', 'loaded', 'total'] */\n\t\tshowElements: PropTypes.arrayOf(PropTypes.string),\n\n\t\t/** Заколовок для кол-ва выбранных объектов */\n\t\tselectedTitle: PropTypes.string,\n\n\t\t/** Заколовок для кол-ва загруженны объектов */\n\t\tloadedTitle: PropTypes.string,\n\n\t\t/** Заколовок для кол-ва всего объектов */\n\t\ttotalTitle: PropTypes.string,\n\n\t\t/** Левый кастомный элемент командной панели */\n\t\tleftCustomSideElement: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.object)]),\n\n\t\t/** Центральный кастомный элемент командной панели */\n\t\tcenterCustomSideElement: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.object)]),\n\n\t\t/** Правый кастомный элемент командной панели */\n\t\trightCustomSideElement: PropTypes.oneOfType([PropTypes.func, PropTypes.arrayOf(PropTypes.object)]),\n\t}),\n\n\t/** Высота заголовка таблицы */\n\theaderHeight: PropTypes.number,\n\n\t/** Высота строки таблицы */\n\trowHeight: PropTypes.number,\n\n\t/** Custom row renderer\n\t * Параметры - `({ isScrolling, cells, columns, rowData, rowIndex, depth })` */\n\trowRenderer: PropTypes.oneOfType([PropTypes.func, PropTypes.element]),\n\n\t/** Строки будут в зебро-стиле */\n\tzebraStyle: PropTypes.bool,\n\n\t/** Высота расширения */\n\testimatedRowHeight: PropTypes.number,\n\n\t/** Отображать ли разделители ячеек в строке */\n\tcellBordered: PropTypes.bool,\n\n\t/** Отобрадать ли разделители строк */\n\trowBordered: PropTypes.bool,\n\n\t/**\n\t * LOAD DATA PROPS\n\t * */\n\n\t/** Порог в пикселях для вызова _onLoad.\n\t * Кол-во пикселей от низа таблицы для срабатывания события загрузки (onEndReached) */\n\tloadThreshold: PropTypes.number,\n\n\t/** Размер страницы */\n\tpageSize: PropTypes.number,\n\n\t/** Функция запроса для конфигурации */\n\trequestLoadConfig: PropTypes.func,\n\n\t/** Функция запроса для загрузки строк (данных) */\n\trequestLoadRows: PropTypes.func,\n\n    /** Функция запроса для загрузки строк (данных) */\n    requestLoadCount: PropTypes.func,\n\n\t/** Имя параметра для поиска */\n\tsearchParamName: PropTypes.string,\n\n\t/**\n\t * SELECTABLE PROPS\n\t * */\n\n\t/** Таблица с возможностью выбора строки */\n\tselectable: PropTypes.bool,\n\n\t/**\n\t * TREE PROPS\n\t * */\n\n\t/** Родительский узел и дочерние узлы связаны (Работает только при `selectable`) */\n\tnodeAssociated: PropTypes.bool,\n\n\t/** Ключ колонки по которой строить иерархию */\n\texpandColumnKey: PropTypes.string,\n\n\t/** Открыть по умолчанию вложенность до уровня N или 'All' */\n\texpandDefaultAll: PropTypes.bool,\n\n\t/** Загружать ноды иерархии по одной */\n\texpandLazyLoad: PropTypes.bool,\n\n\t/** Поле в котором хранится ссылка на родителя */\n\texpandParentKey: PropTypes.string,\n\n\t/**\n\t * EVENTS\n\t * */\n\n\t/** Событие при клике на строку (только при `selectable` = `false`)\n\t * `({selected, rowData, rowIndex}) => {}` */\n\tonRowClick: PropTypes.func,\n\n\t/** Событие при двойном клике на строку.\n\t * `({rowData, rowIndex, rowKey}) => {}` */\n\tonRowDoubleClick: PropTypes.func,\n\n\t/** События при открытии / закрытии ноды\n\t * `({ expanded, rowData, rowIndex, rowKey }) => {}` */\n\tonRowExpand: PropTypes.func,\n\n\t/** Событие при выборе строки.\n\t * `([rowKeys], [rowDatas]) => {}` */\n\tonSelectedRowsChange: PropTypes.func,\n\n\t/** События при открытии / закрытии ноды\n\t * `(expandedRowKeys) => {}` - массив ключей открытых нод */\n\tonExpandedRowsChange: PropTypes.func,\n\n\t/** SELECTED PANEL */\n\n\t/** Отображать ли панель выбранных элементов */\n\tshowSelection: PropTypes.bool,\n\n\t/** Строка или функция для отображения элементов списка выбранных\n\t * Строка - имя поля\n\t * Функция - рендер строк.\n\t * `({ rowData, rowIndex }) => { return <Component> }` */\n\trowRenderShowSelection: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\n\t/** Путь в сторе куда класть выбранную строку таблицы */\n\tdispatchPath: PropTypes.string,\n\n\t/** Объект для подписки на изменения в STORE */\n\tsubscribe: PropTypes.arrayOf(PropTypes.object),\n};\n\nTable.defaultProps = {\n\tinfinityMode: false,\n\teditMode: false,\n\tdefaultRows: [],\n\tdefaultSelectedRowKeys: [],\n\tdefaultSearchValue: '',\n\tdefaultFilter: {},\n\tdefaultSortBy: {},\n\n\trows: [],\n\tsetRows: noop,\n\tselectedRowKeys: [],\n\tsearchValue: '',\n\tfilter: {},\n\tsortBy: {},\n\n\trowKey: 'id',\n\n\tempty: empty,\n\toverlay: overlay,\n\tfixWidthColumn: false,\n\tfooterProps: {\n\t\theight: 30,\n\t\tshowElements: [],\n\t\tselectedTitle: 'Выделено:',\n\t\tloadedTitle: 'Загружено записей:',\n\t\ttotalTitle: 'Всего записей:',\n\t\tleftCustomSideElement: null,\n\t\tcenterCustomSideElement: null,\n\t\trightCustomSideElement: null\n\t},\n\theaderHeight: 30,\n\trowHeight: 30,\n\tzebraStyle: false,\n\testimatedRowHeight: undefined,\n\tcellBordered: false,\n\trowBordered: true,\n\n\tloadThreshold: 300,\n\tpageSize: 50,\n\trequestLoadRows: undefined,\n    requestLoadCount: noop,\n\tsearchParamName: 'searchLine',\n\n\tselectable: false,\n\n\tnodeAssociated: true,\n\texpandColumnKey: undefined,\n\texpandDefaultAll: true,\n\texpandLazyLoad: false,\n\texpandParentKey: 'parentId',\n\n\tonRowClick: noop,\n\tonRowDoubleClick: noop,\n\tonRowExpand: noop,\n\tonSelectedRowsChange: noop,\n\tonExpandedRowsChange: noop,\n\n\tshowSelection: false,\n\n\tdispatchPath: undefined,\n\tsubscribe: [],\n};\n\nconst mapStateToProps = (store, ownProps) => {\n\tconst {subscribe} = ownProps;\n\tlet state = {};\n\tif(subscribe && subscribe.length > 0){\n\t\tsubscribe.forEach(item => {\n\t\t\tconst {name, path, extraData} = item;\n\t\t\tif(name && path)\n\t\t\t\tstate[name] = objectPath.get(store, path);\n\t\t\tif(name && extraData)\n\t\t\t\tstate[`${name}ExtraData`] = objectPath.get(store, extraData);\n\t\t})\n\t}\n\treturn state;\n};\nconst mapDispatchToProps = (dispatch) =>\n\tbindActionCreators({ setDateStore: setDateStore}, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })(Table);\n","import React, {useEffect, useState} from \"react\";\nimport { noop, notificationError } from \"../utils/baseUtils\";\nimport Table from \"./Table\";\nimport { Typography } from \"antd\";\n\nconst defaultProps = {\n    defaultFilter: {},\n    rowKey: 'id',\n    pageSize: 50,\n    requestLoadConfig: noop,\n    expandColumnKey: undefined,\n    expandLazyLoad: false,\n    expandParentKey: 'parentId',\n    customColumnProps: [],\n};\n\nconst ConfigLoader = props => {\n\n    /** Конфигурация таблицы */\n    const [tableConfig, setTableConfig] = useState(undefined);\n\n    const {\n        defaultFilter,\n        rowKey,\n        pageSize,\n        requestLoadConfig,\n        expandColumnKey,\n        expandLazyLoad,\n        expandParentKey,\n        customColumnProps,\n        cellBordered,\n    } = {...defaultProps, ...props};\n\n    useEffect(() => {\n        let cleanupFunction = false;\n        const loadData = async () => {\n            if (requestLoadConfig) {\n                // console.log('requestLoadConfig => ', typeof requestLoadConfig);\n                // console.log('requestLoadRows => ', typeof props.requestLoadRows);\n                requestLoadConfig()\n                    .then((response) => {\n                        // let result = response.data;\n                        // console.log('requestLoadConfig -> ', response.data);\n                        if(!cleanupFunction) {\n                            // setTableConfig(response.data);\n                            configParser(response.data);\n                        }\n                    })\n                    .catch(error => notificationError(error, 'Ошибка получения конфигурации') );\n            }\n        };\n        loadData().then(r => r);\n        return () => cleanupFunction = true;\n    }, []);\n\n    const configParser = (config) => {\n        let _columns = [];\n        if(config && config.fields) {\n            _columns = config.fields.map((item) => {\n                const colProps =\n                    customColumnProps &&\n                    customColumnProps.find(\n                        (render) =>\n                            render.name === item.name || render.name === item.alias\n                    );\n                return {\n                    key: item.name,\n                    title: item.header ? item.header : item.name,\n                    dataKey: item.alias ? item.alias : item.name,\n                    align: item.align,\n                    width: item.width,\n                    resizable: item.resizable,\n                    sortable: item.sortable,\n                    hidden: !item.visible,\n                    className: [cellBordered ? 'bordered' : ''].join(' '),\n                    headerClassName: [cellBordered ? 'bordered' : ''].join(' '),\n                    // cellRenderer: cellR && cellR.cellRender,\n                    ...colProps,\n                    cellRenderer: (object) => {\n                        if (colProps && colProps.cellRenderer)\n                            return <colProps.cellRenderer {...object}/>\n                            // return colProps.cellRenderer(object) ? colProps.cellRenderer(object) : '---';\n                        else\n                            return object.cellData\n                                ? <Typography.Text ellipsis={true} style={{width: '100%'}} className={'rt-table-cell'}>{object.cellData}</Typography.Text>\n                                : <Typography.Text ellipsis={true} style={{width: '100%'}} className={'rt-table-cell'}>---</Typography.Text> ;\n                            // return object.cellData ? object.cellData : '---';\n                    },\n                };\n            });\n        }\n\n        let _defaultFilter;\n        if (config && config.hierarchical && config.hierarchyLazyLoad) {\n            const parentKey = config.hierarchyField\n                ? config.hierarchyField.split('/')[1]\n                : expandParentKey;\n            _defaultFilter =  {...defaultFilter, [parentKey]: null};\n        } else _defaultFilter = defaultFilter;\n\n\n        setTableConfig({\n            columns: _columns,\n            defaultFilter: _defaultFilter,\n            rowKey:\n                config && config.hierarchical && config.hierarchyField\n                    ? config.hierarchyField.split('/')[0]\n                    : rowKey,\n            expandParentKey:\n                config && config.hierarchical && config.hierarchyField\n                    ? config.hierarchyField.split('/')[1]\n                    : expandParentKey,\n            expandColumnKey:\n                config && config.hierarchical && config.hierarchyView\n                    ? config.hierarchyView\n                    : expandColumnKey,\n            expandLazyLoad:\n                config && config.hierarchical && config.hierarchyLazyLoad\n                    ? config.hierarchyLazyLoad\n                    : expandLazyLoad,\n            pageSize: config && config.hierarchical ? 1 : pageSize,\n        });\n    }\n\n    if(tableConfig)\n        return ( <Table {...props} {...tableConfig} /> );\n    else\n        return null\n}\n\nexport default ConfigLoader;\n","import React, {useEffect, useState} from \"react\";\nimport PropTypes from \"prop-types\";\nimport {Select as AntSelect} from \"antd\";\nimport {\n\tgetObjectExcludedProps,\n\tnotificationError, useMounted\n} from \"../utils/baseUtils\";\n\nimport { CheckOutlined } from '@ant-design/icons';\n\nconst excludeProps = [\n\t'componentType',\n\t'defaultSortBy',\n\t'defaultFilter',\n\t'defaultSearchValue',\n\t'sortBy',\n\t'filter',\n\t'searchValue',\n\t'searchParamName',\n\t'infinityMode',\n\t'requestLoadRows',\n\t'optionConverter',\n\t'options',\n\t'widthControl',\n\t'pageSize'\n];\n\n/** Компонент выбора элемента(ов) из списка */\nconst Select = props => {\n\n\tconst {\n\t\t// Rt Props\n\t\tdefaultSortBy,\n\t\tdefaultFilter,\n\t\tdefaultSearchValue,\n\t\tsortBy,\n\t\tfilter,\n\t\tsearchValue,\n\t\tsearchParamName,\n\t\tinfinityMode,\n\t\trequestLoadRows,\n\t\toptionConverter,\n\t\toptions,\n\t\twidthControl,\n\t\tpageSize,\n\n\t\t// Ant Props\n\t\tmode,\n\t\tonChange,\n\t\tvalue,\n\t} = props;\n\n\t/** Наличие на сервере еще данных */\n\tconst [_hasMore, _setHasMore] = useState(true);\n\t/** Индикатор загрузки данных */\n\tconst [_loading, _setLoading] = useState(false);\n\t/** Опции селекта */\n\tconst [_options, _setOptions] = useState(options);\n\t/** Индикатор достижения низа окна */\n\tconst [isEndReached, setIsEndReached] = useState(false);\n\n\t/** Объект сортировки */\n\tconst [_sortBy, _setSortBy] = useState(undefined);\n\t/** Объект фильтрации */\n\tconst [_filter, _setFilter] = useState({});\n\t/** Строка поиска */\n\tconst [_searchValue, _setSearchValue] = useState(undefined);\n\n\t/** Состояние параметра выбрать все */\n\tconst [_isSelectAll, _setIsSelectAll] = useState(false);\n\n\tconst isMounted = useMounted()\n\n\tuseEffect(() => {\n\t\t_setSearchValue(defaultSearchValue);\n\t\t_loadOptions({\n\t\t\tsortBy: defaultSortBy,\n\t\t\tfilter: defaultFilter,\n\t\t\tsearchValue: defaultSearchValue,\n\t\t\treload: true,\n\t\t});\n\t}, []);\n\n\tuseEffect(() => {\n\t\t_setRowsHandler(options);\n\t}, [options]);\n\n\tuseEffect(() => {\n\t\t// console.log(\"Change sortBy, filter, searchValue\", sortBy, filter, searchValue);\n\t\tif(isMounted) {\n\t\t\tconst __sortBy = sortBy ? sortBy : _sortBy;\n\t\t\tconst __filter = filter ? filter : _filter;\n\t\t\tconst __searchValue = searchValue ? searchValue : _searchValue;\n\t\t\t_setSortBy(__sortBy);\n\t\t\t_setFilter(__filter);\n\t\t\t_setSearchValue(__searchValue);\n\t\t\t_loadOptions({\n\t\t\t\tsortBy: __sortBy,\n\t\t\t\tfilter: __filter,\n\t\t\t\tsearchLine: __searchValue,\n\t\t\t\treload: true,\n\t\t\t});\n\t\t}\n\t}, [sortBy, filter, searchValue]);\n\n\tconst _setRowsHandler = (options) => {\n\t\t\t_setOptions(options);\n\t\t\t// console.log('Select _setRowsHandler value => ', options)\n\t\t\tif(mode === 'multiple') {\n\t\t\t\tif(Array.isArray(value))\n\t\t\t\t\tif(options.reduce((preValue, item) => value.includes(item.value) ? preValue + 1 : preValue, 0) === options.length)\n\t\t\t\t\t\t_setIsSelectAll(true);\n\t\t\t\t\telse\n\t\t\t\t\t\t_setIsSelectAll(false);\n\t\t\t\tonChange(value);\n\t\t\t}\n\t\t// setRows(rows);\n\t\t// rowsDispatch(rows);\n\t};\n\n\tconst getPageNum = (reload) =>\n\t\treload ? 0 : Math.floor(_options.length / pageSize);\n\n\tconst getSort = (sortBy) =>\n\t\tsortBy && sortBy.key ? sortBy.key + ',' + sortBy.order : null;\n\n\tconst getSearchValue = (searchValue) =>\n\t\tsearchValue ? {[searchParamName]: searchValue} : null\n\n\tconst _loadOptions = (params) => {\n\t\t// console.log('_dataProcessing', params);\n\t\tconst {sortBy, filter, searchValue, reload} = params;\n\t\tif ((_hasMore || reload) && !_loading && requestLoadRows) {\n\t\t\t_setLoading(true);\n\n\t\t\tconst requestOptions = {\n\t\t\t\tparams: {\n\t\t\t\t\tpage: getPageNum(reload),\n\t\t\t\t\tsize: pageSize,\n\t\t\t\t\tsort: getSort(sortBy)\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\t...filter,\n\t\t\t\t\t...getSearchValue(searchValue)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// console.log('dataQuery', dataQuery);\n\n\t\t\trequestLoadRows(requestOptions)\n\t\t\t\t.then((response) => {\n\t\t\t\t\t// console.log(\"infinity then response\", response);\n\t\t\t\t\tconst result = response.data;\n\n\t\t\t\t\tif (result && result.length < pageSize) {\n\t\t\t\t\t\t_setHasMore(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_setHasMore(true);\n\t\t\t\t\t\tsetIsEndReached(false);\n\t\t\t\t\t}\n\t\t\t\t\treload\n\t\t\t\t\t\t? _setRowsHandler(result.map(option => optionConverter(option))) // _setRows\n\t\t\t\t\t\t: _setRowsHandler(_options.concat(result.map(option => optionConverter(option)))); // _setRows\n\n\t\t\t\t\t// console.log('expandDefaultAll ', expandDefaultAll, _expandedRowKeys);\n\n\t\t\t\t\t_setLoading(false);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tnotificationError(error, 'Ошибка загрузки данных')\n\t\t\t\t\t_setRowsHandler(_options); // _setRows\n\t\t\t\t\t// setHasMore(false);\n\t\t\t\t\t_setLoading(false);\n\t\t\t\t});\n\t\t}\n\t};\n\n\tconst onScroll = (event) => {\n\t\tlet scrollTopMax = event.nativeEvent.target.scrollTopMax\n\t\tlet scrollTop = event.nativeEvent.target.scrollTop//.body.scrollTop\n\n\t\tconst onEndReached = scrollTopMax - scrollTop;\n\n\t\tif(onEndReached < 300 && !isEndReached) {\n\t\t\t// console.log('Load Data');\n\t\t\tsetIsEndReached(true);\n\t\t\t_setSearchValue(defaultSearchValue);\n\t\t\tif(infinityMode){\n\t\t\t\t_loadOptions({\n\t\t\t\t\tsortBy: defaultSortBy,\n\t\t\t\t\tfilter: defaultFilter,\n\t\t\t\t\tsearchValue: defaultSearchValue,\n\t\t\t\t\treload: false,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// console.log(\"scrollTopMax / scrollTop\", scrollTopMax, scrollTop, onEndReached);\n\t\t// const lastScrollTop = this._scroll.scrxollTop;\n\t\t// if (args.scrollTop > lastScrollTop) this._maybeCallOnEndReached();\n\t}\n\n\tconst onSearch = (value) => {\n\t\t_setSearchValue(value);\n\t\t_loadOptions({\n\t\t\tsortBy: defaultSortBy,\n\t\t\tfilter: defaultFilter,\n\t\t\tsearchValue: value,\n\t\t\treload: true,\n\t\t});\n\t}\n\n\tconst _onChangeSelectAll = () => {\n\t\t// console.log(`_onChangeSelectAll`, _isSelectAll);\n\t\tif(mode === 'multiple') {\n\t\t\tif (_isSelectAll) {\n\t\t\t\tconst optionsValues = _options.map(item => item.value);\n\t\t\t\tonChange(value.filter(item => !optionsValues.includes(item)));\n\t\t\t\t_setIsSelectAll(false);\n\t\t\t} else {\n\t\t\t\tif (Array.isArray(value) && value.length > 0)\n\t\t\t\t\tonChange([...new Set([...value, ..._options.map(item => item.value)])]);\n\t\t\t\telse\n\t\t\t\t\tonChange([...new Set([..._options.map(item => item.value)])]);\n\t\t\t\t_setIsSelectAll(true);\n\t\t\t}\n\t\t} else\n\t\t\tonChange(undefined);\n\t}\n    const _onChange = (value) => {\n        // console.log(`_onChange selected`, value);\n        if(Array.isArray(value))\n        \tif(_options.reduce((preValue, item) => value.includes(item.value) ? preValue + 1 : preValue, 0) === _options.length)\n        \t\t_setIsSelectAll(true);\n        \telse\n\t\t\t\t_setIsSelectAll(false);\n\n\t\tonChange(value);\n    }\n\n    const getSelectAllCls = () => {\n\t\tlet cls = ['ant-select-item', 'ant-select-item-option', 'ant-select-item-option-select-all'];\n\t\tif(_isSelectAll)\n\t\t\tcls.push('ant-select-item-option-selected');\n\t\treturn cls.join(' ');\n\t}\n\n\tconst childProps = getObjectExcludedProps(props, excludeProps);\n    return (\n\t\t<AntSelect\n\t\t\t{...childProps}\n\t\t\tsearchValue={_searchValue}\n\t\t\tstyle={{ width: widthControl }}\n\t\t\t// listHeight={heightPopup}\n\t\t\t// defaultValue={['a10', 'c12']}\n\t\t\tonChange={_onChange}\n\t\t\tmaxTagCount={0}\n\t\t\tmaxTagPlaceholder={(omittedValues) => `Выбрано: ${omittedValues.length}`}\n\t\t\t// dropdownMatchSelectWidth={200}\n\t\t\t// listItemHeight={10} listHeight={250}\n\t\t\tonPopupScroll={onScroll}\n\t\t\tonSearch={onSearch}\n\t\t\tdropdownRender={menu => (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t{mode === 'multiple' ?\n\t\t\t\t\t\t<div className={getSelectAllCls()} onClick={_onChangeSelectAll}>\n\t\t\t\t\t\t\t<div className=\"ant-select-item-option-content\">\n\t\t\t\t\t\t\t\t<span>Выбрать все</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{_isSelectAll ?\n\t\t\t\t\t\t\t\t<span className=\"ant-select-item-option-state\"><CheckOutlined/></span> : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t: null\n\t\t\t\t\t}\n\t\t\t\t\t{menu}\n\t\t\t\t</React.Fragment>\n\t\t\t)}\n\t\t>\n    \t\t{_options && _options.map(({ label, value, className, disabled }, i) =>\n\t\t\t\t<AntSelect.Option key={i.toString(36) + i} value={value} className={className} disabled={disabled}>{label}</AntSelect.Option>)}\n    \t</AntSelect>\n    );\n};\n\nSelect.propTypes = {\n\t/** Сортировка по умолчанию */\n\tdefaultSortBy: PropTypes.shape({\n\t\t/** Ключ поля для сортировки */\n\t\tkey: PropTypes.string,\n\t\t/** Направление сортировки */\n\t\torder: PropTypes.oneOf(['asc', 'desc']),\n\t}),\n\n\t/** Объект фильтрации по умолчанию */\n\tdefaultFilter: PropTypes.object,\n\n\t/** Значение строки поиска по умолчанию строк */\n\tdefaultSearchValue: PropTypes.string,\n\n\t/** Сортировка */\n\tsortBy: PropTypes.object,\n\n\t/** Фильтр */\n\tfilter: PropTypes.object,\n\n\t/** Значение строки поиска */\n\tsearchValue: PropTypes.string,\n\n\t/** Имя параметра для поиска */\n\tsearchParamName: PropTypes.string,\n\n\t/** Режим загружки по скроллу */\n\tinfinityMode: PropTypes.bool,\n\n\t/** Функция запроса для загрузки строк (данных) */\n\trequestLoadRows: PropTypes.func,\n\n\t/** Функция преобразования загруженных объектов в объекты для селекта.\n\t * Сигнатура `(option) => ({})`\n\t * Требоваеть вернуть объект с параметрам\n\t * `{ label: ReactNode, value: any, className: string, disabled: bool }`\n\t * ##### Example:\n\t * ``` JS\n\t * (option) => ({\n\t * \tlabel: (<span><MehOutlined />{option.name}</span>),\n\t * \tvalue: option.id,\n\t * \tclassName: 'some-class',\n\t * \tdisabled: false,\n\t * })\n\t * ```\n\t */\n\toptionConverter: PropTypes.func.isRequired,\n\n\t/** Select options `[{ label, value, className, disabled }]` */\n\toptions: PropTypes.arrayOf(PropTypes.object),\n\n\t/** Ширина поля выбора в пикселях */\n\twidthControl: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n\n\t/** Размер страницы */\n\tpageSize: PropTypes.number,\n};\n\nSelect.defaultProps = {\n\t// Rt Props\n\tdefaultSortBy: undefined,\n\tdefaultFilter: {},\n\tdefaultSearchValue: undefined,\n\tinfinityMode: false,\n\trequestLoadRows: undefined,\n\toptions: [],\n\twidthControl: '100%',\n\tpageSize: 50,\n\tsearchParamName: 'searchValue',\n}\n\nexport default Select;\n","import React, {useEffect, useState} from \"react\";\nimport PropTypes from \"prop-types\";\nimport { TreeSelect as AntTreeSelect } from \"antd\";\nimport { getObjectExcludedProps, notificationError, useMounted } from \"../utils/baseUtils\";\n\nconst excludeProps = [\n    'componentType',\n    'defaultSortBy',\n    'defaultFilter',\n    'defaultSearchValue',\n    'sortBy',\n    'filter',\n    'searchValue',\n    'searchParamName',\n    'requestLoadRows',\n    'optionConverter',\n    'treeData'\n];\n\n/** Компонент выбора элемента(ов) из древовидного списка */\nconst TreeSelect = props => {\n\n    const {\n        // Rt Props\n        defaultSortBy,\n        defaultFilter,\n        defaultSearchValue,\n        sortBy,\n        filter,\n        searchValue,\n        searchParamName,\n        requestLoadRows,\n        optionConverter,\n        treeData,\n    } = props;\n    /** Индикатор загрузки данных */\n    const [_loading, _setLoading] = useState(false);\n    /** Опции селекта */\n    const [_treeData, _setTreeData] = useState(treeData);\n\n    const isMounted = useMounted()\n\n    useEffect(() => {\n        _loadOptions({\n            sortBy: defaultSortBy,\n            filter: defaultFilter,\n            searchValue: defaultSearchValue,\n            reload: true,\n        });\n    }, []);\n\n    useEffect(() => {\n        // console.log(\"Change sortBy, filter, searchValue\", sortBy, filter, searchValue);\n        if(isMounted) {\n            _loadOptions({\n                sortBy: sortBy,\n                filter: filter,\n                searchLine: searchValue,\n                reload: true,\n            });\n        }\n    }, [sortBy, filter, searchValue]);\n\n    const getSort = (sortBy) =>\n        sortBy && sortBy.key ? sortBy.key + ',' + sortBy.order : null;\n\n    const getSearchValue = (searchValue) =>\n        searchValue ? {[searchParamName]: searchValue} : null\n\n    const _optionConverter = (options) => {\n        if(Array.isArray(options))\n            return options.map(option => {\n                if(option.children && Array.isArray(option.children))\n                    option.children = _optionConverter(option.children)\n                return optionConverter(option)\n            })\n    }\n\n    const _loadOptions = (params) => {\n        const {sortBy, filter, searchValue} = params;\n        if (!_loading && requestLoadRows) {\n            _setLoading(true);\n            const requestOptions = {\n                params: {\n                    page: 0,\n                    size: 1,\n                    sort: getSort(sortBy)\n                },\n                data: {\n                    ...filter,\n                    ...getSearchValue(searchValue)\n                }\n            }\n            requestLoadRows(requestOptions)\n                .then((response) => {\n                    // console.log(\"infinity then response\", response);\n                    const result = response.data;\n                    _setTreeData(_optionConverter(result))\n                })\n                .catch((error) => {\n                    notificationError(error, 'Ошибка загрузки данных')\n                    // _setRowsHandler(_options); // _setRows\n                    // setHasMore(false);\n                    _setLoading(false);\n                });\n        }\n    }\n\n    const childProps = getObjectExcludedProps(props, excludeProps);\n    return (\n        <AntTreeSelect\n            {...childProps}\n            maxTagCount={0}\n            maxTagPlaceholder={(omittedValues) => `Выбрано: ${omittedValues.length}`}\n            treeData={_treeData}\n            showArrow={true}\n            // loadData={onLoadData}\n        />\n    );\n};\n\nTreeSelect.propTypes = {\n    /** Сортировка по умолчанию */\n    defaultSortBy: PropTypes.shape({\n        /** Ключ поля для сортировки */\n        key: PropTypes.string,\n        /** Направление сортировки */\n        order: PropTypes.oneOf(['asc', 'desc']),\n    }),\n\n    /** Объект фильтрации по умолчанию */\n    defaultFilter: PropTypes.object,\n\n    /** Значение строки поиска по умолчанию строк */\n    defaultSearchValue: PropTypes.string,\n\n    /** Сортировка */\n    sortBy: PropTypes.object,\n\n    /** Фильтр */\n    filter: PropTypes.object,\n\n    /** Значение строки поиска */\n    searchValue: PropTypes.string,\n\n    /** Имя параметра для поиска */\n    searchParamName: PropTypes.string,\n\n    /** Функция запроса для загрузки строк (данных) */\n    requestLoadRows: PropTypes.func,\n\n    /** Функция преобразования загруженных объектов в объекты для селекта.\n     * Сигнатура `(option) => ({})`\n     * Требоваеть вернуть объект с параметрам\n     * `{ label: ReactNode, value: any, children: any, checkable: bool, selectable: bool }`\n     * ##### Example:\n     * ``` JS\n     * (option) => ({\n     * \tlabel: (<span><MehOutlined />{option.name}</span>),\n     * \tvalue: option.id,\n     * \tchildren: option.children,\n     * \tcheckable: !option.isGroup,\n     * \tselectable: !option.isGroup,\n     * })\n     * ```*/\n    optionConverter: PropTypes.func.isRequired,\n\n    /** Select options `[{ label, value, children, checkable, selectable }]` */\n    options: PropTypes.arrayOf(PropTypes.object),\n};\n\nTreeSelect.defaultProps = {\n    // Rt Props\n    defaultSortBy: undefined,\n    defaultFilter: {},\n    defaultSearchValue: undefined,\n    requestLoadRows: undefined,\n};\n\nexport default TreeSelect;\n","import React, {useState, useEffect} from \"react\";\nimport PropTypes from \"prop-types\";\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { notification, Button, Tooltip, Modal as AntModal} from \"antd\";\nimport { notificationError, dispatchToStore, useMounted, getObjectExcludedProps } from \"../utils/baseUtils\";\nimport objectPath from \"object-path\";\nimport { setDateStore } from \"../../redux/rtd.actions\";\nimport Form from \"../Form/Form\";\n\nconst excludeProps = [\"buttonProps\", \"toolTipProps\", \"modalConfig\", \"modalData\", \"subscribe\", \"dispatch\"];\nconst serverModalTypes = ['addOnServer', 'editOnServer', 'addGroupOnServer', 'editGroupOnServer']\nconst localModalTypes = ['addOnLocal', 'addGroupOnLocal', 'editOnLocal', 'editGroupOnLocal']\nconst allModalTypes = [...serverModalTypes, ...localModalTypes, 'select', 'viewGroup', 'viewObject']\n\nconst defaultProps = {\n    subscribe: [],\n    dispatch: {}\n}\n\nconst getDefaultFooterProps = (modal) => {\n\n    let okText = '';\n    let cancelText = '';\n    let modalTitle = '';\n\n    switch (modal.type) {\n        case 'addOnServer':\n        case 'addGroupOnServer':\n            okText = 'Сохранить';\n            cancelText = 'Отмена';\n            modalTitle = 'Сохранить на сервере';\n            break;\n        case 'addOnLocal':\n        case 'addGroupOnLocal':\n            okText = 'Сохранить';\n            cancelText = 'Отмена';\n            modalTitle = 'Сохранить локально';\n            break;\n        case 'editOnServer':\n        case 'editGroupOnServer':\n            okText = 'Сохранить';\n            cancelText = 'Отмена';\n            modalTitle = 'Измененить на сервере';\n            break;\n        case 'editOnLocal':\n        case 'editGroupOnLocal':\n            okText = 'Сохранить';\n            cancelText = 'Отмена';\n            modalTitle = 'Изменение локально';\n            break;\n        case 'select':\n            okText = 'Добавить';\n            cancelText = 'Отмена';\n            modalTitle = 'Выбор';\n            break;\n        case 'viewGroup':\n        case 'viewObject':\n            okText = 'Закрыть';\n            modalTitle = 'Просмотр';\n            break;\n        default: break;\n    }\n\n    if(modal.okText)\n        okText = modal.okText;\n\n    if(modal.cancelText)\n        cancelText = modal.cancelText;\n\n    if(modal.title)\n        modalTitle = modal.title;\n\n    return {okText, cancelText, title: modalTitle, okType: 'primary'}\n};\n\n/**\n * Компонент модального окна\n */\nconst Modal = props => {\n\n    const {buttonProps, toolTipProps, modalConfig, modalData, subscribe, dispatch} = props;\n    const modalProps = { ...getDefaultFooterProps(modalConfig), ...getObjectExcludedProps(modalConfig, excludeProps) };\n\n    const [visible, setVisible] = useState(false);\n    const [_modalData, _setModalData] = useState({});\n    const [_buttonProps, setButtonProps] = useState({});\n\n    const isMounted = useMounted()\n\n    useEffect(() => {\n        _setModalData(modalData);\n    }, []);\n\n    /** Подписка на изменение props[subscribe.name] в сторе */\n    subscribe.map(item => {\n        return useEffect( () => {\n            if(isMounted && item.name) {\n                // console.log(\"storeHOC => subscribe: \", props[subscribe.name]);\n                item.onChange && item.onChange({\n                    value: props[item.name],\n                    extraData: props[`${item.name}ExtraData`],\n                    setModalData,\n                    setButtonProps,\n                    openModal: _onOpenModal,\n                    closeModal: _onCloseModal\n                });\n            }\n            // console.log(\"Change Props[2]: \", props.subscribeЗф);\n        }, [props[item.name]]);\n    })\n\n    const setModalData = (value) => _setModalData && _setModalData(value);\n    const _onOpenModal = () => setVisible(true)\n    const _onCloseModal = () => setVisible(false)\n\n    const onFinishHandler = (values) => { //} {type, row, requestSaveRow}) => {\n        // console.log(\"Modal Events => before dispatchToStore: \", dispatch);\n\n        let saveObj;\n        if(modalProps.type.startsWith('add'))\n            saveObj = {...values};\n        else\n            saveObj = {..._modalData, ...values};\n\n        dispatchToStore({dispatch, setDateStore: props.setDateStore, value: saveObj});\n\n        if (modalProps.requestSaveRow && serverModalTypes.includes(modalProps.type)) {\n            const method = (modalProps.type === 'addOnServer' || modalProps.type === 'addGroupOnServer') ? 'POST' : 'PUT';\n            // console.log(\"Modal Events => type: \", type, method, row, _modalData);\n            modalProps.requestSaveRow({\n                method,\n                data: saveObj,\n            })\n                .then(response => {\n                    notification.success({\n                        message: 'Сохранение прошло успешно'\n                    });\n                    _onCloseModal();\n                })\n                .catch(error => notificationError(error, 'Ошибка при сохранении'));\n        } else _onCloseModal();\n\n        if (modalProps.onOk) modalProps.onOk(values);\n        if (modalProps.onFinish) modalProps.onFinish(values);\n    };\n\n    const onFinishFailedHandler = (errorInfo) => {\n        // console.log('FormModal Failed:', errorInfo);\n        console.error(\"FormModal fields failed: \", errorInfo);\n        props.onFinishFailed && props.onFinishFailed(errorInfo);\n    };\n\n    const loadInitDataHandler = (callBack) =>\n        formConfig.loadInitData(callBack, _modalData)\n\n\n    const _onCancelHandler = (e) => {\n        // setVisibleModals({ ...visibleModals, [modal.type]: false });\n        // form.resetFields();\n        _onCloseModal()\n        if (modalProps.onCancel) modalProps.onCancel(e)\n    };\n\n    const defaultFooter = [\n        {\n            componentType: 'Item',\n            child: {\n                componentType: 'Button',\n                label: modalProps.cancelText,\n                className: 'mr-8',\n                onClick: _onCancelHandler,\n                ...modalProps.cancelButtonProps\n            }\n        },\n        {\n            componentType: 'Item',\n            child: {\n                componentType: 'Button',\n                label: modalProps.okText,\n                type: modalProps.okType,\n                htmlType: 'submit',\n                ...modalProps.okButtonProps\n            }\n        }\n    ];\n\n    const formConfig =  {\n        footer: defaultFooter,\n        loadInitData: (callBack, row) => callBack(row),\n        ...modalProps.form\n    };\n\n    return (\n        <React.Fragment>\n            <Tooltip {...toolTipProps}>\n                <Button\n                    type=\"primary\"\n                    {...buttonProps}\n                    {..._buttonProps}\n                    onClick={_onOpenModal}\n                >{buttonProps && buttonProps.label}</Button>\n            </Tooltip>\n            {/*<FormModal*/}\n            {/*    modal={ modalConfig }*/}\n            {/*    selectedRow={_modalData}*/}\n            {/*    visible={visible}*/}\n            {/*    setVisible={_onCloseModal}*/}\n            {/*    saveRow={_onSaveRow}*/}\n            {/*>{props.children}</FormModal>*/}\n            <AntModal\n                {...modalProps}\n                centered\n                destroyOnClose\n                visible={visible}\n                onCancel={_onCancelHandler}\n                bodyStyle={{padding: 0, ...modalProps.bodyStyle}}\n                footer={null}\n            >\n                <Form\n                    {...formConfig}\n                    onFinish={onFinishHandler}\n                    onFinishFailed={onFinishFailedHandler}\n                    loadInitData={loadInitDataHandler}\n                >{props.children}</Form>\n            </AntModal>\n        </React.Fragment>\n    )\n};\n\nModal.propTypes = {\n\n    /** Свойства [Button](https://ant.design/components/button/) из Ant Design\n     * Добавлено свойство `label` с типом `ReactNode` или `string` для формирования контента кнопки*/\n    buttonProps: PropTypes.object,\n\n    /** Объект модального окна. Стандартная конфигурация. */\n    modalConfig: PropTypes.shape({\n        /** Тип модального окна */\n        type: PropTypes.oneOf(allModalTypes),\n\n        /** Ссылка на функцию сохранения данных */\n        requestSaveRow: PropTypes.func,\n\n        /** Пропсы формы.\n         * Если верстка через конфиги, то пропс body обязателен */\n        form: PropTypes.object\n    }),\n\n    /** Данные для модального окна */\n    modalData: PropTypes.object,\n\n    /** Путь в сторе куда класть данных окна после закрытия */\n    dispatch: PropTypes.object,\n\n    /** Объект для подписки на изменения в STORE.\n     * Параметры в `onChange`:\n     * * `value`: значение за которым ведется наблюдение,\n     * * `extraData`: дополнительные данные, передаваемые при срабатывании события\n     * * `setModalData`: функция задания объекта формы\n     * * `setButtonProps`: функция задания пропсов кнопке\n     * * `openModal`: функция открытия модального окна\n     * * `closeModal`: функция закрытия модального окна */\n    subscribe: PropTypes.arrayOf(PropTypes.object),\n};\n\nModal.defaultProps = defaultProps;\n\nconst mapStateToProps = (store, ownProps) => {\n    const {subscribe} = ownProps;\n    let state = {};\n    if(subscribe && subscribe.length > 0){\n        subscribe.forEach(item => {\n            const {name, path, extraData} = item;\n            if(name && path)\n                state[name] = objectPath.get(store, path);\n            if(name && extraData)\n                state[`${name}ExtraData`] = objectPath.get(store, extraData);\n        })\n    }\n    return state;\n};\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators( { setDateStore: setDateStore, }, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Modal);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, notification as antNotification, Spin, Tooltip, Typography, Upload } from \"antd\";\nimport { LoadingOutlined, CloudUploadOutlined } from \"@ant-design/icons\";\nimport { noop } from \"../utils/baseUtils\";\n\n\nconst defaultProps = {\n    requestUploadFile: noop,\n    dataObject: {},\n    onCompletedUpload: noop,\n    onFailedUpload: noop,\n    uploadProps: {},\n    toolTipProps: {},\n    buttonProps: {}\n}\n\n/** Компонент загрузки файлов */\nconst UploadFile = props => {\n\n    const {\n        requestUploadFile,\n        dataObject,\n        onCompletedUpload,\n        onFailedUpload,\n        uploadProps,\n        toolTipProps,\n        buttonProps,\n    } = props\n\n    const _uploadFile = (file) => {\n        // console.log('beforeUpload dataObject => ', dataObject);\n        notification(file, 'loading');\n        if (requestUploadFile) {\n            requestUploadFile({ file: file, dataObject })\n                .then((response) => {\n                    notification(file, 'success');\n                })\n                .catch(() => {\n                    notification(file, 'error');\n                });\n        }\n        return false;\n    };\n    const notification = (file, type) => {\n        const notifProps = {\n            key: file.uid,\n            duration: type === 'loading' ? 0 : 5,\n            icon: type === 'loading'\n                ? <Spin indicator={<LoadingOutlined style={{ fontSize: 24 }} spin />} />\n                : null,\n            message: <span>Загрузка файла: <Typography.Text code>{file.name}</Typography.Text></span>\n        };\n        switch (type) {\n            case 'loading':\n                antNotification.info(notifProps);\n                break;\n            case 'success':\n                antNotification.success(notifProps);\n                onCompletedUpload(file);\n                props.onChange(file);\n                break;\n            case 'error':\n                antNotification.error(notifProps);\n                onFailedUpload(file);\n                break;\n            case 'close':\n                antNotification.close(file.uid);\n                break;\n            default:\n                break;\n        }\n    };\n    const defaultUploadProps = {\n        multiple: true,\n        showUploadList: false,\n        beforeUpload: _uploadFile\n    };\n\n    return (\n        <Upload {...defaultUploadProps} {...uploadProps}>\n            <Tooltip {...toolTipProps}>\n                <Button\n                    icon={<CloudUploadOutlined />}\n                    {...buttonProps}\n                >{buttonProps && buttonProps.label}</Button>\n            </Tooltip>\n        </Upload>\n    );\n};\n\nUploadFile.propTypes = {\n    /** Функция запроса для отправки файла с данным на сервер */\n    requestUploadFile: PropTypes.func.isRequired,\n\n    /** Данные, прикрепляемые к файлу */\n    dataObject: PropTypes.object,\n\n    /** Функция, вызываемая при удачной загрузке файла */\n    onCompletedUpload: PropTypes.func,\n\n    /** Функция, вызываемая при НЕ удачной загрузке файла */\n    onFailedUpload: PropTypes.func,\n\n    /** Ant Props для [Upload](https://ant.design/components/upload/) компонента */\n    uploadProps: PropTypes.object,\n\n    /** Ant Props для [Tooltip](https://ant.design/components/tooltip/) компонента */\n    toolTipProps: PropTypes.object,\n\n    /** Ant Props для [Button](https://ant.design/components/button/) компонента */\n    buttonProps: PropTypes.object,\n};\n\nUploadFile.defaultProps = defaultProps\n\nexport default UploadFile;\n","import React from \"react\";\nimport {\n    DatePicker as RtDatePicker,\n    TypographyDate,\n    Button as RtButton,\n    Custom,\n    FormHeader,\n    FormBody,\n    FormFooter,\n    TabPane as RtTabPane,\n    withStore\n} from \"./Base\";\nimport {\n    Form as AntForm,\n    Typography as AntTypography,\n    Radio as AntRadio,\n    Divider as AntDivider,\n    Checkbox as AntCheckbox,\n    Input as AntInput,\n    InputNumber as AntInputNumber,\n    Switch as AntSwitch,\n    Space as AntSpace,\n    Row as AntRow,\n    Col as AntCol,\n    Tabs as AntTabs,\n    List as AntList\n} from \"antd\";\nimport RtForm from \"./Form/Form\";\nimport RtLayout from \"./Layout/Layout\";\nimport RtSwitcher from './Switcher/Switcher';\nimport RtTable from \"./Table/ConfigLoader\";\nimport RtSelect from \"./Select/Select\";\nimport RtTreeSelect from './TreeSelect/TreeSelect'\nimport RtModal from \"./Modal/Modal\";\nimport RtUploadFile from \"./UploadFile/UploadFile\";\nimport { getObjectExcludedProps } from \"./utils/baseUtils\";\n\n/**\n * Renders\n */\nexport const renderClassic = (Component) => (props) => {\n    return (<Component {...props}>{props.children}</Component>)\n}\n\nexport const renderClassicWithLabel = (Component) => (props) => {\n    return (<Component {...props}>{props.label || props.value || props.children}</Component>)\n}\n\nconst renderClassicWithComponentType = (Component, componentType) => (props) => {\n    return renderClassic(Component)({...props, componentType});\n}\n\nexport const renderClassicByName = (componentName) => (props) => {\n    if(classic[componentName]) {\n        // console.log(\"renderClassicByName => \", props);\n        return renderClassic(classic[componentName])(props)\n    } else {\n        console.log(\"NO renderClassicByName => \", componentName);\n        return null;\n    }\n}\nexport const renderDeclarativeByName = (componentName) => (props) => (children) => {\n    if(classic[componentName]) {\n        // console.log(\"renderDeclarativeByName => \", props);\n        return renderDeclarative(classic[componentName])(props)(children)\n    } else {\n        console.log(\"NO renderDeclarativeByName => \", componentName);\n        return null;\n    }\n}\n\nexport const renderDeclarative = (Component) => (props) => (children) => {\n    // console.log(\"renderDeclarative => \", props);\n    return (<Component {...props}>{children}</Component>)\n}\n\nconst renderFormItemComponent = (Component) => (props) => {\n    const componentProps = getObjectExcludedProps(props, ['itemProps']);\n    return renderDeclarative(AntForm.Item)\n        ({...props.itemProps, noStyle: !(props.itemProps && props.itemProps.label)})\n        (renderClassic(Component)(componentProps))\n}\n\n\n/** */\nconst ComponentClassic = (Component) => (props) => {\n    // console.log(\"ComponentClassic => \", Component)\n    const StoreComponent = withStore(Component, {});\n    return renderFormItemComponent(StoreComponent)(props);\n}\nconst ComponentClassicWithLabel = (Component) => (props) => {\n    const StoreComponent = withStore(Component, {});\n    return renderFormItemComponent(renderClassicWithLabel(StoreComponent))(props);\n}\nconst ComponentClassicWithPlaceholder = (Component, placeholder) => (props) => {\n    const StoreComponent = withStore(Component, {});\n    const _placeholder = (props && props.placeholder) ? props.placeholder : placeholder;\n    return renderFormItemComponent(StoreComponent)({...props, placeholder: _placeholder});\n}\nconst ComponentClassicWithOutStore = (Component) => (props) => {\n    // console.log(\"ComponentClassicWithOutStore => \", Component)\n    return renderFormItemComponent(Component)(props);\n}\n\nconst classicComponents = {\n    Form:       RtForm,\n    FormHeader: FormHeader,\n    FormBody:   FormBody,\n    FormFooter: FormFooter,\n    FormList:   AntForm.List,\n    Space:      renderFormItemComponent(AntSpace),\n    Row:        renderFormItemComponent(AntRow),\n    Col:        renderFormItemComponent(AntCol),\n    Layout:     renderFormItemComponent(RtLayout),\n    Tabs:       AntTabs,\n    TabPane:    RtTabPane,\n    List:       renderFormItemComponent(AntList),\n}\nconst withComponentType = {\n    Button:     ComponentClassicWithOutStore(RtButton),\n    Title:      ComponentClassicWithLabel(AntTypography.Title),\n    Text:       ComponentClassicWithLabel(AntTypography.Text),\n    Divider:    ComponentClassicWithLabel(AntDivider),\n    Checkbox:   ComponentClassicWithLabel(AntCheckbox),\n    DatePicker: ComponentClassicWithPlaceholder(RtDatePicker, 'Выберите дату'),\n    DateText:   ComponentClassic(TypographyDate),\n    Input:      ComponentClassicWithPlaceholder(AntInput, 'Введите значение'),\n    Search:     ComponentClassicWithPlaceholder(AntInput.Search, 'Поиск'),\n    TextArea:   ComponentClassicWithPlaceholder(AntInput.TextArea, 'Введите текст'),\n    Password:   ComponentClassicWithPlaceholder(AntInput.Password, 'Введите пароль'),\n    InputNumber:ComponentClassicWithPlaceholder(AntInputNumber, 'Введите значение'),\n    Switch:     ComponentClassic(AntSwitch),\n    RadioGroup: ComponentClassic(AntRadio.Group),\n    Select:     ComponentClassicWithPlaceholder(RtSelect, 'Выберите значение'),\n    TreeSelect: ComponentClassicWithPlaceholder(RtTreeSelect, 'Выберите значение'),\n    Table:      ComponentClassicWithOutStore(RtTable),\n    Modal:      ComponentClassicWithOutStore(RtModal),\n    Custom:     ComponentClassic(Custom),\n    Switcher:   ComponentClassic(RtSwitcher),\n    UploadFile: ComponentClassic(RtUploadFile)\n}\n\nexport const classic = {\n    ...classicComponents,\n    ...Object.keys(withComponentType)\n        .reduce((obj, key) =>\n            ({ ...obj, [key]: renderClassicWithComponentType(withComponentType[key], key) }), {})\n}\n\nexport const declarative =\n    Object.keys(classic)\n    .reduce((obj, key) =>\n        ({ ...obj, [key]: renderDeclarative(classic[key]) }), {});\n","import {Spin} from 'antd';\nimport {LoadingOutlined} from '@ant-design/icons';\nimport React from 'react';\n\nexport const empty = (\n\t<div className={'BaseTable__overlay'}>\n\t\t{' '}\n\t\t<span>Нет данных</span>{' '}\n\t</div>\n);\n\nexport const overlay = (\n\t<div className={'BaseTable__overlay'}>\n\t\t{' '}\n\t\t<Spin\n\t\t\ttip='Загрузка...'\n\t\t\tindicator={<LoadingOutlined style={{fontSize: 24}} spin />}\n\t\t/>{' '}\n\t</div>\n);\n","import React from 'react';\nimport {Checkbox} from 'antd';\nimport { flatten, getTableRowKeys, getTableRowObjects } from \"../../../utils/baseUtils\";\n\nconst SelectionHead = (props) => {\n\tconst {column, container} = props;\n\tconst {rowKey, onSelectAll, selectedRowKeys, selectAll} = column;\n\n\tconst _handleChange = (e) => {\n\t\tconst rowKeys = flatten(getTableRowKeys(container.props.data, column.rowKey));\n\t\tconst rowObjects = flatten(getTableRowObjects(container.props.data, rowKey)).filter((item) => rowKeys.includes(item[rowKey]));\n\t\tconst totalLength = rowKeys.length;\n\t\tconst selectLength = selectedRowKeys.length;\n\t\tconst checked = !(totalLength === selectLength);\n\n\t\t// const newRowKeys = container.props.data.map((item) => { return item[column.rowKey] });\n\t\tonSelectAll({selected: checked, rowKeys: rowKeys, rowObjects: rowObjects});\n\t};\n\n\treturn (\n\t\t<Checkbox\n\t\t\tindeterminate={selectAll === null}\n\t\t\tonChange={_handleChange}\n\t\t\tchecked={selectAll}\n\t\t/>\n\t);\n};\n\nexport default SelectionHead;\n","import React from 'react';\nimport {Checkbox} from 'antd';\nimport {\n\tflatten,\n\tgetTableRowKeys,\n\tfindNodeByRowKey, getTableRowObjects\n} from \"../../../utils/baseUtils\";\n\nconst getRowChildren = (data, rowKey) =>\n\tdata.map((item) => {\n\t\tif (item.children && item.children.length) {\n\t\t\treturn [item[rowKey], getRowChildren(item.children, rowKey)];\n\t\t}\n\t\treturn item[rowKey];\n\t});\n\nconst findBrothers = (data, selfItem, rowKey, parentKey, rowKeys = null) => {\n\tlet arr = [];\n\tdata.forEach((item) => {\n\t\tif (\n\t\t\titem[parentKey] &&\n\t\t\titem[parentKey] === selfItem[parentKey] &&\n\t\t\titem[rowKey] !== selfItem[rowKey]\n\t\t) {\n\t\t\tif (rowKeys !== null) {\n\t\t\t\tif (rowKeys.includes(item[rowKey])) {\n\t\t\t\t\tarr.push(item[rowKey]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tarr.push(item[rowKey]);\n\t\t\t}\n\t\t} else if (item.children && item.children.length) {\n\t\t\tarr.push(\n\t\t\t\tfindBrothers(\n\t\t\t\t\titem.children,\n\t\t\t\t\tselfItem,\n\t\t\t\t\trowKey,\n\t\t\t\t\tparentKey,\n\t\t\t\t\trowKeys\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\treturn arr;\n};\n\nexport const parentAnalysis = ({\n\trowData,\n\trowKey,\n\tparentKey,\n\tchecked,\n\tnodeAssociated,\n\ttreeData,\n\tselectedRowKeys,\n\tindeterminateRowKeys,\n}) => {\n\tlet _selectedRowKeys = [...selectedRowKeys];\n\tlet _indeterminateRowKeys = [...indeterminateRowKeys];\n\n\tlet currentRowData = rowData;\n\tlet parentExist = !!currentRowData[parentKey];\n\tlet lastTypeSelect = checked ? 'checked' : 'square';\n\tlet typeSelect = '';\n\tlet nextSquare = false;\n\n\t/** Пока есть родитель */\n\twhile (parentExist && nodeAssociated) {\n\t\tconst indeterminateBrothers = flatten(\n\t\t\tfindBrothers(\n\t\t\t\ttreeData,\n\t\t\t\tcurrentRowData,\n\t\t\t\trowKey,\n\t\t\t\tparentKey,\n\t\t\t\t_indeterminateRowKeys\n\t\t\t)\n\t\t);\n\t\tconst selectedBrothers = flatten(\n\t\t\tfindBrothers(\n\t\t\t\ttreeData,\n\t\t\t\tcurrentRowData,\n\t\t\t\trowKey,\n\t\t\t\tparentKey,\n\t\t\t\t_selectedRowKeys\n\t\t\t)\n\t\t);\n\t\tconst allBrothers = flatten(\n\t\t\tfindBrothers(treeData, currentRowData, rowKey, parentKey)\n\t\t);\n\n\t\tif (checked) {\n\t\t\tif (\n\t\t\t\tlastTypeSelect === 'checked' &&\n\t\t\t\tselectedBrothers.length === allBrothers.length\n\t\t\t)\n\t\t\t\ttypeSelect = 'checked';\n\t\t\telse typeSelect = 'square';\n\t\t} else {\n\t\t\tif (\n\t\t\t\t!checked &&\n\t\t\t\t!nextSquare &&\n\t\t\t\t(selectedBrothers.length || indeterminateBrothers.length)\n\t\t\t)\n\t\t\t\tnextSquare = true;\n\t\t\tif (nextSquare) typeSelect = 'square';\n\t\t\telse typeSelect = 'none';\n\t\t}\n\n\t\t// console.log(\"allBrothers \", allBrothers);\n\t\t// console.log(\"findParentById \", treeData,\n\t\t//     rowKey,\n\t\t//     parentKey,\n\t\t//     currentRowData[parentKey]);\n\t\t//\n\t\t// console.log(\"findNodeByRowKey \", findNodeByRowKey(treeData, rowKey, currentRowData[parentKey]));\n\n\t\t// Найти родителя\n\t\tcurrentRowData = findNodeByRowKey(\n\t\t\ttreeData,\n\t\t\trowKey,\n\t\t\tcurrentRowData[parentKey]\n\t\t);\n\n\t\tif (typeSelect === 'checked') {\n\t\t\t// Выделить галкой\n\t\t\t// console.log(\"checked\");\n\t\t\tlastTypeSelect = 'checked';\n\t\t\tif (!_selectedRowKeys.includes(currentRowData[rowKey]))\n\t\t\t\t_selectedRowKeys.push(currentRowData[rowKey]);\n\t\t\tconst index = _indeterminateRowKeys.indexOf(currentRowData[rowKey]);\n\t\t\tif (index > -1) _indeterminateRowKeys.splice(index, 1);\n\t\t} else if (typeSelect === 'square') {\n\t\t\t// Выдлеить квадратом\n\t\t\t// console.log(\"square: \");\n\t\t\tlastTypeSelect = 'square';\n\t\t\tif (!_indeterminateRowKeys.includes(currentRowData[rowKey]))\n\t\t\t\t_indeterminateRowKeys.push(currentRowData[rowKey]);\n\t\t\tconst index = _selectedRowKeys.indexOf(currentRowData[rowKey]);\n\t\t\tif (index > -1) _selectedRowKeys.splice(index, 1);\n\t\t} else if (typeSelect === 'none') {\n\t\t\t// Снять выделение\n\t\t\t// console.log(\"none: \");\n\t\t\tlastTypeSelect = 'none';\n\t\t\tconst indexS = _selectedRowKeys.indexOf(currentRowData[rowKey]);\n\t\t\tif (indexS > -1) _selectedRowKeys.splice(indexS, 1);\n\t\t\tconst indexI = _indeterminateRowKeys.indexOf(\n\t\t\t\tcurrentRowData[rowKey]\n\t\t\t);\n\t\t\tif (indexI > -1) _indeterminateRowKeys.splice(indexI, 1);\n\t\t}\n\n\t\tparentExist = !!currentRowData[parentKey];\n\t\t// parentExist = проверка наличия след родителя\n\t}\n\n\treturn [_selectedRowKeys, _indeterminateRowKeys];\n};\n\nconst SelectionCell = (props) => {\n\tconst _handleChange = (checked) => {\n\t\tconst {rowData, rowIndex, column, container} = props;\n\t\tconst {\n\t\t\tonChange,\n\t\t\tselectedRowKeys,\n\t\t\tindeterminateRowKeys,\n\t\t\trowKey,\n\t\t\tparentKey,\n\t\t\tnodeAssociated,\n\t\t} = column;\n\n\t\t// const rowKeys = flatten(getTableRowKeys([rowData], column.rowKey));\n\t\t// const totalLength = container.props.data.length;\n\t\t// const checked = e.target.checked;\n\t\t// const currentRowKey = {[rowKey]: rowData[rowKey], checked};\n\t\t// console.log(\"_handleChange: \", selectedRowKeys);\n\n\t\tlet _selectedRowKeys = [...selectedRowKeys];\n\t\tlet _indeterminateRowKeys = [...indeterminateRowKeys];\n\n\t\t/** Обработка себя, поиск детей, выделение / снятие их */\n\t\tlet rowChildren = [];\n\t\tif (checked) {\n\t\t\tif (rowData.children && nodeAssociated)\n\t\t\t\trowChildren = flatten(getRowChildren(rowData.children, rowKey));\n\n\t\t\t_selectedRowKeys = _selectedRowKeys\n\t\t\t\t.concat([rowData[rowKey]])\n\t\t\t\t.concat(rowChildren);\n\t\t\t_indeterminateRowKeys = _indeterminateRowKeys.filter(\n\t\t\t\t(element) =>\n\t\t\t\t\telement !== rowData[rowKey] &&\n\t\t\t\t\t!rowChildren.includes(element)\n\t\t\t);\n\t\t} else {\n\t\t\tif (rowData.children && nodeAssociated)\n\t\t\t\trowChildren = flatten(\n\t\t\t\t\tgetRowChildren(rowData.children, rowKey, false)\n\t\t\t\t);\n\n\t\t\t_selectedRowKeys = _selectedRowKeys.filter(\n\t\t\t\t(element) =>\n\t\t\t\t\telement !== rowData[rowKey] &&\n\t\t\t\t\t!rowChildren.includes(element)\n\t\t\t);\n\t\t\t_indeterminateRowKeys = _indeterminateRowKeys.filter(\n\t\t\t\t(element) =>\n\t\t\t\t\telement !== rowData[rowKey] &&\n\t\t\t\t\t!rowChildren.includes(element)\n\t\t\t);\n\t\t}\n\n\t\t[_selectedRowKeys, _indeterminateRowKeys] = parentAnalysis({\n\t\t\trowData,\n\t\t\trowKey,\n\t\t\tparentKey,\n\t\t\tchecked,\n\t\t\tnodeAssociated,\n\t\t\ttreeData: container.props.data,\n\t\t\tselectedRowKeys: _selectedRowKeys,\n\t\t\tindeterminateRowKeys: _indeterminateRowKeys,\n\t\t});\n\n\t\tconst keys = [...new Set(_selectedRowKeys)];\n\t\tconst _selectedRowObjects = flatten(getTableRowObjects(container.props.data, rowKey)).filter((item) => keys.includes(item[rowKey]));\n\t\t//return [...new Set(_disabledElements)]\n\t\t// onChange({ selected: checked, totalLength, rowData, rowIndex });\n\n\t\t/** Выясняем новое состояние галочки \"Выделить все\" */\n\t\tlet selectAll;\n\t\tconst selectLength = _selectedRowKeys.length;\n\t\tconst totalLength = flatten(\n\t\t\tgetTableRowKeys(container.props.data, column.rowKey)\n\t\t).length;\n\n\t\tif (selectLength === 0) selectAll = false;\n\t\telse if (totalLength === selectLength) selectAll = true;\n\t\telse if (totalLength !== selectLength) selectAll = null;\n\n\n\n\t\tonChange({\n\t\t\tselected: checked,\n\t\t\t_selectedRow: {\n\t\t\t\trowData: {...rowData},\n\t\t\t\trowIndex: rowIndex,\n\t\t\t\trowKey: rowKey,\n\t\t\t},\n\t\t\t_selectAll: selectAll,\n\t\t\t_selectedRowKeys: keys, //[...new Set(_selectedRowKeys)],\n\t\t\t_selectedRowObjects: _selectedRowObjects,\n\t\t\t_indeterminateRowKeys: [...new Set(_indeterminateRowKeys)],\n\t\t});\n\n\t\t// let uniqIds = {};\n\t\t// onChange({selected: checked, rowKeys: rowKeys.filter(obj => !uniqIds[obj[rowKey]] && (uniqIds[obj[rowKey]] = true)) });\n\t};\n\n\tconst {rowData, column} = props;\n\tconst {selectedRowKeys, indeterminateRowKeys, rowKey} = column;\n\tconst det = indeterminateRowKeys.includes(rowData[rowKey]);\n\tconst checked = selectedRowKeys.includes(rowData[rowKey]);\n\n\treturn (\n\t\t<Checkbox\n\t\t\tindeterminate={det}\n\t\t\tonChange={(e) => _handleChange(e.target.checked)}\n\t\t\tchecked={checked}\n\t\t/>\n\t);\n};\n\nexport default SelectionCell;\n","import React, {useState, useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport {DatePicker} from 'antd';\nimport locale from 'antd/es/date-picker/locale/ru_RU';\nimport {noop} from '../../utils/baseUtils';\nimport {rtPrefix} from '../../utils/variables';\nimport {\n\tgetMomentWithOffset,\n\tgetMomentWithOffsetTruncateDay,\n\tgetMomentFromStringByFormat,\n} from '../../utils/datesUtils';\n\nconst DateRange = (props) => {\n\t/** Состояние первоначалной настройки компонента */\n\tconst [mounted, setMounted] = useState(false);\n\tconst [startValue, setStartValue] = useState(undefined);\n\tconst [endValue, setEndValue] = useState(undefined);\n\n\tconst {\n        className,\n\t\tnameStart,\n\t\tnameEnd,\n\t\tdateFormat,\n\t\tonChange,\n        size,\n\t\ttitle,\n\t\tvalueStart,\n\t\tvalueEnd,\n\t\tshowTime,\n\t} = props;\n\n\tuseEffect(() => {\n\t\tif (!mounted) {\n\t\t\tif (props.defaultValueStart) {\n                // console.log(\"DateRange mounted :\", nameStart, props.defaultValueStart);\n                _onChange(\n\t\t\t\t\tnameStart,\n\t\t\t\t\tgetMomentFromStringByFormat(\n\t\t\t\t\t\tprops.defaultValueStart,\n\t\t\t\t\t\tdateFormat\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\tsetStartValue(\n\t\t\t\t\tgetMomentFromStringByFormat(\n\t\t\t\t\t\tprops.defaultValueStart,\n\t\t\t\t\t\tdateFormat\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (props.defaultValueEnd) {\n\t\t\t\t_onChange(\n\t\t\t\t\tnameEnd,\n\t\t\t\t\tgetMomentFromStringByFormat(\n\t\t\t\t\t\tprops.defaultValueEnd,\n\t\t\t\t\t\tdateFormat\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\tsetEndValue(\n\t\t\t\t\tgetMomentFromStringByFormat(\n\t\t\t\t\t\tprops.defaultValueEnd,\n\t\t\t\t\t\tdateFormat\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\tsetMounted(true);\n\t\t}\n\t}, [mounted]);\n\n\tuseEffect(() => {\n\t\tif (valueStart) {\n\t\t\tsetStartValue(moment(valueStart));\n\t\t\t// console.log('useEffect -> valueStart', valueStart);\n\t\t} else if (!props.defaultValueStart) setStartValue(null);\n\t}, [valueStart]);\n\tuseEffect(() => {\n\t\tif (valueEnd) {\n\t\t\tsetEndValue(moment(valueEnd));\n\t\t\t// console.log('useEffect -> valueEnd', valueEnd);\n\t\t} else if (!props.defaultValueEnd) setEndValue(null);\n\t}, [valueEnd]);\n\n\tconst disabledStartDate = (startValue) => {\n\t\tif (!startValue || !endValue) {\n\t\t\treturn false;\n\t\t}\n\t\treturn startValue.valueOf() > endValue.valueOf();\n\t};\n\n\tconst disabledEndDate = (endValue) => {\n\t\tif (!endValue || !startValue) {\n\t\t\treturn false;\n\t\t}\n\t\treturn endValue.valueOf() <= startValue.valueOf();\n\t};\n\n\tconst onStartChange = (date) => {\n\t\tsetStartValue(date);\n\t\t_onChange(nameStart, date);\n\t};\n\n\tconst onEndChange = (date) => {\n\t\tsetEndValue(date);\n\t\t_onChange(nameEnd, date);\n\t};\n\n\tconst _onChange = (name, value) => {\n\t\tif (value)\n\t\t\tif(showTime)\n\t\t\t\tonChange(name, getMomentWithOffset(value));\n\t\t\telse\n\t\t\t\tonChange(name, getMomentWithOffsetTruncateDay(value));\n\n\t\telse onChange(name, value);\n\t};\n\n\treturn (\n\t\t<div className={`${className} ${rtPrefix}-date-range`}>\n\t\t\t<div>\n                {title ? <div className={'title'}>{title}</div> : null}\n\t\t\t\t<span className={'subtitleStart'}>c</span>\n\t\t\t\t<DatePicker\n\t\t\t\t\tlocale={locale}\n\t\t\t\t\t// defaultValue={ checkDefValue(props.defaultValueStart) }\n\t\t\t\t\tsize={size}\n\t\t\t\t\tstyle={{width: !!showTime ? '160px' : '135px'}}\n\t\t\t\t\tdisabledDate={disabledStartDate}\n\t\t\t\t\tonChange={onStartChange}\n\t\t\t\t\tformat={dateFormat}\n\t\t\t\t\tplaceholder={'Выберите дату'}\n\t\t\t\t\tvalue={startValue}\n\t\t\t\t\tshowTime={showTime}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<span className={'subtitleEnd'}>по</span>\n\t\t\t\t<DatePicker\n\t\t\t\t\tlocale={locale}\n\t\t\t\t\t// defaultValue={ checkDefValue(props.defaultValueEnd) }\n\t\t\t\t\tsize={size}\n\t\t\t\t\tstyle={{width: showTime ? '160px' : '135px'}}\n\t\t\t\t\tdisabledDate={disabledEndDate}\n\t\t\t\t\tonChange={onEndChange}\n\t\t\t\t\tformat={dateFormat}\n\t\t\t\t\tplaceholder={'Выберите дату'}\n\t\t\t\t\tvalue={endValue}\n\t\t\t\t\tshowTime={showTime}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nDateRange.propTypes = {\n\t/** Формат отображения даты (не влияет на формат в onChange) */\n\tdateFormat: PropTypes.string,\n\n\t/** Значение по умолчанию для первого пикера */\n\t// defaultValueStart: PropTypes.string,\n\n\t/** Значение по умолчанию для второго пикера */\n\t// defaultValueEnd: PropTypes.string,\n\n    /** Дополнительное имя класса для элемента */\n    className: PropTypes.string,\n\n\t/** Наименование параметра для первого пикера */\n\tnameStart: PropTypes.string,\n\n\t/** Наименование параметра для второго пикера */\n\tnameEnd: PropTypes.string,\n\n\t/** Событие при изменении любого из пикеров */\n\tonChange: PropTypes.func,\n\n    /** Размер пикера ['small', 'middle', 'large'] */\n    size: PropTypes.oneOf(['small', 'middle', 'large']),\n\n\t/** Заголовок */\n\ttitle: PropTypes.string,\n\n\t/** Значение даты первого пикера (используется для управления датой из родительного компонента) */\n\t// valueStart: PropTypes.string,\n\n\t/** Значение даты второго пикера (используется для управления датой из родительного компонента) */\n\t// valueEnd: PropTypes.string,\n};\n\nDateRange.defaultProps = {\n    className: '',\n\tnameStart: 'dateStart',\n\tnameEnd: 'dateEnd',\n\tdateFormat: 'DD.MM.YYYY',\n\tonChange: noop,\n    size: 'middle',\n    // title: 'Период',\n};\n\nexport default DateRange;\n","import React, {useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {DatePicker} from 'antd';\nimport moment from 'moment';\nimport {noop} from '../../utils/baseUtils';\nimport {\n\tgetMomentFromStringByFormat,\n\tgetMomentWithOffsetTruncateDay,\n} from '../../utils/datesUtils';\n\nconst SingleDate = (props) => {\n\t/** Состояние первоначалной настройки компонента */\n\tconst [mounted, setMounted] = useState(false);\n\tconst [_value, setValue] = useState(null);\n\n\tconst {dateFormat, defaultValue, name, onChange, title, value, className} = props;\n\n\tuseEffect(() => {\n\t\tif (!mounted) {\n\t\t\t// console.log(\"DateRange mounted :\", nameFrom, props.defaultValueFrom);\n\t\t\tif (defaultValue) {\n\t\t\t\t_onChange(\n\t\t\t\t\tname,\n\t\t\t\t\tgetMomentFromStringByFormat(defaultValue, dateFormat)\n\t\t\t\t);\n\t\t\t\tsetValue(getMomentFromStringByFormat(defaultValue, dateFormat));\n\t\t\t}\n\t\t\tsetMounted(true);\n\t\t}\n\t}, [mounted]);\n\n\tuseEffect(() => {\n\t\tif (value) {\n\t\t\tsetValue(moment(value));\n\t\t} else if (!defaultValue) setValue(null);\n\t}, [value]);\n\n\tconst _onChangePicker = (date) => {\n\t\tsetValue(date);\n\t\t_onChange(name, date);\n\t};\n\n\tconst _onChange = (name, value) => {\n\t\tif (value) onChange(name, getMomentWithOffsetTruncateDay(value));\n\t\telse onChange(name, value);\n\t};\n\n\treturn (\n\t\t<div className={`single-date-container ${className}`}>\n\t\t\t<div className={'title'}>{title}</div>\n\t\t\t<DatePicker\n\t\t\t\tsize={'small'}\n\t\t\t\tstyle={{width: '135px'}}\n\t\t\t\tonChange={_onChangePicker}\n\t\t\t\tformat={dateFormat}\n\t\t\t\tplaceholder={'Выберите дату'}\n\t\t\t\tvalue={_value}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nSingleDate.propTypes = {\n\t/** Формат отображения даты (не влияет на формат в onChange) */\n\tdateFormat: PropTypes.string,\n\n\t/** Значение по умолчанию */\n\tdefaultValue: PropTypes.string,\n\n\t/** Наименование параметра */\n\tname: PropTypes.string,\n\n    /** Дополнительное имя класса для элемента */\n    className: PropTypes.string,\n\n\t/** Событие при изменении пикера */\n\tonChange: PropTypes.func,\n\n\t/** Заголовок */\n\ttitle: PropTypes.string,\n\n\t/** Значение даты */\n\tvalue: PropTypes.string,\n};\n\nSingleDate.defaultProps = {\n\tname: 'date',\n\tdateFormat: 'DD.MM.YYYY',\n\tonChange: noop,\n\ttitle: 'Дата',\n};\n\nexport default SingleDate;\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Tooltip } from \"antd\";\nimport { noop } from \"../../utils/baseUtils\";\nimport DateRange from \"../DateRange/DateRange\";\nimport SingleDate from \"../SingleDate/SingleDate\";\nimport Select from \"../Select/Select\";\nimport { rtPrefix } from \"../../utils/variables\";\n\nconst FilterPanel = (props) => {\n  /**\n   * Период с, по (день / месяц / год)\n   * Множественный выбор (дерево с галочками с поиском) (ajax / const)\n   * Множественный выбор (список с поиском) (ajax / const)\n   * Единственный выбор (список с поиском) (ajax / const)\n   */\n\n  const [filter, setFilter] = useState(props.defaultFilter);\n  // const [multiSelectObjects, setMultiSelectObjects] = useState([]);\n\n  const {\n    applyFilterTooltip,\n    applyFilterSize,\n    applyFilterRender,\n    borderStyle,\n    onChangeFilter,\n    onApplyFilter,\n    configFilter,\n    resetFilterRender,\n    resetFilterTooltip,\n    resetFilterSize\n  } = props;\n\n  useEffect(() => {\n    setFilter(props.defaultFilter);\n  }, []);\n\n  const _onChangeData = (name, value) => {\n    // console.log(\"FilterPanel -> onChangeData\", name, value);\n    let _filter = { ...filter };\n    if (value === null) {\n      delete _filter[name];\n    } else {\n      _filter = { ..._filter, ...{ [name]: value } };\n    }\n    // console.log(\"onChangeData:\", _filter);\n    setFilter(_filter);\n    onChangeFilter(_filter);\n  };\n\n  const _applyFilter = () => {\n    // console.log(\"_applyFilter:\", filter);\n    onApplyFilter(filter);\n  };\n  const _resetFilter = () => {\n    // console.log(\"_resetFilter:\", props.defaultFilter);\n    setFilter(props.defaultFilter);\n    onChangeFilter(props.defaultFilter);\n    onApplyFilter(props.defaultFilter);\n    // setMultiSelectObjects([]);\n  };\n\n  // const _onChangeObjects = (name, value) => {\n  // \tlet _multiSelectObjects = {...multiSelectObjects};\n  // \tif (value === null) {\n  // \t\tdelete _multiSelectObjects[name];\n  // \t} else {\n  // \t\t_multiSelectObjects = {..._multiSelectObjects, ...{[name]: value}};\n  // \t}\n  // \t// console.log(\"onChangeData:\", _filter);\n  // \tsetMultiSelectObjects(_multiSelectObjects);\n  // };\n  const getPanelCls = () => {\n    let cls = [`${rtPrefix}-filter-panel`];\n    cls.push(`border-${borderStyle}`);\n    if (configFilter.findIndex((item) => !!item.title) === -1)\n      cls.push(`${rtPrefix}-filter-panel-no-title`);\n    return cls.join(\" \");\n  };\n\n  return (\n    <React.Fragment>\n      {configFilter && configFilter.length ? (\n        <div className={getPanelCls()}>\n          {configFilter.map((item, index) => {\n            // console.log(\"item.defaultRows\", item.defaultRows);\n            let cls = [`${rtPrefix}-filter-panel-item`];\n            item.className && cls.push(item.className);\n            switch (item.componentType) {\n              case \"DateRange\":\n                return (\n                  <DateRange\n                    key={index}\n                    {...item}\n                    className={cls.join(\" \")}\n                    defaultValueStart={\n                      filter[item.nameStart]\n                        ? filter[item.nameStart]\n                        : null\n                    }\n                    defaultValueEnd={\n                      filter[item.nameEnd]\n                        ? filter[item.nameEnd]\n                        : null\n                    }\n                    onChange={_onChangeData}\n                    valueStart={filter[item.nameStart]}\n                    valueEnd={filter[item.nameEnd]}\n                  />\n                );\n              case \"SingleDate\":\n                return (\n                  <SingleDate\n                    key={index}\n                    {...item}\n                    className={cls.join(\" \")}\n                    dateFormat={\n                      item.dateFormat\n                        ? item.dateFormat\n                        : undefined\n                    }\n                    defaultValue={\n                      filter[item.name]\n                        ? filter[item.name]\n                        : null\n                    }\n                    onChange={_onChangeData}\n                    value={filter[item.name]}\n                  />\n                );\n              case \"MultiSelect\":\n              case \"SingleSelect\":\n                return (\n                  <Select\n                    key={index}\n                    {...item}\n                    type={item.componentType}\n                    defaultSelectedRowKeys={\n                      filter[item.name]\n                        ? filter[item.name]\n                        : null\n                    }\n                    selectedRowKeys={filter[item.name] ? filter[item.name] : []}\n                    className={cls.join(\" \")}\n                    onChangeKeys={_onChangeData}\n                    defaultValue={\n                      filter[item.name]\n                        ? filter[item.name]\n                        : null\n                    }\n                    value={filter[item.name]}\n                  />\n                );\n              case \"Custom\":\n                return (\n                  <React.Fragment key={index}>\n                    {\n                      item.render({\n                        onChange: _onChangeData,\n                        defaultValue: filter[item.name]\n                          ? filter[item.name]\n                          : null,\n                        value: filter[item.name]\n                      })\n                    }\n                  </React.Fragment>);\n              default:\n                return null;\n            }\n          })}\n          <Tooltip title={applyFilterTooltip}>\n            <Button\n              type='primary'\n              size={applyFilterSize}\n              style={{ marginLeft: \"auto\" }}\n              onClick={_applyFilter}\n            >\n              {applyFilterRender}\n            </Button>\n          </Tooltip>\n          <Tooltip title={resetFilterTooltip}>\n            <Button\n              size={resetFilterSize}\n              style={{ marginLeft: \"10px\" }}\n              onClick={_resetFilter}\n            >\n              {resetFilterRender}\n            </Button>\n          </Tooltip>\n        </div>\n      ) : null}\n    </React.Fragment>\n  );\n};\n\nFilterPanel.propTypes = {\n\n  /** Тест Tooltip для кнопки \"Применить фильтр\" */\n  applyFilterTooltip: PropTypes.string,\n\n  /** Размер кнопки \"Применить фильтр\" ['small', 'middle', 'large'] */\n  applyFilterSize: PropTypes.oneOf([\"small\", \"middle\", \"large\"]),\n\n  /** Строка / функция / элемент для отображения в кнопке \"Применить фильтр\" */\n  applyFilterRender: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.element,\n    PropTypes.string\n  ]),\n\n  /** Тип бордера панели (по умолчанию 'none')\n   * ['all', 'none', 'top', 'left', 'bottom', 'right', 'top-bottom', 'left-right'] */\n  borderStyle: PropTypes.oneOf([\n    \"all\",\n    \"none\",\n    \"top\",\n    \"left\",\n    \"bottom\",\n    \"right\",\n    \"top-bottom\",\n    \"left-right\"\n  ]),\n\n  /** Объект фильтра по умолчанию */\n  defaultFilter: PropTypes.object,\n\n  /** Конфигурация панели фильтров */\n  configFilter: PropTypes.arrayOf(PropTypes.object),\n\n  /** Событие по кнопке выполнить фильтр */\n  onApplyFilter: PropTypes.func,\n\n  /** Событие по изменение объекта фильтра */\n  onChangeFilter: PropTypes.func,\n\n  /** Тест Tooltip для кнопки \"Сбросить фильтр\" */\n  resetFilterTooltip: PropTypes.string,\n\n  /** Размер кнопки \"Сбросить фильтр\" ['small', 'middle', 'large'] */\n  resetFilterSize: PropTypes.oneOf([\"small\", \"middle\", \"large\"]),\n\n  /** Строка / функция / элемент для отображения в кнопке \"Сбросить фильтр\" */\n  resetFilterRender: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.element,\n    PropTypes.string\n  ])\n};\n\nFilterPanel.defaultProps = {\n  applyFilterTooltip: \"Применить фильтр\",\n  applyFilterSize: \"middle\",\n  applyFilterRender: \"Применить\",\n  borderStyle: \"none\",\n  defaultFilter: {},\n  configFilter: [],\n  onApplyFilter: noop,\n  onChangeFilter: noop,\n  resetFilterTooltip: \"Сбросить фильтр\",\n  resetFilterSize: \"middle\",\n  resetFilterRender: \"Сбросить\"\n};\n\nexport default FilterPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {CloseCircleOutlined} from '@ant-design/icons';\nimport {rtPrefix} from '../../../utils/variables';\n\nconst SelectionList = (props) => {\n\tconst {selectedRowObjects, rowRender, onClickDropSelect} = props;\n\n\t// console.log(\"SelectionList typeof -> \", typeof(rowRender));\n\treturn (\n\t\t<div className={`${rtPrefix}-table-selected-rows`}>\n\t\t\t{selectedRowObjects && selectedRowObjects.length > 0 ? (\n\t\t\t\t<ul>\n\t\t\t\t\t{selectedRowObjects.map((item, index) => (\n\t\t\t\t\t\t<li key={index}>\n\t\t\t\t\t\t\t{/*{(typeof(rowRender) === 'string') ? <div>{item[rowRender]}</div> : rowRender }*/}\n\t\t\t\t\t\t\t{typeof rowRender === 'function' ? (\n\t\t\t\t\t\t\t\trowRender({rowData: item, rowIndex: index})\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div>{item[rowRender]}</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div onClick={() => onClickDropSelect(item)}>\n\t\t\t\t\t\t\t\t<CloseCircleOutlined />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t) : (\n\t\t\t\t<div>Нет выбранных записей</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nSelectionList.propTypes = {\n\t/** Строка или функция для отображения элементов списка\n\t * Строка - имя поля\n\t * Функция - рендер строк. Параметры v\n\t * { rowData, rowIndex }) */\n\trowRender: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n\n\t/** Список выделенных объектов */\n\tselectedRowObjects: PropTypes.arrayOf(PropTypes.object).isRequired,\n\n\t/** Событие удаления элемента */\n\tonClickDropSelect: PropTypes.func.isRequired,\n};\n\nSelectionList.defaultProps = {};\n\nexport default SelectionList;\n","import React, {useRef, forwardRef, useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport {notification} from 'antd';\nimport SortOrder from 'react-base-table/lib/SortOrder';\nimport BaseTable, {AutoResizer, callOrReturn, Column} from 'react-base-table';\nimport {empty, overlay} from './defaultSettings';\nimport SelectionHead from '../Table/Selectable/SelectionHead';\nimport SelectionCell, {parentAnalysis} from '../Table/Selectable/SelectionCell';\nimport CommandPanel from '../CommandPanel/CommandPanel';\nimport FilterPanel from '../FilterPanel/FilterPanel';\nimport SelectionList from '../Table/SelectionList/SelectionList';\nimport {rtPrefix} from '../../utils/variables';\nimport {\n\tflatten,\n\tgenerateUUID,\n\tgetTableRowKeys,\n\tfindNodeByRowKey,\n\tnoop,\n\tgetTableRowObjects, notificationError\n} from \"../../utils/baseUtils\";\nimport objectPath from \"object-path\";\nimport { setDateStore } from \"../../../redux/rtd.actions\";\nimport FormItems from \"../Form/FormItems\";\n\nconst Table = forwardRef((props, ref) => {\n\t/** Состояние первоначалной настройки компонента*/\n\tconst [mounted, setMounted] = useState(false);\n\t/** Наличие на сервере еще данных */\n\tconst [hasMore, setHasMore] = useState(true);\n\t/** Индикатор загрузки данных */\n\tconst [loading, setLoading] = useState(false);\n\n\t/** Indoor control */\n\tconst [_rows, _setRows] = useState([]);\n\tconst [_selectedRowKeys, setSelectedRowKeys] = useState([]);\n\tconst [_searchValue, setSearchValue] = useState({});\n\tconst [_filter, setFilter] = useState(false);\n\tconst [_sortBy, setSortBy] = useState(false);\n\n\t/** Selectable States */\n\tconst [selectAll, setSelectAll] = useState(false);\n\n\t/** Tree States */\n\tconst [_indeterminateRowKeys, setIndeterminateRowKeys] = useState([]);\n    const [_expandedRowKeys, setExpandedRowKeys] = useState([]);\n\n    const [_totalCountRows, setTotalCountRows] = useState(0);\n\n    const [_footerShow, _setFooterShow] = useState(false);\n\n    const tableRef = useRef();\n\n\tconst {\n\t\t/** Def values */\n\t\tdefaultRows,\n\t\tdefaultSelectedRowKeys,\n\t\tdefaultSearchValue,\n\t\tdefaultFilter,\n\t\tdefaultSortBy,\n\n\t\t/** Outdoor control */\n\t\trows,\n\t\tsetRows,\n\t\tselectedRowKeys,\n\t\tsearchValue,\n\t\tfilter,\n\t\tsortBy,\n\n\t\t/** Required */\n\t\tcolumns,\n\t\ttype,\n\n\t\t/** Base Props */\n\t\tautoDeleteRows,\n\t\trowKey,\n\n\t\t/** View Props */\n\t\tempty,\n\t\tfixWidthColumn,\n\t\tfooterHeight,\n\t\tfooterShow,\n        footerTitles,\n\t\t// footerProps,\n\t\theaderHeight,\n\t\trowHeight,\n\t\tzebraStyle,\n\t\trowRenderer,\n\t\testimatedRowHeight,\n\n\t\t/** Load Data Props */\n\t\tloadThreshold,\n\t\tpageSize,\n\t\trequestLoadRows,\n        requestLoadCount,\n\t\tsearchParamName,\n\n\t\t/** Selectable Props */\n\t\tselectable,\n\n\t\t/** Tree Props */\n\t\tnodeAssociated,\n\t\texpandColumnKey,\n\t\texpandParentKey,\n\t\texpandLazyLoad,\n\t\texpandDefaultAll,\n\n\t\t/** Events */\n\t\tonRowClick,\n\t\tonRowDoubleClick,\n\t\tonRowExpand,\n\t\tonSelectedRowsChange,\n\t\tonExpandedRowsChange,\n\n\t\t/** SELECTED PANEL */\n\t\tshowSelection,\n\t\trowRenderShowSelection,\n\n\t\t/** REDUX PROPS */\n\t\tdispatchPath,\n\t\tsubscribe,\n\t} = props;\n\n\t// console.log('props.commandPanelProps => ', props.commandPanelProps);\n\tconst commandPanelProps = {\n\t\t...CommandPanel.defaultProps,\n\t\t...props.commandPanelProps,\n\t};\n\tconst filterPanelProps = {\n\t\t...FilterPanel.defaultProps,\n\t\t...props.filterPanelProps,\n\t};\n\n\tconst footerProps = {\n\t\t...Table.defaultProps.footerProps,\n\t\t...props.footerProps,\n\t};\n\n\tconst selectedDispatchPath = dispatchPath && `${dispatchPath}.selected`;\n\tconst rowsDispatchPath = dispatchPath && `${dispatchPath}.rows`;\n\n\n\tuseEffect(() => {\n        // console.log(\"Инициализация дефолтных значений \");\n        // console.log(\"Инициализация дефолтных значений defaultSelectedRowKeys > \", defaultSelectedRowKeys);\n\n\t\t// Инициализация дефолтных значений\n\t\t// _setRows(defaultRows);\n\t\t_setRowsHandler(defaultRows);\n\t\tsetSelectedRowKeys(defaultSelectedRowKeys);\n\t\tsetSearchValue(defaultSearchValue);\n\t\tsetFilter(defaultFilter);\n\t\tsetSortBy(defaultSortBy);\n\t\tsetSelectAll(\n\t\t\tdefaultRows.length > 0 &&\n\t\t\t\tdefaultRows.length === defaultSelectedRowKeys.length\n\t\t);\n\t\t// Определение нужно ли отображать подвал\n\t\t_setFooterShow(\n\t\t\t(footerProps.showElements.length ||\n\t\t\tfooterProps.leftCustomSideElement ||\n\t\t\tfooterProps.centerCustomSideElement ||\n\t\t\tfooterProps.rightCustomSideElement));\n\n\t\tif (!!expandColumnKey && !expandLazyLoad) {\n\t\t\t// Открытие всех нод\n\t\t\tif (expandDefaultAll)\n\t\t\t\tsetExpandedRowKeys(\n\t\t\t\t\tflatten(getTableRowKeys(defaultRows, rowKey))\n\t\t\t\t);\n\t\t\t// Установка квадратиков на нужных нодах\n\t\t\tif (defaultSelectedRowKeys && defaultSelectedRowKeys.length > 0) {\n\t\t\t\tlet flatRows = flatten(getTableRowKeys(defaultRows, rowKey));\n\t\t\t\tlet selectedRow = flatRows.filter((item) =>\n\t\t\t\t\tdefaultSelectedRowKeys.includes(item[rowKey])\n\t\t\t\t);\n\t\t\t\tlet _indeterminateRowKeys = [];\n\t\t\t\tselectedRow.forEach((item) => {\n\t\t\t\t\tconst [ss, ii] = parentAnalysis({\n\t\t\t\t\t\trowData: item,\n\t\t\t\t\t\trowKey,\n\t\t\t\t\t\tparentKey: expandParentKey,\n\t\t\t\t\t\tchecked: true,\n\t\t\t\t\t\tnodeAssociated,\n\t\t\t\t\t\ttreeData: defaultRows,\n\t\t\t\t\t\tselectedRowKeys: defaultSelectedRowKeys,\n\t\t\t\t\t\tindeterminateRowKeys: _indeterminateRowKeys,\n\t\t\t\t\t});\n\t\t\t\t\t_indeterminateRowKeys.push(...ii);\n\t\t\t\t});\n\t\t\t\tsetIndeterminateRowKeys([...new Set(_indeterminateRowKeys)]);\n\t\t\t}\n\t\t}\n\n\t\tif (type !== 'localSide') {\n\t\t\t_dataProcessing({\n\t\t\t\tsortBy: defaultSortBy,\n\t\t\t\tfilter: defaultFilter,\n\t\t\t\tsearchLine: defaultSearchValue,\n\t\t\t\treload: true,\n\t\t\t});\n\t\t}\n\t\t// console.log(\"Table => props \", props);\n\t\tsetMounted(true);\n\t\tif (ref && typeof ref === 'function') ref({reloadData});\n\t\telse if (ref && typeof ref === 'object') ref.current = {reloadData};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (type === 'localSide') {\n\t\t\t// console.log(\"Control useEffect => \", rows, selectedRowKeys, searchValue, filter, sortBy);\n\t\t\t// _setRows(rows);\n\t\t\t_setRowsHandler(rows);\n\t\t\tsetSelectedRowKeys(selectedRowKeys);\n\t\t\tsetSearchValue(searchValue);\n\t\t\tsetFilter(filter);\n\t\t\tsetSortBy(sortBy);\n\t\t\tif (!!expandColumnKey && !expandLazyLoad) {\n\t\t\t\t// Открытие всех нод\n\t\t\t\tif (expandDefaultAll)\n\t\t\t\t\tsetExpandedRowKeys(flatten(getTableRowKeys(rows, rowKey)));\n\t\t\t}\n\t\t}\n    }, [rows, selectedRowKeys, searchValue, filter, sortBy]);\n\n\t/** Подписка на изменение props[subscribe.name] в сторе */\n\tuseEffect( () => {\n\t\tif(subscribe.name) {\n\t\t\t// console.log(\"Table => useEffect => subscribe.value \", props[subscribe.name]);\n\t\t\tsubscribe.onChange && subscribe.onChange({value: props[subscribe.name], setReloadTable: reloadData});\n\t\t}\n\t}, [props[subscribe.name]]);\n\n\n\t/** BASE FUNCTIONS */\n\tconst _setRowsHandler = (rows) => {\n\t\t_setRows(rows);\n\t\trowsDispatch(rows);\n\t};\n\tconst setRowsHandler = (rows) => {\n\t\tsetRows(rows);\n\t\trowsDispatch(rows);\n\t};\n\tconst rowsDispatch = (rows) => {\n\t\trowsDispatchPath && props.setDateStore && props.setDateStore(rowsDispatchPath, rows);\n\t};\n\n\tconst reloadData = ({sortBy, filter, searchValue}) => {\n\t\t// console.log(\"reloadData params \", sortBy, filter, searchValue, loading);\n        if(props.value && props.value.length > 0)\n            setSelectedRowKeys(props.value.map(item => item[rowKey]));\n        else\n            setSelectedRowKeys([]);\n\t\t// setSelectedRowKeys([]);\n\t\tif(sortBy) setSortBy(sortBy);\n\t\tif(filter) setFilter(filter);\n\t\tif(searchValue) setSearchValue(searchValue);\n\t\t_dataProcessing({\n\t\t\tsortBy: sortBy ? sortBy : _sortBy,\n\t\t\tfilter: filter ? filter : _filter,\n\t\t\tsearchLine: searchValue ? searchValue : _searchValue,\n\t\t\treload: true,\n\t\t});\n        // console.log(\"reloadData loading \", loading);\n    };\n\n\tconst _dataProcessing = (params) => {\n\t\t// console.log('_dataProcessing', params);\n\t\tconst {sortBy, filter, searchLine, expandRow, reload} = params;\n\t\tswitch (type) {\n\t\t\tcase 'infinity':\n\t\t\tcase 'serverSide':\n\t\t\t\tif ((hasMore || reload) && !loading) {\n\t\t\t\t\tsetLoading(true);\n\t\t\t\t\tconst pageNum = reload\n\t\t\t\t\t\t? 0\n\t\t\t\t\t\t: Math.floor(_rows.length / pageSize);\n\t\t\t\t\tconst params = {\n\t\t\t\t\t\tpage: pageNum,\n\t\t\t\t\t\tsize: pageSize,\n\t\t\t\t\t\tsort:\n\t\t\t\t\t\t\tsortBy && sortBy.key\n\t\t\t\t\t\t\t\t? sortBy.key + ',' + sortBy.order\n\t\t\t\t\t\t\t\t: null,\n\t\t\t\t\t};\n\t\t\t\t\tconst dataQuery = {\n                        ...filter,\n                        ...(searchLine\n                            ? {[searchParamName]: searchLine}\n                            : null),\n                    };\n\t\t\t\t\t// console.log('dataQuery', dataQuery);\n\n                    if(type === 'infinity' && reload && requestLoadCount !== noop && !expandColumnKey && !expandLazyLoad) {\n                        requestLoadCount({\n                            params,\n                            data: dataQuery,\n                        })\n                            .then((response) => {\n                                // console.log(\"infinity then response\", response);\n                                // const result = response.data;\n                                setTotalCountRows(response.data);\n                            })\n\t\t\t\t\t\t\t.catch(error =>\n\t\t\t\t\t\t\t\tnotificationError(error, 'Ошибка получения количества записей по фильтру') );\n                    }\n\n                    // console.log('requestLoadRows => ', typeof requestLoadRows);\n                    // if(typeof requestLoadRows !== 'function'){\n                    //     setLoading(false);\n                    // }\n                    requestLoadRows({\n\t\t\t\t\t\tparams,\n\t\t\t\t\t\tdata: dataQuery,\n\t\t\t\t\t})\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\t// console.log(\"infinity then response\", response);\n\t\t\t\t\t\t\tconst result = response.data;\n\t\t\t\t\t\t\t// Если иерархия и ленивая, то ищим кому добавть полученные записи\n\t\t\t\t\t\t\tif (!!expandColumnKey && expandLazyLoad) {\n\t\t\t\t\t\t\t\t// lastExpandRow//, setLastExpandRow\n\t\t\t\t\t\t\t\t// console.log('!!expandColumnKey && expandLazyLoad', result);\n\t\t\t\t\t\t\t\tif (pageNum === 0) {\n\t\t\t\t\t\t\t\t\tresult.forEach((child) => {\n\t\t\t\t\t\t\t\t\t\tchild.children = [\n\t\t\t\t\t\t\t\t\t\t\t{[rowKey]: generateUUID()},\n\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t// _setRows(result);\n\t\t\t\t\t\t\t\t\t_setRowsHandler(result);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tlet newRows = [..._rows];\n\t\t\t\t\t\t\t\t\t// (data, rowKey, rowValue)\n\t\t\t\t\t\t\t\t\tresult.forEach((child) => {\n\t\t\t\t\t\t\t\t\t\tchild.children = [\n\t\t\t\t\t\t\t\t\t\t\t{[rowKey]: generateUUID()},\n\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tlet node = findNodeByRowKey(\n\t\t\t\t\t\t\t\t\t\tnewRows,\n\t\t\t\t\t\t\t\t\t\trowKey,\n\t\t\t\t\t\t\t\t\t\texpandRow[rowKey]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tnode.children = result;\n\t\t\t\t\t\t\t\t\t// console.log('newRows -> ', newRows);\n\t\t\t\t\t\t\t\t\t// _setRows(newRows);\n\t\t\t\t\t\t\t\t\t_setRowsHandler(newRows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (result && result.length < pageSize) {\n\t\t\t\t\t\t\t\t\tsetHasMore(false);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetHasMore(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tpageNum === 0\n\t\t\t\t\t\t\t\t\t? _setRowsHandler(result) // _setRows\n\t\t\t\t\t\t\t\t\t: _setRowsHandler(_rows.concat(result)); // _setRows\n\n\t\t\t\t\t\t\t\t// console.log('expandDefaultAll ', expandDefaultAll, _expandedRowKeys);\n\t\t\t\t\t\t\t\tif (expandDefaultAll)\n\t\t\t\t\t\t\t\t\tsetExpandedRowKeys(\n\t\t\t\t\t\t\t\t\t\tflatten(getTableRowKeys(result, rowKey))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tnotificationError(error, 'Ошибка загрузки данных')\n\t\t\t\t\t\t\t_setRowsHandler(_rows); // _setRows\n\t\t\t\t\t\t\t// setHasMore(false);\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t// case 'serverSide':\n\t\t\t// \tsetLoading(true);\n\t\t\t// \tbreak;\n\t\t\tcase 'localSide':\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t/** Событие выделение одной строки в режиме без галочек */\n\tconst _rowEventHandlers = {\n\t\tonClick: ({rowData, rowIndex, rowKey, event}) => {\n\t\t\tif (!selectable) {\n\t\t\t\t// if (_selectedRowKeys.includes(rowKey)) {\n\t\t\t\t//     setSelectedRowKeys([]);\n\t\t\t\t//     // setSelectedRow([]);\n\t\t\t\t//     // setSelectedRowObjects([]);\n\t\t\t\t//     onRowClick({\n\t\t\t\t//         selected: false,\n\t\t\t\t//         rowData,\n\t\t\t\t//         rowIndex,\n\t\t\t\t//         rowKey,\n\t\t\t\t//     });\n\t\t\t\t//     onSelectedRowsChange([]);\n\t\t\t\t// } else {\n\t\t\t\t// console.log('_rowEventHandlers -> onClick', rowKey, rowIndex);\n\t\t\t\tconst newRowObject = {\n\t\t\t\t\trowData: {...rowData},\n\t\t\t\t\trowIndex: rowIndex,\n\t\t\t\t\trowKey: rowKey,\n\t\t\t\t};\n\t\t\t\t// if(type !== 'localSide')\n\t\t\t\tsetSelectedRowKeys([rowKey]);\n\t\t\t\t// setSelectedRow(newRowObject);\n\t\t\t\t// setSelectedRowObjects([newRowObject]);\n\t\t\t\tselectedDispatchPath && props.setDateStore && props.setDateStore(selectedDispatchPath, rowData);\n\t\t\t\tonRowClick({\n\t\t\t\t\tselected: true,\n\t\t\t\t\t...newRowObject,\n\t\t\t\t});\n\t\t\t\tonSelectedRowsChange([rowKey], [rowData]);\n\t\t\t\t// }\n\t\t\t}\n\t\t},\n\t\tonDoubleClick: ({rowData, rowIndex, rowKey}) => {\n\t\t\t// console.log('onDoubleClick', rowData, rowIndex, rowKey);\n\t\t\tonRowDoubleClick({rowData, rowIndex, rowKey});\n\t\t},\n\t\t// onContextMenu: console.log('context menu'),\n\t\t// onMouseEnter: console.log('mouse enter'),\n\t\t// onMouseLeave: console.log('mouse leave'),\n\t};\n\n\t/** Событие при сортировке */\n\tconst _onColumnSort = (sortBy) => {\n\t\t// console.log(\"sortBy\", sortBy);\n\t\ttableRef.current.scrollToRow(0, 'auto');\n\t\tsetSortBy(sortBy);\n\n\t\t// Для серверной сортировки - сбросить выделение\n\t\tif (type !== 'localSide') {\n\t\t\tsetSelectedRowKeys([]);\n\t\t}\n\t\tconst loadParams = {\n\t\t\tsortBy: sortBy,\n\t\t\tfilter: _filter,\n\t\t\tsearchLine: _searchValue,\n\t\t\treload: true,\n\t\t};\n\t\t_dataProcessing(loadParams);\n\t};\n\n\t/** Получение колонок таблицы */\n\tconst _getColumns = () => {\n\t\tlet _columns = [...columns];\n\n\t\t/** Создаем колонку с галочками (если надо) */\n\t\tif (selectable) {\n\t\t\tconst selectColumn = {\n\t\t\t\tkey: '__selection__',\n\t\t\t\theaderRenderer: SelectionHead,\n\t\t\t\tcellRenderer: SelectionCell,\n\t\t\t\twidth: 40,\n\t\t\t\tflexShrink: 0,\n\t\t\t\tresizable: false,\n\t\t\t\tfrozen: 'left',\n\t\t\t\trowKey: rowKey,\n\t\t\t\tparentKey: expandParentKey,\n\t\t\t\tselectedRowKeys: _selectedRowKeys,\n\t\t\t\tindeterminateRowKeys: _indeterminateRowKeys,\n\t\t\t\tnodeAssociated: nodeAssociated,\n\t\t\t\tonChange: _onChangeSelectHandler,\n\t\t\t\tselectAll: selectAll,\n\t\t\t\tonSelectAll: _onSelectAllHandler,\n\t\t\t};\n\t\t\t_columns.unshift(selectColumn);\n\t\t}\n\t\treturn _columns;\n\t};\n\n\t/** VIEW FUNCTIONS */\n\n\tconst _footer = (\n\t\t<React.Fragment>\n\t\t\t{_footerShow ? (\n\t\t\t\t\t<React.Fragment>\n                        {/*className={'BaseTable__footer__counter'}>*/}\n\t\t\t\t\t\t<div key={'footer-left-custom-side'} className={'left-custom-side'}>\n\t\t\t\t\t\t\t{footerProps.leftCustomSideElement ? <FormItems items={footerProps.leftCustomSideElement} /> : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div key={'footer-center-custom-side'} className={'center-custom-side'}>\n\t\t\t\t\t\t\t{footerProps.centerCustomSideElement ? <FormItems items={footerProps.centerCustomSideElement} /> : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div key={'footer-right-custom-side'} className={'right-custom-side'}>\n\t\t\t\t\t\t\t{footerProps.rightCustomSideElement ? <FormItems items={footerProps.rightCustomSideElement} /> : null}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{selectable ? (\n\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t{footerProps.showElements.includes('selected')\n\t\t\t\t\t\t\t\t\t? <span>{footerProps.selectedTitle} {_selectedRowKeys.length}</span>\n\t\t\t\t\t\t\t\t\t: null }\n\t\t\t\t\t\t\t\t{footerProps.showElements.includes('loaded')\n\t\t\t\t\t\t\t\t\t? <span>{footerProps.loadedTitle} {flatten(getTableRowKeys(_rows, rowKey)).length}</span>\n\t\t\t\t\t\t\t\t\t: null }\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t{footerProps.showElements.includes('total')\n\t\t\t\t\t\t\t? type === 'infinity' && requestLoadCount !== noop && !expandColumnKey && !expandLazyLoad\n\t\t\t\t\t\t\t\t? <span>{footerProps.totalTitle} {_totalCountRows}</span>\n\t\t\t\t\t\t\t\t: <span>{footerProps.totalTitle} {flatten(getTableRowKeys(_rows, rowKey)).length}</span>\n\t\t\t\t\t\t\t: null}\n\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t) : null}\n\t\t</React.Fragment>\n\t);\n\n\t/** Событие при рендере для стилизации */\n\tconst _rowClassName = ({rowData, rowIndex}) => {\n\t\tconst {rowClassName} = props;\n\t\treturn [\n\t\t\trowClassName,\n\t\t\t_selectedRowKeys.includes(rowData[rowKey]) && 'row-selected',\n\t\t\tzebraStyle ? (rowIndex % 2 === 0 ? 'even' : 'odd') : '',\n\t\t\t'bordered'\n\t\t].join(' ')\n\t};\n\n\t/** LOAD DATA FUNCTIONS */\n\tconst onEndReached = () => {\n\t\tlet selectAll;\n\t\tconst selectLength = _selectedRowKeys.length;\n\t\tif (selectLength === 0) selectAll = false;\n\t\telse if (selectLength > 0) selectAll = null;\n\n\t\tsetSelectAll(selectAll);\n\n\t\tif (type === 'infinity') {\n\t\t\tconst loadParams = {\n\t\t\t\tsortBy: _sortBy,\n\t\t\t\tfilter: _filter,\n\t\t\t\tsearchLine: _searchValue,\n\t\t\t\treload: false,\n\t\t\t};\n\t\t\t_dataProcessing(loadParams);\n\t\t}\n\t};\n\n\t/** SELECTABLE FUNCTIONS */\n\n\t/** Событие при изменении галочки одной строки */\n\tconst _onChangeSelectHandler = ({\n\t\tselected,\n\t\t_selectedRow,\n\t\t_selectAll,\n\t\t_selectedRowKeys,\n\t\t_selectedRowObjects,\n\t\t_indeterminateRowKeys,\n\t}) => {\n\t\tsetSelectedRowKeys(_selectedRowKeys);\n\t\tsetIndeterminateRowKeys(_indeterminateRowKeys);\n\t\tsetSelectAll(_selectAll);\n\t\t// setSelectedRow(_selectedRow);\n\n\t\t// let newSelectedObjects = [];\n\t\t// if (selected) {\n\t\t// \tif (!!expandColumnKey)\n\t\t// \t\tnewSelectedObjects = flatten(\n\t\t// \t\t\tgetTableRowObjects(rows, rowKey)\n\t\t// \t\t).filter((item) => _selectedRowKeys.includes(item[rowKey]));\n\t\t// \telse\n\t\t// \t\tnewSelectedObjects = selectedRowObjects.concat([\n\t\t// \t\t\t_selectedRow.rowData,\n\t\t// \t\t]);\n\t\t// \t// setSelectedRowObjects(newSelectedObjects);\n\t\t// } else {\n\t\t// \tnewSelectedObjects = selectedRowObjects.filter(\n\t\t// \t\t(item) => item[rowKey] !== _selectedRow.rowData[rowKey]\n\t\t// \t);\n\t\t// \t// setSelectedRowObjects(newSelectedObjects);\n\t\t// }\n\t\t// console.log(\"_handleSelectChange\", props);\n\t\t// dispatchPath && props.setTableSelectedRow && props.setTableSelectedRow(dispatchPath, _selectedRow.rowData);\n\t\tselectedDispatchPath && props.setDateStore && props.setDateStore(selectedDispatchPath, _selectedRowObjects);\n\t\tonRowClick({\n\t\t\tselected,\n\t\t\trowData: _selectedRow.rowData,\n\t\t\trowIndex: _selectedRow.rowIndex,\n\t\t\trowKey,\n\t\t});\n\t\tonSelectedRowsChange(_selectedRowKeys, _selectedRowObjects);\n\t};\n\n\t/** Событие при изменении галочки \"Выделить все\" */\n\tconst _onSelectAllHandler = ({selected, rowKeys, rowObjects}) => {\n\t\tconst selectedKeys = selected ? rowKeys : [];\n\t\tsetSelectedRowKeys(selectedKeys);\n\t\tsetIndeterminateRowKeys([]);\n\t\tsetSelectAll(selected);\n\t\tselectedDispatchPath && props.setDateStore && props.setDateStore(selectedDispatchPath, selected ? rowObjects : []);\n\t\t// setSelectedRowObjects(rows);\n\t\t// console.log(\"_handleSelectAll\", selectedKeys);\n\t\tonSelectedRowsChange(selectedKeys, rowObjects);\n\t};\n\n\t/** TREE FUNCTIONS */\n\n\t/** Анализ дерева на пердмет квадратиков\n\t * Нужно для выделения по умолчанию свернутых элементов */\n\t// const _postLoadTreeAnalysis = () => {\n\t//     if (!!expandColumnKey && !expandLazyLoad) {\n\t//         let _indeterminateRowKeys = [];\n\t//         // console.log(\"mounted->selectedRowObjects: \", selectedRowObjects);\n\t//         selectedRowObjects.map((item) => {\n\t//             const [ss, ii] = parentAnalysis({\n\t//                 rowData: item,\n\t//                 rowKey,\n\t//                 parentKey: expandParentKey,\n\t//                 checked: true,\n\t//                 nodeAssociated,\n\t//                 treeData: _rows,\n\t//                 selectedRowKeys: _selectedRowKeys,\n\t//                 indeterminateRowKeys: _indeterminateRowKeys,\n\t//             });\n\t//             _indeterminateRowKeys.push(...ii);\n\t//         });\n\t//         setIndeterminateRowKeys([...new Set(_indeterminateRowKeys)]);\n\t//     }\n\t// }\n\n\tconst _onExpandedRowsChange = (expandedRowKeys) => {\n\t\t// console.log(\"_onExpandedRowsChange\", expandedRowKeys);\n\t\tonExpandedRowsChange(expandedRowKeys);\n\t};\n\tconst _onRowExpand = ({expanded, rowData, rowIndex, rowKey}) => {\n\t\t// console.log(\"_onRowExpand\", rowData, expanded, rowIndex, rowKey);\n\t\tif (expanded) {\n\t\t\tsetExpandedRowKeys([..._expandedRowKeys, rowKey]);\n\n\t\t\tif (expandLazyLoad) {\n\t\t\t\tconst loadParams = {\n\t\t\t\t\tsortBy: _sortBy,\n\t\t\t\t\tfilter: {..._filter, [expandParentKey]: rowKey},\n\t\t\t\t\tsearchLine: _searchValue,\n\t\t\t\t\treload: false,\n\t\t\t\t\texpandRow: rowData,\n\t\t\t\t};\n\t\t\t\t// _callPropsOnLoad(loadParams);\n\t\t\t\t_dataProcessing(loadParams);\n\t\t\t}\n\t\t} else {\n\t\t\tlet expandedRowKeys = [..._expandedRowKeys];\n\t\t\tlet allChildKeys = flatten(\n\t\t\t\tgetTableRowKeys(rowData.children, props.rowKey)\n\t\t\t);\n\t\t\tallChildKeys.push(rowKey);\n\t\t\t// console.log('allChildKeys', allChildKeys);\n\t\t\tsetExpandedRowKeys(\n\t\t\t\texpandedRowKeys.filter((item) => !allChildKeys.includes(item))\n\t\t\t);\n\t\t}\n\t\tonRowExpand({expanded, rowData, rowIndex, rowKey});\n\t};\n\n\t/** COMMAND PANEL FUNCTIONS */\n\n\tconst _getDisabledElementsOfCommandPanel = () => {\n\t\t// console.log('commandPanelProps', commandPanelProps);\n\t\tlet _disabledElements = [...commandPanelProps.disabledElements];\n\t\tif (type === 'infinity') {\n\t\t\t_disabledElements.push('up', 'down');\n            // console.log('_getDisabledElementsOfCommandPanel => infinity');\n        }\n\t\tif (selectable && _selectedRowKeys.length > 1) {\n\t\t\t_disabledElements.push('addAsCopy', 'edit', 'up', 'down');\n            // console.log('_getDisabledElementsOfCommandPanel => selectable');\n        }\n\t\tif (_selectedRowKeys.length === 0) {\n\t\t\t_disabledElements.push('addAsCopy', 'edit', 'delete', 'up', 'down');\n            // console.log('_getDisabledElementsOfCommandPanel => NO select');\n        }\n\t\t// if (expandColumnKey) {\n\t\t\t//|| !selectedRow) {\n\t\t\t// _disabledElements.push('up', 'down');\n            // console.log('_getDisabledElementsOfCommandPanel => expandColumnKey');\n        // }\n        // console.log('_getDisabledElementsOfCommandPanel => ', _disabledElements, _selectedRowKeys);\n\n        return [...new Set(_disabledElements)];\n\t};\n\n\tconst _onClickAddAsCopy = (event) => {\n\t\t// console.log(\"_onClickAddAsCopy\", selectedRow);\n\t\tcommandPanelProps.onClickAddAsCopy(\n\t\t\tevent,\n\t\t\tfindNodeByRowKey(_rows, rowKey, _selectedRowKeys[0])\n\t\t);\n\t};\n\n\tconst _onClickEdit = (event) => {\n\t\t// console.log(\"_onClickEdit\", selectedRow);\n\t\tcommandPanelProps.onClickEdit(event, {\n\t\t\trowData: findNodeByRowKey(_rows, rowKey, _selectedRowKeys[0]),\n\t\t});\n\t\t// props.onClickEdit(event, selectedRow);\n\t};\n\n\tconst _onClickDelete = (event) => {\n\t\t// console.log(\"_onClickDelete\", autoDeleteRows, selectedRowKeys);\n\t\tif (autoDeleteRows) {\n\t\t\tif (type === 'localSide') {\n\t\t\t\tsetRowsHandler(\n\t\t\t\t\t_rows.filter(\n\t\t\t\t\t\t(item) => !_selectedRowKeys.includes(item[rowKey])\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t_setRowsHandler(\n\t\t\t\t\t_rows.filter(\n\t\t\t\t\t\t(item) => !_selectedRowKeys.includes(item[rowKey])\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\tsetSelectedRowKeys([]);\n\t\t}\n\t\tcommandPanelProps.onClickDelete(event, _selectedRowKeys);\n\t};\n\n\tconst loop = (data, key, callback) => {\n\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\tif (data[i][rowKey] === key) {\n\t\t\t\t// console.log(`Selected => index: [${i}], path: [${data[i].path}]`, data);\n\t\t\t\treturn callback(data[i], i, data);\n\t\t\t} else {\n\t\t\t\t// console.log(`Other => index: [${i}], path: [${data[i].path}]`);\n\t\t\t}\n\t\t\tif (data[i].children) {\n\t\t\t\tloop(data[i].children, key, callback);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst _onClickUp = (event) => {\n\t\tconst data = [..._rows];\n\t\tconst key = _selectedRowKeys[0];\n\t\tloop(data, key, (item, index, arr)  => {\n\t\t\tconst newRowIndex = _getNewIndexRow(index, index - 1);\n\t\t\t_changeIndexRow(index, newRowIndex, arr, data);\n\t\t\tcommandPanelProps.onClickUp(event, {\n\t\t\t\trowIndex: newRowIndex,\n\t\t\t\trowData: findNodeByRowKey(_rows, rowKey, _selectedRowKeys[0]),\n\t\t\t}, data);\n\t\t})\n\t};\n\n\tconst _onClickDown = (event) => {\n\t\tconst data = [..._rows];\n\t\tconst key = _selectedRowKeys[0];\n\t\tloop(data, key, (item, index, arr)  => {\n\t\t\tconst newRowIndex = _getNewIndexRow(index, index + 1);\n\t\t\t_changeIndexRow(index, newRowIndex, arr, data);\n\t\t\tcommandPanelProps.onClickDown(event, {\n\t\t\t\trowIndex: newRowIndex,\n\t\t\t\trowData: findNodeByRowKey(_rows, rowKey, _selectedRowKeys[0]),\n\t\t\t}, data);\n\t\t})\n\t};\n\n\tconst _getNewIndexRow = (oldIndex, newIndex) =>\n\t\tnewIndex >= 0 && newIndex < _rows.length ? newIndex : oldIndex;\n\n\tconst _changeIndexRow = (oldIndex, newIndex, arr, data) => {\n\t\tif (newIndex >= 0 && newIndex < arr.length) {\n\t\t\t// let arr = [..._rows]; // Копируем массив\n\t\t\tconst item = arr.splice(oldIndex, 1); // Удаляем элемент со старого места\n\t\t\t// console.log('_changeIndexRow => ',item);\n\t\t\tarr.splice(newIndex > 0 ? newIndex : 0, 0, item[0]); // Ставим элемент на новое место\n\t\t\t// console.log(\"_changeIndexRow\", item[0]);\n\t\t\tif (type === 'localSide') {\n\t\t\t\tsetRowsHandler(data);\n\t\t\t} else {\n\t\t\t\t_setRowsHandler(data);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst _onSearch = (searchLine, e) => {\n        e.preventDefault();\n\t\t// console.log(\"_onSearch\", searchLine);\n        tableRef.current.scrollToRow(0, 'auto');\n\t\tsetSearchValue(searchLine);\n\t\tconst loadParams = {\n\t\t\tsortBy: _sortBy,\n\t\t\tfilter: _filter,\n\t\t\tsearchLine: searchLine,\n\t\t\treload: true,\n\t\t};\n\t\t_dataProcessing(loadParams);\n\t\tcommandPanelProps.onSearch(searchLine);\n\t};\n\n\t/** FILTER PANEL FUNCTIONS */\n\n\tconst _onChangeFilter = (filter) => {\n\t\t// console.log('_onChangeFilter', filter);\n\t\tsetHasMore(true);\n\t\tsetFilter(filter);\n\t\tfilterPanelProps.onChangeFilter(filter);\n\t};\n\tconst _onApplyFilter = (filter) => {\n\t\t// console.log('_onApplyFilter', filter);\n\t\tconst loadParams = {\n\t\t\tsortBy: _sortBy,\n\t\t\tfilter: filter,\n\t\t\tsearchLine: _searchValue,\n\t\t\treload: true,\n\t\t};\n\t\t_dataProcessing(loadParams);\n\t\tfilterPanelProps.onApplyFilter(filter);\n\t};\n\n\t/** SELECTED PANEL */\n\n\tconst _onClickDropSelectHandler = (dropObject) => {\n\t\tconst newSelectedKeys = _selectedRowKeys.filter(\n\t\t\t(item) => item !== dropObject[rowKey]\n\t\t);\n\t\tsetSelectedRowKeys(newSelectedKeys);\n\t\tonSelectedRowsChange(newSelectedKeys);\n\t};\n\n\t// const rowProps = {\n\t//     // tagName: 'button',\n\t//     // onClick: e => {\n\t//     //     e.preventDefault();\n\t//     //     e.stopPropagation();\n\t//     //     console.log(`You clicked row onClick`)\n\t//     // },\n\t//     onDoubleClick: e => {\n\t//         e.preventDefault();\n\t//         e.stopPropagation();\n\t//         console.log(`You clicked row onDoubleClick`)\n\t//     }\n\t// };\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`${rtPrefix}-table`}\n\t\t\tstyle={{width: '100%', height: '100%'}}\n\t\t>\n\t\t\t<div className={`${rtPrefix}-table-top-panel`}>\n\t\t\t\t<CommandPanel\n\t\t\t\t\t{...commandPanelProps}\n\t\t\t\t\tdefaultValueSearch={defaultSearchValue}\n\t\t\t\t\tdisabledElements={_getDisabledElementsOfCommandPanel()}\n\t\t\t\t\tonClickAddAsCopy={_onClickAddAsCopy}\n\t\t\t\t\tonClickDelete={_onClickDelete}\n\t\t\t\t\tonClickDown={_onClickDown}\n\t\t\t\t\tonClickEdit={_onClickEdit}\n\t\t\t\t\tonClickUp={_onClickUp}\n\t\t\t\t\tonSearch={_onSearch}\n\t\t\t\t/>\n\t\t\t\t{/*{!filter ? (*/}\n\t\t\t\t<FilterPanel\n\t\t\t\t\t{...filterPanelProps}\n\t\t\t\t\tdefaultFilter={defaultFilter}\n\t\t\t\t\tonChangeFilter={_onChangeFilter}\n\t\t\t\t\tonApplyFilter={_onApplyFilter}\n\t\t\t\t/>\n\t\t\t\t{/*) : null}*/}\n\t\t\t</div>\n\t\t\t<div className={`${rtPrefix}-baseTable`}>\n\t\t\t\t<AutoResizer>\n\t\t\t\t\t{({width, height}) => (\n\t\t\t\t\t\t<BaseTable\n\t\t\t\t\t\t\tref={tableRef}\n\t\t\t\t\t\t\t/** Required */\n\t\t\t\t\t\t\tcolumns={_getColumns()}\n\t\t\t\t\t\t\tdata={_rows}\n\t\t\t\t\t\t\t/** Control Props */\n\t\t\t\t\t\t\tsortBy={_sortBy}\n\t\t\t\t\t\t\t/** Base Props */\n\t\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\t\theight={height}\n\t\t\t\t\t\t\trowKey={rowKey}\n\t\t\t\t\t\t\t// rowProps={rowProps}\n\n\t\t\t\t\t\t\t/** View Props */\n\t\t\t\t\t\t\trowClassName={_rowClassName}\n\t\t\t\t\t\t\temptyRenderer={empty}\n\t\t\t\t\t\t\tfixed={fixWidthColumn}\n\t\t\t\t\t\t\tfooterHeight={_footerShow ? footerProps.height : 0}\n\t\t\t\t\t\t\theaderHeight={headerHeight}\n\t\t\t\t\t\t\trowHeight={rowHeight}\n\t\t\t\t\t\t\toverlayRenderer={loading ? overlay : null}\n\t\t\t\t\t\t\tfooterRenderer={_footer}\n\t\t\t\t\t\t\trowRenderer={rowRenderer}\n\t\t\t\t\t\t\testimatedRowHeight={estimatedRowHeight}\n\t\t\t\t\t\t\t/** Load Data Props */\n\t\t\t\t\t\t\tonEndReachedThreshold={loadThreshold}\n\t\t\t\t\t\t\tonEndReached={\n\t\t\t\t\t\t\t\ttype === 'infinity' ? onEndReached : undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t/** Tree Props */\n\t\t\t\t\t\t\texpandColumnKey={expandColumnKey}\n\t\t\t\t\t\t\texpandedRowKeys={_expandedRowKeys}\n\t\t\t\t\t\t\t/** Events */\n\t\t\t\t\t\t\tonColumnSort={_onColumnSort}\n\t\t\t\t\t\t\trowEventHandlers={_rowEventHandlers}\n\t\t\t\t\t\t\tonExpandedRowsChange={_onExpandedRowsChange}\n\t\t\t\t\t\t\tonRowExpand={_onRowExpand}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</AutoResizer>\n\t\t\t</div>\n\t\t\t{showSelection && selectable && !expandColumnKey ? (\n\t\t\t\t<SelectionList\n\t\t\t\t\tonClickDropSelect={_onClickDropSelectHandler}\n\t\t\t\t\tselectedRowObjects={flatten(\n\t\t\t\t\t\tgetTableRowObjects(_rows, rowKey)\n\t\t\t\t\t).filter((item) => _selectedRowKeys.includes(item[rowKey]))}\n\t\t\t\t\trowRender={rowRenderShowSelection}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t</div>\n\t);\n});\n\nTable.propTypes = {\n\t/**\n\t * REQUIRED\n\t * */\n\n\t/** Столбцы таблицы */\n\tcolumns: PropTypes.arrayOf(PropTypes.object).isRequired,\n\n\t/** Тип таблицы\n\t * **infinity** - загрузка данных по скроллу. Фильтрация, сортировка и поиск через сервер.\n\t * **serverSide** - первичная загрузка таблицы с сервера. Фильтрация, сортировка и поиск через сервер. Lazy Load для дерева тоже тут.\n\t * **localSide** - полностью локальная таблица. Фильтрация, сортировка и поиск через локальный rows */\n\ttype: PropTypes.oneOf(['infinity', 'serverSide', 'localSide']).isRequired,\n\n\t/** Объект со свойствами Command Panel */\n\tcommandPanelProps: PropTypes.object,\n\n\t/** Объект со свойствами Filter Panel */\n\tfilterPanelProps: PropTypes.object,\n\n\t/**\n\t * ПРОПСЫ ЗАДАНИЯ ЗНАЧЕНИЙ ПО УМОЛЧАНИЮ\n\t * */\n\n\t/** Строки по умолчанию */\n\tdefaultRows: PropTypes.arrayOf(PropTypes.object),\n\n\t/** Ключи выделенных по умолчанию строк */\n\tdefaultSelectedRowKeys: PropTypes.arrayOf(\n\t\tPropTypes.oneOfType([PropTypes.string, PropTypes.number])\n\t),\n\n\t/** Значение строки поиска по умолчанию строк */\n\tdefaultSearchValue: PropTypes.string,\n\n\t/** Объект фильтрации по умолчанию */\n\tdefaultFilter: PropTypes.object,\n\n\t/** Сортировка по умолчанию */\n\tdefaultSortBy: PropTypes.shape({\n\t\t/** Ключ поля для сортировки */\n\t\tkey: PropTypes.string,\n\t\t/** Направление сортировки */\n\t\torder: PropTypes.oneOf(['asc', 'desc']),\n\t}),\n\n\t/**\n\t * ПРОПРЫ ДЛЯ ВНЕШНЕГО КОНТРОЛЯ ТАБЛИЦЫ\n\t * */\n\n\t/** Строки таблицы. Используется для контроля таблицы из вне. */\n\trows: PropTypes.arrayOf(PropTypes.object),\n\n    /** Функция задания строк таблицы. */\n    setRows: PropTypes.func,\n\n\t/** Выделенные строки таблицы. */\n\tselectedRowKeys: PropTypes.arrayOf(\n\t\tPropTypes.oneOfType([PropTypes.string, PropTypes.number])\n\t),\n\n\t/** Значение строки поиска */\n\tsearchValue: PropTypes.string,\n\n\t/** Объект фильтрации */\n\tfilter: PropTypes.object,\n\n\t/** Объект сортировки */\n\tsortBy: PropTypes.shape({\n\t\t/** Ключ поля для сортировки */\n\t\tkey: PropTypes.string,\n\t\t/** Направление сортировки */\n\t\torder: PropTypes.oneOf(['asc', 'desc']),\n\t}),\n\n\t/**\n\t * BASE PROPS\n\t * */\n\n\t/** Автоудаление строк из таблицы по кнопке в командной панели*/\n\tautoDeleteRows: PropTypes.bool,\n\n\t/** Поле для уникальной идентификации строки */\n\trowKey: PropTypes.string,\n\n\t/**\n\t * VIEW PROPS\n\t * */\n\n\t/** Вывод когда нет данных */\n\tempty: PropTypes.element,\n\n\t/** Отображение загрузки данных */\n\toverlay: PropTypes.element,\n\n\t/** Фиксированная ширина столбцов. Появится боковой скрол */\n\tfixWidthColumn: PropTypes.bool,\n\n\t/** Высота подвала */\n\tfooterHeight: PropTypes.number,\n\n\t/** Отображать ли подвал */\n\tfooterShow: PropTypes.bool,\n\n    /** Заголовки футтера */\n    footerTitles: PropTypes.shape({\n\t\t/** Заголовок выделенных элементов */\n        selectedRows: PropTypes.string,\n\t\t/** Заголовок загруженных элементов */\n        loadedRows: PropTypes.string,\n\t\t/** Заголовок всего элементов */\n\t\ttotalRows: PropTypes.string,\n    }),\n\n\tfooterProps: PropTypes.shape({\n\n\t\t/** Высота подвала */\n\t\theight: PropTypes.number,\n\n\t\t/** Массив элементов футтера, которые надо отобразить\n\t\t * ['selected', 'loaded', 'total'] */\n\t\tshowElements: PropTypes.arrayOf(PropTypes.string),\n\n\t\t/** Заколовок для кол-ва выбранных объектов */\n\t\tselectedTitle: PropTypes.string,\n\n\t\t/** Заколовок для кол-ва загруженны объектов */\n\t\tloadedTitle: PropTypes.string,\n\n\t\t/** Заколовок для кол-ва всего объектов */\n\t\ttotalTitle: PropTypes.string,\n\n\t\t/** Левый кастомный элемент командной панели */\n\t\tleftCustomSideElement: PropTypes.arrayOf(PropTypes.object),\n\n\t\t/** Центральный кастомный элемент командной панели */\n\t\tcenterCustomSideElement: PropTypes.arrayOf(PropTypes.object),\n\n\t\t/** Правый кастомный элемент командной панели */\n\t\trightCustomSideElement: PropTypes.arrayOf(PropTypes.object),\n\t}),\n\n\t/** Высота заголовка таблицы */\n\theaderHeight: PropTypes.number,\n\n\t/** Высота строки таблицы */\n\trowHeight: PropTypes.number,\n\n\t/** Custom row renderer\n\t * Параметры - ({ isScrolling, cells, columns, rowData, rowIndex, depth }) */\n\trowRenderer: PropTypes.oneOfType([PropTypes.func, PropTypes.element]),\n\n\t/** Строки будут в зебро-стиле */\n\tzebraStyle: PropTypes.bool,\n\n\t/**\n\t * LOAD DATA PROPS\n\t * */\n\n\t/** Порог в пикселях для вызова _onLoad.\n\t * Кол-во пикселей от низа таблицы для срабатывания события загрузки (onEndReached) */\n\tloadThreshold: PropTypes.number,\n\n\t/** Размер страницы */\n\tpageSize: PropTypes.number,\n\n\t/** Функция запроса для загрузки строк (данных) */\n\trequestLoadRows: PropTypes.func,\n\n    /** Функция запроса для загрузки строк (данных) */\n    requestLoadCount: PropTypes.func,\n\n\t/** Имя параметра для поиска */\n\tsearchParamName: PropTypes.string,\n\n\t/**\n\t * SELECTABLE PROPS\n\t * */\n\n\t/** Таблица с возможностью выбора строки */\n\tselectable: PropTypes.bool,\n\n\t/**\n\t * TREE PROPS\n\t * */\n\n\t/** Родительский узел и дочерние узлы связаны (Работает только при selectable) */\n\tnodeAssociated: PropTypes.bool,\n\n\t/** Ключ колонки по которой строить иерархию */\n\texpandColumnKey: PropTypes.string,\n\n\t/** Открыть по умолчанию вложенность до уровня N или 'All' */\n\texpandDefaultAll: PropTypes.bool,\n\n\t/** Загружать ноды иерархии по одной */\n\texpandLazyLoad: PropTypes.bool,\n\n\t/** Поле в котором хранится ссылка на родителя */\n\texpandParentKey: PropTypes.string,\n\n\t/**\n\t * EVENTS\n\t * */\n\n\t/** Событие при клике на строку (только при selectable = false)\n\t * Параметр - ({selected, rowData, rowIndex}) */\n\tonRowClick: PropTypes.func,\n\n\t/** Событие при двойном клике на строку.\n\t * Параметр - ({rowData, rowIndex, rowKey}) */\n\tonRowDoubleClick: PropTypes.func,\n\n\t/** События при открытии / закрытии ноды\n\t * Парметры - ({ expanded, rowData, rowIndex, rowKey }) */\n\tonRowExpand: PropTypes.func,\n\n\t/** Событие при выборе строки.\n\t * Параметр - массив выбранных строе (только rowKey) */\n\tonSelectedRowsChange: PropTypes.func,\n\n\t/** События при открытии / закрытии ноды\n\t * Парметры - (expandedRowKeys) - массив ключей открытых нод */\n\tonExpandedRowsChange: PropTypes.func,\n\n\t/** SELECTED PANEL */\n\n\t/** Отображать ли панель выбранных элементов */\n\tshowSelection: PropTypes.bool,\n\n\t/** Строка или функция для отображения элементов списка выбранных\n\t * Строка - имя поля\n\t * Функция - рендер строк.\n\t * `({ rowData, rowIndex }) => { return <Component> }` */\n\trowRenderShowSelection: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\n\t/** Путь в сторе куда класть выбранную строку таблицы */\n\tdispatchPath: PropTypes.string,\n\n\t/** Объект для подписки на изменения в STORE */\n\tsubscribe: PropTypes.object,\n};\n\nTable.defaultProps = {\n\tdefaultRows: [],\n\tdefaultSelectedRowKeys: [],\n\tdefaultSearchValue: '',\n\tdefaultFilter: {},\n\tdefaultSortBy: {},\n\n\trows: [],\n\tselectedRowKeys: [],\n\tsearchValue: '',\n\tfilter: {},\n\tsortBy: {},\n\n\tautoDeleteRows: true,\n\trowKey: 'id',\n\n\tempty: empty,\n\toverlay: overlay,\n\tfixWidthColumn: false,\n\tfooterHeight: 30,\n\tfooterShow: false,\n    footerTitles: {\n        selectedRows: 'Выделено:',\n        loadedRows: 'Загружено записей:',\n        totalRows: 'Всего записей:',\n    },\n\tfooterProps: {\n\t\theight: 30,\n\t\tshowElements: [],\n\t\tselectedTitle: 'Выделено:',\n\t\tloadedTitle: 'Загружено записей:',\n\t\ttotalTitle: 'Всего записей:',\n\t\tleftCustomSideElement: null,\n\t\tcenterCustomSideElement: null,\n\t\trightCustomSideElement: null\n\t},\n\theaderHeight: 30,\n\trowHeight: 30,\n\tzebraStyle: false,\n\n\tloadThreshold: 300,\n\tpageSize: 50,\n\trequestLoadRows: noop,\n    requestLoadCount: noop,\n\tsearchParamName: 'searchLine',\n\n\tselectable: false,\n\n\tnodeAssociated: true,\n\texpandColumnKey: undefined,\n\texpandDefaultAll: true,\n\texpandLazyLoad: false,\n\texpandParentKey: 'parentId',\n\n\tonRowClick: noop,\n\tonRowDoubleClick: noop,\n\tonRowExpand: noop,\n\tonSelectedRowsChange: noop,\n\tonExpandedRowsChange: noop,\n\n\tshowSelection: false,\n\n\tsubscribe: {},\n};\n\nconst mapStateToProps = (store, ownProps) => {\n\tconst {subscribe} = ownProps;\n\tif(subscribe){\n\t\tconst {name, path} = subscribe;\n\t\tif(name && path)\n\t\t\treturn { [name]: objectPath.get(store, path) };\n\t}\n\n\treturn {};\n};\nconst mapDispatchToProps = (dispatch) =>\n\tbindActionCreators({ setDateStore: setDateStore}, dispatch);\n\n// const mapStateToProps = (store, ownProps) => {\n//     // console.log(\"mapStateToProps -> store\", store);\n//     // const {match , section} = ownProps;\n//     // const { path } = match;\n//     // const rows = store.table[path] && store.table[path][section] ? store.table[path][section].rows : [];\n//     // console.log(\"mapStateToProps -> rows\", rows);\n//     return { store: store };\n// };\n// const mapDispatchToProps = (dispatch, ownProps) => {\n//     // console.log(\"mapDispatchToProps -> ownProps\", ownProps);\n//     // const {match , section} = ownProps;\n//     // const { path } = match;\n//     // initTableStore(path, section);\n//     return bindActionCreators(\n//         {\n//             initTableStore,\n//             setRows,\n//         },\n//         dispatch\n//     );\n// };\n//\n// export default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })(Table);\n\n/**\n * @deprecated [#1] since version 0.0.54 [#2].\n * */\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })(Table);\n","import React, {useEffect, useState, useRef} from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { flatten, getTableRowKeys, noop, notificationError } from \"../../utils/baseUtils\";\nimport {rtPrefix} from '../../utils/variables';\nimport {Button, Typography} from 'antd';\nimport { DownOutlined, UpOutlined, CloseCircleFilled } from '@ant-design/icons'\nimport Table from '../Table/Table';\nimport { setDateStore } from \"../../../redux/rtd.actions\";\nconst {Paragraph} = Typography;\n\nconst Select = (props) => {\n\tconst [_selectedRowKeys, setSelectedRowKeys] = useState([]);\n\tconst [_selectedRowData, _setSelectedRowData] = useState(null);\n\tconst [isSelectOpened, setIsSelectOpened] = useState(false);\n\tconst [isClickInSelect, setIsClickInSelect] = useState(false);\n\n\tconst {\n\t\tname,\n\t\trowRender,\n        className,\n\t\ttype,\n\t\ttitle,\n\t\tplaceholder,\n        selectedRowKeys,\n\t\t// searchable,\n        size,\n\t\twidthControl,\n\t\twidthPopup,\n\t\theightPopup,\n\n\t\tonChangeKeys,\n        defaultValue,\n        value,\n\n\t\t/** Table Props */\n\t\tdefaultSelectedRowKeys,\n\t\trowKey,\n\t\texpandColumnKey,\n\t\tshowSelection,\n\t\trequestLoadRows,\n\t\trequestLoadDefault,\n        commandPanelProps,\n\t\trows,\n\t\tdispatchPath,\n\t} = props;\n\n\tconst selectedDispatchPath = dispatchPath && `${dispatchPath}.selected`;\n\tconst searchable = commandPanelProps && commandPanelProps.showElements && commandPanelProps.showElements.includes('search');\n\tconst node = useRef(null);\n\n\tconst setSelectedRowData = (rowData) => {\n\t\tselectedDispatchPath && props.setDateStore && props.setDateStore(selectedDispatchPath, rowData);\n\t\t_setSelectedRowData(rowData);\n\t}\n\n\tconst loadSelectedObject = ({selectedRowKeys}) => {\n        if(selectedRowKeys) {\n            let _selectedRowKeys;\n\t\t\tif(Array.isArray(selectedRowKeys)) {\n\t\t\t\tsetSelectedRowKeys(selectedRowKeys);\n\t\t\t\t_selectedRowKeys = selectedRowKeys\n\t\t\t}\n            else {\n            \tsetSelectedRowKeys([selectedRowKeys]);\n\t\t\t\t_selectedRowKeys = [selectedRowKeys]\n\t\t\t}\n\n\t\t\t// console.log(\"setSelectedRowKeys[70] -> \", _selectedRowKeys);\n\n\t\t\tconst request = requestLoadDefault\n                ? requestLoadDefault\n                : requestLoadRows;\n\n            if (!!request && !rows && _selectedRowKeys.length > 0) {\n                // console.log('defaultSelectedRowKeys ', defaultSelectedRowKeys, defaultSelectedRowKeys.length);\n                request({\n                    data: {\n                        [rowKey]:  _selectedRowKeys, //defaultSelectedRowKeys,\n                    },\n                })\n                    .then((response) => {\n                        let result = response.data;\n\t\t\t\t\t\t// console.log(\"setSelectedRowData[84] => \", response.data);\n\t\t\t\t\t\tif (result.length > 0) setSelectedRowData(result[0]);\n                    })\n\t\t\t\t\t.catch(error => notificationError(error, 'Ошибка загрузки данных в Select') );\n\n            } else if (rows && _selectedRowKeys && type === 'SingleSelect') {\n            \tlet srk = _selectedRowKeys[0];\n\t\t\t\t// if(Array.isArray(selectedRowKeys) && selectedRowKeys.length > 0)\n\t\t\t\t// \tsrk = selectedRowKeys[0];\n            \t// else\n\t\t\t\t// \tsrk = selectedRowKeys;\n\n                const findRow = rows.find((row) => row[rowKey] === srk);\n                // console.log(\"setSelectedRowData[98] => \", findRow, rows, srk);\n                setSelectedRowData(findRow);\n            } else {\n                setSelectedRowData(null);\n            }\n        }\n\t};\n\n\tuseEffect(() => {\n        loadSelectedObject({selectedRowKeys: defaultSelectedRowKeys});\n\t\twindow.addEventListener('mousedown', handleMouseClick, false);\n\t\treturn () => {\n\t\t\twindow.removeEventListener('mousedown', handleMouseClick, false);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\t// console.log(\"selectedRowKeys\", selectedRowKeys);\n        loadSelectedObject({selectedRowKeys: selectedRowKeys});\n    }, [selectedRowKeys]);\n\n\tuseEffect(() => {\n\t\tif(_selectedRowKeys !== undefined && _selectedRowData === undefined){\n\t\t\t// console.log(\"useEffect rows\", _selectedRowKeys, _selectedRowData, rows);\n\t\t\tloadSelectedObject({selectedRowKeys: _selectedRowKeys});\n\t\t}\n\t}, [rows])\n\n\tuseEffect(() => {\n\t\t// console.log(\"isClickInSelect \", isClickInSelect);\n\t\t// console.log(\"isSelectOpened \", isSelectOpened);\n\t\tif(!isClickInSelect && isSelectOpened)\n\t\t\tonClosePopup();\n\t}, [isClickInSelect]);\n\n\t// useEffect(() => {\n\t// \t// console.log(\"setSelectedRowData[117] => \", props.value, props.defaultValue);\n\t// }, [props])\n\n\tconst columns = [\n\t\t{\n\t\t\tkey: rowKey,\n\t\t\ttitle: title,\n\t\t\tdataKey: rowKey,\n\t\t\twidth: 500,\n\t\t\tcellRenderer:\n\t\t\t\ttypeof rowRender === 'function'\n\t\t\t\t\t? rowRender\n\t\t\t\t\t: ({rowData}) => <div className={'rt-table-cell'}>{rowData[rowRender]}</div>,\n\t\t},\n\t];\n\n\tconst _getHeadCls = () => {\n\t    let cls = [`${rtPrefix}-select-header`];\n\n\t    if(isSelectOpened)\n            cls.push('opened');\n\n\t    if(_selectedRowKeys && _selectedRowKeys.length > 0)\n\t        cls.push('selected');\n\n\t    switch (size) {\n            case 'small':\n                cls.push(`${rtPrefix}-select-header-sm`);\n                break;\n            case 'large':\n                cls.push(`${rtPrefix}-select-header-lg`);\n                break;\n            default: break;\n        }\n\n\t    return cls.join(' ');\n    };\n\n\tconst _getHeadText = () => {\n\t\tif (type === 'SingleSelect') {\n\t\t\t\tif(_selectedRowData)\n\t\t\t\t\tif(typeof rowRender === 'function')\n\t\t\t\t\t\treturn rowRender({rowData: _selectedRowData});\n\t\t\t\t\telse\n\t\t\t\t\t\treturn `${_selectedRowData[rowRender]}`;\n\t\t\t\telse\n\t\t\t\t\treturn `${placeholder}`;\n\t\t} else {\n\t\t\treturn _selectedRowKeys.length > 0\n\t\t\t\t? `Выбрано: ${_selectedRowKeys.length}`\n\t\t\t\t: `${placeholder}`;\n\t\t}\n\t};\n\n    const _getPopupCls = () => {\n    \t// console.log('_getPopupCls _selectedRowKeys => ', _selectedRowKeys);\n        let cls = [`${rtPrefix}-select-popup`];\n\n        if(title)\n            cls.push(`${rtPrefix}-select-popup-with-title`);\n\n        return cls.join(' ');\n    };\n\tconst _getPopupStyle = () => {\n\t\t// if (heightPopup)\n\t\t// \treturn {height: `${heightPopup}px`, width: `${widthPopup}px`};\n\n\t\tlet height = {};\n\t\tlet defRowsLen = 0;\n\n\t\tif (!requestLoadRows && rows)\n\t\t\tif (expandColumnKey)\n\t\t\t\tdefRowsLen = flatten(getTableRowKeys(rows, rowKey)).length;\n\t\t\telse defRowsLen = rows.length;\n\n\t\t// console.log('_getPopupStyle', defRowsLen);\n\t\tif (defRowsLen && defRowsLen > 0) {\n\t\t\theight =\n\t\t\t\tdefRowsLen * 30 + // Кол-во строк * высоту строки\n\t\t\t\t(searchable ? 46 : 0) + // Размер поисковой строки или 0\n\t\t\t\t(type === 'MultiSelect' ? 65 : 0) + // Размер футтера (30) + размер кнопки 35 или 0\n\t\t\t\t(showSelection ? 200 : 0) + // Размер панели выбранных элементов или 0\n\t\t\t\t22; // Паддинги и бордер\n\t\t\t// console.log('heightPopup', height);\n\t\t\tif (height > heightPopup) height = `${heightPopup}px`;\n\t\t\telse height = `${height}px`;\n\t\t} else {\n\t\t\t// console.log(\"heightPopup\", heightPopup);\n\t\t\theight = `${heightPopup}px`;\n\t\t}\n\n\t\t// console.log(\"heightPopup, widthPopup\", heightPopup, widthPopup);\n\t\treturn {height, width: `${widthPopup}px`};\n\t};\n\n\tconst getEvents = () => {\n\t\treturn (commandPanelProps && commandPanelProps.systemBtnProps && Object.keys(commandPanelProps.systemBtnProps)) || [];\n\t};\n\n\tconst _onChange = (selectedKeys) => {\n\t\t// console.log('_onChange [176]', selectedKeys);\n\t\tsetSelectedRowKeys(selectedKeys);\n\t\t// setSelectedRowData(selectedObjects);\n\t\tonChangeKeys(name, selectedKeys.length ? selectedKeys : null);\n\t\t// onChangeObjects(name, selectedObjects.length ? selectedObjects : null);\n\t\t// setCountSelect(selectedKeys.length);\n\t\tif (type === 'SingleSelect') {\n\t\t\tsetIsSelectOpened(false);\n\t\t}\n\t};\n\n\tconst _SingleSelectRow = ({selected, rowData, rowIndex}) => {\n\t\t// console.log(\"_SingleSelectRow => \", rowData);\n\t\tsetSelectedRowData(rowData);\n\t\t// selected ? setSingleSelectRowData(rowData) : setSingleSelectRowData({})\n\t};\n\n\tconst handleMouseClick = (e) => {\n\t\tnode && node.current && setIsClickInSelect(node.current.contains(e.target))\n\t};\n\n\tconst onClosePopup  = () => {\n\t\tsetIsSelectOpened(false);\n\t};\n\n\tconst onOpenPopup = () => {\n\t\tif(!isSelectOpened)\n\t\t\tsetIsSelectOpened(true);\n\t\telse\n\t\t\tsetIsSelectOpened(false);\n\t};\n\n\tconst onClickClear = () => {\n\t\t// console.log(\"delete Selected\");\n\t\tsetSelectedRowData(null);\n\t\t_onChange([]);\n\t};\n\n\treturn (\n\t\t<div\n            className={`${rtPrefix}-select ${className ? className : ''}`}\n\t\t\tref={node}\n\t\t>\n\t\t\t{title ? <div className={'title'}>{title}</div> : null}\n\t\t\t<div\n\t\t\t\tclassName={_getHeadCls()}\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: widthControl === 0 ? '100%' : `${widthControl}px`,\n\t\t\t\t}}\n\n\t\t\t>\n\t\t\t\t<div className={`${rtPrefix}-select-selector`}\n\t\t\t\t\t // onFocus={ () => {setIsSelectOpened(true)} }\n\t\t\t\t\t onClick={ onOpenPopup }\n\t\t\t\t>\n\t\t\t\t\t<Paragraph ellipsis> {_getHeadText()} </Paragraph>\n\t\t\t\t</div>\n                {isSelectOpened ? <UpOutlined onClick={ onOpenPopup } className={`${rtPrefix}-select-header-icon`} /> : <DownOutlined onClick={ onOpenPopup } className={`${rtPrefix}-select-header-icon`}/> }\n\t\t\t\t{/*<Button shape=\"circle\" icon={<CloseCircleFilled />} onClick={() => console.log(\"delete Selected\")} className={`${rtPrefix}-select-header-clear`} />*/}\n\t\t\t\t{_selectedRowKeys.length > 0 ? <CloseCircleFilled onClick={onClickClear} className={`${rtPrefix}-select-header-clear`}/> : null }\n\t\t\t</div>\n\n\t\t\t{isSelectOpened ? (\n\t\t\t\t<div className={_getPopupCls()} style={_getPopupStyle()}>\n\t\t\t\t\t<Table\n\t\t\t\t\t\t{...props}\n\t\t\t\t\t\tcommandPanelProps={{\n\t\t\t\t\t\t\t...props.commandPanelProps,\n\t\t\t\t\t\t\tshowElements: getEvents(),// getShowElements(),\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdefaultSelectedRowKeys={_selectedRowKeys}\n                        selectedRowKeys={_selectedRowKeys}\n\t\t\t\t\t\theaderHeight={0}\n\t\t\t\t\t\tcolumns={columns}\n\t\t\t\t\t\ttype={!!requestLoadRows ? 'serverSide' : 'localSide'}\n\t\t\t\t\t\t// showElements={searchable ? ['search'] : undefined}\n\t\t\t\t\t\tselectable={type === 'MultiSelect'}\n\t\t\t\t\t\tfooterShow={type === 'MultiSelect'}\n\t\t\t\t\t\tshowSelection={showSelection}\n\t\t\t\t\t\trowRenderShowSelection={rowRender}\n\t\t\t\t\t\tonRowClick={_SingleSelectRow}\n\t\t\t\t\t\tonSelectedRowsChange={_onChange}\n\t\t\t\t\t/>\n\t\t\t\t\t{type === 'MultiSelect' ? (\n\t\t\t\t\t\t<div className={'close-panel'}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={() => setIsSelectOpened(false)}\n\t\t\t\t\t\t\t\tsize={'small'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tOk\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n};\n\nSelect.propTypes = {\n\t/** Имя параметра селекта (вернется в onChangeKeys и onChangeObjects) */\n\tname: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.number,\n\t\tPropTypes.arrayOf(\n\t\t\tPropTypes.oneOfType(\n\t\t\t\t[PropTypes.string, PropTypes.number]\n\t\t\t)\n\t\t)]).isRequired,\n\n\t/** Строка или функция для отображения элементов списка\n\t * Строка - имя поля\n\t * Функция - рендер строк. Параметры v\n\t * { rowData, rowIndex }) */\n\trowRender: PropTypes.oneOfType([PropTypes.func, PropTypes.string])\n\t\t.isRequired,\n\n\t/** Тип селекта (SingleSelect и MultiSelect) */\n\ttype: PropTypes.oneOf(['SingleSelect', 'MultiSelect']).isRequired,\n\n    /** Дополнительное имя класса для элемента */\n    className: PropTypes.string,\n\n\t/** Заголовок фильтра */\n\ttitle: PropTypes.string,\n\n\t/** Строка, когда ничего не выбрано */\n\tplaceholder: PropTypes.string,\n\n\t/** Запрос на загрузку дефолтных данных */\n\trequestLoadDefault: PropTypes.func,\n\n    /** Массив выбранных значений */\n    selectedRowKeys: PropTypes.arrayOf(\n        PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    ),\n\n    /** Размер селектора ['small', 'middle', 'large'] */\n    size: PropTypes.oneOf(['small', 'middle', 'large']),\n\n\t// /** Показывать ли поисковую строку */\n\t// searchable: PropTypes.bool,\n\n\t/** Ширина поля выбора в пикселях */\n\twidthControl: PropTypes.number,\n\n\t/** Ширина выпадающего меню */\n\twidthPopup: PropTypes.number,\n\n\t/** Высота выпадающего меню (по умолчанию считается сама) */\n\theightPopup: PropTypes.number,\n\n    /** Событие об изменении состояния селектора */\n\tonChangeKeys: PropTypes.func,\n\n\t/** Поле для уникальной идентификации строки */\n\trowKey: PropTypes.string,\n\n\t/** Высота строки таблицы */\n\trowHeight: PropTypes.number,\n\n\t/** Строки будут в зебро-стиле */\n\tzebraStyle: PropTypes.bool,\n\n\t/** Функция запроса для загрузки строк (данных) */\n\trequestLoadRows: PropTypes.func,\n\n\t/** Функция запроса для загрузки строк (данных) */\n\trequestLoadCount: PropTypes.func,\n\n\t/** Значение строки поиска */\n\tsearchValue: PropTypes.string,\n\n\t/** Имя параметра для поиска */\n\tsearchParamName: PropTypes.string,\n\n\t/** Родительский узел и дочерние узлы связаны (Работает только при selectable) */\n\tnodeAssociated: PropTypes.bool,\n\n\t/** Ключ колонки по которой строить иерархию */\n\texpandColumnKey: PropTypes.string,\n\n\t/** Открыть по умолчанию вложенность до уровня N или 'All' */\n\texpandDefaultAll: PropTypes.bool,\n\n\t/** Загружать ноды иерархии по одной */\n\texpandLazyLoad: PropTypes.bool,\n\n\t/** Поле в котором хранится ссылка на родителя */\n\texpandParentKey: PropTypes.string,\n};\n\nSelect.defaultProps = {\n\tonChangeKeys: noop,\n\t// onChangeObjects: noop,\n\tplaceholder: 'Выбрать',\n\t// searchable: false,\n    size: 'middle',\n\twidthControl: 110,\n\twidthPopup: 400,\n\theightPopup: 600,\n    rowKey: 'id',\n\trowHeight: 30,\n\tzebraStyle: false,\n\n\trequestLoadDefault: undefined,\n\trequestLoadRows: undefined,\n\trequestLoadCount: undefined,\n\tsearchValue: '',\n\tsearchParamName: 'searchLine',\n\n\tnodeAssociated: true,\n\texpandColumnKey: undefined,\n\texpandDefaultAll: true,\n\texpandLazyLoad: false,\n\texpandParentKey: 'parentId',\n};\nconst mapDispatchToProps = (dispatch) =>\n\tbindActionCreators({ setDateStore: setDateStore}, dispatch);\n\nexport default connect(null, mapDispatchToProps)(Select);\n","import React, {forwardRef, useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport Table from '../Table/Table';\nimport { notification, Typography } from \"antd\";\nimport { notificationError } from \"../../utils/baseUtils\";\n\nconst AdvancedTable = forwardRef((props, ref) => {\n\tconst [config, setConfig] = useState({});\n\n\tconst {\n\t\tconfigData,\n        customColumnProps,\n\t\tdefaultFilter,\n\t\texpandColumnKey,\n\t\texpandLazyLoad,\n\t\texpandParentKey,\n\t\tpageSize,\n\t\trowKey,\n\t\trequestLoadConfig,\n\t} = props;\n\n\tuseEffect(() => {\n        let cleanupFunction = false;\n        const loadData = async () => {\n            if (requestLoadConfig) {\n                // console.log('requestLoadConfig => ', typeof requestLoadConfig);\n                // console.log('requestLoadRows => ', typeof props.requestLoadRows);\n                requestLoadConfig()\n                    .then((response) => {\n                        // let result = response.data;\n                        // console.log('requestLoadConfig -> ', response.data);\n                        if(!cleanupFunction)\n                            setConfig(response.data);\n                    })\n                    .catch(error => notificationError(error, 'Ошибка получения конфигурации') );\n            } else {\n                if(!cleanupFunction)\n                    setConfig(configData);\n            }\n        };\n        loadData();\n        return () => cleanupFunction = true;\n\t}, []);\n\n\tconst columnsByConfig = () =>\n\t\tconfig &&\n\t\tconfig.fields &&\n\t\tconfig.fields.map((item) => {\n\n\t\t\tconst colProps =\n                customColumnProps &&\n                customColumnProps.find(\n                    (render) =>\n                        render.name === item.name || render.name === item.alias\n                );\n\t\t\treturn {\n\t\t\t\tkey: item.name,\n\t\t\t\ttitle: item.header ? item.header : item.name,\n\t\t\t\tdataKey: item.alias ? item.alias : item.name,\n\t\t\t\talign: item.align,\n\t\t\t\twidth: item.width,\n\t\t\t\tresizable: item.resizable,\n\t\t\t\tsortable: item.sortable,\n\t\t\t\thidden: !item.visible,\n\t\t\t\t// cellRenderer: cellR && cellR.cellRender,\n                ...colProps,\n                cellRenderer: (object) => {\n\t\t\t\t\tif (colProps && colProps.cellRenderer)\n\t\t\t\t\t\treturn <colProps.cellRenderer {...object}/>\n\t\t\t\t\t// return colProps.cellRenderer(object) ? colProps.cellRenderer(object) : '---';\n\t\t\t\t\telse\n\t\t\t\t\t\treturn object.cellData\n\t\t\t\t\t\t\t? <Typography.Text ellipsis={true} style={{width: '100%'}} className={'rt-table-cell'}>{object.cellData}</Typography.Text>\n\t\t\t\t\t\t\t: <Typography.Text ellipsis={true} style={{width: '100%'}} className={'rt-table-cell'}>---</Typography.Text> ;\n\t\t\t\t\t// return object.cellData ? object.cellData : '---';\n                },\n\t\t\t};\n\t\t});\n\n\tconst getDefaultFilter = () => {\n\t\tif (config && config.hierarchical && config.hierarchyLazyLoad) {\n\t\t\tconst parentKey = config.hierarchyField\n\t\t\t\t? config.hierarchyField.split('/')[1]\n\t\t\t\t: expandParentKey;\n\t\t\treturn {...defaultFilter, [parentKey]: null};\n\t\t} else return defaultFilter;\n\t};\n\n\tif (config && config.fields) {\n\t\t// console.log('AdvancedTable render table -> ', config);\n\t\treturn (\n\t\t\t<Table\n\t\t\t\t{...props}\n\t\t\t\tref={ref}\n\t\t\t\tcolumns={columnsByConfig()}\n\t\t\t\tdefaultFilter={getDefaultFilter()}\n\t\t\t\trowKey={\n\t\t\t\t\tconfig && config.hierarchical && config.hierarchyField\n\t\t\t\t\t\t? config.hierarchyField.split('/')[0]\n\t\t\t\t\t\t: rowKey\n\t\t\t\t}\n\t\t\t\texpandParentKey={\n\t\t\t\t\tconfig && config.hierarchical && config.hierarchyField\n\t\t\t\t\t\t? config.hierarchyField.split('/')[1]\n\t\t\t\t\t\t: expandParentKey\n\t\t\t\t}\n\t\t\t\texpandColumnKey={\n\t\t\t\t\tconfig && config.hierarchical && config.hierarchyView\n\t\t\t\t\t\t? config.hierarchyView\n\t\t\t\t\t\t: expandColumnKey\n\t\t\t\t}\n\t\t\t\texpandLazyLoad={\n\t\t\t\t\tconfig && config.hierarchical && config.hierarchyLazyLoad\n\t\t\t\t\t\t? config.hierarchyLazyLoad\n\t\t\t\t\t\t: expandLazyLoad\n\t\t\t\t}\n\t\t\t\tpageSize={config && config.hierarchical ? 1 : pageSize}\n\t\t\t/>\n\t\t);\n\t} else return null;\n});\n\nAdvancedTable.propTypes = {\n\t/** Функция запроса на получение конфига для таблицы */\n\trequestLoadConfig: PropTypes.func,\n\n\t/** Конфигурация внешнего вида таблицы */\n\tconfigData: PropTypes.shape({\n\t\thierarchical: PropTypes.bool,\n\t\thierarchyField: PropTypes.string,\n\t\thierarchyView: PropTypes.string,\n\t\thierarchyLazyLoad: PropTypes.bool,\n\t\tfields: PropTypes.arrayOf(\n\t\t\tPropTypes.shape({\n\t\t\t\tname: PropTypes.string,\n\t\t\t\talias: PropTypes.string,\n\t\t\t\theader: PropTypes.string,\n\t\t\t\tvisible: PropTypes.bool,\n\t\t\t\tresizable: PropTypes.bool,\n\t\t\t\tsortable: PropTypes.bool,\n\t\t\t\talign: PropTypes.oneOf(['left', 'center', 'right']),\n\t\t\t\twidth: PropTypes.number,\n\t\t\t})\n\t\t),\n\t}),\n\n\t/** Дополнительные пропсы для колонок */\n    customColumnProps: PropTypes.arrayOf(PropTypes.object),\n};\n\nAdvancedTable.defaultProps = {};\n\nexport default AdvancedTable;\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport FormItems from \"./FormItems\";\nimport { Form as AntForm, notification } from \"antd\";\nimport { getObjectExcludedProps, noop, notificationError } from \"../../utils/baseUtils\";\nimport { rtPrefix } from \"../../utils/variables\";\n\nconst excludeProps = [\"noPadding\", \"scrollable\", \"header\", \"body\", \"footer\", \"loadInitData\", \"autoSaveForm\", \"requestSaveForm\", \"methodSaveForm\", \"processBeforeSaveForm\"];\n\n\nconst Form = (props) => {\n    const { loadInitData, header, body, footer,\n        autoSaveForm, requestSaveForm, methodSaveForm, processBeforeSaveForm } = props;\n\n    /** Состояние первоначалной настройки компонента*/\n    const [loaded, setLoaded] = useState(false);\n    const [antFormProps, setAntFormProps] = useState({});\n    const [initFormData, setInitFormData] = useState({});\n\n    useEffect(() => {\n        if (!loaded) {\n            if (loadInitData !== noop)\n                loadInitData(_setInitFormData);\n            else\n                setLoaded(true);\n        }\n    }, [loaded]);\n\n    useEffect(() => {\n        setAntFormProps(getObjectExcludedProps(props, excludeProps));\n        // console.log('antFormProps props => ', getObjectExcludedProps(props, excludeProps));\n    }, [props]);\n\n\n    const _setInitFormData = (data) => {\n        // console.log(\"Form loaded init data => \", data);\n        setInitFormData(data);\n        setLoaded(true);\n    };\n\n\n    let antForm;\n    if (props && props.form) {\n        antForm = props.form;\n    } else {\n        const [form] = AntForm.useForm();\n        antForm = form;\n    }\n\n    const getBodyCls = () => {\n        let cls = [`${rtPrefix}-form-body`];\n        props.noPadding && cls.push(`${rtPrefix}-form-body-no-padding`);\n        props.scrollable && cls.push(`${rtPrefix}-form-body-scrollable`);\n        return cls.join(\" \");\n    };\n\n    const onFinish = (rawValues) => {\n        const values = processBeforeSaveForm ? processBeforeSaveForm(rawValues) : rawValues;\n        console.log(`Success form [${props.name ? props.name : 'no name form'}]: `, values);\n        if (autoSaveForm && requestSaveForm) {\n            const saveObject = {\n                ...initFormData,\n                ...values,\n                // dateStart: getISO(values['dateStart'])\n            };\n            requestSaveForm({\n                method: methodSaveForm,\n                data: saveObject\n            })\n                .then(response => {\n                    notification.success({\n                        message: \"Сохранение прошло успешно\"\n                    });\n                    if (props.onFinish)\n                        props.onFinish(values);\n                })\n                .catch(error => notificationError(error, 'Ошибка при сохранении') );\n        } else if (props.onFinish)\n            props.onFinish(values);\n    };\n\n    const onFinishFailed = errorInfo => {\n        console.error(\"Failed:\", errorInfo);\n        props.onFinishFailed && props.onFinishFailed(errorInfo);\n    };\n\n    return (\n        <React.Fragment>\n            {loaded ?\n                <AntForm\n                    form={antForm}\n                    {...antFormProps}\n                    className={`${antFormProps.className} ${rtPrefix}-form`}\n                    style={{ ...antFormProps.style, width: '100%', height: '100%' }}\n                    initialValues={{ ...antFormProps.initialValues, ...initFormData }}\n                    onFinish={onFinish}\n                    onFinishFailed={onFinishFailed}\n                >\n                    {header ? <div className={`${rtPrefix}-form-header`}><FormItems items={header}/></div> : null}\n                    <div className={getBodyCls()}><FormItems items={body}/></div>\n                    {footer ? <div className={`${rtPrefix}-form-footer`}><FormItems items={footer}/></div> : null}\n                </AntForm>\n                : null}\n        </React.Fragment>\n    );\n};\n\nForm.propTypes = {\n\n    /** Не делать отступы у формы от краев блока */\n    noPadding: PropTypes.bool,\n\n    /** scrollable\n     */\n    scrollable: PropTypes.bool,\n\n    /** Массив объектов для шапки формы. Как правило только заголовок. */\n    header: PropTypes.arrayOf(PropTypes.object),\n\n    /** Массив объектов для тела формы */\n    body: PropTypes.arrayOf(PropTypes.object).isRequired,\n\n    /** Массив объектов для подвала формы. Как правило только кнопки \"Сохранить\" и \"Отмена\" */\n    footer: PropTypes.arrayOf(PropTypes.object),\n\n    /** Ссылка на функцию загрузки значений по умолчанию\n     * (callBack) => callBack(initObject) */\n    loadInitData: PropTypes.func,\n\n    /** Производить ли автоматическое сохранение по параметрам requestSaveForm и methodSaveForm */\n    autoSaveForm: PropTypes.bool,\n\n    /** Запрос для автоматического сохранения формы */\n    requestSaveForm: PropTypes.func,\n\n    /** HTTP Метод, передаваемый в запрос сохранения */\n    methodSaveForm: PropTypes.string,\n\n    /** Функция обработки перед сохранением формы */\n    processBeforeSaveForm: PropTypes.func,\n};\n\nForm.defaultProps = {\n    noPadding: false,\n    scrollable: false,\n    loadInitData: noop,\n    autoSaveForm: true\n};\n\nexport default Form;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {getObjectExcludedProps} from '../../utils/baseUtils';\nimport Form from './Form';\nimport {Modal} from 'antd';\n\nconst excludeProps = ['type', 'initialValues', 'form'];\n\nconst FormModal = props => {\n\n    const {\n        modal,\n        selectedRow,\n        visible,\n        setVisible,\n        saveRow,\n    } = props;\n\n    const getDefaultFooterProps = () => {\n\n        let okText = '';\n        let cancelText = '';\n        let modalTitle = '';\n\n        switch (modal.type) {\n            case 'addOnServer':\n            case 'addGroupOnServer':\n                okText = 'Сохранить';\n                cancelText = 'Отмена';\n                modalTitle = 'Сохранить на сервере';\n                break;\n            case 'addOnLocal':\n            case 'addGroupOnLocal':\n                okText = 'Сохранить';\n                cancelText = 'Отмена';\n                modalTitle = 'Сохранить локально';\n                break;\n            case 'editOnServer':\n            case 'editGroupOnServer':\n                okText = 'Сохранить';\n                cancelText = 'Отмена';\n                modalTitle = 'Измененить на сервере';\n                break;\n            case 'editOnLocal':\n            case 'editGroupOnLocal':\n                okText = 'Сохранить';\n                cancelText = 'Отмена';\n                modalTitle = 'Изменение локально';\n                break;\n            case 'select':\n                okText = 'Добавить';\n                cancelText = 'Отмена';\n                modalTitle = 'Выбор';\n                break;\n            case 'viewGroup':\n            case 'viewObject':\n                okText = 'Закрыть';\n                modalTitle = 'Просмотр';\n                break;\n            default: break;\n        }\n\n        if(modal.okText)\n            okText = modal.okText;\n\n        if(modal.cancelText)\n            cancelText = modal.cancelText;\n\n        if(modal.title)\n            modalTitle = modal.title;\n\n        return {okText, cancelText, title: modalTitle, okType: 'primary'}\n    };\n\n    let modalProps = { ...getDefaultFooterProps(), ...getObjectExcludedProps(modal, excludeProps) };\n\n    const onFinish = values => {\n        // console.log('FormModal Success:', values, selectedRow);\n        let saveObj = {};\n        if(modal.type.startsWith('add'))\n            saveObj = {...values};\n        else\n            saveObj = {...selectedRow, ...values};\n\n        saveRow({type: modal.type, row: saveObj, requestSaveRow: modal.requestSaveRow});\n\n        if (modalProps.onOk) modalProps.onOk(values);\n        if (modalProps.onFinish) modalProps.onFinish(values);\n    };\n\n    const onFinishFailed = errorInfo => {\n        // console.log('FormModal Failed:', errorInfo);\n        console.error(\"FormModal fields failed: \", errorInfo);\n        props.onFinishFailed && props.onFinishFailed(errorInfo);\n    };\n\n    const _onCancelHandler = (e) => {\n        // setVisibleModals({ ...visibleModals, [modal.type]: false });\n        // form.resetFields();\n        setVisible(modal.type, false);\n        if (modalProps.onCancel) modalProps.onCancel(e)\n    };\n\n    const _onLoadInitData = (callBack) => {\n        // console.log(\"Modal => loadInitData\", selectedRow);\n        formConfig.loadInitData(callBack, selectedRow)\n    }\n\n    const defaultFooter = [\n        {\n            componentType: 'Item',\n            child: {\n                componentType: 'Button',\n                label: modalProps.cancelText,\n                className: 'mr-8',\n                onClick: _onCancelHandler,\n                ...modalProps.cancelButtonProps\n            }\n        },\n        {\n            componentType: 'Item',\n            child: {\n                componentType: 'Button',\n                label: modalProps.okText,\n                type: modalProps.okType,\n                htmlType: 'submit',\n                ...modalProps.okButtonProps\n            }\n        }\n    ];\n\n    const formConfig =  {\n        footer: defaultFooter,\n        ...modal.form\n    };\n    return (\n        <Modal\n            {...modalProps}\n            centered\n            destroyOnClose\n            visible={visible}\n            onCancel={_onCancelHandler}\n            bodyStyle={{padding: 0, ...modalProps.bodyStyle}}\n            footer={null}\n        >\n            <Form\n                {...formConfig}\n                onFinish={onFinish}\n                onFinishFailed={onFinishFailed}\n                loadInitData={_onLoadInitData}\n            />\n        </Modal>\n    )\n};\n\nFormModal.propTypes = {\n    /** Объект модального окна */\n    modal: PropTypes.object,\n\n    /** Выделенная строка таблицы */\n    selectedRow: PropTypes.object,\n\n    /** Состояние видимости модалки */\n    visible: PropTypes.bool,\n\n    /** Задание состояния видимости модалки */\n    setVisible: PropTypes.func,\n\n    /** CallBack функция для сохранения данных */\n    saveRow: PropTypes.func,\n};\n\nexport default FormModal;\n","import React, {forwardRef, useState, useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport SortOrder from 'react-base-table/lib/SortOrder';\nimport AdvancedTable from '../AdvancedTable/AdvancedTable';\nimport { generateUUID, getObjectExcludedProps, noop, notificationError } from \"../../utils/baseUtils\";\nimport FormModal from './FormModal';\nimport { notification as antNotification, notification } from \"antd\";\nimport { rtPrefix } from \"../../utils/variables\";\nimport { empty, overlay } from \"../Table/defaultSettings\";\n\n\nconst excludeProps = ['onChange', 'defaultValue', 'modals', 'events', 'history'];\n\nconst FormTable = forwardRef((props, ref) => {\n\n    /** Состояние первоначалной настройки компонента*/\n    const [loading, setLoading] = useState(false);\n\n    /** Состояние отображения модалок таблицы */\n    const [visibleModals, setVisibleModals] = useState({\n        addOnServer: false,\n        editOnServer: false,\n        addOnLocal: false,\n        editOnLocal: false,\n        addGroupOnServer: false,\n        editGroupOnServer: false,\n        addGroupOnLocal: false,\n        editGroupOnLocal: false,\n        select: false,\n        viewGroup: false,\n        viewObject: false});\n    const [tableRows, setTableRows] = useState([]);\n    const [tableSelectedRowKeys, setTableSelectedRowKeys] = useState([]);\n    const [tableSelectedRow, setTableSelectedRow] = useState({});\n\n    /** Ссылка на объект таблицы */\n    const [tableRef, setTableRef] = useState({});\n    const _setTableRef = (_ref) => {\n        setTableRef(_ref);\n        ref && ref(_ref)\n    };\n\n    const {\n        rowKey,\n        rowKeyType,\n        customFields,\n        modals,\n        isGroupKey,\n        history,\n\n        componentType,\n        name,\n\n        // Form.Item props\n        value,\n\n        // Requests\n        requestDeleteRow,\n\n        dataDeleteRow\n    } = props;\n    const cmdProps = props.commandPanelProps;\n\n    // let advancedTableProps = getObjectExcludedProps(props, excludeProps);\n\n    /** Аналог componentDidMounted */\n    useEffect(() => {\n        // Если таблица локальная, то пробуем загрузить исходные данные\n        if(!loading && props.type === 'localSide') {\n            let cleanupFunction = false;\n            setLoading(true);\n            const loadData = async () => {\n                if (!loading && props.requestLoadRows) {\n                    props.requestLoadRows({params: {page: 0, size: 1}, data: {}})\n                        .then((response) => {\n                            // console.log('FormTable -> requestLoadRows -> response', response);\n                            // console.log('FormTable -> requestLoadRows -> value', value);\n                            if (!cleanupFunction)\n                                _addRowsToLocalTable(response.data, value);\n                        })\n                        .catch(error => notificationError(error, 'Ошибка загрузки данных') );\n                }\n                // console.log('FormTable -> setMounted ', advancedTableProps.type);\n                setLoading(false);\n            };\n            loadData();\n            return () => cleanupFunction = true;\n        }\n    }, [props.type]);\n\n    useEffect(() => {\n        if(props.selectable) {\n            console.log(\"FormTable => useEffect => value: \", value);\n            if(value && value.length > 0)\n                setTableSelectedRowKeys(value.map(item => item[rowKey]));\n            else\n                setTableSelectedRowKeys([]);\n\n        }\n    }, [value]);\n\n    /** Получить список кнопок для Command Panel */\n    const getEvents = () => {\n        return (cmdProps && cmdProps.systemBtnProps && Object.keys(cmdProps.systemBtnProps)) || [];\n    };\n\n    /** Получить рендер модалок */\n    const getModals = () => {\n        return modals.map((modal, index) => {\n            return (\n                <FormModal\n                    key={index}\n                    modal={modal}\n                    selectedRow={tableSelectedRow}\n                    visible={visibleModals[modal.type]}\n                    setVisible={(type, value) => setVisibleModals({ ...visibleModals, [type]: value })}\n                    saveRow={_onSaveRow}\n                />\n            )\n\n        })\n    };\n\n    /** Проверка существования кнопки в Command Panel */\n    const isExistCmdBtn = (btnType) => (cmdProps && cmdProps.systemBtnProps && cmdProps.systemBtnProps[btnType]);\n\n    /** Проверка соответствия типа кнопки и события ? (params) === (props) */\n    const equalsActionTypeCmdBtn = (btnType, actionType) => {\n        if(isExistCmdBtn(btnType)) {\n            if(btnType === 'edit') {\n                const aTypes = actionType.split('/');\n                if(aTypes[0] === 'g') {\n                    return !!(cmdProps.systemBtnProps[btnType].actionType\n                        && cmdProps.systemBtnProps[btnType].actionType.length === 2\n                        && cmdProps.systemBtnProps[btnType].actionType[1] === aTypes[1]);\n                }\n                else if (aTypes[0] === 'i') {\n                    return !!(cmdProps.systemBtnProps[btnType].actionType\n                        && cmdProps.systemBtnProps[btnType].actionType.length === 2\n                        && cmdProps.systemBtnProps[btnType].actionType[0] === aTypes[1]);\n                }\n            } else {\n                return !!(cmdProps.systemBtnProps[btnType].actionType\n                    && cmdProps.systemBtnProps[btnType].actionType === actionType);\n            }\n        }\n        return false;\n    };\n\n    /** Command Panel Events */\n    /** Добавить */\n    const _onClickAddHandler = () => {\n        if(equalsActionTypeCmdBtn('add', 'modal')) {\n            // console.log(\"FormTable => _onClickAddHandler => modal\");\n            if (props.type !== 'localSide') {\n                setVisibleModals({...visibleModals, addOnServer: true});\n            } else {\n                if (modals && (modals.find(modal => modal.type === 'select') !== undefined)) {\n                    setVisibleModals({...visibleModals, select: true});\n                    // console.log(\"FormTable => _onClickAddHandler => select\", modals.find(modal => modal.type === 'select'));\n                } else {\n                    setVisibleModals({...visibleModals, addOnLocal: true});\n                    // console.log(\"FormTable => _onClickAddHandler => addOnLocal\"); location.pathname\n                }\n            }\n        } else if (equalsActionTypeCmdBtn('add', 'page')) {\n            history.push(`${history.location.pathname}/new`);\n        }\n    };\n\n    /** Добавить копированием */\n    const _onClickAddAsCopyHandler = (event, row) => {\n        _addRowToLocalTable(row);\n    };\n\n    /** Добавить группу */\n    const _onClickAddGroupHandler = () => {\n        if(equalsActionTypeCmdBtn('addGroup', 'modal')) {\n            // console.log(\"FormTable => _onClickAddGroupHandler => modal\");\n            if (props.type !== 'localSide')\n                setVisibleModals({...visibleModals, addGroupOnServer: true});\n            else\n                setVisibleModals({...visibleModals, addGroupOnLocal: true});\n        } else if (equalsActionTypeCmdBtn('addGroup', 'page')) {\n            // console.log(\"FormTable => _onClickAddGroupHandler => page\");\n            history.push(`${history.location.pathname}/newGroup`);\n        }\n    };\n\n    /** Изменить */\n    const _onClickEditHandler = (event, {rowData}) => {\n        // console.log(\"FormTable -> _onClickEditHandler -> row \", rowData, props.type);\n        if (rowData[isGroupKey]) {\n            if (equalsActionTypeCmdBtn('edit', 'g/modal')) {\n                // console.log(\"FormTable => _onClickEditHandler => g/modal\");\n                if (props.type !== 'localSide')\n                    setVisibleModals({...visibleModals, editGroupOnServer: true});\n                else\n                    setVisibleModals({...visibleModals, editGroupOnLocal: true});\n            } else if (equalsActionTypeCmdBtn('edit', 'g/page')) {\n                // console.log(\"FormTable => _onClickEditHandler => g/page\");\n                history.push(`${history.location.pathname}/${rowData[rowKey]}`);\n            }\n        } else {\n            if (equalsActionTypeCmdBtn('edit', 'i/modal')) {\n                // console.log(\"FormTable => _onClickEditHandler => i/modal\");\n                if (props.type !== 'localSide')\n                    setVisibleModals({...visibleModals, editOnServer: true});\n                else\n                    setVisibleModals({...visibleModals, editOnLocal: true});\n            } else if (equalsActionTypeCmdBtn('edit', 'i/page')) {\n                // console.log(\"FormTable => _onClickEditHandler => i/page\");\n                history.push(`${history.location.pathname}/${rowData[rowKey]}`);\n            }\n        }\n    };\n\n    /** Удалить */\n    const _onClickDelete = (event, _selectedRowKeys) => {\n        if(props.type === 'localSide') {\n            const _rows = tableRows.filter(\n                (item) => !_selectedRowKeys.includes(item[rowKey])\n            );\n            setTableRows(_rows);\n            _onChange(_rows);\n        } else {\n            if(_selectedRowKeys && _selectedRowKeys.length > 0 && requestDeleteRow){\n                const deleteData = _selectedRowKeys.map(item => { return {[rowKey]: item, ...dataDeleteRow} } );\n                requestDeleteRow({data: {deleteData: deleteData}})\n                    .then((response) => {\n                        antNotification.success({message: 'Успешное удаленение'});\n                        tableRef && tableRef.reloadData({});\n\n                    })\n                    .catch(error => {\n                        notificationError(error, 'Ошибка удаления записи');\n                        tableRef && tableRef.reloadData({});\n                    });\n            }\n        }\n        cmdProps.onClickDelete && cmdProps.onClickDelete(event, _selectedRowKeys);\n    };\n\n    /** Переместить вверх / вниз */\n    const _onClickUpHandler = (event, row, rows) => {\n        _onChange(rows);\n        cmdProps.onClickUp && cmdProps.onClickUp(event, row, rows);\n    };\n\n    const _onClickDownHandler = (event, row, rows) => {\n        _onChange(rows);\n        cmdProps.onClickDown && cmdProps.onClickDown(event, row, rows);\n    };\n\n    /** Modal Events */\n    const _onSaveRow = ({type, row, requestSaveRow}) => {\n        // console.log(\"FormTable -> _saveRow -> row \", row);\n        if(type === 'select') {\n            // Получить массив строк из таблицы в модальной форме\n            let selectRows = row[name];\n            // console.log(\"FormTable -> _onSaveRow -> row [0]\", row);\n            // console.log(\"FormTable -> _onSaveRow -> saveRows [0]\", selectRows);\n\n            // Фильтрация выбранных строк, оставить только те которых еще нет в таблице\n            let saveRows = selectRows.filter((sRow) =>\n                tableRows.findIndex((tRow) => tRow[rowKey] === sRow[rowKey]) === -1\n            );\n            // console.log(\"FormTable -> _onSaveRow -> saveRows [1]\", saveRows);\n            if (customFields)\n                // Фильтрация по пользовательским параметрам\n                saveRows = saveRows.filter((sRow) => {\n                    let isValid = true;\n                    customFields.forEach((field) => {\n                        // Валидация по пользовательской логике функции validate\n                        if(field.validate)\n                            isValid = field.validate(sRow, tableRows);\n\n                        // Создание или переобразование по пользовательской логике функции value\n                        if(field.value)\n                            sRow[field.name] = field.value(sRow, tableRows);\n                    });\n                    if(isValid)\n                        return sRow;\n                });\n            setVisibleModals({ ...visibleModals, [type]: false });\n            notification.success({\n                message: `Добавлено ${saveRows.length} строк`\n            });\n            // console.log(\"FormTable -> _onSaveRow -> saveRows [2]\", saveRows);\n            _addRowsToLocalTable([...tableRows, ...saveRows]);\n        }\n        else {\n            let saveRow = {...row};\n            if(type.indexOf('Group') !== -1)\n                saveRow[isGroupKey] = true;\n            else\n                saveRow[isGroupKey] = false;\n            if (customFields)\n                customFields.forEach((field) => saveRow[field.name] = field.value(saveRow, tableRows));\n            switch (type) {\n                case 'addOnServer':\n                case 'editOnServer':\n                case 'addGroupOnServer':\n                case 'editGroupOnServer':\n                    _addRowToServerTable({requestSaveRow, type, saveRow});\n                    break;\n                case 'addOnLocal':\n                case 'addGroupOnLocal':\n                    setVisibleModals({ ...visibleModals, [type]: false });\n                    _addRowToLocalTable(saveRow);\n                    break;\n                case 'editOnLocal':\n                case 'editGroupOnLocal':\n                    setVisibleModals({ ...visibleModals, [type]: false });\n                    _editRowToLocalTable(saveRow);\n                    break;\n\n                //            addGroupOnServer: false,\n                //         editGroupOnServer: false,\n                //         addGroupOnLocal: false,\n                //         editGroupOnLocal: false,\n                // case 'select':\n                case 'viewGroup':\n                case 'viewObject':\n                    setVisibleModals({ ...visibleModals, [type]: false });\n                    break;\n            }\n            // console.log(\"Modal Events => type: \", type, itemName, componentType, saveRow);\n        }\n\n    };\n\n    const _addRowToLocalTable = (row) => {\n        let saveObj = {...row};\n        if(rowKeyType === 'uuid')\n            saveObj[rowKey] = generateUUID();\n\n        // console.log('_addRowToLocalTable', tableRows);\n        _addRowsToLocalTable([...tableRows, saveObj]);\n    };\n\n    const _editRowToLocalTable = (row) => {\n        let arr = [...tableRows];\n        const rowIndex = arr.findIndex(item => item[rowKey] === row[rowKey]);\n        arr.splice(rowIndex, 1, row);\n        setTableRows(arr);\n        setTableSelectedRow(row);\n        _onChange(arr);\n    };\n\n    const _addRowsToLocalTable = (rows, keys) => {\n        // console.log('FormTable -> _addRowsToLocalTable -> rows', rows, keys);\n        setTableRows(rows);\n        if(props.selectable)\n            _onChange(keys);\n        else\n            _onChange(rows);\n    };\n\n    const _addRowToServerTable = ({requestSaveRow, type, saveRow}) => {\n        if (requestSaveRow\n            && ['addOnServer', 'editOnServer', 'addGroupOnServer', 'editGroupOnServer'].includes(type)\n        ) {\n            const method = (type === 'addOnServer' || type === 'addGroupOnServer') ? 'POST' : 'PUT';\n            // console.log(\"Modal Events => type: \", type, itemName, componentType, saveRow);\n            requestSaveRow({\n                method,\n                data: saveRow,\n            })\n                .then(response => {\n                    notification.success({\n                        message: 'Сохранение прошло успешно'\n                    });\n                    setVisibleModals({ ...visibleModals, [type]: false });\n                    tableRef && tableRef.reloadData({ filter: props.defaultFilter});\n                    // ref && ref.current && ref.current.reloadData({ filter: props.defaultFilter});\n                    // console.log('_addRowToServerTable tableRef =>', tableRef);\n                })\n                .catch(error => notificationError(error, 'Ошибка при сохранении') );\n        }\n    };\n\n    const _onRowClick = ({selected, rowData, rowIndex, rowKey}) => {\n        if(!props.selectable) {\n            setTableSelectedRow(rowData);\n            setTableSelectedRowKeys([rowKey]);\n            if(componentType === 'SelectTable')\n                _onChange([rowData]);\n        }\n        props.onRowClick && props.onRowClick({selected, rowData, rowIndex, rowKey});\n    };\n\n    const _onRowDoubleClick = ({rowData, rowIndex, rowKey}) => {\n        if (rowData[isGroupKey]) {\n            setVisibleModals({...visibleModals, viewGroup: true});\n        } else {\n            setVisibleModals({...visibleModals, viewObject: true});\n        }\n        props.onRowDoubleClick && props.onRowDoubleClick({rowData, rowIndex, rowKey});\n    };\n\n    const _onSelectedRowsChange = (keys, rows) => {\n        // console.log(\"_onSelectedRowsChange\", keys, rows);\n        if(props.selectable) {\n            setTableSelectedRow(rows[0]);\n            setTableSelectedRowKeys(keys);\n            _onChange(rows);\n        }\n    };\n\n    const _onChange = (rows) => {\n        if(rows !== undefined)\n            props.onChange(rows);\n        else\n            props.onChange(tableRows);\n    };\n\n    const getTableCls = () => {\n        let cls = [`${rtPrefix}-form-table`];\n        if (props.className)\n            cls.push(props.className);\n        return cls.join(' ');\n    };\n\n    return (\n        <div className={getTableCls()} style={props.style} >\n            <AdvancedTable\n                ref={_setTableRef}\n                {...getObjectExcludedProps(props, excludeProps)}\n                rows={tableRows}\n                setRows={setTableRows}\n                // selectedRowKeys={tableSelectedRow[rowKey] ? [tableSelectedRow[rowKey]] : []}\n                selectedRowKeys={tableSelectedRowKeys}\n                onRowClick={_onRowClick}\n                onRowDoubleClick={_onRowDoubleClick}\n                onSelectedRowsChange={_onSelectedRowsChange}\n                autoDeleteRows={false}\n                commandPanelProps={{\n                    ...props.commandPanelProps,\n                    showElements: getEvents(),// getShowElements(),\n                    onClickAdd: _onClickAddHandler,\n                    onClickAddAsCopy: _onClickAddAsCopyHandler,\n                    onClickAddGroup: _onClickAddGroupHandler,\n                    onClickEdit: _onClickEditHandler,\n                    onClickDelete: _onClickDelete,\n                    onClickDown: _onClickDownHandler,\n                    onClickUp: _onClickUpHandler,\n                }}\n                filterPanelProps={{\n                    ...props.filterPanelProps,\n                    // onApplyFilter: (filter) => console.log('filter', filter)\n                }}\n            />\n            {modals && getModals()}\n        </div>\n    );\n});\n\nFormTable.propTypes = {\n    /** Объект со свойствами Command Panel */\n    commandPanelProps: PropTypes.object,\n\n    /** Объект со свойствами Filter Panel */\n    filterPanelProps: PropTypes.object,\n\n    /**\n     * ПРОПСЫ ЗАДАНИЯ ЗНАЧЕНИЙ ПО УМОЛЧАНИЮ\n     * */\n\n    /** Строки по умолчанию */\n    defaultRows: PropTypes.arrayOf(PropTypes.object),\n\n    /** Ключи выделенных по умолчанию строк */\n    defaultSelectedRowKeys: PropTypes.arrayOf(\n        PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    ),\n\n    /** Значение строки поиска по умолчанию строк */\n    defaultSearchValue: PropTypes.string,\n\n    /** Объект фильтрации по умолчанию */\n    defaultFilter: PropTypes.object,\n\n    /** Сортировка по умолчанию */\n    defaultSortBy: PropTypes.shape({\n        key: PropTypes.string,\n        order: PropTypes.oneOf([SortOrder.ASC, SortOrder.DESC]),\n    }),\n\n    /**\n     * ПРОПРЫ ДЛЯ ВНЕШНЕГО КОНТРОЛЯ ТАБЛИЦЫ\n     * */\n\n    /** Значение строки поиска */\n    searchValue: PropTypes.string,\n\n    /** Фильтр */\n    filter: PropTypes.object,\n\n    /** Объект сортировки ({ key: 'string', order: 'asc' }).\n     * key - поле по которому сотрировать,\n     * order - направление сортировки (\"asc\", \"desc\")\n     * */\n    sortBy: PropTypes.shape({\n        key: PropTypes.string,\n        order: PropTypes.oneOf([SortOrder.ASC, SortOrder.DESC]),\n    }),\n\n    /**\n     * BASE PROPS\n     * */\n\n    /** Автоудаление строк из таблицы по кнопке в командной панели*/\n    autoDeleteRows: PropTypes.bool,\n\n    /** Поле для уникальной идентификации строки */\n    rowKey: PropTypes.string,\n\n    /** Тип поля для уникальной идентификации строки */\n    rowKeyType: PropTypes.oneOf(['uuid', 'number']),\n\n    /**\n     * VIEW PROPS\n     * */\n\n    /** Вывод когда нет данных. JSX для заглушки \"Нет данных\".  */\n    empty: PropTypes.element,\n\n    /** Отображение загрузки данных. JSX для загрузки данных. */\n    overlay: PropTypes.element,\n\n    /** Фиксированная ширина столбцов. Появится боковой скрол */\n    fixWidthColumn: PropTypes.bool,\n\n    /** Высота подвала */\n    footerHeight: PropTypes.number,\n\n    /** Отображать ли подвал */\n    footerShow: PropTypes.bool,\n\n    /** Названия футтера */\n    footerTitles: PropTypes.shape({\n        selectedRows: PropTypes.string,\n        loadedRows: PropTypes.string,\n        totalRows: PropTypes.string,\n    }),\n\n    /** Высота заголовка таблицы */\n    headerHeight: PropTypes.number,\n\n    /** Высота строки таблицы */\n    rowHeight: PropTypes.number,\n\n    /** Custom row renderer\n     * Параметры - ({ isScrolling, cells, columns, rowData, rowIndex, depth }) */\n    rowRenderer: PropTypes.oneOfType([PropTypes.func, PropTypes.element]),\n\n    /** Строки будут в зебро-стиле */\n    zebraStyle: PropTypes.bool,\n\n    /**\n     * LOAD DATA PROPS\n     * */\n\n    /** Порог в пикселях для вызова _onLoad.\n     * Кол-во пикселей от низа таблицы для срабатывания события загрузки (onEndReached) */\n    loadThreshold: PropTypes.number,\n\n    /** Размер страницы */\n    pageSize: PropTypes.number,\n\n    /** Функция запроса для загрузки строк (данных) */\n    requestLoadRows: PropTypes.func,\n\n    /** Функция запроса для загрузки строк (данных) */\n    requestLoadCount: PropTypes.func,\n\n    /** Имя параметра для поиска */\n    searchParamName: PropTypes.string,\n\n    /**\n     * SELECTABLE PROPS\n     * */\n\n    /** Таблица с возможностью выбора строки */\n    selectable: PropTypes.bool,\n\n    /**\n     * TREE PROPS\n     * */\n\n    /** Родительский узел и дочерние узлы связаны (Работает только при selectable) */\n    nodeAssociated: PropTypes.bool,\n\n    /** Ключ колонки по которой строить иерархию */\n    expandColumnKey: PropTypes.string,\n\n    /** Открыть по умолчанию вложенность до уровня N или 'All' */\n    expandDefaultAll: PropTypes.bool,\n\n    /** Загружать ноды иерархии по одной */\n    expandLazyLoad: PropTypes.bool,\n\n    /** Поле в котором хранится ссылка на родителя */\n    expandParentKey: PropTypes.string,\n\n    /**\n     * EVENTS\n     * */\n\n    /** Событие при клике на строку (только при selectable = false)\n     * Параметр - ({selected, rowData, rowIndex}) */\n    onRowClick: PropTypes.func,\n\n    /** Событие при двойном клике на строку.\n     * Параметр - ({rowData, rowIndex, rowKey}) */\n    onRowDoubleClick: PropTypes.func,\n\n    /** События при открытии / закрытии ноды\n     * Парметры - ({ expanded, rowData, rowIndex, rowKey }) */\n    onRowExpand: PropTypes.func,\n\n    /** Событие при выборе строки.\n     * Параметр - массив выбранных строе (только rowKey) */\n    onSelectedRowsChange: PropTypes.func,\n\n    /** События при открытии / закрытии ноды\n     * Парметры - (expandedRowKeys) - массив ключей открытых нод */\n    onExpandedRowsChange: PropTypes.func,\n\n    /** SELECTED PANEL */\n\n    /** Отображать ли панель выбранных элементов */\n    showSelection: PropTypes.bool,\n\n    /** Строка или функция для отображения элементов списка выбранных\n     * Строка - имя поля\n     * Функция - рендер строк.\n     * Параметры - ({ rowData, rowIndex }) */\n    rowRenderShowSelection: PropTypes.oneOfType([\n        PropTypes.func,\n        PropTypes.string,\n    ]),\n\n\n    /** Дополнительные пропсы для колонок */\n    customColumnProps: PropTypes.arrayOf(PropTypes.object),\n\n    /** Дополнительные поля и валидация в объекты таблицы */\n    customFields: PropTypes.arrayOf(PropTypes.object),\n\n    /** Модальные окна */\n    modals: PropTypes.arrayOf(PropTypes.object),\n\n    /** Событие об изменении объектов таблицы\n     * Параметр - (rows)*/\n    onChange: PropTypes.func,\n\n    /** implemented - только для (LocalTable + selectable) - Контроль значение из вне */\n    // value: PropTypes.arrayOf(PropTypes.object),\n\n    /** Not implemented - Задание значений по умолчанию */\n    defaultValue: PropTypes.arrayOf(PropTypes.object),\n\n    /** Классы стилей */\n    className: PropTypes.string,\n\n    /** Стили */\n    style: PropTypes.object,\n\n    /** Поле для идентификации группы */\n    isGroupKey: PropTypes.string,\n\n    /** Объект history для перемещения по путям */\n    history: PropTypes.object,\n\n    /** Функция запроса на получение конфига для таблицы */\n    requestLoadConfig: PropTypes.func,\n\n    /** Функция запроса на уделание данных */\n    requestDeleteRow: PropTypes.func,\n\n    /** Параметры объекта удаления */\n    dataDeleteRow: PropTypes.object,\n};\n\nFormTable.defaultProps = {\n    defaultRows: [],\n    defaultSelectedRowKeys: [],\n    defaultSearchValue: '',\n    defaultFilter: {},\n    defaultSortBy: {},\n\n    searchValue: '',\n    filter: {},\n    sortBy: {},\n\n    autoDeleteRows: true,\n    rowKey: 'id',\n\n    empty: empty,\n    overlay: overlay,\n    fixWidthColumn: false,\n    footerHeight: 30,\n    footerShow: false,\n    footerTitles: {\n        selectedRows: 'Выделено:',\n        loadedRows: 'Загружено записей:',\n        totalRows: 'Всего записей:',\n    },\n    headerHeight: 30,\n    rowHeight: 30,\n    zebraStyle: false,\n\n    loadThreshold: 300,\n    pageSize: 50,\n    requestLoadRows: noop,\n    requestLoadCount: noop,\n    searchParamName: 'searchLine',\n\n    selectable: false,\n\n    nodeAssociated: true,\n    expandColumnKey: undefined,\n    expandDefaultAll: true,\n    expandLazyLoad: false,\n    expandParentKey: 'parentId',\n\n    onRowClick: noop,\n    onRowDoubleClick: noop,\n    onRowExpand: noop,\n    onSelectedRowsChange: noop,\n    onExpandedRowsChange: noop,\n\n    showSelection: false,\n\n    rowKeyType: 'uuid',\n    onChange: noop,\n    isGroupKey: 'isGroup',\n};\n\nexport default FormTable;\n","import React, {useState, useEffect} from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport objectPath from \"object-path\";\nimport { setDateStore } from \"../../../redux/rtd.actions\";\nimport {getObjectExcludedProps} from '../../utils/baseUtils';\nimport moment from \"moment\";\nimport { Typography as AntTypography } from \"antd\";\nimport { getISO, toFormat } from \"../../utils/datesUtils\";\n\nexport const withStore = (Component, antFormItemProps) => {\n\n    const mapStateToProps = (store, ownProps) => {\n        const {subscribe} = ownProps;\n        if(subscribe){\n            const {name, path} = subscribe;\n            if(name && path)\n                return { [name]: objectPath.get(store, path) };\n        }\n\n        return {};\n    };\n    const mapDispatchToProps = (dispatch) =>\n        bindActionCreators({ setDateStore: setDateStore}, dispatch);\n\n    const defaultGetValueFromEvent = (valuePropName, event) => {\n        if (event && event.target && valuePropName in event.target) {\n            return event.target[valuePropName];\n        }\n        return event;\n    };\n\n    const defaultProps = {\n        trigger: 'onChange',\n        valuePropName: 'value',\n    };\n\n    const withStoreProps = { ...defaultProps, ...antFormItemProps };\n\n    return connect(mapStateToProps, mapDispatchToProps)( (props) => {\n\n        const {dispatchPath} = props;\n\n        const subscribe = props.subscribe ? props.subscribe : {};\n\n        const [subscribeProps, setSubscribeProps] = useState({});\n\n        const {trigger, getValueFromEvent, valuePropName} = withStoreProps;\n\n        const excludeProps = ['componentType', 'setDateStore', 'subscribe', subscribe.name, 'dispatchPath'];\n\n        const getValue = (...args) => {\n            let newValue;\n            if (getValueFromEvent) {\n                newValue = getValueFromEvent(...args);\n                // console.log(\"storeHOC => getValueFromEvent: \", newValue);\n            } else {\n                newValue = defaultGetValueFromEvent(valuePropName, ...args);\n                // console.log(\"storeHOC => defaultGetValueFromEvent: \", newValue);\n            }\n            return newValue;\n        };\n\n        /** Подписка на изменение props[subscribe.name] в сторе */\n        useEffect( () => {\n            if(subscribe.name) {\n                // console.log(\"storeHOC => subscribe: \", props[subscribe.name]);\n                subscribe.onChange && subscribe.onChange({value: props[subscribe.name], setSubscribeProps});\n            }\n            // console.log(\"Change Props[2]: \", props.subscribeЗф);\n        }, [props[subscribe.name]]);\n\n        useEffect(() => {\n            // dispatchPath && props.setDateStore && props.setDateStore(dispatchPath, props.value);\n            if(dispatchPath) {\n                const newValue = props[valuePropName];\n                // console.log(\"storeHOC => dispatch: \", newValue);\n                dispatchPath && props.setDateStore && props.setDateStore(dispatchPath, newValue);\n            }\n        }, [props]);\n\n        useEffect(() => {\n            if(subscribeProps.value) {\n                // console.log('subscribeProps.value => ', subscribeProps.value);\n                props[trigger] && props[trigger](subscribeProps.value);\n            }\n        }, [subscribeProps.value]);\n\n        const onChange = (...args) => {\n            // const newValue = getValue(...args);\n            // dispatchPath && props.setDateStore && props.setDateStore(dispatchPath, newValue);\n            props[trigger] && props[trigger](...args);\n        };\n\n        const childProps = getObjectExcludedProps(props, excludeProps);\n        return <Component {...childProps} {...subscribeProps} {...{[trigger]: onChange }}/>\n    })\n};\n\n\nexport const DatePickerHOC = (Component) => {\n    return props => {\n        // console.log(\"DatePickerHOC => \", props);\n        if(props.value){\n            if(typeof props.value === 'string'){\n                // console.log(\"DatePickerHOC => onChange => string\");\n                props.onChange(moment(props.value), props.value);\n            }\n            // else {\n            // \tconsole.log(\"DatePickerHOC => onChange => moment\");\n            // \tprops.onChange(props.value, props.format ? toFormat(props.value,props.format) : getISO(props.value));\n            // }\n        }\n        const value = props.value ? (typeof props.value === 'string' ? moment(props.value) : props.value) : null;\n        return <Component {...props} value={value} />\n    };\n};\n\nexport const TypographyTitle = (props) =>\n    <AntTypography.Title {...props}> {props.label || props.value} </AntTypography.Title>;\n\nexport const TypographyText = (props) =>\n    <AntTypography.Text {...props}> {props.label || props.value} </AntTypography.Text>;\n\nexport const TypographyDate = (props) => {\n    const {label, value, format } = props;\n    const _value = value ? (format ? toFormat(value, format) : getISO(value)) : null;\n    return <AntTypography.Text {...props}> {label || _value} </AntTypography.Text>;\n}\n","const getTitle = (type, element) => {\n    if(element === 'Group')\n        if(type === 'edit')\n            return 'Изменение папки';\n        else\n            return 'Создание папки';\n    else\n        return 'Изменение файла';\n};\n\nconst Modal = (type, element, requestSaveRow, processBeforeSaveForm, parentLoadHandler, requestLoadRows) => {\n    // console.log(\"FolderModal\", type, requestSaveRow, processBeforeSaveForm, parentLoadHandler, requestLoadRows);\n    let selectedRow;\n    return {\n        type: `${type}${element}OnServer`,\n        title: getTitle(type, element),\n        requestSaveRow: requestSaveRow,\n        width: 500,\n        // bodyStyle: {height: 650},\n        form: {\n            name: 'FileManagerModalModal',\n            labelCol: {span: 8},\n            wrapperCol: {span: 16},\n            processBeforeSaveForm: (rawValues) => processBeforeSaveForm(rawValues, type, element),\n            loadInitData: (callBack, row) => {\n                selectedRow = row;\n                callBack(type === 'edit' ? row : null);\n            },\n            body: [\n                {\n                    componentType: 'Item',\n                    label: 'Наименование',\n                    name: 'name',\n                    rules: [\n                        {\n                            message: `Заполните наименование`,\n                            required: true,\n                        },\n                    ],\n                    child: {componentType: 'Input'},\n                },\n                type === 'edit'\n                    ? {\n                        componentType: 'Item',\n                        label: 'Родитель',\n                        name: 'parentId',\n                        child: {\n                            componentType: 'SingleSelect',\n                            widthControl: 0,\n                            heightPopup: 300,\n                            expandColumnKey: 'id',\n                            rowRender: 'name',\n                            nodeAssociated: false,\n                            expandDefaultAll: true,\n                            // (info) аналогично ({params, data})\n                            // Но поскольку тут раскрывать объект не нужно, мы можем просто передать его дальше\n                            requestLoadRows: (info) => parentLoadHandler(type, selectedRow, info),\n                            requestLoadDefault: requestLoadRows,\n                        },\n                    }\n                    : {},\n            ],\n        },\n    };\n};\n\nexport const AddFolderModal = (...args) => Modal('add', 'Group', ...args);\nexport const EditFolderModal = (...args) => Modal('edit', 'Group', ...args);\nexport const EditFileModal = (...args) => Modal('edit', '', ...args);\n\n","import {notification} from 'antd';\n\nexport const copyTextToClipboard = text => {\n\tif (!navigator.clipboard) {\n\t\tfallbackCopyTextToClipboard(text);\n\t\treturn;\n\t}\n\tnavigator.clipboard.writeText(text).then(\n\t\tfunction() {\n\t\t\topenNotificationWithIcon(\n\t\t\t\t'success',\n\t\t\t\t'Успешно',\n\t\t\t\t`[${text}] успешно копирован в буфер обмена`\n\t\t\t);\n\t\t},\n\t\tfunction(err) {\n\t\t\topenNotificationWithIcon(\n\t\t\t\t'error',\n\t\t\t\t'Ошибка',\n\t\t\t\t`[${text}] НЕ успешно копирован в буфер обмена`\n\t\t\t);\n\t\t}\n\t);\n};\n\nconst fallbackCopyTextToClipboard = text => {\n\tlet textArea = document.createElement('textarea');\n\ttextArea.value = text;\n\n\t// Avoid scrolling to bottom\n\ttextArea.style.top = '0';\n\ttextArea.style.left = '0';\n\ttextArea.style.position = 'fixed';\n\n\tdocument.body.appendChild(textArea);\n\ttextArea.focus();\n\ttextArea.select();\n\n\ttry {\n\t\tlet successful = document.execCommand('copy');\n\t\tif (successful) {\n\t\t\topenNotificationWithIcon(\n\t\t\t\t'success',\n\t\t\t\t'Успешно',\n\t\t\t\t`[${text}] успешно копирован в буфер обмена`\n\t\t\t);\n\t\t} else {\n\t\t\topenNotificationWithIcon(\n\t\t\t\t'error',\n\t\t\t\t'Ошибка',\n\t\t\t\t`[${text}] НЕ успешно копирован в буфер обмена`\n\t\t\t);\n\t\t}\n\t} catch (err) {\n\t\topenNotificationWithIcon(\n\t\t\t'error',\n\t\t\t'Ошибка',\n\t\t\t`[${text}] НЕ успешно копирован в буфер обмена`\n\t\t);\n\t}\n\tdocument.body.removeChild(textArea);\n};\n\nconst openNotificationWithIcon = (type, title, msg) => {\n\tnotification[type]({\n\t\tmessage: title,\n\t\tdescription: msg\n\t});\n};\n","import React, {useState} from \"react\";\nimport PropTypes from \"prop-types\";\nimport FormTable from \"../Form/FormTable\";\nimport {Button, Upload, notification as antNotification, Spin, Typography, Tooltip} from 'antd';\nimport {\n    HomeOutlined,\n    RollbackOutlined,\n    FolderFilled,\n    FileOutlined,\n    PlusOutlined,\n    LoadingOutlined,\n    FileWordOutlined,\n    FileExcelOutlined,\n    FileImageOutlined,\n    FileMarkdownOutlined,\n    FilePdfOutlined,\n    FilePptOutlined,\n    FileTextOutlined,\n    FileZipOutlined,\n    CopyOutlined\n} from '@ant-design/icons';\nimport { AddFolderModal, EditFileModal, EditFolderModal } from \"./AddFolderModal\";\nimport { rtPrefix } from \"../../utils/variables\";\nimport { toDDMMYYYYHHMMSS } from \"../../utils/datesUtils\";\nimport { copyTextToClipboard } from \"../../utils/clipboardUtils\";\nimport { notificationError } from \"../../utils/baseUtils\";\n\nconst FileManager = props => {\n\n    const {\n        rowKey,\n        isGroupKey,\n        expandParentKey\n    } = props;\n\n    const [tableRef, setTableRef] = useState({});\n    const _setTableRef = (ref) => setTableRef(ref);\n\n    // const tableRef = React.createRef();\n\n    const [breadcrumb, setBreadcrumb] = useState([{[rowKey]: null, name: <HomeOutlined />}]);\n    const [tableFilter, setTableFilter] = useState({deleted: false, [expandParentKey]: null});\n\n\n\n    /**\n     * TABLE EVENTS\n     */\n\n    // Down to folder OR download file\n    const _onRowDoubleClick = ({rowData, rowIndex, rowKey}) => {\n        if(rowData.isGroup) {\n            loadTable([...breadcrumb, rowData], { [expandParentKey]: rowKey });\n        } else {\n            props.requestDownloadFile(rowKey)\n        }\n        props.onRowDoubleClick && props.onRowDoubleClick({rowData, rowIndex, rowKey});\n    };\n\n    // Jump to folder\n    const _onClickBreadcrumb = (parentId, index) => {\n        loadTable(breadcrumb.slice(0, index), {[expandParentKey]: parentId})\n    };\n\n    // Up to folder\n    const _onClickBack = () => {\n        if(breadcrumb.length > 1) {\n            const newBreadcrumb = breadcrumb.slice(0, breadcrumb.length - 1);\n            // setBreadcrumb(newBreadcrumb);\n            // tableRef && tableRef.reloadData({ filter: { parentId: newBreadcrumb[newBreadcrumb.length - 1].id } });\n            loadTable(newBreadcrumb, { [expandParentKey]: newBreadcrumb[newBreadcrumb.length - 1][rowKey] })\n        }\n    };\n\n    // Delete folder OR file\n    const _onClickDelete = (event, _selectedRowKeys) => {\n        if(_selectedRowKeys && _selectedRowKeys.length > 0){\n            props.requestDeleteRow({data: {[rowKey]: _selectedRowKeys[0], deleted: true}})\n                .then((response) => {\n                    antNotification.success({message: 'Файл успешно удален'});\n                    tableRef && tableRef.reloadData({filter: tableFilter});\n                })\n                .catch(error => {\n                    notificationError(error, 'Ошибка удаления файла');\n                    tableRef && tableRef.reloadData({filter: tableFilter});\n                });\n        }\n    };\n\n    /**\n     * TABLE FUNCs\n     */\n    const loadTable = (breadcrumb, filter) => {\n        setBreadcrumb(breadcrumb);\n        const newFilter = {...tableFilter, ...filter};\n        setTableFilter(newFilter);\n        tableRef && tableRef.reloadData({filter: newFilter});\n    };\n\n\n    /**\n     * MODAL FUNCs\n     */\n    const processBeforeSaveModal = (rawValues, type, element) => {\n        let values = {...rawValues};\n        if(type === 'add')\n            values[expandParentKey] = breadcrumb[breadcrumb.length - 1][rowKey];\n\n        if(element === 'Group')\n            values.extension = 'dir';\n        // console.log(\"FileManager values =>\", values);\n        return values;\n    };\n\n    const parentLoadHandler = (type, selectedRow, {params, data}) => {\n        let newData = {...data, [isGroupKey]: true};\n        if (type === 'edit') newData.owner = selectedRow && selectedRow[rowKey];\n        return props.requestLoadParent({ params, data: newData, });\n    };\n\n    // const _onChangeViewDeleted = (checked) => {\n    //     const newFilter = {...tableFilter, deleted: checked };//? undefined : checked};\n    //     setTableFilter(newFilter);\n    //     tableRef && tableRef.reloadData({filter: newFilter});\n    // };\n\n    // console.log(\"EditFolderModal\", EditFolderModal(props.requestSaveRow, processBeforeSaveForm));\n\n\n    /**\n     * UPLOAD FUNCs\n     */\n\n    const _uploadFile = (file) => {\n        // console.log('beforeUpload fileList => ', fileList);\n        notification(file, 'loading');\n        if (props.requestUploadFile) {\n            props.requestUploadFile({ file: file, [expandParentKey]: breadcrumb[breadcrumb.length - 1][rowKey] })\n                .then((response) => {\n                    notification(file, 'success');\n                    tableRef && tableRef.reloadData({ filter: tableFilter });\n                })\n                .catch(() => {\n                    notification(file, 'error');\n                    tableRef && tableRef.reloadData({ filter: tableFilter });\n                });\n        }\n        return false;\n    };\n\n    const notification = (file, type) => {\n        const notifProps = {\n            key: file.uid,\n            duration: type === 'loading' ? 0 : 5,\n            icon: type === 'loading'\n                ? <Spin indicator={<LoadingOutlined style={{ fontSize: 24 }} spin />} />\n                : null,\n            message: <span>Загрузка файла: <Typography.Text code>{file.name}</Typography.Text></span>\n        };\n        switch (type) {\n            case 'loading':\n                antNotification.info(notifProps);\n                break;\n            case 'success':\n                antNotification.success(notifProps);\n                break;\n            case 'error':\n                antNotification.error(notifProps);\n                break;\n            case 'close':\n                antNotification.close(file.uid);\n                break;\n            default:\n                break;\n        }\n    };\n\n    /**\n     * RENDER PARAMS\n     */\n    const customColumnProps = [\n        {\n            name: 'dateCreate',\n            cellRenderer: ({cellData}) => toDDMMYYYYHHMMSS(cellData),\n        },\n        {\n            name: 'dateUpdate',\n            cellRenderer: ({cellData}) => toDDMMYYYYHHMMSS(cellData),\n        },\n        {\n            name: 'path',\n            cellRenderer: ({rowData}) =>\n                rowData[isGroupKey] ? null\n                    :\n                <Tooltip title=\"Скопировать путь к файлу\">\n                    <CopyOutlined onClick={() => copyTextToClipboard(props.pathDownloadFile(rowData[rowKey]))}/>\n                </Tooltip>,\n        },\n        {\n            name: 'name',\n            cellRenderer: ({rowData}) => {\n                const styleDiv = {display: 'flex', alignItems: 'center'};\n                let Icon;\n                let styleIcon = {marginRight: '10px', fontSize: '16px'};\n                switch (rowData.extension) {\n                    case 'dir':\n                        Icon = FolderFilled;\n                        styleIcon.color = '#3a88c9';\n                        break;\n                    case 'doc':\n                    case 'docm':\n                    case 'docx':\n                    case 'dot':\n                    case 'dotx':\n                        Icon = FileWordOutlined;\n                        styleIcon.color = '#185abc';\n                        break;\n                    case 'xlm':\n                    case 'xls':\n                    case 'xlsm':\n                    case 'xlt':\n                    case 'xltm':\n                    case 'xltx':\n                    case 'xlsx':\n                        Icon = FileExcelOutlined;\n                        styleIcon.color = '#1f7244';\n                        break;\n                    case 'png':\n                    case 'jpg':\n                    case 'jpeg':\n                    case 'tiff':\n                    case 'bmp':\n                    case 'ico':\n                    case 'gif':\n                    case 'svg':\n                        Icon = FileImageOutlined;\n                        break;\n                    case 'markdown':\n                    case 'md':\n                        Icon = FileMarkdownOutlined;\n                        styleIcon.color = '#175987';\n                        break;\n                    case 'pdf':\n                        Icon = FilePdfOutlined;\n                        styleIcon.color = '#bd1f07';\n                        break;\n                    case 'ppt':\n                        Icon = FilePptOutlined;\n                        styleIcon.color = '#be5239';\n                        break;\n                    case 'txt':\n                        Icon = FileTextOutlined;\n                        break;\n                    case 'zip':\n                        Icon = FileZipOutlined;\n                        break;\n                    default:\n                        Icon = FileOutlined;\n                }\n\n\n                return (\n                    <div style={styleDiv}>\n                        {/*{rowData.isGroup*/}\n                        {/*    ? <FolderFilled style={{ marginRight: '10px', color: '#3a88c9'}}/>*/}\n                        {/*    : <FileOutlined style={{ marginRight: '10px' }}/>*/}\n                        {/*}*/}\n                        <Icon style={styleIcon}/>\n                        {rowData.name}\n                    </div>\n                );\n            },\n        }\n    ];\n\n    const uploadProps = {\n        multiple: true,\n        showUploadList: false,\n        beforeUpload: _uploadFile\n    };\n\n    const uploadRender = () => {\n        return (\n            <Upload {...uploadProps}>\n                <Button icon={<PlusOutlined />}/>\n            </Upload>\n        )\n    };\n\n    const breadcrumbRender = () => {\n        return (\n            <span className={`${rtPrefix}-file-manager-breadcrumb ml-8`}>\n                {breadcrumb.map((item, index) =>\n                    <span\n                        key={item[rowKey]}\n                        // type=\"text\"\n                        className={`${rtPrefix}-file-manager-breadcrumb-btn`}\n                        onClick={() => _onClickBreadcrumb(item[rowKey], index + 1)}\n                    >\n                        <span>/</span><span>{item.name}</span>\n                    </span>\n                )}\n            </span>\n        )\n    };\n\n    return (\n        <FormTable\n            {...props}\n            ref={_setTableRef}\n            type={'serverSide'}\n            componentType={'FilesTable'}\n            onRowDoubleClick={_onRowDoubleClick}\n            defaultFilter={tableFilter}\n            customColumnProps={customColumnProps}\n            commandPanelProps={{\n                ...props.commandPanelProps,\n                onClickDelete: _onClickDelete,\n                systemBtnProps: {\n                    add: {\n                        actionType: 'modal',\n                        tooltip: 'Загрузить файл(ы)',\n                        render: uploadRender\n                    },\n                    addGroup: {actionType: 'modal', tooltip: 'Создать папку'},\n                    edit: {actionType: ['modal', 'modal']},\n                    delete: {}\n                },\n                leftCustomSideElement: [\n                    {\n                        componentType: 'Item',\n                        child: {\n                            componentType: 'Button',\n                            icon: <RollbackOutlined />,\n                            label: 'Back',\n                            className: 'ml-4',\n                            disabled: (breadcrumb.length === 1),\n                            onClick: _onClickBack\n                        }\n                    },\n                    {\n                        componentType: 'Item',\n                        child: {\n                            componentType: 'Custom',\n                            render: breadcrumbRender\n                        }\n                    }\n                ],\n                // rightCustomSideElement: [\n                //     {\n                //         componentType: 'Item',\n                //         label: 'View deleted',\n                //         className: 'mb-0',\n                //         child: {\n                //             componentType: 'Switch',\n                //             checked: tableFilter.deleted,\n                //             onChange: _onChangeViewDeleted\n                //         }\n                //     },\n                // ]\n            }}\n            modals={[\n                AddFolderModal(props.requestSaveRow, processBeforeSaveModal, parentLoadHandler, props.requestLoadRows),\n                EditFolderModal(props.requestSaveRow, processBeforeSaveModal, parentLoadHandler, props.requestLoadRows),\n                EditFileModal(props.requestSaveRow, processBeforeSaveModal, parentLoadHandler, props.requestLoadRows)\n            ]}\n        />\n    );\n};\n\nFileManager.propTypes = {\n\n    /** Функция запроса для загрузки строк (данных) */\n    requestLoadRows: PropTypes.func,\n\n    /** Функция запроса на получение конфига для таблицы */\n    requestLoadConfig: PropTypes.func,\n};\n\nFileManager.defaultProps = {\n    rowKey: 'id',\n    isGroupKey: 'isGroup',\n    expandParentKey: 'parentId',\n};\n\nexport default FileManager;\n","import React, {useState, useEffect} from \"react\";\nimport PropTypes from \"prop-types\";\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport FormModal from \"../Form/FormModal\";\nimport { notification, Button} from \"antd\";\nimport { notificationError } from \"../../utils/baseUtils\";\nimport objectPath from \"object-path\";\nimport { setDateStore } from \"../../../redux/rtd.actions\";\n\nconst Modal = props => {\n\n    const {buttonProps, modalConfig, modalData, dispatchPath} = props;\n\n    const [visible, setVisible] = useState(false);\n    const [_modalData, _setModalData] = useState({});\n    const [_buttonProps, setButtonProps] = useState({});\n\n    const subscribe = props.subscribe ? props.subscribe : {};\n\n    const setModalData = (value) => {\n        // console.log(\"setModalData: \", value);\n        _setModalData && _setModalData(value);\n    }\n\n    useEffect(() => {\n        _setModalData(modalData);\n    }, []);\n\n    /** Подписка на изменение props[subscribe.name] в сторе */\n    useEffect( () => {\n        if(subscribe.name) {\n            // console.log(\"Modal => subscribe: \", props[subscribe.name]);\n            subscribe.onChange && subscribe.onChange({value: props[subscribe.name], setModalData, setButtonProps});\n        }\n        // console.log(\"Change Props[2]: \", props.subscribeЗф);\n    }, [props[subscribe.name]]);\n\n    const _onOpenModal = () => {\n        // console.log(\"Modal => _modalData: \", _modalData);\n        setVisible(true)\n    }\n\n    const _onCloseModal = () => {\n        setVisible(false)\n    }\n\n    const _onSaveRow = ({type, row, requestSaveRow}) => {\n        dispatchPath && props.setDateStore && props.setDateStore(dispatchPath, row);\n\n        if (requestSaveRow\n            && ['addOnServer', 'editOnServer', 'addGroupOnServer', 'editGroupOnServer'].includes(type)\n        ) {\n            const method = (type === 'addOnServer' || type === 'addGroupOnServer') ? 'POST' : 'PUT';\n            // console.log(\"Modal Events => type: \", type, method, row, _modalData);\n            requestSaveRow({\n                method,\n                data: row,\n            })\n                .then(response => {\n                    notification.success({\n                        message: 'Сохранение прошло успешно'\n                    });\n                    _onCloseModal();\n                })\n                .catch(error => notificationError(error, 'Ошибка при сохранении'));\n        } else _onCloseModal();\n    };\n\n    return (\n        <React.Fragment>\n            <Button\n                type=\"primary\"\n                {...buttonProps}\n                {..._buttonProps}\n                onClick={_onOpenModal}\n            >{buttonProps && buttonProps.label}</Button>\n            <FormModal\n                modal={modalConfig}\n                selectedRow={_modalData}\n                visible={visible}\n                setVisible={_onCloseModal}\n                saveRow={_onSaveRow}\n            />\n        </React.Fragment>\n    )\n};\n\nModal.propTypes = {\n\n    /** Свойства [Button](https://ant.design/components/button/) из Ant Design\n     * Добавлено свойство `label` с типом `ReactNode` или `string` для формирования контента кнопки*/\n    buttonProps: PropTypes.object,\n\n    /** Объект модального окна. Стандартная конфигурация. */\n    modalConfig: PropTypes.object,\n\n    /** Данные для модального окна */\n    modalData: PropTypes.object,\n\n    /** Путь в сторе куда класть данных окна после закрытия */\n    dispatchPath: PropTypes.string,\n\n    /** Объект для подписки на изменения в STORE */\n    subscribe: PropTypes.object,\n};\n\nconst mapStateToProps = (store, ownProps) => {\n    const {subscribe} = ownProps;\n    if(subscribe){\n        const {name, path} = subscribe;\n        if(name && path)\n            return { [name]: objectPath.get(store, path) };\n    }\n    return {};\n};\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators( { setDateStore: setDateStore, }, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Modal);\n","import React, {useState, useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport Select from '../Select/Select';\nimport {\n\tInput,\n\tInputNumber,\n\tForm as AntForm,\n\tButton,\n\tCheckbox,\n\tSwitch,\n\tDatePicker,\n\tRadio,\n    Divider,\n} from 'antd';\nimport { getObjectExcludedProps, getValueFromMultiSelect, getValueFromSingleSelect } from \"../../utils/baseUtils\";\nimport FormTable from './FormTable';\n// import Typography from './Typography';\nimport { withStore, DatePickerHOC, TypographyTitle, TypographyText, TypographyDate } from \"./HOCs\";\nimport FileManager from \"../FileManager/FileManager\";\nimport Modal from \"../Modal/Modal\";\n\nconst excludeProps = ['child', 'componentType', 'field'];\nconst noAntItemTypes = ['Title', 'Text', 'Divider', 'Button', 'LocalTable', 'ServerTable', 'InfinityTable'];\n\nconst FormItem = (props) => {\n\n\tconst {child, field} = props;\n\tlet antFormItemProps = getObjectExcludedProps(props, excludeProps);\n\n\t// Если тип элемента Select -> добавить доп свойства к Form.Item\n    if (child && child.componentType && (child.componentType === 'SingleSelect' || child.componentType === 'MultiSelect')) {\n        antFormItemProps.valuePropName = 'defaultSelectedRowKeys';\n        antFormItemProps.getValueFromEvent = child.componentType === 'SingleSelect' ? getValueFromSingleSelect : getValueFromMultiSelect;\n        antFormItemProps.trigger = 'onChangeKeys';\n    } else if (child && child.componentType && child.componentType === 'SelectTable') {\n        // antFormItemProps.getValueFromEvent = getValueFromSelectTable;\n        // antFormItemProps.trigger = 'onRowClick';\n    }\n\n\t// console.log('FormItem props => ', props);\n\n\tconst getItem = () => {\n\t\tif (child) {\n\t\t    // const childProps = getObjectExcludedProps(child, ['componentType']);\n\t\t\tconst childProps = {...child};\n            // console.log('FormItem childProps => ', childProps);\n\t\t\tlet Component;\n\t\t\tlet placeholder;\n            switch (child.componentType) {\n\t\t\t\tcase 'Button':\n\t\t\t\t\tComponent = withStore(Button, antFormItemProps);\n\t\t\t\t\t// console.log('Props field => ', field);\n\t\t\t\t\tconst onClick = (e) => childProps.onClick && childProps.onClick(e, field);\n\t\t\t\t\treturn (<Component {...childProps} onClick={onClick}>{childProps && childProps.label}</Component>);\n\t\t\t\tcase 'Title':\n\t\t\t\t\tComponent = withStore(TypographyTitle, antFormItemProps);\n\t\t\t\t\treturn (<Component {...child} componentType={child.componentType}/>);\n\t\t\t\tcase 'Text':\n\t\t\t\t\tComponent = withStore(TypographyText, antFormItemProps);\n\t\t\t\t\treturn (<Component {...child} componentType/>);\n\t\t\t\tcase 'Divider':\n\t\t\t\t\tComponent = withStore(Divider, antFormItemProps);\n\t\t\t\t\treturn (<Component {...childProps}>{childProps && childProps.label}</Component>);\n\t\t\t\tcase 'Checkbox':\n\t\t\t\t\tComponent = withStore(Checkbox, antFormItemProps);\n\t\t\t\t\treturn (<Component {...childProps}>{childProps && childProps.label}</Component>);\n\t\t\t\tcase 'DatePicker':\n\t\t\t\t\tComponent = withStore(DatePickerHOC(DatePicker), antFormItemProps);\n\t\t\t\t\tplaceholder = childProps && childProps.placeholder ? childProps.placeholder : 'Выберите дату';\n\t\t\t\t\tconst style = {width: '100%', ...(childProps && childProps.style)};\n\t\t\t\t\treturn (<Component{...childProps} style={style} placeholder={placeholder}/>);\n\t\t\t\tcase 'DateText':\n\t\t\t\t\tComponent = withStore(TypographyDate, antFormItemProps);\n\t\t\t\t\treturn (<Component {...child} />);\n\t\t\t\tcase 'Input':\n\t\t\t\t\tComponent = withStore(Input, antFormItemProps);\n\t\t\t\t\tplaceholder = childProps && childProps.placeholder ? childProps.placeholder : 'Введите значение';\n\t\t\t\t\treturn (<Component {...childProps} placeholder={placeholder} />);\n\t\t\t\tcase 'TextArea':\n\t\t\t\t\tComponent = withStore(Input.TextArea, antFormItemProps);\n\t\t\t\t\treturn (<Component {...childProps} />);\n\t\t\t\tcase 'Password':\n\t\t\t\t\tComponent = withStore(Input.Password, antFormItemProps);\n\t\t\t\t\tplaceholder = childProps && childProps.placeholder ? childProps.placeholder : 'Введите пароль';\n\t\t\t\t\treturn (<Component {...childProps} placeholder={placeholder}/>);\n\t\t\t\tcase 'InputNumber':\n\t\t\t\t\tComponent = withStore(InputNumber, antFormItemProps);\n\t\t\t\t\tplaceholder = childProps && childProps.placeholder ? childProps.placeholder : 'Введите значение';\n\t\t\t\t\treturn (<Component {...childProps} style={{width: '100%'}} placeholder={placeholder}/>);\n\t\t\t\tcase 'Radio':\n\t\t\t\t\tComponent = withStore(Radio, antFormItemProps);\n\t\t\t\t\treturn <Component {...childProps}>{childProps && childProps.label}</Component>;\n\t\t\t\tcase 'RadioButton':\n\t\t\t\t\tComponent = withStore(Radio.Button, antFormItemProps);\n\t\t\t\t\treturn (<Component {...childProps}>{childProps && childProps.label}</Component>);\n\t\t\t\tcase 'Switch':\n\t\t\t\t\tComponent = withStore(Switch, antFormItemProps);\n\t\t\t\t\treturn <Component {...childProps} />;\n                case \"RadioGroup\":\n                    Component = withStore(Radio.Group, antFormItemProps);\n                    return (<Component {...childProps} />);\n\t\t\t\tcase 'SingleSelect':\n                case 'MultiSelect':\n\t\t\t\t\treturn <Select {...childProps} type={child.componentType} name={antFormItemProps.name}/>;\n\t\t\t\t\t//'infinity', 'serverSide', 'localSide'\n                case 'InfinityTable':\n                    childProps.type = 'infinity';\n                    return <FormTable {...childProps} name={props.name} componentType={child.componentType}/> ;\n                case 'ServerTable':\n                    childProps.type = 'serverSide';\n                    return <FormTable {...childProps} name={props.name} componentType={child.componentType}/> ;\n                case 'LocalTable':\n                    childProps.type = 'localSide';\n                    return <FormTable {...childProps} name={props.name} componentType={child.componentType}/> ;\n                case 'SelectTable':\n\t\t\t\t\tchildProps.type = 'localSide';\n\t\t\t\t\treturn <FormTable {...childProps} name={props.name} componentType={child.componentType} /> ;\n\t\t\t\tcase 'FileManager':\n\t\t\t\t\treturn <FileManager {...childProps} name={props.name} />;\n\t\t\t\tcase 'Modal':\n\t\t\t\t\treturn <Modal {...childProps} name={props.name} />;\n\t\t\t\tcase 'Custom':\n\t\t\t\t\tComponent = withStore(child.render, antFormItemProps);\n\t\t\t\t\treturn <Component {...childProps}/>;\n\t\t\t\tdefault:\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t};\n\n    if(!antFormItemProps.label)\n        return <AntForm.Item {...antFormItemProps} noStyle>{getItem()}</AntForm.Item>;\n    else\n        return <AntForm.Item {...antFormItemProps}>{getItem()}</AntForm.Item>;\n};\n\nFormItem.propTypes = {\n\tchild: PropTypes.object.isRequired\n};\n\nexport default FormItem;\n","import React from 'react';\nimport {rtPrefix} from '../../utils/variables';\nimport PropTypes from \"prop-types\";\n\nconst Layout = props => {\n\n    let itemProps = {};\n    Object.keys(props).forEach((key) =>\n        key !== 'children' ? (itemProps[key] = props[key]) : null\n    );\n\n    const getCls = () => {\n        let cls = [`${rtPrefix}-layout`];\n        itemProps.className && cls.push(itemProps.className);\n        return cls.join(' ');\n    };\n\n    return (\n        <div {...itemProps} className={getCls()}>\n            {props.children}\n        </div>\n    );\n};\n\nLayout.propTypes = {\n    /** Строка класса */\n    className: PropTypes.string,\n\n    /** Объект стиля */\n    style: PropTypes.object,\n};\n\nexport default Layout;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport FormItem from \"./FormItem\";\nimport Layout from \"../Layout/Layout\";\nimport { Row, Col, Tabs, Radio, Form as AntForm, Input, Space } from \"antd\";\nimport { getObjectExcludedProps } from \"../../utils/baseUtils\";\n\nconst excludeProps = [\"children\", \"componentType\"];\n\nconst FormItems = (props) => {\n    const { items } = props;\n\n    // console.log('FormItems props => ', props);\n\n    const getItems = (data, antFormListParams) => {\n\n        return (data && data.map((item, index) => {\n            let itemProps = getObjectExcludedProps(item, excludeProps);\n            // console.log('FormItems index => ', index);\n\n            switch (item.componentType) {\n                case \"Row\":\n                    return (\n                        <Row key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Row>\n                    );\n                case \"Col\":\n                    return (\n                        <Col key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Col>\n                    );\n                case \"Layout\":\n                    return (\n                        <Layout key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Layout>\n                    );\n                case \"Tabs\":\n                    return (\n                        <Tabs key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Tabs>\n                    );\n                case \"TabPane\":\n                    return (\n                        <Tabs.TabPane key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Tabs.TabPane>\n                    );\n                case \"RadioGroup\":\n                    return (\n                        <Radio.Group key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Radio.Group>\n                    );\n                case \"Item\":\n                    let _item = { ...item };\n                    let _key = index;\n                    if (antFormListParams && antFormListParams.field) {\n                        if (_item.name) {\n                            if (Array.isArray(_item.name)) {\n                                _item.name = [antFormListParams.field.name, ..._item.name];\n                                _item.fieldKey = [antFormListParams.field.name, ..._item.name];\n                            } else {\n                                _item.name = [antFormListParams.field.name, _item.name];\n                                _item.fieldKey = [antFormListParams.field.name, ..._item.name];\n                            }\n                        }\n                    }\n                    // console.log('_item ', _item.name);\n                    return <FormItem key={`${_key}`} {..._item} field={{ ...antFormListParams }}/>;\n                case \"ListItems\":\n                    return (\n                        <AntForm.List key={index} {...itemProps}>\n                            {(fields, operation) => {\n                                const param = { fields: [...fields], operation: { ...operation } };\n                                return getItems(item.children, param);\n                            }}\n                        </AntForm.List>\n                    );\n                case \"ListItem\":\n                    // console.log('antFormListParams => ', antFormListParams);\n                    return (\n                        <div key={index}>\n                            {antFormListParams && antFormListParams.fields && antFormListParams.fields.map((field, fIndex) => {\n                                // console.log('index field.key', index, field);\n                                const param = { field: { ...field }, ...antFormListParams };\n                                return <div key={field.key}>{getItems(item.children, param)} </div>;\n                            })}\n                        </div>\n                    );\n\n\n                default:\n                    return null;\n            }\n        })) || null;\n    };\n\n    return getItems(items);\n};\n\nFormItems.propTypes = {\n    items: PropTypes.arrayOf(PropTypes.object).isRequired\n};\n\nexport default FormItems;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {noop} from '../../utils/baseUtils';\nimport {rtPrefix} from '../../utils/variables';\nimport {Input, Tooltip, Popconfirm, Modal, Button} from 'antd';\nimport {\n\tPlusOutlined,\n\tCopyOutlined,\n\tFolderAddOutlined,\n\tDeleteOutlined,\n\tEditOutlined,\n\tArrowUpOutlined,\n\tArrowDownOutlined,\n\tSettingOutlined,\n\tFilterOutlined,\n\tExclamationCircleOutlined,\n} from '@ant-design/icons';\nimport FormItems from \"../Form/FormItems\";\nconst {confirm} = Modal;\n\nconst CommandPanel = (props) => {\n\tconst {\n\t\tborderStyle,\n\t\tdefaultValueSearch,\n\t\tdeleteConfirm,\n\t\tdeleteConfirmType,\n\t\tdeleteConfirmTitle,\n\t\tdeleteConfirmDescription,\n\t\tonClickAdd,\n\t\tonClickAddAsCopy,\n\t\tonClickAddGroup,\n\t\tonClickDelete,\n\t\tonClickEdit,\n\t\tonClickUp,\n\t\tonClickDown,\n\t\tonSearch,\n\t\tshowElements,\n        systemBtnProps,\n\t\tdisabledElements,\n\t\tleftCustomSideElement,\n\t\tcenterCustomSideElement,\n\t\trightCustomSideElement,\n\t} = props;\n\n    const defaultSystemBtnProps = {\n        add: {\n            tooltip: 'Добавить',\n            onClick: onClickAdd,\n            icon: <PlusOutlined />\n        },\n        addAsCopy: {\n            tooltip: 'Добавить копированием',\n            onClick: onClickAddAsCopy,\n            icon: <CopyOutlined />\n        },\n        addGroup: {\n            tooltip: 'Добавить группу',\n            onClick: onClickAddGroup,\n            icon: <FolderAddOutlined />\n        },\n        edit: {\n            tooltip: 'Изменить',\n            onClick: onClickEdit,\n            icon: <EditOutlined />\n        },\n        delete: {\n            tooltip: 'Удалить',\n            icon: <DeleteOutlined />\n        },\n        up: {\n            tooltip: 'Переместить вверх',\n            onClick: onClickUp,\n            icon: <ArrowUpOutlined />\n        },\n        down: {\n            tooltip: 'Переместить вниз',\n            onClick: onClickDown,\n            icon: <ArrowDownOutlined />\n        },\n\t\tsearch: {\n\t\t\tplaceholder: 'Поиск',\n\t\t\tonSearch: onSearch,\n\t\t},\n        settings: {\n            tooltip: 'Настройки таблицы',\n            tooltipPlacement: 'topRight',\n            onClick: () => {},\n            icon: <SettingOutlined />\n        },\n        filter: {\n            tooltip: 'Настройки фильтров',\n            tooltipPlacement: 'topRight',\n            onClick: () => {},\n            icon: <FilterOutlined />\n        }\n    };\n\n\tconst _onClickDelete = (event) => {\n\t\tif (deleteConfirmType === 'Modal') {\n\t\t\tdeleteButtonModalConfirm();\n\t\t} else {\n\t\t\tonClickDelete(event);\n\t\t}\n\t};\n\n\tconst deleteButtonPopupConfirm = () => {\n\t\treturn (\n\t\t\t<Popconfirm\n\t\t\t\tplacement='top'\n\t\t\t\ttitle={deleteConfirmDescription}\n\t\t\t\tonConfirm={onClickDelete}\n\t\t\t\tokText='Да'\n\t\t\t\tcancelText='Нет'\n\t\t\t>\n\t\t\t\t{renderDeleteBtn(false)}\n\t\t\t</Popconfirm>\n\t\t);\n\t};\n\n    const deleteButtonModalConfirm = () => {\n\t\tconfirm({\n\t\t\ttitle: deleteConfirmTitle,\n\t\t\ticon: <ExclamationCircleOutlined />,\n\t\t\tcontent: deleteConfirmDescription,\n\t\t\tcentered: true,\n\t\t\tokText: 'Ок',\n\t\t\tcancelText: 'Отмена',\n\t\t\tonOk() {\n\t\t\t\tonClickDelete();\n\t\t\t},\n\t\t});\n\t};\n\n    const renderDeleteBtn = (withOnClick) => {\n        const genProps = {...defaultSystemBtnProps['all'], ...systemBtnProps['all']};\n        const btnProps = {...defaultSystemBtnProps['delete'], ...systemBtnProps['delete']};\n\n        return (\n            <Tooltip title={btnProps.tooltip}>\n                <Button\n                    {...genProps}\n                    className={`${rtPrefix}-btn`}\n                    icon={btnProps.icon}\n                    onClick={withOnClick ? _onClickDelete : null}\n                    disabled={disabledElements.includes('delete')}\n                />\n            </Tooltip>\n        );\n    };\n\n    const renderBtn = (type) => {\n        const genProps = {...defaultSystemBtnProps['all'], ...systemBtnProps['all']};\n        const btnProps = {...defaultSystemBtnProps[type], ...systemBtnProps[type]};\n\n        if(showElements.includes(type)) {\n            if(btnProps.render)\n                return btnProps.render({\n                    disabled: disabledElements.includes(type),\n                    onClick: btnProps.onClick,\n\t\t\t\t\tonSearch: btnProps.onSearch\n\t\t\t\t});\n             else\n             \tif (type === 'search')\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Input.Search\n\t\t\t\t\t\t\tdisabled={disabledElements.includes(type)}\n\t\t\t\t\t\t\tdefaultValue={defaultValueSearch}\n\t\t\t\t\t\t\tplaceholder={btnProps.placeholder}\n\t\t\t\t\t\t\tonSearch={btnProps.onSearch}\n\t\t\t\t\t\t\tclassName={'search'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\telse\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Tooltip title={btnProps.tooltip} placement={btnProps.tooltipPlacement ? btnProps.tooltipPlacement : 'top'}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t{...genProps}\n\t\t\t\t\t\t\t\tclassName={`${rtPrefix}-btn`}\n\t\t\t\t\t\t\t\ticon={btnProps.icon}\n\t\t\t\t\t\t\t\tonClick={btnProps.onClick}\n\t\t\t\t\t\t\t\tdisabled={disabledElements.includes(type)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t)\n        }\n        else\n            return null\n    };\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{showElements.length ||\n\t\t\tleftCustomSideElement ||\n\t\t\tcenterCustomSideElement ||\n\t\t\trightCustomSideElement ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={`${rtPrefix}-command-panel border-${borderStyle}`}\n\t\t\t\t>\n\t\t\t\t\t<div className={'left-system-side'}>\n                        {renderBtn('add')}\n                        {renderBtn('addAsCopy')}\n                        {renderBtn('addGroup')}\n                        {renderBtn('edit')}\n\n\t\t\t\t\t\t{showElements.includes('delete')\n\t\t\t\t\t\t\t? deleteConfirm\n\t\t\t\t\t\t\t\t? deleteConfirmType === 'Popup'\n\t\t\t\t\t\t\t\t\t? deleteButtonPopupConfirm()\n\t\t\t\t\t\t\t\t\t: renderDeleteBtn(true)\n\t\t\t\t\t\t\t\t: renderDeleteBtn(true)\n\t\t\t\t\t\t\t: null}\n\n                        {renderBtn('up')}\n                        {renderBtn('down')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={'left-custom-side'}>\n\t\t\t\t\t\t{leftCustomSideElement ? <FormItems items={leftCustomSideElement} /> : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={'center-custom-side'}>\n\t\t\t\t\t\t{centerCustomSideElement ? <FormItems items={centerCustomSideElement} /> : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={'right-custom-side'}>\n\t\t\t\t\t\t{rightCustomSideElement ? <FormItems items={rightCustomSideElement} /> : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={'right-system-side'}>\n\t\t\t\t\t\t{renderBtn('search')}\n                        {renderBtn('settings')}\n                        {renderBtn('filter')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</React.Fragment>\n\t);\n};\n\nCommandPanel.propTypes = {\n\t/** Центральный кастомный элемент командной панели */\n\tcenterCustomSideElement: PropTypes.arrayOf(PropTypes.object), // PropTypes.element,\n\n\t/** Тип бордера панели (по умолчанию 'bottom')\n\t * ['all', 'none', 'top', 'left', 'bottom', 'right', 'top-bottom', 'left-right'] */\n\tborderStyle: PropTypes.oneOf([\n\t\t'all',\n\t\t'none',\n\t\t'top',\n\t\t'left',\n\t\t'bottom',\n\t\t'right',\n\t\t'top-bottom',\n\t\t'left-right',\n\t]),\n\n\t/** Значение по умолчанию для строки поиска */\n\tdefaultValueSearch: PropTypes.string,\n\n\t/** Нужно ли делать подтверждение на кнопке удалить */\n\tdeleteConfirm: PropTypes.bool,\n\n\t/** Тип подтверждения удаления 'Popup' / 'Modal' */\n\tdeleteConfirmType: PropTypes.oneOf(['Popup', 'Modal']),\n\n\t/** Текст подтверждения на удаление элемента */\n\tdeleteConfirmTitle: PropTypes.string,\n\n\t/** Текст подтверждения на удаление элемента */\n\tdeleteConfirmDescription: PropTypes.string,\n\n\t/** Массив элементов командной панели для блокировки\n     ['add', 'addAsCopy', 'addGroup', 'delete', 'edit', 'up', 'down', 'search', 'settings', 'filter'] */\n\tdisabledElements: PropTypes.arrayOf(PropTypes.string),\n\n\t/** Левый кастомный элемент командной панели */\n\tleftCustomSideElement: PropTypes.arrayOf(PropTypes.object),\n\n\t/** Событие при нажатии на кнопку \"Добавить\" */\n\tonClickAdd: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Добавить копированием\" */\n\tonClickAddAsCopy: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Добавить группу\" */\n\tonClickAddGroup: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Удалить\" */\n\tonClickDelete: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Переместить вниз\" */\n\tonClickDown: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Изменить\" */\n\tonClickEdit: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Переместить вверх\" */\n\tonClickUp: PropTypes.func,\n\n\t/** Событие при поиске */\n\tonSearch: PropTypes.func,\n\n\t/** Правый кастомный элемент командной панели */\n\trightCustomSideElement: PropTypes.arrayOf(PropTypes.object),\n\n\t/** Массив элементов командной панели, которые надо отобразить\n     ['add', 'addAsCopy', 'addGroup', 'delete', 'edit', 'up', 'down', 'search', 'settings', 'filter'] */\n\tshowElements: PropTypes.arrayOf(PropTypes.string),\n\n    /** Объект кастомизации системных кнопок\n     { [btnType]: { tooltip: <String>, icon: <Icon />, render: ({disabled, onClick}) => <Component /> } } */\n    systemBtnProps: PropTypes.object\n};\n\nCommandPanel.defaultProps = {\n\tcenterCustomSideElement: null,\n\tborderStyle: 'bottom',\n\tdefaultValueSearch: undefined,\n\tdeleteConfirm: true,\n\tdeleteConfirmType: 'Modal',\n\tdeleteConfirmTitle: 'Подтвержение удаления',\n\tdeleteConfirmDescription: 'Вы действительно хотите удалить?',\n\tdisabledElements: [],\n\tleftCustomSideElement: null,\n\tonClickAdd: noop,\n\tonClickAddAsCopy: noop,\n\tonClickAddGroup: noop,\n\tonClickDelete: noop,\n\tonClickEdit: noop,\n\tonClickUp: noop,\n\tonClickDown: noop,\n\tonSearch: noop,\n\trightCustomSideElement: null,\n\tshowElements: [],\n    systemBtnProps: {},\n};\nexport default CommandPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Table from '../Table/Table';\n\n/**\n * ### Список / Дерево.\n */\nconst List = (props) => {\n\tconst {rowKey, rowRender, title} = props;\n\n\tconst columns = [\n\t\t{\n\t\t\tkey: rowKey,\n\t\t\ttitle: title,\n\t\t\tdataKey: rowKey,\n\t\t\twidth: 500,\n\t\t\tcellRenderer:\n\t\t\t\ttypeof rowRender === 'function'\n\t\t\t\t\t? rowRender\n\t\t\t\t\t: ({rowData}) => <div>{rowData[rowRender]}</div>,\n\t\t},\n\t];\n\treturn <Table {...props} columns={columns} headerHeight={title ? 30 : 0} />;\n};\n\nList.propTypes = {\n\t/** Поле для уникальной идентификации строки */\n\trowKey: PropTypes.string,\n\n\t/** Строка или функция для отображения элементов списка\n\t * Строка - имя поля\n\t * Функция - рендер строк. Параметры v\n\t * { cellData, columns, column, columnIndex, rowData, rowIndex, container, isScrolling }) */\n\trowRender: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n\n\t/** Заголовок списка (по умолчанию скрыт)*/\n\ttitle: PropTypes.string,\n};\n\nList.defaultProps = {\n\trowKey: 'id',\n\trowRender: 'id',\n\ttitle: undefined,\n};\n\nexport default List;\n","import objectPath from 'object-path';\nimport {actionTypes} from './rtd.action.types';\n\nconst rtdReducer = (state = {}, action) => {\n    switch (action.type) {\n        case actionTypes.INIT_STORE: {\n            const {path} = action.payload;\n            // console.log(\"INIT_TABLE_STORE: \", path);\n            let newState = {...state};\n            objectPath.set(newState, path, {});\n            return newState;\n        }\n        case actionTypes.SET_DATA_STORE: {\n            const {path, row} = action.payload;\n\n            let newState = {...state};\n            objectPath.set(newState, path, row); // obj.a is now {}\n\n            console.debug(\"Store change: \", path, row);\n            // console.group(\"Store\");\n            // console.log(\"Store: \", newState);\n            // console.log(\"New Data: \", path, row);\n            // console.groupEnd();\n\n            return newState;\n        }\n        default:\n            return state;\n    }\n};\n\nexport default rtdReducer;\n","import { notification } from \"antd\";\nimport { notificationError } from \"./baseUtils\";\n\nexport const executeRequest = (request) => (options) => request(options)\n    .then(response => {\n        notification.success({\n            message: \"Сохранение прошло успешно\"\n        });\n    })\n    .catch(error => notificationError(error, 'Ошибка при сохранении') );","import {classic, declarative} from './components/declarative';\n\nconst components = { Form: classic.Form };\n\nexport {components, classic, declarative}\n\n/** deprecated */\n// Базовые копоненты\nexport {default as CommandPanel} from './components/deprecated/CommandPanel/CommandPanel';\nexport {default as FilterPanel} from './components/deprecated/FilterPanel/FilterPanel';\nexport {default as Table} from './components/deprecated/Table/Table';\nexport {default as AdvancedTable} from './components/deprecated/AdvancedTable/AdvancedTable';\nexport {default as List} from './components/deprecated/List/List';\nexport {default as Select} from './components/deprecated/Select/Select';\nexport {default as SingleDate} from './components/deprecated/SingleDate/SingleDate';\nexport {default as DateRange} from './components/deprecated/DateRange/DateRange';\n\n// Компоненты формы\nexport {default as Form} from './components/deprecated/Form/Form';\nexport {default as FileManager} from './components/deprecated/FileManager/FileManager';\nexport {default as Modal} from './components/deprecated/Modal/Modal';\n\n// Store\nexport { default as rtdReducer} from './redux/rtd.reducer';\nexport {setDateStore} from './redux/rtd.actions';\n\n// Utils\nexport {notificationError} from './components/utils/baseUtils'\nexport { executeRequest } from \"./components/utils/api\";\nexport * from './components/utils/datesUtils';\n\n\n\n\n"],"names":["APP_TIME_OFFSET","getMomentFromStringByFormat","date","format","moment","utcOffset","getMomentWithOffset","getMomentWithOffsetTruncateDay","startOf","toFormat","dateString","mom","isValid","toDDMMYYYYdot","toDDMMYYYYdotAltDashDash","toDDMMYYYYHHMMSS","toDDMMYYYYdash","getISO","toISOString","types","INIT_STORE","SET_DATA_STORE","setDateStore","path","row","type","actionTypes","payload","noop","flatten","arrayOfArrays","reduce","flattened","item","concat","Array","isArray","getTableRowObjects","data","rowKeys","map","children","length","getTableRowKeys","rowKey","findNodeByRowKey","rowValue","node","i","_findNodeByRowKey","currentNode","value","currentChild","result","generateUUID","replace","c","crypto","getRandomValues","Uint8Array","toString","getValueFromSingleSelect","name","keys","getValueFromMultiSelect","getObjectExcludedProps","object","exclude","returnObject","Object","forEach","key","includes","undefined","notificationError","error","message","response","console","status","errorDescription","description","dispatchToStore","dispatch","extraData","timestamp","useMounted","React","useState","isMounted","setIsMounted","useEffect","withStore","Component","antFormItemProps","mapStateToProps","store","ownProps","subscribe","state","objectPath","get","dispatchExtraData","mapDispatchToProps","bindActionCreators","defaultProps","trigger","valuePropName","withStoreProps","connect","props","componentType","subscribeProps","setSubscribeProps","excludeProps","setSubscribePropsHandler","prevState","onChange","_value","trim","hasOwnProperty","_subscribeProps","_onSearch","searchLine","e","preventDefault","childProps","onSearchProps","onSearch","rtPrefix","DatePicker","style","width","TypographyDate","label","Button","onClick","field","renderClassicWithLabel","Custom","childNode","warn","render","renderClassic","isValidElement","cloneElement","FormHeader","FormBody","cls","noPadding","push","scrollable","join","FormFooter","TabPane","className","FormItem","child","renderClassicByName","itemProps","propTypes","PropTypes","isRequired","FormItems","items","getItems","antFormListParams","index","_item","_key","fieldKey","fields","operation","param","fIndex","renderDeclarativeByName","arrayOf","Form","loadInitData","header","body","footer","autoSaveForm","requestSaveForm","methodSaveForm","processBeforeSaveForm","loaded","setLoaded","antFormProps","setAntFormProps","initFormData","setInitFormData","_setInitFormData","antForm","form","_Form","useForm","getBodyCls","onFinish","rawValues","values","saveObject","log","method","then","success","catch","onFinishFailed","errorInfo","Header","Footer","height","initialValues","bool","func","string","Layout","getCls","Switcher","_setValue","empty","overlay","LoadingOutlined","fontSize","SelectionHead","column","container","onSelectAll","selectedRowKeys","selectAll","_handleChange","rowObjects","filter","totalLength","selectLength","checked","selected","getRowChildren","findBrothers","selfItem","parentKey","arr","parentAnalysis","rowData","nodeAssociated","treeData","indeterminateRowKeys","_selectedRowKeys","_indeterminateRowKeys","currentRowData","parentExist","lastTypeSelect","typeSelect","nextSquare","indeterminateBrothers","selectedBrothers","allBrothers","indexOf","splice","indexS","indexI","onChangeSelectionCell","rowIndex","rows","rowChildren","element","Set","_selectedRowObjects","_selectedRow","_selectAll","SelectionCell","det","SelectionList","selectedRowObjects","rowRender","onClickDropSelect","CloseCircleOutlined","oneOfType","Table","forwardRef","ref","hasMore","setHasMore","loading","setLoading","_rows","_setRows","setSelectedRowKeys","_searchValue","setSearchValue","_filter","setFilter","_sortBy","setSortBy","setSelectAll","setIndeterminateRowKeys","_expandedRowKeys","setExpandedRowKeys","_footerShow","_setFooterShow","_totalCountRows","setTotalCountRows","tableRef","useRef","columns","infinityMode","editMode","defaultRows","defaultSelectedRowKeys","defaultSearchValue","defaultFilter","defaultSortBy","setRows","searchValue","sortBy","customFields","fixWidthColumn","headerHeight","rowHeight","rowRenderer","zebraStyle","estimatedRowHeight","rowBordered","loadThreshold","pageSize","requestLoadRows","requestLoadCount","searchParamName","selectable","expandColumnKey","expandDefaultAll","expandLazyLoad","expandParentKey","onRowClick","onRowDoubleClick","onRowExpand","onSelectedRowsChange","onExpandedRowsChange","showSelection","rowRenderShowSelection","dispatchPath","footerProps","selectedDispatchPath","rowsDispatchPath","rowDoubleClickDispatchPath","_setRowsHandler","_setSelectedRowsHandler","setFilterHandler","showElements","leftCustomSideElement","centerCustomSideElement","rightCustomSideElement","flatRows","selectedRow","ii","_dataProcessing","reload","reloadData","current","onChangeObject","reloadTable","addRows","_addRows","addRow","_addRow","addRowAsCopy","_addRowAsCopy","editRow","_editRow","removeRow","_removeRow","moveUpRow","_moveUpRow","moveDownRow","_moveDownRow","_setSubscribeProps","rowsDispatch","selectedKeys","selectedObjects","selectedDispatch","rowDoubleClickDispatch","onTableEventsDispatch","nameEvent","dp","appendParams","scrollToRow","__sortBy","__filter","__searchValue","params","expandRow","pageNum","Math","floor","page","size","sort","order","dataQuery","newRows","_onRowClick","_rowSelectAfterClick","_onRowDoubleClick","newRowObject","_getSelectionColumnProps","_rowEventHandlers","onDoubleClick","_onColumnSort","loadParams","_footer","selectedTitle","loadedTitle","totalTitle","_rowClassName","rowClassName","onEndReached","_onChangeSelectHandler","_onSelectAllHandler","_getColumns","selectColumn","headerRenderer","cellRenderer","flexShrink","resizable","frozen","_onExpandedRowsChange","expandedRowKeys","_onRowExpand","expanded","allChildKeys","loop","callback","saveRows","sRow","validate","_localRows","_row","event","newRowIndex","_getNewIndexRow","_changeIndexRow","oldIndex","newIndex","_onClickDropSelectHandler","dropObject","newSelectedKeys","BaseTable","number","shape","oneOf","customColumnProps","cellBordered","requestLoadConfig","ConfigLoader","tableConfig","setTableConfig","cleanupFunction","loadData","configParser","r","config","_columns","colProps","find","alias","title","dataKey","align","sortable","hidden","visible","headerClassName","cellData","_defaultFilter","hierarchical","hierarchyLazyLoad","hierarchyField","split","hierarchyView","Select","optionConverter","options","widthControl","mode","_hasMore","_setHasMore","_loading","_setLoading","_options","_setOptions","isEndReached","setIsEndReached","_setSortBy","_setFilter","_setSearchValue","_isSelectAll","_setIsSelectAll","_loadOptions","preValue","getPageNum","getSort","getSearchValue","requestOptions","option","onScroll","scrollTopMax","nativeEvent","target","scrollTop","_onChangeSelectAll","optionsValues","_onChange","getSelectAllCls","omittedValues","CheckOutlined","menu","disabled","TreeSelect","_treeData","_setTreeData","_optionConverter","serverModalTypes","localModalTypes","allModalTypes","getDefaultFooterProps","modal","okText","cancelText","modalTitle","okType","Modal","buttonProps","toolTipProps","modalConfig","modalData","modalProps","setVisible","_modalData","_setModalData","_buttonProps","setButtonProps","setModalData","openModal","_onOpenModal","closeModal","_onCloseModal","onFinishHandler","saveObj","startsWith","requestSaveRow","onOk","onFinishFailedHandler","loadInitDataHandler","callBack","formConfig","_onCancelHandler","onCancel","defaultFooter","cancelButtonProps","htmlType","okButtonProps","padding","bodyStyle","requestUploadFile","dataObject","onCompletedUpload","onFailedUpload","uploadProps","UploadFile","_uploadFile","file","notification","notifProps","uid","duration","icon","info","close","defaultUploadProps","multiple","showUploadList","beforeUpload","CloudUploadOutlined","renderClassicWithComponentType","componentName","classic","renderDeclarative","renderFormItemComponent","componentProps","Item","noStyle","ComponentClassic","StoreComponent","ComponentClassicWithLabel","ComponentClassicWithPlaceholder","placeholder","_placeholder","ComponentClassicWithOutStore","classicComponents","RtForm","FormList","List","Space","Row","Col","RtLayout","Tabs","RtTabPane","withComponentType","RtButton","Title","_Typography","Text","Divider","Checkbox","RtDatePicker","DateText","Input","Search","_Input","TextArea","Password","InputNumber","Switch","RadioGroup","_Radio","Group","RtSelect","RtTreeSelect","RtTable","RtModal","RtSwitcher","RtUploadFile","obj","declarative","DateRange","mounted","setMounted","startValue","setStartValue","endValue","setEndValue","nameStart","nameEnd","dateFormat","valueStart","valueEnd","showTime","defaultValueStart","defaultValueEnd","disabledStartDate","valueOf","disabledEndDate","onStartChange","onEndChange","locale","SingleDate","setValue","defaultValue","_onChangePicker","FilterPanel","applyFilterTooltip","applyFilterSize","applyFilterRender","borderStyle","onChangeFilter","onApplyFilter","configFilter","resetFilterRender","resetFilterTooltip","resetFilterSize","_onChangeData","_applyFilter","_resetFilter","getPanelCls","findIndex","marginLeft","autoDeleteRows","footerHeight","footerShow","footerTitles","commandPanelProps","CommandPanel","filterPanelProps","setReloadTable","setRowsHandler","unshift","_getDisabledElementsOfCommandPanel","_disabledElements","disabledElements","_onClickAddAsCopy","onClickAddAsCopy","_onClickEdit","onClickEdit","_onClickDelete","onClickDelete","_onClickUp","onClickUp","_onClickDown","onClickDown","_onChangeFilter","_onApplyFilter","selectedRows","loadedRows","totalRows","Paragraph","_selectedRowData","_setSelectedRowData","isSelectOpened","setIsSelectOpened","isClickInSelect","setIsClickInSelect","widthPopup","heightPopup","onChangeKeys","requestLoadDefault","searchable","setSelectedRowData","loadSelectedObject","request","srk","findRow","window","addEventListener","handleMouseClick","removeEventListener","onClosePopup","_getHeadCls","_getHeadText","_getPopupCls","_getPopupStyle","defRowsLen","getEvents","systemBtnProps","_SingleSelectRow","contains","onOpenPopup","onClickClear","UpOutlined","DownOutlined","CloseCircleFilled","AdvancedTable","setConfig","configData","columnsByConfig","getDefaultFilter","FormModal","saveRow","_onLoadInitData","FormTable","addOnServer","editOnServer","addOnLocal","editOnLocal","addGroupOnServer","editGroupOnServer","addGroupOnLocal","editGroupOnLocal","select","viewGroup","viewObject","visibleModals","setVisibleModals","tableRows","setTableRows","tableSelectedRowKeys","setTableSelectedRowKeys","tableSelectedRow","setTableSelectedRow","setTableRef","_setTableRef","_ref","rowKeyType","modals","isGroupKey","history","requestDeleteRow","dataDeleteRow","cmdProps","_addRowsToLocalTable","getModals","_onSaveRow","isExistCmdBtn","btnType","equalsActionTypeCmdBtn","actionType","aTypes","_onClickAddHandler","location","pathname","_onClickAddAsCopyHandler","_addRowToLocalTable","_onClickAddGroupHandler","_onClickEditHandler","deleteData","_onClickUpHandler","_onClickDownHandler","selectRows","tRow","_addRowToServerTable","_editRowToLocalTable","_onSelectedRowsChange","getTableCls","onClickAdd","onClickAddGroup","SortOrder","ASC","DESC","getValueFromEvent","newValue","DatePickerHOC","TypographyTitle","TypographyText","getTitle","parentLoadHandler","labelCol","span","wrapperCol","rules","required","AddFolderModal","args","EditFolderModal","EditFileModal","copyTextToClipboard","navigator","clipboard","fallbackCopyTextToClipboard","text","writeText","openNotificationWithIcon","err","textArea","document","createElement","top","left","position","appendChild","focus","successful","execCommand","removeChild","msg","FileManager","HomeOutlined","breadcrumb","setBreadcrumb","deleted","tableFilter","setTableFilter","isGroup","loadTable","requestDownloadFile","_onClickBreadcrumb","parentId","slice","_onClickBack","newBreadcrumb","newFilter","processBeforeSaveModal","extension","newData","owner","requestLoadParent","CopyOutlined","pathDownloadFile","styleDiv","display","alignItems","Icon","styleIcon","marginRight","FolderFilled","color","FileWordOutlined","FileExcelOutlined","FileImageOutlined","FileMarkdownOutlined","FilePdfOutlined","FilePptOutlined","FileTextOutlined","FileZipOutlined","FileOutlined","uploadRender","PlusOutlined","breadcrumbRender","add","tooltip","addGroup","edit","delete","RollbackOutlined","getItem","confirm","defaultValueSearch","deleteConfirm","deleteConfirmType","deleteConfirmTitle","deleteConfirmDescription","defaultSystemBtnProps","addAsCopy","FolderAddOutlined","EditOutlined","DeleteOutlined","up","ArrowUpOutlined","down","ArrowDownOutlined","search","settings","tooltipPlacement","SettingOutlined","FilterOutlined","deleteButtonModalConfirm","deleteButtonPopupConfirm","renderDeleteBtn","ExclamationCircleOutlined","content","centered","withOnClick","genProps","btnProps","renderBtn","rtdReducer","action","newState","set","debug","executeRequest","components"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAEaA,kBAAkB;;IAElBC,8BAA8B,SAA9BA,2BAA8B,CAACC,IAAD,EAAOC,MAAP;AAAA,QAC1CD,OAAOE,2BAAOF,IAAP,EAAaC,MAAb,EAAqBE,SAArB,CAA+BL,eAA/B,CAAP,GAAyD,IADf;AAAA;;AAG3C;AACA;IACaM,sBAAsB,SAAtBA,mBAAsB,CAACJ,IAAD;AAAA,QAAUE,2BAAOF,IAAP,EAAaC,MAAb,EAAV;AAAA;;IAEtBI,iCAAiC,SAAjCA,8BAAiC,CAACL,IAAD;AAAA,QAC7CE,2BAAOF,IAAP,EAAaM,OAAb,CAAqB,KAArB;AACC;AACA;AACA;AACA;AAJD,EAKEL,MALF,EAD6C;AAAA;;IASjCM,WAAW,SAAXA,QAAW,CAACC,UAAD,EAAaP,MAAb,EAAwB;AAC/C,KAAI,CAACO,UAAL,EAAiB;AAChB,SAAO,EAAP;AACA;AACD,KAAMC,MAAMP,2BAAOM,UAAP,CAAZ;AACA,QAAOC,IAAIC,OAAJ,KAAgBD,IAAIR,MAAJ,CAAWA,MAAX,CAAhB,GAAqCO,UAA5C;AACA;;IAEYG,gBAAgB,SAAhBA,aAAgB,CAACH,UAAD;AAAA,QAAgBD,SAASC,UAAT,EAAqB,YAArB,CAAhB;AAAA;;IAEhBI,2BAA2B,SAA3BA,wBAA2B,CAACJ,UAAD;AAAA,QACvCG,cAAcH,UAAd,KAA6B,IADU;AAAA;;IAG3BK,mBAAmB,SAAnBA,gBAAmB,CAACL,UAAD;AAAA,QAC/BD,SAASC,UAAT,EAAqB,qBAArB,KAA+C,IADhB;AAAA;;IAGnBM,iBAAiB,SAAjBA,cAAiB,CAACN,UAAD;AAAA,QAC7BD,SAASC,UAAT,EAAqB,YAArB,CAD6B;AAAA;;IAGjBO,SAAS,SAATA,MAAS,CAACf,IAAD;AAAA,QACrBE,2BAAOF,IAAP,EAAaG,SAAb,CAAuBL,eAAvB,EAAwCkB,WAAxC,EADqB;AAAA;;ACvCtB,IAAMC,QACN;AACIC,gBAAY,YADhB;AAEIC,oBAAgB;AAFpB,CADA;;ICOaC,eAAe,SAAfA,YAAe,CAACC,IAAD,EAAOC,GAAP;AAAA,WAAgB;AACxCC,cAAMC,MAAYL,cADsB;AAExCM,iBAAS,EAACJ,UAAD,EAAOC,QAAP;AAF+B,KAAhB;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHrB,IAAMI,OAAO,SAAPA,IAAO,GAAM,EAAnB;;AAEA,IAAMC,UAAU,SAAVA,OAAU,CAACC,aAAD;AAAA,QACtBA,cAAcC,MAAd,CACC,UAACC,SAAD,EAAYC,IAAZ;AAAA,SACCD,UAAUE,MAAV,CAAiBC,MAAMC,OAAN,CAAcH,IAAd,IAAsBJ,QAAQI,IAAR,CAAtB,GAAsC,CAACA,IAAD,CAAvD,CADD;AAAA,EADD,EAGC,EAHD,CADsB;AAAA,CAAhB;;AAOA,IAAMI,qBAAqB,SAArBA,kBAAqB,CAACC,IAAD,EAAU;AAC3C,KAAMC,UAAUD,KAAKE,GAAL,CAAS,UAACP,IAAD,EAAU;AAClC,MAAIA,KAAKQ,QAAL,IAAiBR,KAAKQ,QAAL,CAAcC,MAAnC,EAA2C;AAC1C,UAAO,CAACT,IAAD,EAAOI,mBAAmBJ,KAAKQ,QAAxB,CAAP,CAAP;AACA;AACD,SAAOR,IAAP;AACA,EALe,CAAhB;AAMA,QAAOM,OAAP;AACA,CARM;;AAUA,IAAMI,kBAAkB,SAAlBA,eAAkB,CAACL,IAAD,EAAOM,MAAP,EAAkB;AAChD,KAAML,UAAUD,KAAKE,GAAL,CAAS,UAACP,IAAD,EAAU;AAClC,MAAIA,KAAKQ,QAAL,IAAiBR,KAAKQ,QAAL,CAAcC,MAAnC,EAA2C;AAC1C,UAAO,CAACT,KAAKW,MAAL,CAAD,EAAeD,gBAAgBV,KAAKQ,QAArB,EAA+BG,MAA/B,CAAf,CAAP;AACA;AACD,SAAOX,KAAKW,MAAL,CAAP;AACA,EALe,CAAhB;AAMA,QAAOL,OAAP;AACA,CARM;;AAUA,IAAMM,mBAAmB,SAAnBA,gBAAmB,CAACP,IAAD,EAAOM,MAAP,EAAeE,QAAf,EAA4B;AAC3D,KAAIC,OAAO,EAAX;AACA,KAAId,OAAO,EAAX;AACA,MAAK,IAAIe,IAAI,CAAb,EAAgBA,IAAIV,KAAKI,MAAzB,EAAiCM,GAAjC,EAAsC;AACrCf,SAAOgB,kBAAkBX,KAAKU,CAAL,CAAlB,EAA2BJ,MAA3B,EAAmCE,QAAnC,CAAP;AACA,MAAIb,SAAS,KAAb,EAAoB,OAAOA,IAAP;AACpB;AACD,QAAOc,IAAP;AACA,CARM;;AAUP,IAAME,oBAAoB,SAApBA,iBAAoB,CAACC,WAAD,EAAcN,MAAd,EAAsBO,KAAtB,EAAgC;AACzD,KAAIH,UAAJ;AAAA,KAAOI,qBAAP;AAAA,KAAqBC,eAArB;;AAEA,KAAIF,UAAUD,YAAYN,MAAZ,CAAd,EAAmC;AAClC,SAAOM,WAAP;AACA,EAFD,MAEO;AACN,MAAIA,YAAYT,QAAhB,EAA0B;AACzB,QAAKO,IAAI,CAAT,EAAYA,IAAIE,YAAYT,QAAZ,CAAqBC,MAArC,EAA6CM,KAAK,CAAlD,EAAqD;AACpDI,mBAAeF,YAAYT,QAAZ,CAAqBO,CAArB,CAAf;AACAK,aAASJ,kBAAkBG,YAAlB,EAAgCR,MAAhC,EAAwCO,KAAxC,CAAT;AACA,QAAIE,WAAW,KAAf,EAAsB,OAAOA,MAAP;AACtB;AACD;AACD,SAAO,KAAP;AACA;AACD,CAfD;;AAiBO,IAAMC,eAAe,SAAfA,YAAe,GAAM;AACjC,QAAO,CAAC,CAAC,GAAD,IAAQ,CAAC,GAAT,GAAe,CAAC,GAAhB,GAAsB,CAAC,GAAvB,GAA6B,CAAC,IAA/B,EAAqCC,OAArC,CAA6C,QAA7C,EAAuD,UAACC,CAAD;AAAA,SAC7D,CACCA,IACCC,OAAOC,eAAP,CAAuB,IAAIC,UAAJ,CAAe,CAAf,CAAvB,EAA0C,CAA1C,IAAgD,MAAOH,IAAI,CAF7D,EAGEI,QAHF,CAGW,EAHX,CAD6D;AAAA,EAAvD,CAAP;AAMA,CAPM;;AAUA,IAAMC,2BAA2B,SAA3BA,wBAA2B,CAACC,IAAD,EAAOC,IAAP;AAAA,QAAiBA,QAAQA,KAAKrB,MAAL,GAAc,CAAvB,GAA4BqB,KAAK,CAAL,CAA5B,GAAsC,IAAtD;AAAA,CAAjC;;AAEA,IAAMC,0BAA0B,SAA1BA,uBAA0B,CAACF,IAAD,EAAOC,IAAP;AAAA,QAAiBA,QAAQA,KAAKrB,MAAL,GAAc,CAAvB,GAA4BqB,IAA5B,GAAmC,IAAnD;AAAA,CAAhC;;AAOA,IAAME,yBAAyB,SAAzBA,sBAAyB,CAACC,MAAD,EAASC,OAAT,EAAqB;AACvD,KAAIC,eAAe,EAAnB;AACAC,QAAON,IAAP,CAAYG,MAAZ,EAAoBI,OAApB,CAA4B,UAACC,GAAD;AAAA,SACxB,CAACJ,QAAQK,QAAR,CAAiBD,GAAjB,CAAD,GAA0BH,aAAaG,GAAb,IAAoBL,OAAOK,GAAP,CAA9C,GAA6DE,SADrC;AAAA,EAA5B;AAAA;AAGA,QAAOL,YAAP;AACH,CANM;;IAQMM,oBAAoB,SAApBA,iBAAoB,CAACC,KAAD,EAAQC,OAAR,EAAoB;AACpD,KAAID,MAAME,QAAV,EAAoB;AACnBC,UAAQH,KAAR,CAAcA,MAAME,QAAN,CAAeE,MAA7B,EAAqCJ,MAAME,QAAN,CAAevC,IAApD;AACA,MAAM0C,mBAAoBL,MAAME,QAAN,CAAevC,IAAf,IAAuBqC,MAAME,QAAN,CAAevC,IAAf,CAAoBqC,KAA5C,GACtBA,MAAME,QAAN,CAAevC,IAAf,CAAoBqC,KADE,GAEtB,qBAFH;AAGA,oCAAaA,KAAb,CAAmB;AAClBC,kBAAaD,MAAME,QAAN,CAAeE,MAA5B,UAAuCH,OADrB;AAElBK,gBAAaD;AAFK,GAAnB;AAIA,EATD,MASO;AACNF,UAAQH,KAAR,CAAcA,KAAd;AACA,oCAAaA,KAAb,CAAmB;AAClBC,YAAS;AADS,GAAnB;AAGA;AACD;;AAEM,IAAMM,kBAAkB,SAAlBA,eAAkB,OAAgD;AAAA,KAA9CC,QAA8C,QAA9CA,QAA8C;AAAA,KAApC7D,YAAoC,QAApCA,YAAoC;AAAA,KAAtB6B,KAAsB,QAAtBA,KAAsB;AAAA,KAAfiC,SAAe,QAAfA,SAAe;;AAC9E,KAAGD,SAAS5D,IAAZ,EAAkB;AACjB;AACA,MAAG4D,SAAS1D,IAAT,KAAkB,OAArB,EACCH,gBAAgBA,aAAa6D,SAAS5D,IAAtB,EAA6B;AAC5C8D,cAAWjF,4BADiC;AAE5C;AACA+C,UAAOA,KAHqC;AAI5CiC,cAAWA;AAJiC,GAA7B,CAAhB,CADD,KAQC9D,gBAAgBA,aAAa6D,SAAS5D,IAAtB,EAA4B4B,KAA5B,CAAhB;AACD;AACD,CAbM;;AAeA,SAASmC,UAAT,GAAsB;AAAA,uBACMC,0BAAMC,QAAN,CAAe,KAAf,CADN;AAAA;AAAA,KACrBC,SADqB;AAAA,KACVC,YADU;;AAG5BH,2BAAMI,SAAN,CAAgB,YAAM;AACrBD,eAAa,IAAb;AACA,EAFD,EAEG,EAFH;AAGA,QAAOD,SAAP;AACA;;ACxHM,IAAMG,cAAY,SAAZA,SAAY,CAACC,SAAD,EAAYC,gBAAZ,EAAiC;;AAEtD,QAAMC,kBAAkB,SAAlBA,eAAkB,CAACC,KAAD,EAAQC,QAAR,EAAqB;AAAA,YAClCC,SADkC,GACXD,QADW,CAClCC,SADkC;AAAA,YACvBf,QADuB,GACXc,QADW,CACvBd,QADuB;;AAEzC,YAAIgB,QAAQ,EAAZ;AACA,YAAGD,aAAaA,UAAUxD,MAAV,GAAmB,CAAnC,EAAqC;AACjCwD,sBAAU5B,OAAV,CAAkB,gBAAQ;AAAA,oBACfR,IADe,GACU7B,IADV,CACf6B,IADe;AAAA,oBACTvC,IADS,GACUU,IADV,CACTV,IADS;AAAA,oBACH6D,SADG,GACUnD,IADV,CACHmD,SADG;;AAEtB,oBAAGtB,QAAQvC,IAAX,EACI4E,MAAMrC,IAAN,IAAcsC,+BAAWC,GAAX,CAAeL,KAAf,EAAsBzE,IAAtB,CAAd;AACJ,oBAAGuC,QAAQsB,SAAX,EACIe,MAASrC,IAAT,kBAA4BsC,+BAAWC,GAAX,CAAeL,KAAf,EAAsBZ,SAAtB,CAA5B;AACP,aAND;AAOH;AACD,YAAGD,YAAYA,SAASC,SAAxB,EAAmC;AAC/B;AACAe,kBAAMG,iBAAN,GAA0BF,+BAAWC,GAAX,CAAeL,KAAf,EAAsBb,SAASC,SAA/B,CAA1B;AACH;;AAED,eAAOe,KAAP;AACH,KAlBD;AAmBA,QAAMI,qBAAqB,SAArBA,kBAAqB,CAACpB,QAAD;AAAA,eACvBqB,yBAAmB,EAAElF,cAAcA,YAAhB,EAAnB,EAAkD6D,QAAlD,CADuB;AAAA,KAA3B;;AAGA,QAAMsB,eAAe;AACjBC,iBAAS,UADQ;AAEjBC,uBAAe;AAFE,KAArB;;AAKA,QAAMC,8BAAsBH,YAAtB,EAAuCX,gBAAvC,CAAN;;AAEA,WAAOe,mBAAQd,eAAR,EAAyBQ,kBAAzB,EAA8C,UAACO,KAAD,EAAW;AAAA,YAErDC,aAFqD,GAEHD,KAFG,CAErDC,aAFqD;AAAA,YAEtCzF,YAFsC,GAEHwF,KAFG,CAEtCxF,YAFsC;AAAA,YAExBgF,iBAFwB,GAEHQ,KAFG,CAExBR,iBAFwB;;AAI5D;;AACA,YAAMJ,YAAYY,MAAMZ,SAAN,GAAkBY,MAAMZ,SAAxB,GAAoC,EAAtD;;AAEA;AACA,YAAMf,WAAW2B,MAAM3B,QAAN,GAAiB2B,MAAM3B,QAAvB,GAAkC,EAAnD;;AAR4D,wBAUhBK,eAAS,EAAT,CAVgB;AAAA;AAAA,YAUrDwB,cAVqD;AAAA,YAUrCC,iBAVqC;;AAAA,YAYrDP,OAZqD,GAY3BE,cAZ2B,CAYrDF,OAZqD;AAAA,YAY5CC,aAZ4C,GAY3BC,cAZ2B,CAY5CD,aAZ4C;;;AAc5D,YAAMO,gBAAgB,eAAhB,EAAiC,cAAjC,EAAiD,WAAjD,2BAAiEhB,UAAU1D,GAAV,CAAc;AAAA,mBAAQP,KAAK6B,IAAb;AAAA,SAAd,CAAjE,IAAmG,UAAnG,EAA+G,mBAA/G,EAAN;;AAEA,YAAM2B,YAAYH,YAAlB;;AAEA,YAAM6B,2BAA2B,SAA3BA,wBAA2B,CAAChE,KAAD;AAAA,mBAC7B8D,kBAAkB,UAACG,SAAD;AAAA,oCAAqBA,SAArB,EAAmCjE,KAAnC;AAAA,aAAlB,CAD6B;AAAA,SAAjC;;AAGA;AACA+C,kBAAU1D,GAAV,CAAc,gBAAQ;AAClB,mBAAOmD,gBAAW,YAAM;AACpB,oBAAGF,aAAaxD,KAAK6B,IAArB,EAA2B;AACvB;AACA7B,yBAAKoF,QAAL,IAAiBpF,KAAKoF,QAAL,CAAc;AAC3BlE,+BAAO2D,MAAM7E,KAAK6B,IAAX,CADoB;AAE3BsB,mCAAW0B,MAAS7E,KAAK6B,IAAd,eAFgB;AAG3BmD,2CAAmBE,wBAHQ,EAAd,CAAjB;AAIH;AACD;AACH,aATM,EASJ,CAACL,MAAM7E,KAAK6B,IAAX,CAAD,CATI,CAAP;AAUH,SAXD;;AAaA;AACA6B,wBAAU,YAAM;AACZ;AACA,gBAAI2B,SAASR,MAAMH,aAAN,CAAb;AACA,gBAAIW,WAAW,IAAX,IAAmBA,WAAW7C,SAA9B,IAA4C,OAAO6C,MAAP,KAAkB,QAAlB,IAA8BA,OAAOC,IAAP,OAAkB,EAAhG,EACID,SAAS7C,SAAT;;AAEJ;AACA;;AAEA,gBAAIsC,kBAAkB,QAAlB,IAA8BA,kBAAkB,QAApD,EACI7B,gBAAgB,EAAEC,kBAAF,EAAY7D,0BAAZ,EAA0B6B,OAAOmE,MAAjC,EAAhB;AACP,SAXD,EAWG,CAACR,KAAD,CAXH;;AAaA;AACAnB,wBAAU,YAAM;AACZ,gBAAGqB,kBAAkBA,eAAe7D,KAApC,EAA2C;AACvC;AACA2D,sBAAMJ,OAAN,KAAkBI,MAAMJ,OAAN,EAAeM,eAAe7D,KAA9B,CAAlB;AACH;AACJ,SALD,EAKG,CAAC6D,eAAe7D,KAAhB,CALH;;AAOA,YAAMkE,WAAW,SAAXA,QAAW,GAAa;AAC1B;AACA;AACA;AACA,gBAAGN,kBAAkB,QAArB,EACI7B,gBAAgB,EAACC,kBAAD,EAAW7D,0BAAX,EAAyB6B,uDAAzB,EAAyCiC,WAAWkB,iBAApD,EAAhB;AACJ;AACA;;AAEA,gBAAGU,kBAAkBA,eAAeQ,cAAf,CAA8B,OAA9B,CAArB,EAA6D;AAAA,gBACrBR,cADqB,CAClD7D,KADkD;AAAA,wBACxCsE,eADwC,2BACrBT,cADqB;;AAEzDG,yCAAyBM,eAAzB;AACH;;AAEDX,kBAAMJ,OAAN,KAAkBI,MAAMJ,OAAN,yBAAlB;AACH,SAfD;;AAiBA,YAAMgB,YAAY,SAAZA,SAAY,CAACC,UAAD,EAAaC,CAAb,EAAmB;AACjCA,cAAEC,cAAF;AACA;AACA3C,4BAAgB,EAACC,kBAAD,EAAW7D,0BAAX,EAAyB6B,OAAOwE,UAAhC,EAA4CvC,WAAWkB,iBAAvD,EAAhB;AACH,SAJD;;AAMA,YAAMwB,aAAa7D,uBAAuB6C,KAAvB,EAA8BI,YAA9B,CAAnB;AACA,YAAMa,gBAAiBhB,kBAAkB,QAAnB,GAA+B,EAACiB,UAAUN,SAAX,EAA/B,GAAuD,EAA7E;AACA;AACA,eACInC;AAAC,qBAAD;AAAA,yBACQuC,UADR,EAEQd,cAFR,qBAGUN,OAHV,EAGoBW,QAHpB,GAIQU,aAJR;AAKEjB,kBAAMrE;AALR,SADJ;AAQH,KA3FM,CAAP;AA4FH,CA3HM;;ACPA,IAAMwF,WAAW,IAAjB;;ACQP;AACA,IAAMC,aAAa,SAAbA,UAAa,CAACpB,KAAD,EAAW;AAC1B;AACA,QAAGA,MAAM3D,KAAT,EAAe;AACX,YAAG,OAAO2D,MAAM3D,KAAb,KAAuB,QAA1B,EAAmC;AAC/B;AACA2D,kBAAMO,QAAN,CAAejH,2BAAO0G,MAAM3D,KAAb,CAAf,EAAoC2D,MAAM3D,KAA1C;AACH;AACD;AACA;AACA;AACA;AACH;AACD,QAAMA,QAAQ2D,MAAM3D,KAAN,GAAe,OAAO2D,MAAM3D,KAAb,KAAuB,QAAvB,GAAkC/C,2BAAO0G,MAAM3D,KAAb,CAAlC,GAAwD2D,MAAM3D,KAA7E,GAAsFsB,SAApG;AACA,QAAM0D,mBAASC,OAAO,MAAhB,IAA4BtB,SAASA,MAAMqB,KAA3C,CAAN,CAb0B;AAc1B;AACA,WAAO5C,sFAAmBuB,KAAnB,IAA0B,OAAOqB,KAAjC,EAAwC,OAAOhF,KAA/C,IAAP;AACH,CAhBD;;AAkBA;AACA,IAAMkF,mBAAiB,SAAjBA,cAAiB,CAACvB,KAAD,EAAW;AAAA,QACvBwB,KADuB,GACExB,KADF,CACvBwB,KADuB;AAAA,QAChBnF,KADgB,GACE2D,KADF,CAChB3D,KADgB;AAAA,QACThD,MADS,GACE2G,KADF,CACT3G,MADS;;AAE9B,QAAMmH,SAASnE,QAAShD,SAASM,SAAS0C,KAAT,EAAgBhD,MAAhB,CAAT,GAAmCc,OAAOkC,KAAP,CAA5C,GAA6DsB,SAA5E;AACA,WAAOc;AAAA,wCAAe,IAAf;AAAwBuB,aAAxB;AAAA;AAAiCwB,iBAAShB,MAA1C;AAAA;AAAA,KAAP;AACH,CAJD;;AAMA;AACA,IAAMiB,SAAS,SAATA,MAAS,CAACzB,KAAD,EAAW;AACtB,QAAMjB,YAAYD,yCAAqB,EAAEc,SAAS,SAAX,EAArB,CAAlB;AACA;AACA;AACA,QAAM8B,UAAU,SAAVA,OAAU,CAACZ,CAAD;AAAA,eAAOd,MAAM0B,OAAN,IAAiB1B,MAAM0B,OAAN,CAAcZ,CAAd,EAAiBd,MAAM2B,KAAvB,CAAxB;AAAA,KAAhB;AACA,WAAOC,uBAAuB7C,SAAvB,eAAsCiB,KAAtC,IAA6C0B,SAASA,OAAtD,IAAP;AACH,CAND;;AAQA;AACA,IAAMG,SAAS,SAATA,MAAS,CAAC7B,KAAD,EAAW;AAAA,QACfrE,QADe,GACHqE,KADG,CACfrE,QADe;;AAEtB,QAAImG,YAAY,IAAhB;AACA,QAAId,aAAa,IAAjB;;AAEA,QAAI3F,MAAMC,OAAN,CAAcK,QAAd,CAAJ,EAA6B;AACzBqC,gBAAQ+D,IAAR,CAAa,gEAAb;AACA,eAAO,IAAP;AACH,KAHD,MAGO,IAAG/B,MAAMgC,MAAT,EAAiB;AACpB;AACAF,oBAAY9B,MAAMgC,MAAlB;AACAhB,kCAAkBhB,KAAlB,IAAyBC,eAAe,QAAxC;AACA,eAAOgC,cAAcH,SAAd,EAAyBd,UAAzB,CAAP;AACH,KALM,MAKA,IAAGvC,0BAAMyD,cAAN,CAAqBvG,QAArB,CAAH,EAAmC;AACtC;AACAqF,kCAAkBrF,SAASqE,KAA3B,EAAqCA,KAArC,IAA4CC,eAAe,QAA3D;AACA,eAAQxB,0BAAM0D,YAAN,CAAmBxG,QAAnB,EAA6BqF,UAA7B,CAAR;AACH,KAJM,MAIA;AACHhD,gBAAQ+D,IAAR,CAAa,0CAAb;AACA,eAAO,IAAP;AACH;AACJ,CArBD;;AAuBA;AACA,IAAMK,aAAa,SAAbA,UAAa,CAACpC,KAAD,EAAW;AAC1B,WAAOvB;AAAA;AAAA,UAAK,WAAc0C,QAAd,iBAAL;AAA4CnB,cAAMrE;AAAlD,KAAP;AACH,CAFD;;AAIA;AACA,IAAM0G,WAAW,SAAXA,QAAW,CAACrC,KAAD,EAAW;AACxB,QAAIsC,MAAM,CAAInB,QAAJ,gBAAV;AACAnB,UAAMuC,SAAN,IAAmBD,IAAIE,IAAJ,CAAYrB,QAAZ,2BAAnB;AACAnB,UAAMyC,UAAN,IAAoBH,IAAIE,IAAJ,CAAYrB,QAAZ,2BAApB;AACA,WAAO1C;AAAA;AAAA,UAAK,WAAW6D,IAAII,IAAJ,CAAS,GAAT,CAAhB;AAAgC1C,cAAMrE;AAAtC,KAAP;AACH,CALD;;AAOA;AACA,IAAMgH,aAAa,SAAbA,UAAa,CAAC3C,KAAD,EAAW;AAC1B,WAAOvB;AAAA;AAAA,UAAK,WAAc0C,QAAd,iBAAL;AAA4CnB,cAAMrE;AAAlD,KAAP;AACH,CAFD;;AAIA,IAAMiH,UAAU,SAAVA,OAAU,CAAC5C,KAAD,EAAW;AACvB,QAAIsC,MAAM,EAAV;AACAtC,UAAM6C,SAAN,IAAmBP,IAAIE,IAAJ,CAASxC,MAAM6C,SAAf,CAAnB;AACA7C,UAAMyC,UAAN,IAAoBH,IAAIE,IAAJ,CAAYrB,QAAZ,8BAApB;AACA,WAAO1C;AAAA,kCAAS,OAAT;AAAA,qBAAqBuB,KAArB,IAA4B,WAAWsC,IAAII,IAAJ,CAAS,GAAT,CAAvC;AAAuD1C,cAAMrE;AAA7D,KAAP;AACH,CALD;;ACjFA,IAAMyE,iBAAe,CAAC,OAAD,EAAU,eAAV,EAA2B,OAA3B,CAArB;AACA,IAAM0C,aAAW,SAAXA,QAAW,CAAC9C,KAAD,EAAW;AAAA,KAEpB+C,KAFoB,GAEJ/C,KAFI,CAEpB+C,KAFoB;AAAA,KAEbpB,KAFa,GAEJ3B,KAFI,CAEb2B,KAFa;;AAG3B,KAAI3C,mBAAmB7B,uBAAuB6C,KAAvB,EAA8BI,cAA9B,CAAvB;AACA,KAAI2C,KAAJ,EACC,OAAOC,oBAAoBD,MAAM9C,aAA1B,aACJgD,wBAAejE,gBAAf,CADI,IACiC+D,KADjC,IACwCpB,YADxC,IAAP,CADD,KAIC,OAAO,IAAP;AACD,CATD;;AAWAmB,WAASI,SAAT,GAAqB;AACpBH,QAAOI,8BAAU/F,MAAV,CAAiBgG;AADJ,CAArB;;ACTA,IAAMhD,iBAAe,CAAC,UAAD,EAAa,eAAb,CAArB;;AAEA,IAAMiD,cAAY,SAAZA,SAAY,CAACrD,KAAD,EAAW;AAAA,QACjBsD,KADiB,GACPtD,KADO,CACjBsD,KADiB;;AAGzB;;AAEA,QAAMC,WAAW,SAAXA,QAAW,CAAC/H,IAAD,EAAOgI,iBAAP,EAA6B;;AAE1C,eAAQhI,QAAQA,KAAKE,GAAL,CAAS,UAACP,IAAD,EAAOsI,KAAP,EAAiB;AACtC,gBAAIR,YAAY9F,uBAAuBhC,IAAvB,EAA6BiF,cAA7B,CAAhB;AACA;;AAEA,oBAAQjF,KAAK8E,aAAb;AACI,qBAAK,MAAL;AACI,wBAAIyD,qBAAavI,IAAb,CAAJ;AACA,wBAAIwI,OAAOF,KAAX;AACA,wBAAID,qBAAqBA,kBAAkB7B,KAA3C,EAAkD;AAC9C,4BAAI+B,MAAM1G,IAAV,EAAgB;AACZ,gCAAI3B,MAAMC,OAAN,CAAcoI,MAAM1G,IAApB,CAAJ,EAA+B;AAC3B0G,sCAAM1G,IAAN,IAAcwG,kBAAkB7B,KAAlB,CAAwB3E,IAAtC,2BAA+C0G,MAAM1G,IAArD;AACA0G,sCAAME,QAAN,IAAkBJ,kBAAkB7B,KAAlB,CAAwB3E,IAA1C,2BAAmD0G,MAAM1G,IAAzD;AACH,6BAHD,MAGO;AACH0G,sCAAM1G,IAAN,GAAa,CAACwG,kBAAkB7B,KAAlB,CAAwB3E,IAAzB,EAA+B0G,MAAM1G,IAArC,CAAb;AACA0G,sCAAME,QAAN,IAAkBJ,kBAAkB7B,KAAlB,CAAwB3E,IAA1C,2BAAmD0G,MAAM1G,IAAzD;AACH;AACJ;AACJ;AACD;AACA,2BAAOyB,wCAACqE,UAAD,aAAU,UAAQa,IAAlB,IAA8BD,KAA9B,IAAqC,oBAAYF,iBAAZ,CAArC,IAAP;AACJ,qBAAK,WAAL;AACI,2BACI/E;AAAA,kDAAS,IAAT;AAAA,mCAAc,KAAKgF,KAAnB,IAA8BR,SAA9B;AACK,kCAACY,MAAD,EAASC,SAAT,EAAuB;AACpB,gCAAMC,QAAQ,EAAEF,oCAAYA,MAAZ,EAAF,EAAuBC,wBAAgBA,SAAhB,CAAvB,EAAd;AACA,mCAAOP,SAASpI,KAAKQ,QAAd,EAAwBoI,KAAxB,CAAP;AACH;AAJL,qBADJ;AAQJ,qBAAK,UAAL;AACI;AACA,2BACItF;AAAA;AAAA,0BAAK,KAAKgF,KAAV;AACKD,6CAAqBA,kBAAkBK,MAAvC,IAAiDL,kBAAkBK,MAAlB,CAAyBnI,GAAzB,CAA6B,UAACiG,KAAD,EAAQqC,MAAR,EAAmB;AAC9F;AACA,gCAAMD,mBAAUpC,oBAAYA,KAAZ,CAAV,IAAkC6B,iBAAlC,CAAN;AACA,mCAAO/E;AAAA;AAAA,kCAAK,KAAKkD,MAAMlE,GAAhB;AAAsB8F,yCAASpI,KAAKQ,QAAd,EAAwBoI,KAAxB,CAAtB;AAAA;AAAA,6BAAP;AACH,yBAJiD;AADtD,qBADJ;AASJ;AACI,2BAAOE,wBAAwB9I,KAAK8E,aAA7B,aAA8CxC,KAAKgG,KAAnD,IAA6DR,SAA7D,GAA0EM,SAASpI,KAAKQ,QAAd,EAAwB6H,iBAAxB,CAA1E,CAAP;AAtCR;AAwCH,SA5Ce,CAAT,IA4CA,IA5CP;AA6CH,KA/CD;;AAiDA,WAAOD,SAASD,KAAT,CAAP;AACH,CAvDD;;AAyDAD,YAAUH,SAAV,GAAsB;AAClBI,WAAOH,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,EAAoCgG;AADzB,CAAtB;;AC3DA,IAAMhD,iBAAe,CACjB,eADiB,EAEjB,WAFiB,EAGjB,YAHiB,EAIjB,QAJiB,EAKjB,MALiB,EAMjB,QANiB,EAOjB,cAPiB,EAQjB,cARiB,EASjB,iBATiB,EAUjB,gBAViB,EAWjB,uBAXiB,CAArB;;AAcA;AACA,IAAM+D,SAAO,SAAPA,IAAO,CAACnE,KAAD,EAAW;AAAA,QAEhBoE,YAFgB,GAUhBpE,KAVgB,CAEhBoE,YAFgB;AAAA,QAGhBC,MAHgB,GAUhBrE,KAVgB,CAGhBqE,MAHgB;AAAA,QAIhBC,IAJgB,GAUhBtE,KAVgB,CAIhBsE,IAJgB;AAAA,QAKhBC,MALgB,GAUhBvE,KAVgB,CAKhBuE,MALgB;AAAA,QAMhBC,YANgB,GAUhBxE,KAVgB,CAMhBwE,YANgB;AAAA,QAOhBC,eAPgB,GAUhBzE,KAVgB,CAOhByE,eAPgB;AAAA,QAQhBC,cARgB,GAUhB1E,KAVgB,CAQhB0E,cARgB;AAAA,QAShBC,qBATgB,GAUhB3E,KAVgB,CAShB2E,qBATgB;;AAYpB;;AAZoB,oBAaQjG,eAAS,KAAT,CAbR;AAAA;AAAA,QAabkG,MAba;AAAA,QAaLC,SAbK;;AAAA,qBAcoBnG,eAAS,EAAT,CAdpB;AAAA;AAAA,QAcboG,YAda;AAAA,QAcCC,eAdD;;AAAA,qBAeoBrG,eAAS,EAAT,CAfpB;AAAA;AAAA,QAebsG,YAfa;AAAA,QAeCC,eAfD;;AAiBpBpG,oBAAU,YAAM;AACZ,YAAI,CAAC+F,MAAL,EAAa;AACT,gBAAIR,iBAAiBtJ,IAArB,EACIsJ,aAAac,gBAAb,EADJ,KAGIL,UAAU,IAAV;AACP;AACJ,KAPD,EAOG,CAACD,MAAD,CAPH;;AASA/F,oBAAU,YAAM;AACZkG,wBAAgB5H,uBAAuB6C,KAAvB,EAA8BI,cAA9B,CAAhB;AACA;AACH,KAHD,EAGG,CAACJ,KAAD,CAHH;;AAMA,QAAMkF,mBAAmB,SAAnBA,gBAAmB,CAAC1J,IAAD,EAAU;AAC/B;AACAyJ,wBAAgBzJ,IAAhB;AACAqJ,kBAAU,IAAV;AACH,KAJD;;AAOA,QAAIM,gBAAJ;AACA,QAAInF,SAASA,MAAMoF,IAAnB,EAAyB;AACrBD,kBAAUnF,MAAMoF,IAAhB;AACH,KAFD,MAEO;AAAA,+BACYC,0BAAQC,OAAR,EADZ;AAAA;AAAA,YACIF,IADJ;;AAEHD,kBAAUC,IAAV;AACH;;AAED,QAAMG,aAAa,SAAbA,UAAa,GAAM;AACrB,YAAIjD,MAAM,CAAInB,QAAJ,gBAAV;AACAnB,cAAMuC,SAAN,IAAmBD,IAAIE,IAAJ,CAAYrB,QAAZ,2BAAnB;AACAnB,cAAMyC,UAAN,IAAoBH,IAAIE,IAAJ,CAAYrB,QAAZ,2BAApB;AACA,eAAOmB,IAAII,IAAJ,CAAS,GAAT,CAAP;AACH,KALD;;AAOA,QAAM8C,WAAW,SAAXA,QAAW,CAACC,SAAD,EAAe;AAC5B,YAAMC,SAASf,wBAAwBA,sBAAsBc,SAAtB,CAAxB,GAA2DA,SAA1E;AACA;AACA,YAAME,0BACCX,YADD,EAECU,MAFD,CAAN;;AAMA;AACA;AACA;AACA;AACA1H,gBAAQ4H,GAAR,qBAA6B5F,MAAMhD,IAAN,GAAagD,MAAMhD,IAAnB,GAA0B,cAAvD,WAA4E2I,UAA5E;AACA,YAAInB,gBAAgBC,eAApB,EAAqC;AACjC;AACA;AACA;AACA;AACA;AACAA,4BAAgB;AACZoB,wBAAQnB,cADI;AAEZlJ,sBAAMmK;AAFM,aAAhB,EAIKG,IAJL,CAIU,oBAAY;AACd,kDAAaC,OAAb,CAAqB;AACjBjI,6BAAS;AADQ,iBAArB;AAGA,oBAAIkC,MAAMwF,QAAV,EACIxF,MAAMwF,QAAN,CAAeE,MAAf;AACP,aAVL,EAWKM,KAXL,CAWW;AAAA,uBAASpI,kBAAkBC,KAAlB,EAAyB,uBAAzB,CAAT;AAAA,aAXX;AAYH,SAlBD,MAkBO,IAAImC,MAAMwF,QAAV,EACHxF,MAAMwF,QAAN,CAAeE,MAAf;AACP,KAlCD;;AAoCA,QAAMO,iBAAiB,SAAjBA,cAAiB,YAAa;AAChCjI,gBAAQH,KAAR,CAAc,SAAd,EAAyBqI,SAAzB;AACAlG,cAAMiG,cAAN,IAAwBjG,MAAMiG,cAAN,CAAqBC,SAArB,CAAxB;AACH,KAHD;;AAKA,QAAMC,SAAS,SAATA,MAAS,CAAC9B,MAAD;AAAA,eAAY5F;AAAA;AAAA,cAAK,WAAc0C,QAAd,iBAAL;AAA2C,oDAACkC,WAAD,IAAW,OAAOgB,MAAlB;AAA3C,SAAZ;AAAA,KAAf;AACA,QAAM+B,SAAS,SAATA,MAAS,CAAC7B,MAAD;AAAA,eAAY9F;AAAA;AAAA,cAAK,WAAc0C,QAAd,iBAAL;AAA2C,oDAACkC,WAAD,IAAW,OAAOkB,MAAlB;AAA3C,SAAZ;AAAA,KAAf;;AAEA,WACI9F;AAAC,iCAAD,CAAO,QAAP;AAAA;AACKmG,iBACKnG;AAAA;AAAA;AACE,sBAAM0G;AADR,eAEML,YAFN;AAGE,2BAAcA,aAAajC,SAA3B,SAAwC1B,QAAxC,UAHF;AAIE,oCAAY2D,aAAazD,KAAzB,IAAgCC,OAAO,MAAvC,EAA+C+E,QAAQ,MAAvD,GAJF;AAKE,4CAAoBvB,aAAawB,aAAjC,EAAmDtB,YAAnD,CALF;AAME,0BAAUQ,QANZ;AAOE,gCAAgBS;AAPlB;AASE;AAAC,yCAAD,CAAO,QAAP;AAAA;AACK5B,yBAAS8B,OAAO9B,MAAP,CAAT,GAA0B,IAD/B;AAEKC,uBAAO7F;AAAA;AAAA,sBAAK,WAAW8G,YAAhB;AAA8B,4DAAClC,WAAD,IAAW,OAAOiB,IAAlB;AAA9B,iBAAP,GAAuE,IAF5E;AAGKtE,sBAAMrE,QAHX;AAIK4I,yBAAS6B,OAAO7B,MAAP,CAAT,GAA0B;AAJ/B;AATF,SADL,GAiBK;AAlBV,KADJ;AAsBH,CAxHD;;AA0HAJ,OAAKjB,SAAL,GAAiB;;AAEb;AACAX,eAAWY,8BAAUoD,IAHR;;AAKb;AACA9D,gBAAYU,8BAAUoD,IANT;;AAQb;AACAlC,YAAQlB,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CATK;;AAWb;AACAkH,UAAMnB,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAZO;;AAcb;AACAmH,YAAQpB,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAfK;;AAiBb;;AAEAgH,kBAAcjB,8BAAUqD,IAnBX;;AAqBb;AACAhC,kBAAcrB,8BAAUoD,IAtBX;;AAwBb;AACA9B,qBAAiBtB,8BAAUqD,IAzBd;;AA2Bb;AACA9B,oBAAgBvB,8BAAUsD,MA5Bb;;AA8Bb;AACA9B,2BAAuBxB,8BAAUqD;AA/BpB,CAAjB;;AAkCArC,OAAKxE,YAAL,GAAoB;AAChB4C,eAAW,KADK;AAEhBE,gBAAY,KAFI;AAGhB2B,kBAActJ,IAHE;AAIhB0J,kBAAc;AAJE,CAApB;;AC/KA;AACA,IAAMkC,WAAS,SAATA,MAAS,QAAS;;AAEpB,QAAMC,SAAS,SAATA,MAAS,GAAM;AACjB,YAAIrE,MAAM,CAAInB,QAAJ,aAAV;AACAnB,cAAM6C,SAAN,IAAmBP,IAAIE,IAAJ,CAASxC,MAAM6C,SAAf,CAAnB;AACA,eAAOP,IAAII,IAAJ,CAAS,GAAT,CAAP;AACH,KAJD;;AAMA,WACIjE;AAAA;AAAA,qBAASuB,KAAT,IAAgB,WAAW2G,QAA3B;AACK3G,cAAMrE;AADX,KADJ;AAKH,CAbD;;ACFA,IAAMiL,WAAW,SAAXA,QAAW,QAAS;AAAA,QAEdvK,KAFc,GAEJ2D,KAFI,CAEd3D,KAFc;;AAAA,oBAIMqC,eAAS,CAAT,CAJN;AAAA;AAAA,QAIf8B,MAJe;AAAA,QAIPqG,SAJO;;AAMtBhI,oBAAU,YAAM;AACZ,YAAGxC,UAAUsB,SAAV,IAAuBtB,QAAQ2D,MAAMrE,QAAN,CAAeC,MAAjD,EAAyD;AACrDiL,sBAAUxK,KAAV;AACH;AACJ,KAJD,EAIG,CAACA,KAAD,CAJH;;AAMA,WAAQ2D,MAAMrE,QAAN,CAAe6E,MAAf,CAAR;AACH,CAbD;;ACEO,IAAMsG,UACZrI;AAAA;AAAA,GAAK,WAAW,oBAAhB;AACE,IADF;AAEC;AAAA;AAAA;AAAA;AAAA,EAFD;AAEyB;AAFzB,CADM;;AAOA,IAAMsI,YACZtI;AAAA;AAAA,GAAK,WAAW,oBAAhB;AACE,IADF;AAEC;AACC,OAAI,qDADL;AAEC,aAAWA,wCAACuI,qBAAD,IAAiB,OAAO,EAACC,UAAU,EAAX,EAAxB,EAAwC,UAAxC;AAFZ,GAFD;AAKI;AALJ,CADM;;ACPP,IAAMC,kBAAgB,SAAhBA,aAAgB,CAAClH,KAAD,EAAW;AAAA,KACzBmH,MADyB,GACJnH,KADI,CACzBmH,MADyB;AAAA,KACjBC,SADiB,GACJpH,KADI,CACjBoH,SADiB;AAAA,KAEzBtL,MAFyB,GAE0BqL,MAF1B,CAEzBrL,MAFyB;AAAA,KAEjBuL,WAFiB,GAE0BF,MAF1B,CAEjBE,WAFiB;AAAA,KAEJC,eAFI,GAE0BH,MAF1B,CAEJG,eAFI;AAAA,KAEaC,SAFb,GAE0BJ,MAF1B,CAEaI,SAFb;;;AAIhC,KAAMC,gBAAgB,SAAhBA,aAAgB,CAAC1G,CAAD,EAAO;AAC5B,MAAMrF,UAAUV,QAAQc,gBAAgBuL,UAAUpH,KAAV,CAAgBxE,IAAhC,EAAsC2L,OAAOrL,MAA7C,CAAR,CAAhB;AACA,MAAM2L,aAAa1M,QAAQQ,mBAAmB6L,UAAUpH,KAAV,CAAgBxE,IAAnC,CAAR,EAA0DkM,MAA1D,CAAiE,UAACvM,IAAD;AAAA,UAAUM,QAAQiC,QAAR,CAAiBvC,KAAKW,MAAL,CAAjB,CAAV;AAAA,GAAjE,CAAnB;AACA,MAAM6L,cAAclM,QAAQG,MAA5B;AACA,MAAMgM,eAAeN,gBAAgB1L,MAArC;AACA,MAAMiM,UAAU,EAAEF,gBAAgBC,YAAlB,CAAhB;;AAEA;AACAP,cAAY,EAACS,UAAUD,OAAX,EAAoBpM,SAASA,OAA7B,EAAsCgM,YAAYA,UAAlD,EAAZ;AACA,EATD;;AAWA,QACChJ;AACC,iBAAe8I,cAAc,IAD9B;AAEC,YAAUC,aAFX;AAGC,WAASD;AAHV,GADD;AAOA,CAtBD;;ACIA,IAAMQ,mBAAiB,SAAjBA,cAAiB,CAACvM,IAAD,EAAOM,MAAP;AAAA,QACtBN,KAAKE,GAAL,CAAS,UAACP,IAAD,EAAU;AAClB,MAAIA,KAAKQ,QAAL,IAAiBR,KAAKQ,QAAL,CAAcC,MAAnC,EAA2C;AAC1C,UAAO,CAACT,KAAKW,MAAL,CAAD,EAAeiM,eAAe5M,KAAKQ,QAApB,EAA8BG,MAA9B,CAAf,CAAP;AACA;AACD,SAAOX,KAAKW,MAAL,CAAP;AACA,EALD,CADsB;AAAA,CAAvB;;AAQA,IAAMkM,iBAAe,SAAfA,YAAe,CAACxM,IAAD,EAAOyM,QAAP,EAAiBnM,MAAjB,EAAyBoM,SAAzB,EAAuD;AAAA,KAAnBzM,OAAmB,uEAAT,IAAS;;AAC3E,KAAI0M,MAAM,EAAV;AACA3M,MAAKgC,OAAL,CAAa,UAACrC,IAAD,EAAU;AACtB,MACCA,KAAK+M,SAAL,KACA/M,KAAK+M,SAAL,MAAoBD,SAASC,SAAT,CADpB,IAEA/M,KAAKW,MAAL,MAAiBmM,SAASnM,MAAT,CAHlB,EAIE;AACD,OAAIL,YAAY,IAAhB,EAAsB;AACrB,QAAIA,QAAQiC,QAAR,CAAiBvC,KAAKW,MAAL,CAAjB,CAAJ,EAAoC;AACnCqM,SAAI3F,IAAJ,CAASrH,KAAKW,MAAL,CAAT;AACA;AACD,IAJD,MAIO;AACNqM,QAAI3F,IAAJ,CAASrH,KAAKW,MAAL,CAAT;AACA;AACD,GAZD,MAYO,IAAIX,KAAKQ,QAAL,IAAiBR,KAAKQ,QAAL,CAAcC,MAAnC,EAA2C;AACjDuM,OAAI3F,IAAJ,CACCwF,aACC7M,KAAKQ,QADN,EAECsM,QAFD,EAGCnM,MAHD,EAICoM,SAJD,EAKCzM,OALD,CADD;AASA;AACD,EAxBD;AAyBA,QAAO0M,GAAP;AACA,CA5BD;;AA8BO,IAAMC,mBAAiB,SAAjBA,cAAiB,OASxB;AAAA,KARLC,OAQK,QARLA,OAQK;AAAA,KAPLvM,MAOK,QAPLA,MAOK;AAAA,KANLoM,SAMK,QANLA,SAMK;AAAA,KALLL,OAKK,QALLA,OAKK;AAAA,KAJLS,cAIK,QAJLA,cAIK;AAAA,KAHLC,QAGK,QAHLA,QAGK;AAAA,KAFLjB,eAEK,QAFLA,eAEK;AAAA,KADLkB,oBACK,QADLA,oBACK;;AACL,KAAIC,+CAAuBnB,eAAvB,EAAJ;AACA,KAAIoB,oDAA4BF,oBAA5B,EAAJ;;AAEA,KAAIG,iBAAiBN,OAArB;AACA,KAAIO,cAAc,CAAC,CAACD,eAAeT,SAAf,CAApB;AACA,KAAIW,iBAAiBhB,UAAU,SAAV,GAAsB,QAA3C;AACA,KAAIiB,aAAa,EAAjB;AACA,KAAIC,aAAa,KAAjB;;AAEA;AACA,QAAOH,eAAeN,cAAtB,EAAsC;AACrC,MAAMU,wBAAwBjO,QAC7BiN,eACCO,QADD,EAECI,cAFD,EAGC7M,MAHD,EAICoM,SAJD,EAKCQ,qBALD,CAD6B,CAA9B;AASA,MAAMO,mBAAmBlO,QACxBiN,eACCO,QADD,EAECI,cAFD,EAGC7M,MAHD,EAICoM,SAJD,EAKCO,gBALD,CADwB,CAAzB;AASA,MAAMS,cAAcnO,QACnBiN,eAAaO,QAAb,EAAuBI,cAAvB,EAAuC7M,MAAvC,EAA+CoM,SAA/C,CADmB,CAApB;;AAIA,MAAIL,OAAJ,EAAa;AACZ,OACCgB,mBAAmB,SAAnB,IACAI,iBAAiBrN,MAAjB,KAA4BsN,YAAYtN,MAFzC,EAICkN,aAAa,SAAb,CAJD,KAKKA,aAAa,QAAb;AACL,GAPD,MAOO;AACN,OACC,CAACjB,OAAD,IACA,CAACkB,UADD,KAECE,iBAAiBrN,MAAjB,IAA2BoN,sBAAsBpN,MAFlD,CADD,EAKCmN,aAAa,IAAb;AACD,OAAIA,UAAJ,EAAgBD,aAAa,QAAb,CAAhB,KACKA,aAAa,MAAb;AACL;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACAH,mBAAiB5M,iBAChBwM,QADgB,EAEhBzM,MAFgB,EAGhB6M,eAAeT,SAAf,CAHgB,CAAjB;;AAMA,MAAIY,eAAe,SAAnB,EAA8B;AAC7B;AACA;AACAD,oBAAiB,SAAjB;AACA,OAAI,CAACJ,iBAAiB/K,QAAjB,CAA0BiL,eAAe7M,MAAf,CAA1B,CAAL,EACC2M,iBAAiBjG,IAAjB,CAAsBmG,eAAe7M,MAAf,CAAtB;AACD,OAAM2H,QAAQiF,sBAAsBS,OAAtB,CAA8BR,eAAe7M,MAAf,CAA9B,CAAd;AACA,OAAI2H,QAAQ,CAAC,CAAb,EAAgBiF,sBAAsBU,MAAtB,CAA6B3F,KAA7B,EAAoC,CAApC;AAChB,GARD,MAQO,IAAIqF,eAAe,QAAnB,EAA6B;AACnC;AACA;AACAD,oBAAiB,QAAjB;AACA,OAAI,CAACH,sBAAsBhL,QAAtB,CAA+BiL,eAAe7M,MAAf,CAA/B,CAAL,EACC4M,sBAAsBlG,IAAtB,CAA2BmG,eAAe7M,MAAf,CAA3B;AACD,OAAM2H,SAAQgF,iBAAiBU,OAAjB,CAAyBR,eAAe7M,MAAf,CAAzB,CAAd;AACA,OAAI2H,SAAQ,CAAC,CAAb,EAAgBgF,iBAAiBW,MAAjB,CAAwB3F,MAAxB,EAA+B,CAA/B;AAChB,GARM,MAQA,IAAIqF,eAAe,MAAnB,EAA2B;AACjC;AACA;AACAD,oBAAiB,MAAjB;AACA,OAAMQ,SAASZ,iBAAiBU,OAAjB,CAAyBR,eAAe7M,MAAf,CAAzB,CAAf;AACA,OAAIuN,SAAS,CAAC,CAAd,EAAiBZ,iBAAiBW,MAAjB,CAAwBC,MAAxB,EAAgC,CAAhC;AACjB,OAAMC,SAASZ,sBAAsBS,OAAtB,CACdR,eAAe7M,MAAf,CADc,CAAf;AAGA,OAAIwN,SAAS,CAAC,CAAd,EAAiBZ,sBAAsBU,MAAtB,CAA6BE,MAA7B,EAAqC,CAArC;AACjB;;AAEDV,gBAAc,CAAC,CAACD,eAAeT,SAAf,CAAhB;AACA;AACA;;AAED,QAAO,CAACO,gBAAD,EAAmBC,qBAAnB,CAAP;AACA,CA7GM;;AA+GA,IAAMa,wBAAwB,SAAxBA,qBAAwB,CAACvJ,KAAD,EAAW;AAAA,KACxCqI,OADwC,GACIrI,KADJ,CACxCqI,OADwC;AAAA,KAC/BmB,QAD+B,GACIxJ,KADJ,CAC/BwJ,QAD+B;AAAA,KACrBrC,MADqB,GACInH,KADJ,CACrBmH,MADqB;AAAA,KACbsC,IADa,GACIzJ,KADJ,CACbyJ,IADa;AAAA,KACP5B,OADO,GACI7H,KADJ,CACP6H,OADO;AAAA,KAG9C/L,MAH8C,GAS3CqL,MAT2C,CAG9CrL,MAH8C;AAAA,KAI9CoM,SAJ8C,GAS3Cf,MAT2C,CAI9Ce,SAJ8C;AAAA,KAK9CI,cAL8C,GAS3CnB,MAT2C,CAK9CmB,cAL8C;AAAA,KAM9ChB,eAN8C,GAS3CH,MAT2C,CAM9CG,eAN8C;AAAA,KAO9CkB,oBAP8C,GAS3CrB,MAT2C,CAO9CqB,oBAP8C;AAAA,KAQ9CjI,QAR8C,GAS3C4G,MAT2C,CAQ9C5G,QAR8C;;AAW/C;AACA;AACA;AACA;AACA;;AAEA,KAAIkI,+CAAuBnB,eAAvB,EAAJ;AACA,KAAIoB,oDAA4BF,oBAA5B,EAAJ;;AAEA;AACA,KAAIkB,cAAc,EAAlB;AACA,KAAI7B,OAAJ,EAAa;AACZ,MAAIQ,QAAQ1M,QAAR,IAAoB2M,cAAxB,EACCoB,cAAc3O,QAAQgN,iBAAeM,QAAQ1M,QAAvB,EAAiCG,MAAjC,CAAR,CAAd;;AAED2M,qBAAmBA,iBACjBrN,MADiB,CACV,CAACiN,QAAQvM,MAAR,CAAD,CADU,EAEjBV,MAFiB,CAEVsO,WAFU,CAAnB;AAGAhB,0BAAwBA,sBAAsBhB,MAAtB,CACvB,UAACiC,OAAD;AAAA,UACCA,YAAYtB,QAAQvM,MAAR,CAAZ,IACA,CAAC4N,YAAYhM,QAAZ,CAAqBiM,OAArB,CAFF;AAAA,GADuB,CAAxB;AAKA,EAZD,MAYO;AACN,MAAItB,QAAQ1M,QAAR,IAAoB2M,cAAxB,EACCoB,cAAc3O,QACbgN,iBAAeM,QAAQ1M,QAAvB,EAAiCG,MAAjC,CADa,CAAd;;AAID2M,qBAAmBA,iBAAiBf,MAAjB,CAClB,UAACiC,OAAD;AAAA,UACCA,YAAYtB,QAAQvM,MAAR,CAAZ,IACA,CAAC4N,YAAYhM,QAAZ,CAAqBiM,OAArB,CAFF;AAAA,GADkB,CAAnB;AAKAjB,0BAAwBA,sBAAsBhB,MAAtB,CACvB,UAACiC,OAAD;AAAA,UACCA,YAAYtB,QAAQvM,MAAR,CAAZ,IACA,CAAC4N,YAAYhM,QAAZ,CAAqBiM,OAArB,CAFF;AAAA,GADuB,CAAxB;AAKA;;AAlD8C,uBAoDHvB,iBAAe;AAC1DC,kBAD0D;AAE1DvM,gBAF0D;AAG1DoM,sBAH0D;AAI1DL,kBAJ0D;AAK1DS,gCAL0D;AAM1DC,YAAUkB,IANgD;AAO1DnC,mBAAiBmB,gBAPyC;AAQ1DD,wBAAsBE;AARoC,EAAf,CApDG;;AAAA;;AAoD9CD,iBApD8C;AAoD5BC,sBApD4B;;;AA+D/C,KAAMzL,mCAAW,IAAI2M,GAAJ,CAAQnB,gBAAR,CAAX,EAAN;AACA,KAAMoB,sBAAsB9O,QAAQQ,mBAAmBkO,IAAnB,CAAR,EAA0C/B,MAA1C,CAAiD,UAACvM,IAAD;AAAA,SAAU8B,KAAKS,QAAL,CAAcvC,KAAKW,MAAL,CAAd,CAAV;AAAA,EAAjD,CAA5B;AACA;AACA;;AAEA;AACA,KAAIyL,kBAAJ;AACA,KAAMK,eAAe3K,KAAKrB,MAA1B;AACA,KAAM+L,cAAc5M,QACnBc,gBAAgB4N,IAAhB,EAAsBtC,OAAOrL,MAA7B,CADmB,EAElBF,MAFF;;AAIA,KAAIgM,iBAAiB,CAArB,EAAwBL,YAAY,KAAZ,CAAxB,KACK,IAAII,gBAAgBC,YAApB,EAAkCL,YAAY,IAAZ,CAAlC,KACA,IAAII,gBAAgBC,YAApB,EAAkCL,YAAY,IAAZ;;AAIvChH,UAAS;AACRuH,YAAUD,OADF;AAERiC,gBAAc;AACbzB,yBAAaA,OAAb,CADa;AAEbmB,aAAUA,QAFG;AAGb1N,WAAQA;AAHK,GAFN;AAORiO,cAAYxC,SAPJ;AAQRkB,oBAAkBxL,IARV;AASR4M,uBAAqBA,mBATb;AAURnB,qDAA2B,IAAIkB,GAAJ,CAAQlB,qBAAR,CAA3B;AAVQ,EAAT;;AAaA;AACA;AACA,CAhGM;;AAkGP,IAAMsB,kBAAgB,SAAhBA,aAAgB,CAAChK,KAAD,EAAW;AAAA,KAEzBqI,OAFyB,GAENrI,KAFM,CAEzBqI,OAFyB;AAAA,KAEhBlB,MAFgB,GAENnH,KAFM,CAEhBmH,MAFgB;AAAA,KAGzBG,eAHyB,GAGwBH,MAHxB,CAGzBG,eAHyB;AAAA,KAGRkB,oBAHQ,GAGwBrB,MAHxB,CAGRqB,oBAHQ;AAAA,KAGc1M,MAHd,GAGwBqL,MAHxB,CAGcrL,MAHd;;AAIhC,KAAMmO,MAAMzB,qBAAqB9K,QAArB,CAA8B2K,QAAQvM,MAAR,CAA9B,CAAZ;AACA,KAAM+L,UAAUP,gBAAgB5J,QAAhB,CAAyB2K,QAAQvM,MAAR,CAAzB,CAAhB;;AAaA,QACC2C;AACC,iBAAewL;AACf;AAFD,IAGC,SAASpC;AAHV,GADD;AAOA,CAzBD;;AC1PA,IAAMqC,kBAAgB,SAAhBA,aAAgB,CAAClK,KAAD,EAAW;AAAA,KACzBmK,kBADyB,GAC2BnK,KAD3B,CACzBmK,kBADyB;AAAA,KACLC,SADK,GAC2BpK,KAD3B,CACLoK,SADK;AAAA,KACMC,iBADN,GAC2BrK,KAD3B,CACMqK,iBADN;;AAGhC;;AACA,QACC5L;AAAA;AAAA,IAAK,WAAc0C,QAAd,yBAAL;AACEgJ,wBAAsBA,mBAAmBvO,MAAnB,GAA4B,CAAlD,GACA6C;AAAA;AAAA;AACE0L,sBAAmBzO,GAAnB,CAAuB,UAACP,IAAD,EAAOsI,KAAP;AAAA,WACvBhF;AAAA;AAAA,OAAI,KAAKgF,KAAT;AAEE,YAAO2G,SAAP,KAAqB,UAArB,GACAA,UAAU,EAAC/B,SAASlN,IAAV,EAAgBqO,UAAU/F,KAA1B,EAAV,CADA,GAGAhF;AAAA;AAAA;AAAMtD,WAAKiP,SAAL;AAAN,MALF;AAOC;AAAA;AAAA,QAAK,SAAS;AAAA,eAAMC,kBAAkBlP,IAAlB,CAAN;AAAA,QAAd;AACC,8CAACmP,yBAAD;AADD;AAPD,KADuB;AAAA,IAAvB;AADF,GADA,GAiBA7L;AAAA;AAAA;AAAA;AAAA;AAlBF,EADD;AAuBA,CA3BD;;AA6BAyL,gBAAchH,SAAd,GAA0B;AACzB;;;;AAIAkH,YAAWjH,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUqD,IAAX,EAAiBrD,8BAAUsD,MAA3B,CAApB,CALc;;AAOzB;AACA0D,qBAAoBhH,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,EAAoCgG,UAR/B;;AAUzB;AACAiH,oBAAmBlH,8BAAUqD,IAAV,CAAepD;AAXT,CAA1B;;AAcA8G,gBAAcvK,YAAd,GAA6B,EAA7B;;ACxBA;AACA,IAAM6K,UAAQC,iBAAW,UAACzK,KAAD,EAAQ0K,GAAR,EAAgB;;AAExC;AAFwC,iBAIVhM,eAAS,IAAT,CAJU;AAAA;AAAA,KAIjCiM,OAJiC;AAAA,KAIxBC,UAJwB;AAKxC;;;AALwC,kBAMVlM,eAAS,KAAT,CANU;AAAA;AAAA,KAMjCmM,OANiC;AAAA,KAMxBC,UANwB;;AAQxC;AACA;AACA;AACA;;;AAXwC,kBAYdpM,eAAS,EAAT,CAZc;AAAA;AAAA,KAYjCqM,KAZiC;AAAA,KAY1BC,QAZ0B;AAaxC;;;AAbwC,kBAcOtM,eAAS,EAAT,CAdP;AAAA;AAAA,KAcjC+J,gBAdiC;AAAA,KAcfwC,kBAde;AAexC;;;AAfwC,kBAgBDvM,eAAS,EAAT,CAhBC;AAAA;AAAA,KAgBjCwM,YAhBiC;AAAA,KAgBnBC,cAhBmB;AAiBxC;;;AAjBwC,mBAkBXzM,eAAS,EAAT,CAlBW;AAAA;AAAA,KAkBjC0M,OAlBiC;AAAA,KAkBxBC,SAlBwB;AAmBxC;;;AAnBwC,mBAoBX3M,eAAS,EAAT,CApBW;AAAA;AAAA,KAoBjC4M,OApBiC;AAAA,KAoBxBC,SApBwB;AAqBxC;;;AArBwC,mBAsBN7M,eAAS,KAAT,CAtBM;AAAA;AAAA,KAsBjC6I,SAtBiC;AAAA,KAsBtBiE,YAtBsB;;AAwBxC;AACA;;;AAzBwC,mBA0BiB9M,eAAS,EAAT,CA1BjB;AAAA;AAAA,KA0BjCgK,qBA1BiC;AAAA,KA0BV+C,uBA1BU;AA2BxC;;;AA3BwC,mBA4BO/M,eAAS,EAAT,CA5BP;AAAA;AAAA,KA4BjCgN,gBA5BiC;AAAA,KA4BfC,kBA5Be;;AA8BxC;AACA;;;AA/BwC,mBAgCFjN,eAAS,KAAT,CAhCE;AAAA;AAAA,KAgCjCkN,WAhCiC;AAAA,KAgCpBC,cAhCoB;AAiCxC;;;AAjCwC,mBAkCQnN,eAAS,CAAT,CAlCR;AAAA;AAAA,KAkC9BoN,eAlC8B;AAAA,KAkCbC,iBAlCa;;AAAA,mBAqCIrN,eAAS,EAAT,CArCJ;AAAA;AAAA,KAqCjCwB,cArCiC;AAAA,KAqCjBC,iBArCiB;;AAuCxC,KAAM6L,WAAWC,cAAjB;;AAEA,KAAMtN,YAAYH,YAAlB;;AAzCwC,0CAoHhCwB,KApHgC,EAoHtBE,cApHsB;AAAA,KA6CvCgM,OA7CuC,yBA6CvCA,OA7CuC;AAAA,KA+CvCC,YA/CuC,yBA+CvCA,YA/CuC;AAAA,KAgDvCC,QAhDuC,yBAgDvCA,QAhDuC;AAAA,KAmDvCC,WAnDuC,yBAmDvCA,WAnDuC;AAAA,KAoDvCC,sBApDuC,yBAoDvCA,sBApDuC;AAAA,KAqDvCC,kBArDuC,yBAqDvCA,kBArDuC;AAAA,KAsDvCC,aAtDuC,yBAsDvCA,aAtDuC;AAAA,KAuDvCC,aAvDuC,yBAuDvCA,aAvDuC;AAAA,KA0DvChD,IA1DuC,yBA0DvCA,IA1DuC;AAAA,KA2DvCiD,OA3DuC,yBA2DvCA,OA3DuC;AAAA,KA4DvCpF,eA5DuC,yBA4DvCA,eA5DuC;AAAA,KA6DvCqF,WA7DuC,yBA6DvCA,WA7DuC;AAAA,KA8DvCjF,MA9DuC,yBA8DvCA,MA9DuC;AAAA,KA+DvCkF,MA/DuC,yBA+DvCA,MA/DuC;AAAA,KAkEvC9Q,MAlEuC,yBAkEvCA,MAlEuC;AAAA,KAmEvC+Q,YAnEuC,yBAmEvCA,YAnEuC;AAAA,KAsEvC/F,KAtEuC,yBAsEvCA,KAtEuC;AAAA,KAuEvCC,OAvEuC,yBAuEvCA,OAvEuC;AAAA,KAwEvC+F,cAxEuC,yBAwEvCA,cAxEuC;AAAA,KA0EvCC,YA1EuC,yBA0EvCA,YA1EuC;AAAA,KA2EvCC,SA3EuC,yBA2EvCA,SA3EuC;AAAA,KA4EvCC,WA5EuC,yBA4EvCA,WA5EuC;AAAA,KA6EvCC,UA7EuC,yBA6EvCA,UA7EuC;AAAA,KA8EvCC,kBA9EuC,yBA8EvCA,kBA9EuC;AAAA,KAgFvCC,WAhFuC,yBAgFvCA,WAhFuC;AAAA,KAmFvCC,aAnFuC,yBAmFvCA,aAnFuC;AAAA,KAoFvCC,QApFuC,yBAoFvCA,QApFuC;AAAA,KAqFvCC,eArFuC,yBAqFvCA,eArFuC;AAAA,KAsFjCC,gBAtFiC,yBAsFjCA,gBAtFiC;AAAA,KAuFvCC,eAvFuC,yBAuFvCA,eAvFuC;AAAA,KA0FvCC,UA1FuC,yBA0FvCA,UA1FuC;AAAA,KA6FvCpF,cA7FuC,yBA6FvCA,cA7FuC;AAAA,KA8FvCqF,eA9FuC,yBA8FvCA,eA9FuC;AAAA,KA+FvCC,gBA/FuC,yBA+FvCA,gBA/FuC;AAAA,KAgGvCC,cAhGuC,yBAgGvCA,cAhGuC;AAAA,KAiGvCC,eAjGuC,yBAiGvCA,eAjGuC;AAAA,KAoGvCC,UApGuC,yBAoGvCA,UApGuC;AAAA,KAqGvCC,gBArGuC,yBAqGvCA,gBArGuC;AAAA,KAsGvCC,WAtGuC,yBAsGvCA,WAtGuC;AAAA,KAuGvCC,oBAvGuC,yBAuGvCA,oBAvGuC;AAAA,KAwGvCC,oBAxGuC,yBAwGvCA,oBAxGuC;AAAA,KA2GvCC,aA3GuC,yBA2GvCA,aA3GuC;AAAA,KA4GvCC,sBA5GuC,yBA4GvCA,sBA5GuC;AAAA,KA+GvCC,YA/GuC,yBA+GvCA,YA/GuC;AAAA,KAgHvClP,SAhHuC,yBAgHvCA,SAhHuC;AAAA,KAkHvC/C,KAlHuC,yBAkHvCA,KAlHuC;AAAA,KAmHvCkE,QAnHuC,yBAmHvCA,QAnHuC;;AAsHxC,KAAMgO,2BACF/D,QAAM7K,YAAN,CAAmB4O,WADjB,EAEFvO,MAAMuO,WAFJ,CAAN;;AAKA,KAAMC,uBAAuBF,gBAAmBA,YAAnB,cAA7B;AACA,KAAMG,mBAAmBH,gBAAmBA,YAAnB,UAAzB;AACA,KAAMI,6BAA6BJ,gBAAmBA,YAAnB,6BAAnC;;AAEAzP,iBAAU,YAAM;AACT;AACA;;AAEN;AACA;AACA,MAAGwN,YAAYzQ,MAAZ,GAAqB,CAAxB,EAA2B+S,gBAAgBtC,WAAhB,EAA3B,KACK,IAAG5C,KAAK7N,MAAL,GAAc,CAAjB,EAAoB+S,gBAAgBlF,IAAhB;AACzB;AACAmF,0BAAwBtC,sBAAxB,EAA+C3O,SAA/C,EAA0D0O,WAA1D;AACAlB,iBAAeoB,kBAAf;AACAsC,mBAAiBrC,aAAjB;AACAjB,YAAUkB,aAAV;AACAjB,eACCa,YAAYzQ,MAAZ,GAAqB,CAArB,IACCyQ,YAAYzQ,MAAZ,KAAuB0Q,uBAAuB1Q,MAFhD;AAIA;AACAiQ,iBACE0C,YAAYO,YAAZ,CAAyBlT,MAAzB,IACD2S,YAAYQ,qBADX,IAEDR,YAAYS,uBAFX,IAGDT,YAAYU,sBAJb;;AAMA;AACA,MAAI,CAAC,CAACtB,eAAF,IAAqB,CAACE,cAA1B,EAA0C;AACzC;AACA,OAAID,gBAAJ,EACCjC,mBACC5Q,QAAQc,gBAAgBwQ,WAAhB,EAA6BvQ,MAA7B,CAAR,CADD;AAGD;AACA,OAAIwQ,0BAA0BA,uBAAuB1Q,MAAvB,GAAgC,CAA9D,EAAiE;AAChE,QAAIsT,WAAWnU,QAAQc,gBAAgBwQ,WAAhB,EAA6BvQ,MAA7B,CAAR,CAAf;AACA,QAAIqT,cAAcD,SAASxH,MAAT,CAAgB,UAACvM,IAAD;AAAA,YACjCmR,uBAAuB5O,QAAvB,CAAgCvC,KAAKW,MAAL,CAAhC,CADiC;AAAA,KAAhB,CAAlB;AAGA,QAAI4M,yBAAwB,EAA5B;AACAyG,gBAAY3R,OAAZ,CAAoB,UAACrC,IAAD,EAAU;AAAA,2BACZiN,iBAAe;AAC/BC,eAASlN,IADsB;AAE/BW,oBAF+B;AAG/BoM,iBAAW4F,eAHoB;AAI/BjG,eAAS,IAJsB;AAK/BS,oCAL+B;AAM/BC,gBAAU8D,WANqB;AAO/B/E,uBAAiBgF,sBAPc;AAQ/B9D,4BAAsBE;AARS,MAAf,CADY;AAAA;AAAA;AAAA,aAClB0G,EADkB;;AAW7B1G,4BAAsBlG,IAAtB,iDAA8B4M,EAA9B;AACA,KAZD;AAaA3D,wDAA4B,IAAI7B,GAAJ,CAAQlB,sBAAR,CAA5B;AACA;AACD;;AAED;AACA2G,kBAAgB;AACfzC,WAAQH,aADO;AAEf/E,WAAQ8E,aAFO;AAGf3L,eAAY0L,kBAHG;AAIf+C,WAAQ;AAJO,GAAhB;AAMA;AACA;AACA;AACA,MAAI5E,OAAO,OAAOA,GAAP,KAAe,UAA1B,EAAsCA,IAAI,EAAC6E,sBAAD,EAAJ,EAAtC,KACK,IAAI7E,OAAO,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAA1B,EAAoCA,IAAI8E,OAAJ,GAAc,EAACD,sBAAD,EAAd;AACzC,EAnED,EAmEG,EAnEH;;AAqEA1Q,iBAAU,YAAM;AACf,MAAGF,SAAH,EAAc;AACb;AACAgQ,mBAAgBlF,IAAhB;AACA;AACAmF,2BAAwBtH,eAAxB,EAAyC3J,SAAzC,EAAoD8L,IAApD;AACA0B,kBAAewB,WAAf;AACAkC,oBAAiBnH,MAAjB;AACA6D,aAAUqB,MAAV;AACA,OAAI,CAAC,CAACe,eAAF,IAAqB,CAACE,cAA1B,EAA0C;AACzC;AACA,QAAID,gBAAJ,EACCjC,mBAAmB5Q,QAAQc,gBAAgB4N,IAAhB,EAAsB3N,MAAtB,CAAR,CAAnB;AACD;AACD;AACE,EAfJ,EAeM,CAAC2N,IAAD,EAAOnC,eAAP,EAAwBqF,WAAxB,EAAqCjF,MAArC,EAA6CkF,MAA7C,CAfN;;AAiBA/N,iBAAU,YAAM;AACf;AACA+P,0BAAwB,EAAxB,EAA4B,EAA5B;AACA,EAHD,EAGG,CAACxC,QAAD,CAHH;;AAKAvN,iBAAU,YAAM;AACf;AACA8P,kBAAgBtS,KAAhB;AACA,EAHD,EAGG,CAACA,KAAD,CAHH;;AAKA;AACA+C,WAAU1D,GAAV,CAAc,gBAAQ;AACrB,SAAOmD,gBAAW,YAAM;AACvB,OAAGF,aAAaxD,KAAK6B,IAArB,EAA2B;AAC1B;AACA,QAAMyS,iBAAiB;AACtBpT,YAAO2D,MAAM7E,KAAK6B,IAAX,CADe;AAEtBsB,gBAAW0B,MAAS7E,KAAK6B,IAAd,eAFW;AAGtB0S,kBAAaH,UAHS;AAItBI,cAASC,QAJa;AAKtBC,aAAQC,OALc;AAMtBC,mBAAcC,aANQ;AAOtBC,cAASC,QAPa;AAQtBC,gBAAWC,UARW;AAStBC,gBAAWC,UATW;AAUtBC,kBAAaC,YAVS;AAWtBrQ,wBAAmBsQ;AAXG,KAAvB;AAaAtV,SAAKoF,QAAL,IAAiBpF,KAAKoF,QAAL,CAAckP,cAAd,CAAjB;AACA;AACD,GAlBM,EAkBJ,CAACzP,MAAM7E,KAAK6B,IAAX,CAAD,CAlBI,CAAP;AAmBA,EApBD;;AAsBA;;AAEA,KAAMyT,qBAAqB,SAArBA,kBAAqB,CAACzQ,KAAD,EAAW;AACrC;AACA;AACAG,iCAAsBD,cAAtB,EAAyCF,KAAzC;AACA;AACA,EALD;;AAOA,KAAM2O,kBAAkB,SAAlBA,eAAkB,CAAClF,IAAD,EAAU;AACjC;AACAuB,WAASvB,IAAT;AACAiD,UAAQjD,IAAR;AACAiH,eAAajH,IAAb;AACA,EALD;;AAOA,KAAMmF,0BAA0B,SAA1BA,uBAA0B,GAA+D;AAAA,MAA9D+B,YAA8D,uEAA/C,EAA+C;AAAA,MAA3CC,eAA2C,uEAAzBjT,SAAyB;AAAA,MAAd8L,IAAc,uEAAP,EAAO;;AAC9F;AACAwB,qBAAmB0F,YAAnB;AACA,MAAGA,aAAa/U,MAAb,KAAwB,CAA3B;AACC,OAAI8R,UAAJ,EACCmD,iBAAiB,EAAjB,EADD,KAGCA,iBAAiBlT,SAAjB;AAJF,SAKK,IAAGgT,aAAa/U,MAAb,GAAsB,CAAtB,IAA2B,CAACgV,eAA/B;AACJ,OAAIlD,UAAJ,EACCmD,iBAAkB9V,QAASQ,mBAAmBkO,IAAnB,CAAT,EAA4C/B,MAA5C,CAAmD,UAACvM,IAAD;AAAA,WAAUwV,aAAajT,QAAb,CAAsBvC,KAAKW,MAAL,CAAtB,CAAV;AAAA,IAAnD,CAAlB,EADD,KAGC+U,iBAAkB9U,iBAAiB0N,IAAjB,EAAuB3N,MAAvB,EAA+B6U,aAAa,CAAb,CAA/B,CAAlB;AAJG,SAMJE,iBAAiBD,eAAjB;AACD,EAfD;;AAiBA,KAAMF,eAAe,SAAfA,YAAe,CAACjH,IAAD,EAAU;AAC9BgF,sBAAoBzO,MAAMxF,YAA1B,IAA0CwF,MAAMxF,YAAN,CAAmBiU,gBAAnB,EAAqChF,IAArC,CAA1C;AACA,EAFD;;AAIA,KAAMoH,mBAAmB,SAAnBA,gBAAmB,CAACrV,IAAD,EAAU;AAClCgT,0BAAwBxO,MAAMxF,YAA9B,IAA8CwF,MAAMxF,YAAN,CAAmBgU,oBAAnB,EAAyChT,IAAzC,CAA9C;AACA,EAFD;;AAIA,KAAMsV,yBAAyB,SAAzBA,sBAAyB,CAACzU,KAAD,EAAW;AACzCqS,gCACG1O,MAAMxF,YADT,IAEGwF,MAAMxF,YAAN,CAAmBkU,0BAAnB,EAA+C;AACjDnQ,cAAWjF,4BADsC;AAEjD+C,UAAOA;AAF0C,GAA/C,CAFH;AAMA,EAPD;;AASA,KAAM0U,wBAAwB,SAAxBA,qBAAwB,CAACC,SAAD,EAAY3U,KAAZ,EAAsB;AACnD,MAAM4U,KAAK3C,gBAAmBA,YAAnB,gBAA0C0C,SAArD;AACAC,QAAMjR,MAAMxF,YAAZ,IAA4BwF,MAAMxF,YAAN,CAAmByW,EAAnB,EAAuB;AAClD1S,cAAWjF,4BADuC;AAElD+C,UAAOA;AAF2C,GAAvB,CAA5B;AAIA;AACAkE,cAAYA,SAASlE,KAAT,CAAZ;AACA,EARD;;AAUA,KAAMwS,mBAAmB,SAAnBA,gBAAmB,CAACnH,MAAD,EAAY;AACpC;AACA2D,YAAU3D,MAAV;AACA,EAHD;;AAKA,KAAM6H,aAAa,SAAbA,UAAa,OAAgC2B,YAAhC,EAAiD;AAAA,MAA/CtE,MAA+C,QAA/CA,MAA+C;AAAA,MAAvClF,MAAuC,QAAvCA,MAAuC;AAAA,MAA/BiF,WAA+B,QAA/BA,WAA+B;;AACnE;AACAX,WAASwD,OAAT,IAAoBxD,SAASwD,OAAT,CAAiB2B,WAAjB,CAA6B,CAA7B,EAAgC,MAAhC,CAApB;AACA,MAAGnR,MAAM3D,KAAN,IAAe2D,MAAM3D,KAAN,CAAYT,MAAZ,GAAqB,CAAvC,EACCgT,wBAAwB5O,MAAM3D,KAAN,CAAYX,GAAZ,CAAgB;AAAA,UAAQP,KAAKW,MAAL,CAAR;AAAA,GAAhB,CAAxB,EAA+DkE,MAAM3D,KAArE,EADD,KAGCuS;;AAED,MAAMwC,WAAWF,eAAgBtE,SAASA,MAAT,GAAkBtB,OAAlC,GAA6CsB,MAA9D;AACA,MAAMyE,WAAWH,4BAAmB9F,OAAnB,EAA+B1D,MAA/B,IAAyCA,MAA1D;AACA,MAAM4J,gBAAgBJ,eAAgBvE,cAAcA,WAAd,GAA4BzB,YAA5C,GAA4DyB,WAAlF;AACA,MAAGC,MAAH,EAAWrB,UAAU6F,QAAV;AACX,MAAG1J,MAAH,EAAWmH,iBAAiBwC,QAAjB;AACX,MAAG1E,WAAH,EAAgBxB,eAAemG,aAAf;AAChBjC,kBAAgB;AACfzC,WAAQwE,QADO;AAEf1J,WAAQ2J,QAFO;AAGfxQ,eAAYyQ,aAHG;AAIfhC,WAAQ;AAJO,GAAhB;AAMM;AACH,EArBJ;;AAuBA,KAAMD,kBAAkB,SAAlBA,eAAkB,CAACkC,MAAD,EAAY;AACnC;AADmC,MAE5B3E,MAF4B,GAEqB2E,MAFrB,CAE5B3E,MAF4B;AAAA,MAEpBlF,MAFoB,GAEqB6J,MAFrB,CAEpB7J,MAFoB;AAAA,MAEZ7G,UAFY,GAEqB0Q,MAFrB,CAEZ1Q,UAFY;AAAA,MAEA2Q,SAFA,GAEqBD,MAFrB,CAEAC,SAFA;AAAA,MAEWlC,MAFX,GAEqBiC,MAFrB,CAEWjC,MAFX;;AAGnC,MAAI,CAAC3E,WAAW2E,MAAZ,KAAuB,CAACzE,OAA5B,EAAqC;AACpCC,cAAW,IAAX;AACA,OAAM2G,UAAUnC,SACb,CADa,GAEboC,KAAKC,KAAL,CAAW5G,MAAMnP,MAAN,GAAe0R,QAA1B,CAFH;AAGA,OAAMiE,UAAS;AACdK,UAAMH,OADQ;AAEdI,UAAMvE,QAFQ;AAGdwE,UACClF,UAAUA,OAAOnP,GAAjB,GACGmP,OAAOnP,GAAP,GAAa,GAAb,GAAmBmP,OAAOmF,KAD7B,GAEG;AANU,IAAf;AAQA,OAAMC,yBACFtK,MADE,EAED7G,gCACC4M,eADD,EACmB5M,UADnB,IAED,IAJE,CAAN;AAMA;;AAEA,OAAGsL,gBAAgBmD,MAAhB,IAA0B9B,qBAAqB1S,IAA/C,IAAuD,CAAC6S,eAAxD,IAA2E,CAACE,cAA/E,EAA+F;AAC9FL,qBAAiB;AAChB+D,oBADgB;AAEhB/V,WAAMwW;AAFU,KAAjB,EAIElM,IAJF,CAIO,UAAC/H,QAAD,EAAc;AACnB;AACA;AACAgO,uBAAkBhO,SAASvC,IAA3B;AACA,KARF,EASEwK,KATF,CASQ;AAAA,YACNpI,kBAAkBC,KAAlB,EAAyB,gDAAzB,CADM;AAAA,KATR;AAWA;;AAED;AACA;AACA;AACA;AACA,OAAG0P,eAAH,EAAoB;AACnBA,oBAAgB;AACfgE,oBADe;AAEf/V,WAAMwW;AAFS,KAAhB,EAIElM,IAJF,CAIO,UAAC/H,QAAD,EAAc;AACnB;AACA,SAAMxB,SAASwB,SAASvC,IAAxB;AACA;AACA,SAAI,CAAC,CAACmS,eAAF,IAAqBE,cAAzB,EAAyC;AACxC;AACA;AACA,UAAI4D,YAAY,CAAhB,EAAmB;AAClBlV,cAAOiB,OAAP,CAAe,UAACuF,KAAD,EAAW;AACzBA,cAAMpH,QAAN,GAAiB,oBACbG,MADa,EACJU,cADI,EAAjB;AAGA,QAJD;AAKA;AACAmS,uBAAgBpS,MAAhB;AACA,OARD,MAQO;AACN,WAAI0V,sCAAclH,KAAd,EAAJ;AACA;AACAxO,cAAOiB,OAAP,CAAe,UAACuF,KAAD,EAAW;AACzBA,cAAMpH,QAAN,GAAiB,oBACbG,MADa,EACJU,cADI,EAAjB;AAGA,QAJD;AAKA,WAAIP,OAAOF,iBACVkW,OADU,EAEVnW,MAFU,EAGV0V,UAAU1V,MAAV,CAHU,CAAX;AAKAG,YAAKN,QAAL,GAAgBY,MAAhB;AACA;AACA;AACAoS,uBAAgBsD,OAAhB;AACA;AACD,MA7BD,MA6BO;AACN,UAAI1V,UAAUA,OAAOX,MAAP,GAAgB0R,QAA9B,EAAwC;AACvC1C,kBAAW,KAAX;AACA,OAFD,MAEO;AACNA,kBAAW,IAAX;AACA;AACD6G,kBAAY,CAAZ,GACG9C,gBAAgBpS,MAAhB,CADH;AAAA,QAEGoS,gBAAgB5D,MAAM3P,MAAN,CAAamB,MAAb,CAAhB,CAFH,CANM;;AAUN;AACA,UAAIqR,gBAAJ,EACCjC,mBACC5Q,QAAQc,gBAAgBU,MAAhB,EAAwBT,MAAxB,CAAR,CADD;AAGD;;AAEDgP,gBAAW,KAAX;AACA,KAvDF,EAwDE9E,KAxDF,CAwDQ,UAACnI,KAAD,EAAW;AACjBD,uBAAkBC,KAAlB,EAAyB,wBAAzB;AACA8Q,qBAAgB5D,KAAhB,EAFiB;AAGjB;AACAD,gBAAW,KAAX;AACA,KA7DF;AA8DA,IA/DD,MA+DOA,WAAW,KAAX;AACP;AACD,EA3GD;;AAyIA,KAAMoH,cAAc,SAAdA,WAAc,QAAiC;AAAA,MAA/B7J,OAA+B,SAA/BA,OAA+B;AAAA,MAAtBmB,QAAsB,SAAtBA,QAAsB;AAAA,MAAZ1N,MAAY,SAAZA,MAAY;;AACpD;AACAqW,uBAAqB,EAAC9J,gBAAD,EAAUmB,kBAAV,EAAoB1N,cAApB,EAA4B4F,SAASqM,UAArC,EAArB;AACA,EAHD;AAIA,KAAMqE,oBAAoB,SAApBA,iBAAoB,QAAiC;AAAA,MAA/B/J,OAA+B,SAA/BA,OAA+B;AAAA,MAAtBmB,QAAsB,SAAtBA,QAAsB;AAAA,MAAZ1N,MAAY,SAAZA,MAAY;;AAC1D;AACA;AACAgV,yBAAuBzI,OAAvB;AACA8J,uBAAqB,EAAC9J,gBAAD,EAAUmB,kBAAV,EAAoB1N,cAApB,EAA4B4F,SAASsM,gBAArC,EAArB;AACA,EALD;;AAOA,KAAMmE,uBAAuB,SAAvBA,oBAAuB,QAA0C;AAAA,MAAxC9J,OAAwC,SAAxCA,OAAwC;AAAA,MAA/BmB,QAA+B,SAA/BA,QAA+B;AAAA,MAArB1N,MAAqB,SAArBA,MAAqB;AAAA,MAAb4F,OAAa,SAAbA,OAAa;;AACtE,MAAMmG,UAAU,CAACY,iBAAiB/K,QAAjB,CAA0B5B,MAA1B,CAAjB;AACA,MAAMuW,eAAe;AACpBhK,yBAAaA,OAAb,CADoB;AAEpBmB,aAAUA,QAFU;AAGpB1N,WAAQA;AAHY,GAArB;AAKA,MAAI,CAAC4R,UAAL,EAAiB;AAChB;AACA;AACA;AACA,OAAG7F,WAAW,CAACuE,QAAf,EACCwC,wBAAwB,CAAC9S,MAAD,CAAxB,EAAkCuM,OAAlC;AACD6F,wBAAqB,CAACpS,MAAD,CAArB,EAA+B,CAACuM,OAAD,CAA/B;AACA,GAPD,MAOO;AACNkB,sCACI8I,YADJ;AAEClL,YAAQmL,0BAFT;AAGC7I,UAAMsB,KAHP;AAIClD,aAASA;AAJV;AAMA;AACDnG,qBAAUoG,UAAUD,OAApB,IAAgCwK,YAAhC;AACA,EAvBD;;AAyBA,KAAME,oBAAoB;AACzB7Q,WAASwQ,WADgB;AAEzBM,iBAAeJ;;AAEf;AACA;;AAEA;AACA;AACA;AACA;AAVyB,EAA1B;;AAcA;AACA,KAAMK,gBAAgB,SAAhBA,aAAgB,CAAC7F,MAAD,EAAY;AACjC;AACAZ,WAASwD,OAAT,CAAiB2B,WAAjB,CAA6B,CAA7B,EAAgC,MAAhC;AACA5F,YAAUqB,MAAV;;AAEA;AACA;AACA;AACAgC;AACA;AACA,MAAM8D,aAAa;AAClB9F,WAAQA,MADU;AAElBlF,WAAQ0D,OAFU;AAGlBvK,eAAYqK,YAHM;AAIlBoE,WAAQ;AAJU,GAAnB;AAMAD,kBAAgBqD,UAAhB;AACA,EAjBD;;AAmBA;;AAGA,KAAMC,UACLlU;AAAC,2BAAD,CAAO,QAAP;AAAA;AACEmN,gBACCnN;AAAC,4BAAD,CAAO,QAAP;AAAA;AAEC;AAAA;AAAA,MAAK,KAAK,yBAAV,EAAqC,WAAW,kBAAhD;AACE8P,gBAAYQ,qBAAZ,GACE1T,MAAMC,OAAN,CAAciT,YAAYQ,qBAA1B,IACCtQ,wCAAC4E,WAAD,IAAW,OAAOkL,YAAYQ,qBAA9B,GADD,GAECtQ,wCAAC,WAAD,CAAa,qBAAb,OAHH,GAIE;AALJ,IAFD;AASC;AAAA;AAAA,MAAK,KAAK,2BAAV,EAAuC,WAAW,oBAAlD;AACE8P,gBAAYS,uBAAZ,GACE3T,MAAMC,OAAN,CAAciT,YAAYS,uBAA1B,IACCvQ,wCAAC4E,WAAD,IAAW,OAAOkL,YAAYS,uBAA9B,GADD,GAECvQ,wCAAC,WAAD,CAAa,uBAAb,OAHH,GAIE;AALJ,IATD;AAgBC;AAAA;AAAA,MAAK,KAAK,0BAAV,EAAsC,WAAW,mBAAjD;AACE8P,gBAAYU,sBAAZ,GACE5T,MAAMC,OAAN,CAAciT,YAAYU,sBAA1B,IACCxQ,wCAAC4E,WAAD,IAAW,OAAOkL,YAAYU,sBAA9B,GADD,GAECxQ,wCAAC,WAAD,CAAa,sBAAb,OAHH,GAIE;AALJ,IAhBD;AAwBEiP,gBACAjP;AAAC,6BAAD,CAAO,QAAP;AAAA;AACE8P,gBAAYO,YAAZ,CAAyBpR,QAAzB,CAAkC,UAAlC,IACEe;AAAA;AAAA;AAAO8P,iBAAYqE,aAAnB;AAAA;AAAmCnK,sBAAiB7M;AAApD,KADF,GAEE,IAHJ;AAIE2S,gBAAYO,YAAZ,CAAyBpR,QAAzB,CAAkC,QAAlC,IACEe;AAAA;AAAA;AAAO8P,iBAAYsE,WAAnB;AAAA;AAAiC9X,aAAQc,gBAAgBkP,KAAhB,EAAuBjP,MAAvB,CAAR,EAAwCF;AAAzE,KADF,GAEE;AANJ,IADA,GASI,IAjCN;AAmCE2S,eAAYO,YAAZ,CAAyBpR,QAAzB,CAAkC,OAAlC,IACEyO,gBAAgBqB,qBAAqB1S,IAArC,IAA6C,CAAC6S,eAA9C,IAAiE,CAACE,cAAlE,GACCpP;AAAA;AAAA;AAAO8P,gBAAYuE,UAAnB;AAAA;AAAgChH;AAAhC,IADD,GAECrN;AAAA;AAAA;AAAO8P,gBAAYuE,UAAnB;AAAA;AAAgC/X,YAAQc,gBAAgBkP,KAAhB,EAAuBjP,MAAvB,CAAR,EAAwCF;AAAxE,IAHH,GAIE;AAvCJ,GADD,GA2CI;AA5CN,EADD;;AAiDA;AACA,KAAMmX,gBAAgB,SAAhBA,aAAgB,QAAyB;AAAA,MAAvB1K,OAAuB,SAAvBA,OAAuB;AAAA,MAAdmB,QAAc,SAAdA,QAAc;AAAA,MACvCwJ,YADuC,GACvBhT,KADuB,CACvCgT,YADuC;;AAE9C,SAAO,CACNA,YADM,EAENvK,iBAAiB/K,QAAjB,CAA0B2K,QAAQvM,MAAR,CAA1B,KAA8C,cAFxC,EAGNoR,aAAc1D,WAAW,CAAX,KAAiB,CAAjB,GAAqB,MAArB,GAA8B,KAA5C,GAAqD,EAH/C,EAIN4D,cAAc,UAAd,GAA2B,EAJrB,EAKL1K,IALK,CAKA,GALA,CAAP;AAMA,EARD;;AAoCA;AACA,KAAMuQ,eAAe,SAAfA,YAAe,GAAM;AAC1B,MAAI1L,kBAAJ;AACA,MAAMK,eAAea,iBAAiB7M,MAAtC;AACA,MAAIgM,iBAAiB,CAArB,EAAwBL,YAAY,KAAZ,CAAxB,KACK,IAAIK,eAAe,CAAnB,EAAsBL,YAAY,IAAZ;;AAE3BiE,eAAajE,SAAb;AACA;;AAEA,MAAI4E,YAAJ,EAAkB;AACjB,OAAMuG,aAAa;AAClB9F,YAAQtB,OADU;AAElB5D,YAAQ0D,OAFU;AAGlBvK,gBAAYqK,YAHM;AAIlBoE,YAAQ;AAJU,IAAnB;AAMAD,mBAAgBqD,UAAhB;AACA;AACD,EAlBD;;AAoBA;;AAEA;AACA,KAAMQ,yBAAyB,SAAzBA,sBAAyB,SAOzB;AAAA,SANLpL,QAMK;AAAA,aALLgC,YAKK;AAAA,UAJLC,UAIK,UAJLA,UAIK;AAAA,MAHLtB,gBAGK,UAHLA,gBAGK;AAAA,MAFLoB,mBAEK,UAFLA,mBAEK;AAAA,MADLnB,qBACK,UADLA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACAkG,0BAAwBnG,gBAAxB,EAA0CoB,mBAA1C;AACA4B,0BAAwB/C,qBAAxB;AACA8C,eAAazB,UAAb;AACAmE,uBAAqBzF,gBAArB,EAAuCoB,mBAAvC;AACA,EApBD;;AAsBA;AACA,KAAMsJ,sBAAsB,SAAtBA,mBAAsB,SAAqC;AAAA,MAAnCrL,QAAmC,UAAnCA,QAAmC;AAAA,MAAzBrM,OAAyB,UAAzBA,OAAyB;AAAA,MAAhBgM,UAAgB,UAAhBA,UAAgB;;AAChE,MAAMkJ,eAAe7I,WAAWrM,OAAX,GAAqB,EAA1C;AACA;AACA;AACAmT,0BAAwB+B,YAAxB,EAAsC7I,WAAWL,UAAX,GAAwB,EAA9D;AACAgE,0BAAwB,EAAxB;AACAD,eAAa1D,QAAb;AACA;AACA;AACAoG,uBAAqByC,YAArB,EAAmClJ,UAAnC;AACA,EAVD;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAM6K,2BAA2B,SAA3BA,wBAA2B;AAAA,SAAO;AACvCxW,WAAQA,MAD+B;AAEvCoM,cAAW4F,eAF4B;AAGvCxF,mBAAgBA,cAHuB;AAIvChB,oBAAiBmB,gBAJsB;AAKvCD,yBAAsBE,qBALiB;AAMvCnI,aAAU2S;AAN6B,GAAP;AAAA,EAAjC;;AASA,KAAME,cAAc,SAAdA,WAAc,GAAM;AACzB,MAAMC;AACL5V,QAAK,eADA;AAEL6V,mBAAgBpM,eAFX;AAGLqM,iBAAc9U,wCAACuL,eAAD,OAHT;AAIL1I,UAAO,EAJF;AAKLkS,eAAY,CALP;AAMLC,cAAW,KANN;AAOLC,WAAQ,MAPH;AAQLnM,cAAWA,SARN;AASLF,gBAAa8L;AATR,KAUFb,0BAVE,CAAN;AAYA,SAAO5E,cAAc2F,YAAd,2BAA+BnH,OAA/B,iCAA8CA,OAA9C,EAAP;AACA,EAdD;;AAkBA;;AAEA,KAAMyH,wBAAwB,SAAxBA,qBAAwB,CAACC,eAAD,EAAqB;AAClD;AACAzF,uBAAqByF,eAArB;AACA,EAHD;AAIA,KAAMC,eAAe,SAAfA,YAAe,SAA2C;AAAA,MAAzCC,QAAyC,UAAzCA,QAAyC;AAAA,MAA/BzL,OAA+B,UAA/BA,OAA+B;AAAA,MAAtBmB,QAAsB,UAAtBA,QAAsB;AAAA,MAAZ1N,MAAY,UAAZA,MAAY;;AAC/D;AACA,MAAIgY,QAAJ,EAAc;AACbnI,kDAAuBD,gBAAvB,IAAyC5P,MAAzC;;AAEA,OAAI+R,cAAJ,EAAoB;AACnB,QAAM6E,aAAa;AAClB9F,aAAQtB,OADU;AAElB5D,0BAAY0D,OAAZ,qBAAsB0C,eAAtB,EAAwChS,MAAxC,EAFkB;AAGlB+E,iBAAYqK,YAHM;AAIlBoE,aAAQ,KAJU;AAKlBkC,gBAAWnJ;AALO,KAAnB;AAOA;AACAgH,oBAAgBqD,UAAhB;AACA;AACD,GAdD,MAcO;AACN,OAAIkB,8CAAsBlI,gBAAtB,EAAJ;AACA,OAAIqI,eAAehZ,QAClBc,gBAAgBwM,QAAQ1M,QAAxB,EAAkCqE,MAAMlE,MAAxC,CADkB,CAAnB;AAGAiY,gBAAavR,IAAb,CAAkB1G,MAAlB;AACA;AACA6P,sBACCiI,gBAAgBlM,MAAhB,CAAuB,UAACvM,IAAD;AAAA,WAAU,CAAC4Y,aAAarW,QAAb,CAAsBvC,IAAtB,CAAX;AAAA,IAAvB,CADD;AAGA;AACD8S,cAAY,EAAC6F,kBAAD,EAAWzL,gBAAX,EAAoBmB,kBAApB,EAA8B1N,cAA9B,EAAZ;AACA,EA5BD;;AA+BA;;AAEA;;;;;;;AAOA,KAAMkY,OAAO,SAAPA,IAAO,CAACxY,IAAD,EAAOiC,GAAP,EAAYwW,QAAZ,EAAyB;AACrC,OAAK,IAAI/X,IAAI,CAAb,EAAgBA,IAAIV,KAAKI,MAAzB,EAAiCM,GAAjC,EAAsC;AACrC,OAAIV,KAAKU,CAAL,EAAQJ,MAAR,MAAoB2B,GAAxB,EAA6B;AAC5B;AACA,WAAOwW,SAASzY,KAAKU,CAAL,CAAT,EAAkBA,CAAlB,EAAqBV,IAArB,CAAP;AACA;AAGD,OAAIA,KAAKU,CAAL,EAAQP,QAAZ,EAAsB;AACrBqY,SAAKxY,KAAKU,CAAL,EAAQP,QAAb,EAAuB8B,GAAvB,EAA4BwW,QAA5B;AACA;AACD;AACD,EAZD;;AAcA,KAAMrE,WAAW,SAAXA,QAAW,CAACnG,IAAD,EAAU;AAC1B,MAAIyK,uCAAezK,IAAf,EAAJ;AACA,MAAIoD,YAAJ;AACC;AACAqH,cAAWA,SAASxM,MAAT,CAAgB,UAACyM,IAAD,EAAU;AACpC,QAAIra,UAAU,IAAd;AACA+S,iBAAarP,OAAb,CAAqB,UAACmE,KAAD,EAAW;AAC/B;AACA,SAAGA,MAAMyS,QAAT,EACCta,UAAU6H,MAAMyS,QAAN,CAAeD,IAAf,EAAqBpJ,KAArB,CAAV;;AAED;AACA,SAAGpJ,MAAMtF,KAAT,EACC8X,KAAKxS,MAAM3E,IAAX,IAAmB2E,MAAMtF,KAAN,CAAY8X,IAAZ,EAAkBpJ,KAAlB,CAAnB;AACD,KARD;AASA,QAAGjR,OAAH,EACC,OAAOqa,IAAP;AACD,IAbU,CAAX;AAcD,MAAME,yCAAiBtJ,KAAjB,qBAA2BmJ,QAA3B,EAAN;AACAvF,kBAAgB0F,UAAhB;AACAtD,wBAAsB,WAAtB,EAAmCsD,UAAnC;AAEA,EAtBD;;AAwBA,KAAMvE,UAAU,SAAVA,OAAU,CAACpV,GAAD,EAAS;AACxB,MAAI4Z,oBAAW5Z,GAAX,CAAJ;AACA,MAAImS,YAAJ,EACCA,aAAarP,OAAb,CAAqB,UAACmE,KAAD;AAAA,UAAW2S,KAAK3S,MAAM3E,IAAX,IAAmB2E,MAAMtF,KAAN,CAAYiY,IAAZ,EAAkBvJ,KAAlB,CAA9B;AAAA,GAArB;AACD,MAAMsJ,yCAAiBtJ,KAAjB,IAAwBuJ,IAAxB,EAAN;AACA3F,kBAAgB0F,UAAhB;AACAtD,wBAAsB,UAAtB,EAAkCsD,UAAlC;AAEA,EARD;;AAUA,KAAMrE,gBAAgB,SAAhBA,aAAgB,GAAM;AAC3B;AACA,MAAMqE,yCAAiBtJ,KAAjB,IAAwBhP,iBAAiBgP,KAAjB,EAAwBjP,MAAxB,EAAgC2M,iBAAiB,CAAjB,CAAhC,CAAxB,EAAN;AACAkG,kBAAgB0F,UAAhB;AACAtD,wBAAsB,gBAAtB,EAAwCsD,UAAxC;AAEA,EAND;;AAQA,KAAMnE,WAAW,SAAXA,QAAW,CAACxV,GAAD,EAAS;AACzB;AACA,MAAMc,mCAAWuP,KAAX,EAAN;AACA,MAAMtN,MAAM/C,IAAIoB,MAAJ,CAAZ;AACAkY,OAAKxY,IAAL,EAAWiC,GAAX,EAAgB,UAACtC,IAAD,EAAOsI,KAAP,EAAc0E,GAAd,EAAuB;AACtC3M,QAAKiI,KAAL,IAAc/I,GAAd;AACAiU,mBAAgBnT,IAAhB;AACA;AACAoT,2BAAwBnG,gBAAxB,EAA0C9K,SAA1C,EAAqDnC,IAArD;AACAuV,yBAAsB,WAAtB,EAAmCvV,IAAnC;;AAEA;AACA,GARD;AASA;AACA,EAdD;;AAgBA,KAAM4U,aAAa,SAAbA,UAAa,CAACmE,KAAD,EAAW;AAC7B;AACA,MAAMF,aAAatJ,MAAMrD,MAAN,CAClB,UAACvM,IAAD;AAAA,UAAU,CAACsN,iBAAiB/K,QAAjB,CAA0BvC,KAAKW,MAAL,CAA1B,CAAX;AAAA,GADkB,CAAnB;AAEA6S,kBAAgB0F,UAAhB;AACAzF;AACAmC,wBAAsB,aAAtB,EAAqCsD,UAArC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAdD;;AAgBA;;AAEA,KAAM/D,aAAa,SAAbA,UAAa,CAACiE,KAAD,EAAW;AAC7B,MAAM/Y,mCAAWuP,KAAX,EAAN;AACA,MAAMtN,MAAMgL,iBAAiB,CAAjB,CAAZ;AACAuL,OAAKxY,IAAL,EAAWiC,GAAX,EAAgB,UAACtC,IAAD,EAAOsI,KAAP,EAAc0E,GAAd,EAAuB;AACtC,OAAMqM,cAAcC,gBAAgBhR,KAAhB,EAAuBA,QAAQ,CAA/B,CAApB;AACAiR,mBAAgBjR,KAAhB,EAAuB+Q,WAAvB,EAAoCrM,GAApC,EAAyC3M,IAAzC,EAA+C,aAA/C;AACA;AACA;AACA;AACA;AACA,GAPD;AAQA,EAXD;;AAaA,KAAMgV,eAAe,SAAfA,YAAe,CAAC+D,KAAD,EAAW;AAC/B,MAAM/Y,mCAAWuP,KAAX,EAAN;AACA,MAAMtN,MAAMgL,iBAAiB,CAAjB,CAAZ;AACAuL,OAAKxY,IAAL,EAAWiC,GAAX,EAAgB,UAACtC,IAAD,EAAOsI,KAAP,EAAc0E,GAAd,EAAuB;AACtC,OAAMqM,cAAcC,gBAAgBhR,KAAhB,EAAuBA,QAAQ,CAA/B,CAApB;AACAiR,mBAAgBjR,KAAhB,EAAuB+Q,WAAvB,EAAoCrM,GAApC,EAAyC3M,IAAzC,EAA+C,eAA/C;AACA;AACA;AACA;AACA;AACA,GAPD;AAQA,EAXD;;AAaA,KAAMiZ,kBAAkB,SAAlBA,eAAkB,CAACE,QAAD,EAAWC,QAAX;AAAA,SACvBA,YAAY,CAAZ,IAAiBA,WAAW7J,MAAMnP,MAAlC,GAA2CgZ,QAA3C,GAAsDD,QAD/B;AAAA,EAAxB;;AAGA,KAAMD,kBAAkB,SAAlBA,eAAkB,CAACC,QAAD,EAAWC,QAAX,EAAqBzM,GAArB,EAA0B3M,IAA1B,EAAgCwV,SAAhC,EAA8C;AACrE,MAAI4D,YAAY,CAAZ,IAAiBA,WAAWzM,IAAIvM,MAApC,EAA4C;AAC3C;AACA,OAAMT,OAAOgN,IAAIiB,MAAJ,CAAWuL,QAAX,EAAqB,CAArB,CAAb,CAF2C;AAG3C;AACAxM,OAAIiB,MAAJ,CAAWwL,WAAW,CAAX,GAAeA,QAAf,GAA0B,CAArC,EAAwC,CAAxC,EAA2CzZ,KAAK,CAAL,CAA3C,EAJ2C;AAK3C;AACAwT,mBAAgBnT,IAAhB;AACAuV,yBAAsBC,SAAtB,EAAiCxV,IAAjC;AAEA;AACD,EAXD;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,KAAMqZ,4BAA4B,SAA5BA,yBAA4B,CAACC,UAAD,EAAgB;AACjD,MAAMC,kBAAkBtM,iBAAiBf,MAAjB,CACvB,UAACvM,IAAD;AAAA,UAAUA,SAAS2Z,WAAWhZ,MAAX,CAAnB;AAAA,GADuB,CAAxB;AAGA;AACA8S,0BAAwBmG,eAAxB,EAAyCpX,SAAzC,EAAoDoN,KAApD;AACAS,eAAcuJ,gBAAgBnZ,MAAhB,KAA2B,CAA3B,GAA+B,KAA/B,GAAuC,IAArD;AACAsS,uBAAqB6G,eAArB;AACA,EARD;;AAUA,QACCtW;AAAA;AAAA,IAAK,WAAc0C,QAAd,WAAL;AACC;AAAA;AAAA,KAAK,WAAcA,QAAd,eAAL;AACC;AAAC,yBAAD;AAAA;AACE;AAAA,SAAEG,KAAF,UAAEA,KAAF;AAAA,SAAS+E,MAAT,UAASA,MAAT;AAAA,YACA5H,wCAACuW,6BAAD;AACC,WAAKhJ;AACL;AAFD,QAGC,SAASoH,aAHV;AAIC,YAAMrI;AACN;AALD,QAMC,QAAQO;AACR;AAPD,QAQC,OAAOhK,KARR;AASC,cAAQ+E,MATT;AAUC,cAAQvK;AACR;;AAEA;AAbD,QAcC,cAAciX,aAdf;AAeC,qBAAejM,KAfhB;AAgBC,aAAOgG,cAhBR;AAiBC,oBAAclB,cAAc2C,YAAYlI,MAA1B,GAAmC,CAjBlD;AAkBC,oBAAc0G,YAlBf;AAmBC,iBAAWC,SAnBZ;AAoBC,uBAAiBnC,UAAU9D,OAAV,GAAoB,IApBtC;AAqBC,sBAAgB4L,OArBjB;AAsBC,mBAAa1F;AACb;AACA;AAxBD,QAyBC,oBAAoBE;AACpB;AA1BD,QA2BC,uBAAuBE,aA3BxB;AA4BC,oBAAclB,eAAe8G,YAAf,GAA8BtV,SA5B7C;AA6BC,gBAAUkN;AACV;AA9BD,QA+BC,iBAAiB8C,eA/BlB;AAgCC,uBAAiBjC;AACjB;AAjCD,QAkCC,cAAc+G,aAlCf;AAmCC,wBAAkBF,iBAnCnB;AAoCC,4BAAsBoB,qBApCvB;AAqCC,mBAAaE,YArCd;AAsCC,gBAAUzH;AAtCX,OADA;AAAA;AADF;AADD,GADD;AA+CEgC,mBAAiBV,UAAjB,IAA+B,CAACC,eAAhC,GACAlP,wCAACyL,eAAD;AACC,sBAAmB2K,yBADpB;AAEC,uBAAoB9Z,QACnBQ,mBAAmBwP,KAAnB,CADmB,EAElBrD,MAFkB,CAEX,UAACvM,IAAD;AAAA,WAAUsN,iBAAiB/K,QAAjB,CAA0BvC,KAAKW,MAAL,CAA1B,CAAV;AAAA,IAFW,CAFrB;AAKC,cAAWuS;AALZ,IADA,GAQG;AAvDL,EADD;AA2DA,CA1+Ba,CAAd;;AA4+BA7D,QAAMtH,SAAN,GAAkB;AACjB;;;;AAIA;AACAgJ,UAAS/I,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,EAAoCgG,UAN5B;;AAQjB;AACA+I,eAAchJ,8BAAUoD,IATP;;AAWjB;;;;AAIA;AACA8F,cAAalJ,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAhBI;;AAkBjB;AACAkP,yBAAwBnJ,8BAAUe,OAAV,CACvBf,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUsD,MAAX,EAAmBtD,8BAAU8R,MAA7B,CAApB,CADuB,CAnBP;;AAuBjB;AACA1I,qBAAoBpJ,8BAAUsD,MAxBb;;AA0BjB;AACA+F,gBAAerJ,8BAAU/F,MA3BR;;AA6BjB;AACAqP,gBAAetJ,8BAAU+R,KAAV,CAAgB;AAC9B;AACAzX,OAAK0F,8BAAUsD,MAFe;AAG9B;AACAsL,SAAO5O,8BAAUgS,KAAV,CAAgB,CAAC,KAAD,EAAQ,MAAR,CAAhB;AAJuB,EAAhB,CA9BE;;AAqCjB;;;;AAIA;AACA1L,OAAMtG,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CA1CW;;AA4Cd;AACAsP,UAASvJ,8BAAUqD,IA7CL;;AA+CjB;AACAc,kBAAiBnE,8BAAUe,OAAV,CAChBf,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUsD,MAAX,EAAmBtD,8BAAU8R,MAA7B,CAApB,CADgB,CAhDA;;AAoDjB;AACAtI,cAAaxJ,8BAAUsD,MArDN;;AAuDjB;AACAiB,SAAQvE,8BAAU/F,MAxDD;;AA0DjB;AACAwP,SAAQzJ,8BAAU+R,KAAV,CAAgB;AACvB;AACAzX,OAAK0F,8BAAUsD,MAFQ;AAGvB;AACAsL,SAAO5O,8BAAUgS,KAAV,CAAgB,CAAC,KAAD,EAAQ,MAAR,CAAhB;AAJgB,EAAhB,CA3DS;;AAkEjB;;;;AAIA;AACArZ,SAAQqH,8BAAUsD,MAvED;;AA0EjB;;;;;;;;;;;;;;;;;;;AAmBAoG,eAAc1J,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CA7FG;;AA+FjB;;;;;;;;;;;;;;;;AAgBAgY,oBAAmBjS,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CA/GF;;AAiHjB;;;;AAIA;AACA0J,QAAO3D,8BAAUwG,OAtHA;;AAwHjB;AACA5C,UAAS5D,8BAAUwG,OAzHF;;AA2HjB;AACAmD,iBAAgB3J,8BAAUoD,IA5HT;;AA8HjBgI,cAAapL,8BAAU+R,KAAV,CAAgB;;AAE5B;AACA7O,UAAQlD,8BAAU8R,MAHU;;AAK5B;;AAEAnG,gBAAc3L,8BAAUe,OAAV,CAAkBf,8BAAUsD,MAA5B,CAPc;;AAS5B;AACAmM,iBAAezP,8BAAUsD,MAVG;;AAY5B;AACAoM,eAAa1P,8BAAUsD,MAbK;;AAe5B;AACAqM,cAAY3P,8BAAUsD,MAhBM;;AAkB5B;AACAsI,yBAAuB5L,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUqD,IAAX,EAAiBrD,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAAjB,CAApB,CAnBK;;AAqB5B;AACA4R,2BAAyB7L,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUqD,IAAX,EAAiBrD,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAAjB,CAApB,CAtBG;;AAwB5B;AACA6R,0BAAwB9L,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUqD,IAAX,EAAiBrD,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAAjB,CAApB;AAzBI,EAAhB,CA9HI;;AA0JjB;AACA2P,eAAc5J,8BAAU8R,MA3JP;;AA6JjB;AACAjI,YAAW7J,8BAAU8R,MA9JJ;;AAgKjB;;AAEAhI,cAAa9J,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUqD,IAAX,EAAiBrD,8BAAUwG,OAA3B,CAApB,CAlKI;;AAoKjB;AACAuD,aAAY/J,8BAAUoD,IArKL;;AAuKjB;AACA4G,qBAAoBhK,8BAAU8R,MAxKb;;AA0KjB;AACAI,eAAclS,8BAAUoD,IA3KP;;AA6KjB;AACA6G,cAAajK,8BAAUoD,IA9KN;;AAgLjB;;;;AAIA;;AAEA8G,gBAAelK,8BAAU8R,MAtLR;;AAwLjB;AACA3H,WAAUnK,8BAAU8R,MAzLH;;AA2LjB;AACAK,oBAAmBnS,8BAAUqD,IA5LZ;;AA8LjB;AACA+G,kBAAiBpK,8BAAUqD,IA/LV;;AAiMd;AACAgH,mBAAkBrK,8BAAUqD,IAlMd;;AAoMjB;AACAiH,kBAAiBtK,8BAAUsD,MArMV;;AAuMjB;;;;AAIA;AACAiH,aAAYvK,8BAAUoD,IA5ML;;AA8MjB;;;;AAIA;AACA+B,iBAAgBnF,8BAAUoD,IAnNT;;AAqNjB;AACAoH,kBAAiBxK,8BAAUsD,MAtNV;;AAwNjB;AACAmH,mBAAkBzK,8BAAUoD,IAzNX;;AA2NjB;AACAsH,iBAAgB1K,8BAAUoD,IA5NT;;AA8NjB;AACAuH,kBAAiB3K,8BAAUsD,MA/NV;;AAiOjB;;;;AAIA;;AAEAsH,aAAY5K,8BAAUqD,IAvOL;;AAyOjB;;AAEAwH,mBAAkB7K,8BAAUqD,IA3OX;;AA6OjB;;AAEAyH,cAAa9K,8BAAUqD,IA/ON;;AAiPjB;;AAEA0H,uBAAsB/K,8BAAUqD,IAnPf;;AAqPjB;;AAEA2H,uBAAsBhL,8BAAUqD,IAvPf;;AAyPjB;;AAEA;AACA4H,gBAAejL,8BAAUoD,IA5PR;;AA8PjB;;;;AAIA8H,yBAAwBlL,8BAAUoH,SAAV,CAAoB,CAC3CpH,8BAAUqD,IADiC,EAE3CrD,8BAAUsD,MAFiC,CAApB,CAlQP;;AAuQjB;AACA6H,eAAcnL,8BAAUsD,MAxQP;;AA0QjB;AACArH,YAAW+D,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B;AA3QM,CAAlB;;AA8QAoN,QAAM7K,YAAN,GAAqB;AACpBwM,eAAc,KADM;AAEpBC,WAAU,KAFU;AAGpBC,cAAa,EAHO;AAIpBC,yBAAwB,EAJJ;AAKpBC,qBAAoB,EALA;AAMpBC,gBAAe,EANK;AAOpBC,gBAAe,EAPK;;AASpBhD,OAAM,EATc;AAUpBiD,UAAS5R,IAVW;AAWpBwM,kBAAiB,EAXG;AAYpBqF,cAAa,EAZO;AAapBjF,SAAQ,EAbY;AAcpBkF,SAAQ,EAdY;;AAgBpB9Q,SAAQ,IAhBY;;AAkBpBgL,QAAOA,OAlBa;AAmBpBC,UAASA,SAnBW;AAoBpB+F,iBAAgB,KApBI;AAqBpByB,cAAa;AACZlI,UAAQ,EADI;AAEZyI,gBAAc,EAFF;AAGZ8D,iBAAe,WAHH;AAIZC,eAAa,oBAJD;AAKZC,cAAY,gBALA;AAMZ/D,yBAAuB,IANX;AAOZC,2BAAyB,IAPb;AAQZC,0BAAwB;AARZ,EArBO;AA+BpBlC,eAAc,EA/BM;AAgCpBC,YAAW,EAhCS;AAiCpBE,aAAY,KAjCQ;AAkCpBC,qBAAoBxP,SAlCA;AAmCpB0X,eAAc,KAnCM;AAoCpBjI,cAAa,IApCO;;AAsCpBC,gBAAe,GAtCK;AAuCpBC,WAAU,EAvCU;AAwCpBC,kBAAiB5P,SAxCG;AAyCjB6P,mBAAkB1S,IAzCD;AA0CpB2S,kBAAiB,YA1CG;;AA4CpBC,aAAY,KA5CQ;;AA8CpBpF,iBAAgB,IA9CI;AA+CpBqF,kBAAiBhQ,SA/CG;AAgDpBiQ,mBAAkB,IAhDE;AAiDpBC,iBAAgB,KAjDI;AAkDpBC,kBAAiB,UAlDG;;AAoDpBC,aAAYjT,IApDQ;AAqDpBkT,mBAAkBlT,IArDE;AAsDpBmT,cAAanT,IAtDO;AAuDpBoT,uBAAsBpT,IAvDF;AAwDpBqT,uBAAsBrT,IAxDF;;AA0DpBsT,gBAAe,KA1DK;;AA4DpBE,eAAc3Q,SA5DM;AA6DpByB,YAAW;AA7DS,CAArB;;AAgEA,IAAMH,oBAAkB,SAAlBA,eAAkB,CAACC,KAAD,EAAQC,QAAR,EAAqB;AAAA,KACrCC,SADqC,GACxBD,QADwB,CACrCC,SADqC;;AAE5C,KAAIC,QAAQ,EAAZ;AACA,KAAGD,aAAaA,UAAUxD,MAAV,GAAmB,CAAnC,EAAqC;AACpCwD,YAAU5B,OAAV,CAAkB,gBAAQ;AAAA,OAClBR,IADkB,GACO7B,IADP,CAClB6B,IADkB;AAAA,OACZvC,IADY,GACOU,IADP,CACZV,IADY;AAAA,OACN6D,SADM,GACOnD,IADP,CACNmD,SADM;;AAEzB,OAAGtB,QAAQvC,IAAX,EACC4E,MAAMrC,IAAN,IAAcsC,+BAAWC,GAAX,CAAeL,KAAf,EAAsBzE,IAAtB,CAAd;AACD,OAAGuC,QAAQsB,SAAX,EACCe,MAASrC,IAAT,kBAA4BsC,+BAAWC,GAAX,CAAeL,KAAf,EAAsBZ,SAAtB,CAA5B;AACD,GAND;AAOA;AACD,QAAOe,KAAP;AACA,CAbD;AAcA,IAAMI,uBAAqB,SAArBA,kBAAqB,CAACpB,QAAD;AAAA,QAC1BqB,yBAAmB,EAAElF,cAAcA,YAAhB,EAAnB,EAAkD6D,QAAlD,CAD0B;AAAA,CAA3B;;AAGA,cAAe0B,mBAAQd,iBAAR,EAAyBQ,oBAAzB,EAA6C,IAA7C,EAAmD,EAAEgL,YAAY,IAAd,EAAnD,EAAyED,OAAzE,CAAf;;;;;AC/1CA,IAAM7K,iBAAe;AACjB6M,mBAAe,EADE;AAEjB1Q,YAAQ,IAFS;AAGjBwR,cAAU,EAHO;AAIjBgI,uBAAmBxa,IAJF;AAKjB6S,qBAAiBhQ,SALA;AAMjBkQ,oBAAgB,KANC;AAOjBC,qBAAiB,UAPA;AAQjBsH,uBAAmB;AARF,CAArB;;AAWA,IAAMG,eAAe,SAAfA,YAAe,QAAS;;AAE1B;AAF0B,oBAGY7W,eAASf,SAAT,CAHZ;AAAA;AAAA,QAGnB6X,WAHmB;AAAA,QAGNC,cAHM;;AAAA,2CAelB9V,cAfkB,EAeDK,KAfC;AAAA,QAMtBwM,aANsB,uBAMtBA,aANsB;AAAA,QAOtB1Q,MAPsB,uBAOtBA,MAPsB;AAAA,QAQtBwR,QARsB,uBAQtBA,QARsB;AAAA,QAStBgI,iBATsB,uBAStBA,iBATsB;AAAA,QAUtB3H,eAVsB,uBAUtBA,eAVsB;AAAA,QAWtBE,cAXsB,uBAWtBA,cAXsB;AAAA,QAYtBC,eAZsB,uBAYtBA,eAZsB;AAAA,QAatBsH,iBAbsB,uBAatBA,iBAbsB;AAAA,QActBC,YAdsB,uBActBA,YAdsB;;AAiB1BxW,oBAAU,YAAM;AACZ,YAAI6W,kBAAkB,KAAtB;AACA,YAAMC;AAAA,8EAAW;AAAA;AAAA;AAAA;AAAA;AACb,oCAAIL,iBAAJ,EAAuB;AACnB;AACA;AACAA,wDACKxP,IADL,CACU,UAAC/H,QAAD,EAAc;AAChB;AACA;AACA,4CAAG,CAAC2X,eAAJ,EAAqB;AACjB;AACAE,yDAAa7X,SAASvC,IAAtB;AACH;AACJ,qCARL,EASKwK,KATL,CASW;AAAA,+CAASpI,kBAAkBC,KAAlB,EAAyB,+BAAzB,CAAT;AAAA,qCATX;AAUH;;AAdY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAX;;AAAA;AAAA;AAAA;AAAA,WAAN;AAgBA8X,mBAAW7P,IAAX,CAAgB;AAAA,mBAAK+P,CAAL;AAAA,SAAhB;AACA,eAAO;AAAA,mBAAMH,kBAAkB,IAAxB;AAAA,SAAP;AACH,KApBD,EAoBG,EApBH;;AAsBA,QAAME,eAAe,SAAfA,YAAe,CAACE,MAAD,EAAY;AAC7B,YAAIC,WAAW,EAAf;AACA,YAAGD,UAAUA,OAAOjS,MAApB,EAA4B;AACxBkS,uBAAWD,OAAOjS,MAAP,CAAcnI,GAAd,CAAkB,UAACP,IAAD,EAAU;AACnC,oBAAM6a,WACFZ,qBACAA,kBAAkBa,IAAlB,CACI,UAACjU,MAAD;AAAA,2BACIA,OAAOhF,IAAP,KAAgB7B,KAAK6B,IAArB,IAA6BgF,OAAOhF,IAAP,KAAgB7B,KAAK+a,KADtD;AAAA,iBADJ,CAFJ;AAMA;AACIzY,yBAAKtC,KAAK6B,IADd;AAEImZ,2BAAOhb,KAAKkJ,MAAL,GAAclJ,KAAKkJ,MAAnB,GAA4BlJ,KAAK6B,IAF5C;AAGIoZ,6BAASjb,KAAK+a,KAAL,GAAa/a,KAAK+a,KAAlB,GAA0B/a,KAAK6B,IAH5C;AAIIqZ,2BAAOlb,KAAKkb,KAJhB;AAKI/U,2BAAOnG,KAAKmG,KALhB;AAMImS,+BAAWtY,KAAKsY,SANpB;AAOI6C,8BAAUnb,KAAKmb,QAPnB;AAQIC,4BAAQ,CAACpb,KAAKqb,OARlB;AASI3T,+BAAW,CAACwS,eAAe,UAAf,GAA4B,EAA7B,EAAiC3S,IAAjC,CAAsC,GAAtC,CATf;AAUI+T,qCAAiB,CAACpB,eAAe,UAAf,GAA4B,EAA7B,EAAiC3S,IAAjC,CAAsC,GAAtC;AAVrB,mBAYOsT,QAZP;AAaIzC,kCAAc,sBAACnW,MAAD,EAAY;AACtB,4BAAI4Y,YAAYA,SAASzC,YAAzB,EACI,OAAO9U,wCAAC,QAAD,CAAU,YAAV,EAA2BrB,MAA3B,CAAP;AACA;AAFJ,6BAII,OAAOA,OAAOsZ,QAAP,GACDjY;AAAA,gEAAY,IAAZ;AAAA,kCAAiB,UAAU,IAA3B,EAAiC,OAAO,EAAC6C,OAAO,MAAR,EAAxC,EAAyD,WAAW,eAApE;AAAsFlE,uCAAOsZ;AAA7F,6BADC,GAEDjY;AAAA,gEAAY,IAAZ;AAAA,kCAAiB,UAAU,IAA3B,EAAiC,OAAO,EAAC6C,OAAO,MAAR,EAAxC,EAAyD,WAAW,eAApE;AAAA;AAAA,6BAFN;AAGA;AACP;AAtBL;AAwBH,aA/BU,CAAX;AAgCH;;AAED,YAAIqV,uBAAJ;AACA,YAAIb,UAAUA,OAAOc,YAAjB,IAAiCd,OAAOe,iBAA5C,EAA+D;AAC3D,gBAAM3O,YAAY4N,OAAOgB,cAAP,GACZhB,OAAOgB,cAAP,CAAsBC,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CADY,GAEZjJ,eAFN;AAGA6I,0CAAsBnK,aAAtB,qBAAsCtE,SAAtC,EAAkD,IAAlD;AACH,SALD,MAKOyO,iBAAiBnK,aAAjB;;AAGPiJ,uBAAe;AACXvJ,qBAAS6J,QADE;AAEXvJ,2BAAemK,cAFJ;AAGX7a,oBACIga,UAAUA,OAAOc,YAAjB,IAAiCd,OAAOgB,cAAxC,GACMhB,OAAOgB,cAAP,CAAsBC,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CADN,GAEMjb,MANC;AAOXgS,6BACIgI,UAAUA,OAAOc,YAAjB,IAAiCd,OAAOgB,cAAxC,GACMhB,OAAOgB,cAAP,CAAsBC,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CADN,GAEMjJ,eAVC;AAWXH,6BACImI,UAAUA,OAAOc,YAAjB,IAAiCd,OAAOkB,aAAxC,GACMlB,OAAOkB,aADb,GAEMrJ,eAdC;AAeXE,4BACIiI,UAAUA,OAAOc,YAAjB,IAAiCd,OAAOe,iBAAxC,GACMf,OAAOe,iBADb,GAEMhJ,cAlBC;AAmBXP,sBAAUwI,UAAUA,OAAOc,YAAjB,GAAgC,CAAhC,GAAoCtJ;AAnBnC,SAAf;AAqBH,KAnED;;AAqEA,QAAGkI,WAAH,EACI,OAAS/W,wCAAC+L,OAAD,eAAWxK,KAAX,EAAsBwV,WAAtB,EAAT,CADJ,KAGI,OAAO,IAAP;AACP,CAhHD;;ACNA,IAAMpV,iBAAe,CACpB,eADoB,EAEpB,eAFoB,EAGpB,eAHoB,EAIpB,oBAJoB,EAKpB,QALoB,EAMpB,QANoB,EAOpB,aAPoB,EAQpB,iBARoB,EASpB,cAToB,EAUpB,iBAVoB,EAWpB,iBAXoB,EAYpB,SAZoB,EAapB,cAboB,EAcpB,UAdoB,CAArB;;AAiBA;AACA,IAAM6W,WAAS,SAATA,MAAS,QAAS;AAAA,KAItBxK,aAJsB,GAsBnBzM,KAtBmB,CAItByM,aAJsB;AAAA,KAKtBD,aALsB,GAsBnBxM,KAtBmB,CAKtBwM,aALsB;AAAA,KAMtBD,kBANsB,GAsBnBvM,KAtBmB,CAMtBuM,kBANsB;AAAA,KAOtBK,MAPsB,GAsBnB5M,KAtBmB,CAOtB4M,MAPsB;AAAA,KAQtBlF,MARsB,GAsBnB1H,KAtBmB,CAQtB0H,MARsB;AAAA,KAStBiF,WATsB,GAsBnB3M,KAtBmB,CAStB2M,WATsB;AAAA,KAUtBc,eAVsB,GAsBnBzN,KAtBmB,CAUtByN,eAVsB;AAAA,KAWtBtB,YAXsB,GAsBnBnM,KAtBmB,CAWtBmM,YAXsB;AAAA,KAYtBoB,eAZsB,GAsBnBvN,KAtBmB,CAYtBuN,eAZsB;AAAA,KAatB2J,eAbsB,GAsBnBlX,KAtBmB,CAatBkX,eAbsB;AAAA,KActBC,OAdsB,GAsBnBnX,KAtBmB,CActBmX,OAdsB;AAAA,KAetBC,YAfsB,GAsBnBpX,KAtBmB,CAetBoX,YAfsB;AAAA,KAgBtB9J,QAhBsB,GAsBnBtN,KAtBmB,CAgBtBsN,QAhBsB;AAAA,KAmBtB+J,IAnBsB,GAsBnBrX,KAtBmB,CAmBtBqX,IAnBsB;AAAA,KAoBtB9W,QApBsB,GAsBnBP,KAtBmB,CAoBtBO,QApBsB;AAAA,KAqBtBlE,KArBsB,GAsBnB2D,KAtBmB,CAqBtB3D,KArBsB;;AAwBvB;;AAxBuB,iBAyBSqC,eAAS,IAAT,CAzBT;AAAA;AAAA,KAyBhB4Y,QAzBgB;AAAA,KAyBNC,WAzBM;AA0BvB;;;AA1BuB,kBA2BS7Y,eAAS,KAAT,CA3BT;AAAA;AAAA,KA2BhB8Y,QA3BgB;AAAA,KA2BNC,WA3BM;AA4BvB;;;AA5BuB,kBA6BS/Y,eAASyY,OAAT,CA7BT;AAAA;AAAA,KA6BhBO,QA7BgB;AAAA,KA6BNC,WA7BM;AA8BvB;;;AA9BuB,kBA+BiBjZ,eAAS,KAAT,CA/BjB;AAAA;AAAA,KA+BhBkZ,YA/BgB;AAAA,KA+BFC,eA/BE;;AAiCvB;;;AAjCuB,kBAkCOnZ,eAASf,SAAT,CAlCP;AAAA;AAAA,KAkChB2N,OAlCgB;AAAA,KAkCPwM,UAlCO;AAmCvB;;;AAnCuB,mBAoCOpZ,eAAS,EAAT,CApCP;AAAA;AAAA,KAoChB0M,OApCgB;AAAA,KAoCP2M,UApCO;AAqCvB;;;AArCuB,mBAsCiBrZ,eAASf,SAAT,CAtCjB;AAAA;AAAA,KAsChBuN,YAtCgB;AAAA,KAsCF8M,eAtCE;;AAwCvB;;;AAxCuB,mBAyCiBtZ,eAAS,KAAT,CAzCjB;AAAA;AAAA,KAyChBuZ,YAzCgB;AAAA,KAyCFC,eAzCE;;AA2CvB,KAAMvZ,YAAYH,YAAlB;;AAEAK,iBAAU,YAAM;AACfmZ,kBAAgBzL,kBAAhB;AACA4L,eAAa;AACZvL,WAAQH,aADI;AAEZ/E,WAAQ8E,aAFI;AAGZG,gBAAaJ,kBAHD;AAIZ+C,WAAQ;AAJI,GAAb;AAMA,EARD,EAQG,EARH;;AAUAzQ,iBAAU,YAAM;AACf8P,kBAAgBwI,OAAhB;AACA,EAFD,EAEG,CAACA,OAAD,CAFH;;AAIAtY,iBAAU,YAAM;AACf;AACA,MAAGF,SAAH,EAAc;AACb,OAAMyS,WAAWxE,SAASA,MAAT,GAAkBtB,OAAnC;AACA,OAAM+F,WAAW3J,SAASA,MAAT,GAAkB0D,OAAnC;AACA,OAAMkG,gBAAgB3E,cAAcA,WAAd,GAA4BzB,YAAlD;AACA4M,cAAW1G,QAAX;AACA2G,cAAW1G,QAAX;AACA2G,mBAAgB1G,aAAhB;AACA6G,gBAAa;AACZvL,YAAQwE,QADI;AAEZ1J,YAAQ2J,QAFI;AAGZxQ,gBAAYyQ,aAHA;AAIZhC,YAAQ;AAJI,IAAb;AAMA;AACD,EAhBD,EAgBG,CAAC1C,MAAD,EAASlF,MAAT,EAAiBiF,WAAjB,CAhBH;;AAkBA,KAAMgC,kBAAkB,SAAlBA,eAAkB,CAACwI,OAAD,EAAa;AACnCQ,cAAYR,OAAZ;AACA;AACA,MAAGE,SAAS,UAAZ,EAAwB;AACvB,OAAGhc,MAAMC,OAAN,CAAce,KAAd,CAAH,EACC,IAAG8a,QAAQlc,MAAR,CAAe,UAACmd,QAAD,EAAWjd,IAAX;AAAA,WAAoBkB,MAAMqB,QAAN,CAAevC,KAAKkB,KAApB,IAA6B+b,WAAW,CAAxC,GAA4CA,QAAhE;AAAA,IAAf,EAAyF,CAAzF,MAAgGjB,QAAQvb,MAA3G,EACCsc,gBAAgB,IAAhB,EADD,KAGCA,gBAAgB,KAAhB;AACF3X,YAASlE,KAAT;AACA;AACF;AACA;AACA,EAbD;;AAeA,KAAMgc,aAAa,SAAbA,UAAa,CAAC/I,MAAD;AAAA,SAClBA,SAAS,CAAT,GAAaoC,KAAKC,KAAL,CAAW+F,SAAS9b,MAAT,GAAkB0R,QAA7B,CADK;AAAA,EAAnB;;AAGA,KAAMgL,UAAU,SAAVA,OAAU,CAAC1L,MAAD;AAAA,SACfA,UAAUA,OAAOnP,GAAjB,GAAuBmP,OAAOnP,GAAP,GAAa,GAAb,GAAmBmP,OAAOmF,KAAjD,GAAyD,IAD1C;AAAA,EAAhB;;AAGA,KAAMwG,iBAAiB,SAAjBA,cAAiB,CAAC5L,WAAD;AAAA,SACtBA,iCAAgBc,eAAhB,EAAkCd,WAAlC,IAAiD,IAD3B;AAAA,EAAvB;;AAGA,KAAMwL,eAAe,SAAfA,YAAe,CAAC5G,MAAD,EAAY;AAChC;AADgC,MAEzB3E,MAFyB,GAEc2E,MAFd,CAEzB3E,MAFyB;AAAA,MAEjBlF,MAFiB,GAEc6J,MAFd,CAEjB7J,MAFiB;AAAA,MAETiF,WAFS,GAEc4E,MAFd,CAET5E,WAFS;AAAA,MAEI2C,MAFJ,GAEciC,MAFd,CAEIjC,MAFJ;;AAGhC,MAAI,CAACgI,YAAYhI,MAAb,KAAwB,CAACkI,QAAzB,IAAqCjK,eAAzC,EAA0D;AACzDkK,eAAY,IAAZ;;AAEA,OAAMe,iBAAiB;AACtBjH,YAAQ;AACPK,WAAMyG,WAAW/I,MAAX,CADC;AAEPuC,WAAMvE,QAFC;AAGPwE,WAAMwG,QAAQ1L,MAAR;AAHC,KADc;AAMtBpR,uBACIkM,MADJ,EAEI6Q,eAAe5L,WAAf,CAFJ;AAKD;;AAXuB,IAAvB,CAaAY,gBAAgBiL,cAAhB,EACE1S,IADF,CACO,UAAC/H,QAAD,EAAc;AACnB;AACA,QAAMxB,SAASwB,SAASvC,IAAxB;;AAEA,QAAIe,UAAUA,OAAOX,MAAP,GAAgB0R,QAA9B,EAAwC;AACvCiK,iBAAY,KAAZ;AACA,KAFD,MAEO;AACNA,iBAAY,IAAZ;AACAM,qBAAgB,KAAhB;AACA;AACDvI,aACGX,gBAAgBpS,OAAOb,GAAP,CAAW;AAAA,YAAUwb,gBAAgBuB,MAAhB,CAAV;AAAA,KAAX,CAAhB,CADH;AAAA,MAEG9J,gBAAgB+I,SAAStc,MAAT,CAAgBmB,OAAOb,GAAP,CAAW;AAAA,YAAUwb,gBAAgBuB,MAAhB,CAAV;AAAA,KAAX,CAAhB,CAAhB,CAFH,CAVmB;;AAcnB;;AAEAhB,gBAAY,KAAZ;AACA,IAlBF,EAmBEzR,KAnBF,CAmBQ,UAACnI,KAAD,EAAW;AACjBD,sBAAkBC,KAAlB,EAAyB,wBAAzB;AACA8Q,oBAAgB+I,QAAhB,EAFiB;AAGjB;AACAD,gBAAY,KAAZ;AACA,IAxBF;AAyBA;AACD,EA7CD;;AA+CA,KAAMiB,WAAW,SAAXA,QAAW,CAACnE,KAAD,EAAW;AAC3B,MAAIoE,eAAepE,MAAMqE,WAAN,CAAkBC,MAAlB,CAAyBF,YAA5C;AACA,MAAIG,YAAYvE,MAAMqE,WAAN,CAAkBC,MAAlB,CAAyBC,SAAzC,CAF2B;;AAI3B,MAAM7F,eAAe0F,eAAeG,SAApC;;AAEA,MAAG7F,eAAe,GAAf,IAAsB,CAAC2E,YAA1B,EAAwC;AACvC;AACAC,mBAAgB,IAAhB;AACAG,mBAAgBzL,kBAAhB;AACA,OAAGJ,YAAH,EAAgB;AACfgM,iBAAa;AACZvL,aAAQH,aADI;AAEZ/E,aAAQ8E,aAFI;AAGZG,kBAAaJ,kBAHD;AAIZ+C,aAAQ;AAJI,KAAb;AAMA;AACD;;AAED;AACA;AACA;AACA,EAvBD;;AAyBA,KAAMpO,WAAW,SAAXA,QAAW,CAAC7E,KAAD,EAAW;AAC3B2b,kBAAgB3b,KAAhB;AACA8b,eAAa;AACZvL,WAAQH,aADI;AAEZ/E,WAAQ8E,aAFI;AAGZG,gBAAatQ,KAHD;AAIZiT,WAAQ;AAJI,GAAb;AAMA,EARD;;AAUA,KAAMyJ,qBAAqB,SAArBA,kBAAqB,GAAM;AAChC;AACA,MAAG1B,SAAS,UAAZ,EAAwB;AACvB,OAAIY,YAAJ,EAAkB;AACjB,QAAMe,gBAAgBtB,SAAShc,GAAT,CAAa;AAAA,YAAQP,KAAKkB,KAAb;AAAA,KAAb,CAAtB;AACAkE,aAASlE,MAAMqL,MAAN,CAAa;AAAA,YAAQ,CAACsR,cAActb,QAAd,CAAuBvC,IAAvB,CAAT;AAAA,KAAb,CAAT;AACA+c,oBAAgB,KAAhB;AACA,IAJD,MAIO;AACN,QAAI7c,MAAMC,OAAN,CAAce,KAAd,KAAwBA,MAAMT,MAAN,GAAe,CAA3C,EACC2E,qCAAa,IAAIqJ,GAAJ,6BAAYvN,KAAZ,qBAAsBqb,SAAShc,GAAT,CAAa;AAAA,YAAQP,KAAKkB,KAAb;AAAA,KAAb,CAAtB,GAAb,IADD,KAGCkE,qCAAa,IAAIqJ,GAAJ,6BAAY8N,SAAShc,GAAT,CAAa;AAAA,YAAQP,KAAKkB,KAAb;AAAA,KAAb,CAAZ,GAAb;AACD6b,oBAAgB,IAAhB;AACA;AACD,GAZD,MAaC3X,SAAS5C,SAAT;AACD,EAhBD;AAiBG,KAAMsb,YAAY,SAAZA,SAAY,CAAC5c,KAAD,EAAW;AACzB;AACA,MAAGhB,MAAMC,OAAN,CAAce,KAAd,CAAH,EACC,IAAGqb,SAASzc,MAAT,CAAgB,UAACmd,QAAD,EAAWjd,IAAX;AAAA,UAAoBkB,MAAMqB,QAAN,CAAevC,KAAKkB,KAApB,IAA6B+b,WAAW,CAAxC,GAA4CA,QAAhE;AAAA,GAAhB,EAA0F,CAA1F,MAAiGV,SAAS9b,MAA7G,EACCsc,gBAAgB,IAAhB,EADD,KAGLA,gBAAgB,KAAhB;;AAEF3X,WAASlE,KAAT;AACG,EATD;;AAWA,KAAM6c,kBAAkB,SAAlBA,eAAkB,GAAM;AAChC,MAAI5W,MAAM,CAAC,iBAAD,EAAoB,wBAApB,EAA8C,mCAA9C,CAAV;AACA,MAAG2V,YAAH,EACC3V,IAAIE,IAAJ,CAAS,iCAAT;AACD,SAAOF,IAAII,IAAJ,CAAS,GAAT,CAAP;AACA,EALE;;AAOH,KAAM1B,aAAa7D,uBAAuB6C,KAAvB,EAA8BI,cAA9B,CAAnB;AACG,QACF3B;AAAA;AAAA,eACKuC,UADL;AAEC,gBAAakK,YAFd;AAGC,UAAO,EAAE5J,OAAO8V,YAAT;AACP;AACA;AALD,KAMC,UAAU6B,SANX;AAOC,gBAAa,CAPd;AAQC,sBAAmB,2BAACE,aAAD;AAAA,4DAA+BA,cAAcvd,MAA7C;AAAA;AACnB;AACA;AAVD,KAWC,eAAe8c,QAXhB;AAYC,aAAUxX,QAZX;AAaC,mBAAgB;AAAA,WACfzC;AAAC,8BAAD,CAAO,QAAP;AAAA;AACE4Y,cAAS,UAAT,GACA5Y;AAAA;AAAA,QAAK,WAAWya,iBAAhB,EAAmC,SAASH,kBAA5C;AACC;AAAA;AAAA,SAAK,WAAU,gCAAf;AACC;AAAA;AAAA;AAAA;AAAA;AADD,OADD;AAIEd,qBACAxZ;AAAA;AAAA,SAAM,WAAU,8BAAhB;AAA+C,+CAAC2a,mBAAD;AAA/C,OADA,GACyE;AAL3E,MADA,GAQE,IATJ;AAWEC;AAXF,KADe;AAAA;AAbjB;AA6BK3B,cAAYA,SAAShc,GAAT,CAAa,iBAAwCQ,CAAxC;AAAA,OAAGsF,KAAH,SAAGA,KAAH;AAAA,OAAUnF,KAAV,SAAUA,KAAV;AAAA,OAAiBwG,SAAjB,SAAiBA,SAAjB;AAAA,OAA4ByW,QAA5B,SAA4BA,QAA5B;AAAA,UAC5B7a;AAAA,gCAAW,MAAX;AAAA,MAAkB,KAAKvC,EAAEY,QAAF,CAAW,EAAX,IAAiBZ,CAAxC,EAA2C,OAAOG,KAAlD,EAAyD,WAAWwG,SAApE,EAA+E,UAAUyW,QAAzF;AAAoG9X;AAApG,IAD4B;AAAA,GAAb;AA7BjB,EADE;AAkCH,CA7PD;;AA+PAyV,SAAO/T,SAAP,GAAmB;AAClB;AACAuJ,gBAAetJ,8BAAU+R,KAAV,CAAgB;AAC9B;AACAzX,OAAK0F,8BAAUsD,MAFe;AAG9B;AACAsL,SAAO5O,8BAAUgS,KAAV,CAAgB,CAAC,KAAD,EAAQ,MAAR,CAAhB;AAJuB,EAAhB,CAFG;;AASlB;AACA3I,gBAAerJ,8BAAU/F,MAVP;;AAYlB;AACAmP,qBAAoBpJ,8BAAUsD,MAbZ;;AAelB;AACAmG,SAAQzJ,8BAAU/F,MAhBA;;AAkBlB;AACAsK,SAAQvE,8BAAU/F,MAnBA;;AAqBlB;AACAuP,cAAaxJ,8BAAUsD,MAtBL;;AAwBlB;AACAgH,kBAAiBtK,8BAAUsD,MAzBT;;AA2BlB;AACA0F,eAAchJ,8BAAUoD,IA5BN;;AA8BlB;AACAgH,kBAAiBpK,8BAAUqD,IA/BT;;AAiClB;;;;;;;;;;;;;;AAcA0Q,kBAAiB/T,8BAAUqD,IAAV,CAAepD,UA/Cd;;AAiDlB;AACA+T,UAAShU,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAlDS;;AAoDlB;AACAga,eAAcjU,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUsD,MAAX,EAAmBtD,8BAAU8R,MAA7B,CAApB,CArDI;;AAuDlB;AACA3H,WAAUnK,8BAAU8R;AAxDF,CAAnB;;AA2DAgC,SAAOtX,YAAP,GAAsB;AACrB;AACA8M,gBAAe9O,SAFM;AAGrB6O,gBAAe,EAHM;AAIrBD,qBAAoB5O,SAJC;AAKrBwO,eAAc,KALO;AAMrBoB,kBAAiB5P,SANI;AAOrBwZ,UAAS,EAPY;AAQrBC,eAAc,MARO;AASrB9J,WAAU,EATW;AAUrBG,kBAAiB;AAVI,CAAtB;;ACjVA,IAAMrN,iBAAe,CACjB,eADiB,EAEjB,eAFiB,EAGjB,eAHiB,EAIjB,oBAJiB,EAKjB,QALiB,EAMjB,QANiB,EAOjB,aAPiB,EAQjB,iBARiB,EASjB,iBATiB,EAUjB,iBAViB,EAWjB,UAXiB,CAArB;;AAcA;AACA,IAAMmZ,aAAa,SAAbA,UAAa,QAAS;AAAA,QAIpB9M,aAJoB,GAcpBzM,KAdoB,CAIpByM,aAJoB;AAAA,QAKpBD,aALoB,GAcpBxM,KAdoB,CAKpBwM,aALoB;AAAA,QAMpBD,kBANoB,GAcpBvM,KAdoB,CAMpBuM,kBANoB;AAAA,QAOpBK,MAPoB,GAcpB5M,KAdoB,CAOpB4M,MAPoB;AAAA,QAQpBlF,MARoB,GAcpB1H,KAdoB,CAQpB0H,MARoB;AAAA,QASpBiF,WAToB,GAcpB3M,KAdoB,CASpB2M,WAToB;AAAA,QAUpBc,eAVoB,GAcpBzN,KAdoB,CAUpByN,eAVoB;AAAA,QAWpBF,eAXoB,GAcpBvN,KAdoB,CAWpBuN,eAXoB;AAAA,QAYpB2J,eAZoB,GAcpBlX,KAdoB,CAYpBkX,eAZoB;AAAA,QAapB3O,QAboB,GAcpBvI,KAdoB,CAapBuI,QAboB;AAexB;;AAfwB,oBAgBQ7J,eAAS,KAAT,CAhBR;AAAA;AAAA,QAgBjB8Y,QAhBiB;AAAA,QAgBPC,WAhBO;AAiBxB;;;AAjBwB,qBAkBU/Y,eAAS6J,QAAT,CAlBV;AAAA;AAAA,QAkBjBiR,SAlBiB;AAAA,QAkBNC,YAlBM;;AAoBxB,QAAM9a,YAAYH,YAAlB;;AAEAK,oBAAU,YAAM;AACZsZ,qBAAa;AACTvL,oBAAQH,aADC;AAET/E,oBAAQ8E,aAFC;AAGTG,yBAAaJ,kBAHJ;AAIT+C,oBAAQ;AAJC,SAAb;AAMH,KAPD,EAOG,EAPH;;AASAzQ,oBAAU,YAAM;AACZ;AACA,YAAGF,SAAH,EAAc;AACVwZ,yBAAa;AACTvL,wBAAQA,MADC;AAETlF,wBAAQA,MAFC;AAGT7G,4BAAY8L,WAHH;AAIT2C,wBAAQ;AAJC,aAAb;AAMH;AACJ,KAVD,EAUG,CAAC1C,MAAD,EAASlF,MAAT,EAAiBiF,WAAjB,CAVH;;AAYA,QAAM2L,UAAU,SAAVA,OAAU,CAAC1L,MAAD;AAAA,eACZA,UAAUA,OAAOnP,GAAjB,GAAuBmP,OAAOnP,GAAP,GAAa,GAAb,GAAmBmP,OAAOmF,KAAjD,GAAyD,IAD7C;AAAA,KAAhB;;AAGA,QAAMwG,iBAAiB,SAAjBA,cAAiB,CAAC5L,WAAD;AAAA,eACnBA,iCAAgBc,eAAhB,EAAkCd,WAAlC,IAAiD,IAD9B;AAAA,KAAvB;;AAGA,QAAM+M,mBAAmB,SAAnBA,gBAAmB,CAACvC,OAAD,EAAa;AAClC,YAAG9b,MAAMC,OAAN,CAAc6b,OAAd,CAAH,EACI,OAAOA,QAAQzb,GAAR,CAAY,kBAAU;AACzB,gBAAG+c,OAAO9c,QAAP,IAAmBN,MAAMC,OAAN,CAAcmd,OAAO9c,QAArB,CAAtB,EACI8c,OAAO9c,QAAP,GAAkB+d,iBAAiBjB,OAAO9c,QAAxB,CAAlB;AACJ,mBAAOub,gBAAgBuB,MAAhB,CAAP;AACH,SAJM,CAAP;AAKP,KAPD;;AASA,QAAMN,eAAe,SAAfA,YAAe,CAAC5G,MAAD,EAAY;AAAA,YACtB3E,MADsB,GACS2E,MADT,CACtB3E,MADsB;AAAA,YACdlF,MADc,GACS6J,MADT,CACd7J,MADc;AAAA,YACNiF,WADM,GACS4E,MADT,CACN5E,WADM;;AAE7B,YAAI,CAAC6K,QAAD,IAAajK,eAAjB,EAAkC;AAC9BkK,wBAAY,IAAZ;AACA,gBAAMe,iBAAiB;AACnBjH,wBAAQ;AACJK,0BAAM,CADF;AAEJC,0BAAM,CAFF;AAGJC,0BAAMwG,QAAQ1L,MAAR;AAHF,iBADW;AAMnBpR,mCACOkM,MADP,EAEO6Q,eAAe5L,WAAf,CAFP;AANmB,aAAvB;AAWAY,4BAAgBiL,cAAhB,EACK1S,IADL,CACU,UAAC/H,QAAD,EAAc;AAChB;AACA,oBAAMxB,SAASwB,SAASvC,IAAxB;AACAie,6BAAaC,iBAAiBnd,MAAjB,CAAb;AACH,aALL,EAMKyJ,KANL,CAMW,UAACnI,KAAD,EAAW;AACdD,kCAAkBC,KAAlB,EAAyB,wBAAzB;AACA;AACA;AACA4Z,4BAAY,KAAZ;AACH,aAXL;AAYH;AACJ,KA5BD;;AA8BA,QAAMzW,aAAa7D,uBAAuB6C,KAAvB,EAA8BI,cAA9B,CAAnB;AACA,WACI3B,sFACQuC,UADR;AAEI,qBAAa,CAFjB;AAGI,2BAAmB,2BAACmY,aAAD;AAAA,oEAA+BA,cAAcvd,MAA7C;AAAA,SAHvB;AAII,kBAAU4d,SAJd;AAKI,mBAAW;AACX;AANJ,OADJ;AAUH,CAnGD;;AAqGAD,WAAWrW,SAAX,GAAuB;AACnB;AACAuJ,mBAAetJ,8BAAU+R,KAAV,CAAgB;AAC3B;AACAzX,aAAK0F,8BAAUsD,MAFY;AAG3B;AACAsL,eAAO5O,8BAAUgS,KAAV,CAAgB,CAAC,KAAD,EAAQ,MAAR,CAAhB;AAJoB,KAAhB,CAFI;;AASnB;AACA3I,mBAAerJ,8BAAU/F,MAVN;;AAYnB;AACAmP,wBAAoBpJ,8BAAUsD,MAbX;;AAenB;AACAmG,YAAQzJ,8BAAU/F,MAhBC;;AAkBnB;AACAsK,YAAQvE,8BAAU/F,MAnBC;;AAqBnB;AACAuP,iBAAaxJ,8BAAUsD,MAtBJ;;AAwBnB;AACAgH,qBAAiBtK,8BAAUsD,MAzBR;;AA2BnB;AACA8G,qBAAiBpK,8BAAUqD,IA5BR;;AA8BnB;;;;;;;;;;;;;;AAcA0Q,qBAAiB/T,8BAAUqD,IAAV,CAAepD,UA5Cb;;AA8CnB;AACA+T,aAAShU,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B;AA/CU,CAAvB;;AAkDAmc,WAAW5Z,YAAX,GAA0B;AACtB;AACA8M,mBAAe9O,SAFO;AAGtB6O,mBAAe,EAHO;AAItBD,wBAAoB5O,SAJE;AAKtB4P,qBAAiB5P;AALK,CAA1B;;ACjKA,IAAMyC,iBAAe,CAAC,aAAD,EAAgB,cAAhB,EAAgC,aAAhC,EAA+C,WAA/C,EAA4D,WAA5D,EAAyE,UAAzE,CAArB;AACA,IAAMuZ,mBAAmB,CAAC,aAAD,EAAgB,cAAhB,EAAgC,kBAAhC,EAAoD,mBAApD,CAAzB;AACA,IAAMC,kBAAkB,CAAC,YAAD,EAAe,iBAAf,EAAkC,aAAlC,EAAiD,kBAAjD,CAAxB;AACA,IAAMC,0BAAoBF,gBAApB,EAAyCC,eAAzC,GAA0D,QAA1D,EAAoE,WAApE,EAAiF,YAAjF,EAAN;;AAEA,IAAMja,iBAAe;AACjBP,eAAW,EADM;AAEjBf,cAAU;AAFO,CAArB;;AAKA,IAAMyb,wBAAwB,SAAxBA,qBAAwB,CAACC,KAAD,EAAW;;AAErC,QAAIC,SAAS,EAAb;AACA,QAAIC,aAAa,EAAjB;AACA,QAAIC,aAAa,EAAjB;;AAEA,YAAQH,MAAMpf,IAAd;AACI,aAAK,aAAL;AACA,aAAK,kBAAL;AACIqf,qBAAS,WAAT;AACAC,yBAAa,QAAb;AACAC,yBAAa,sBAAb;AACA;AACJ,aAAK,YAAL;AACA,aAAK,iBAAL;AACIF,qBAAS,WAAT;AACAC,yBAAa,QAAb;AACAC,yBAAa,oBAAb;AACA;AACJ,aAAK,cAAL;AACA,aAAK,mBAAL;AACIF,qBAAS,WAAT;AACAC,yBAAa,QAAb;AACAC,yBAAa,uBAAb;AACA;AACJ,aAAK,aAAL;AACA,aAAK,kBAAL;AACIF,qBAAS,WAAT;AACAC,yBAAa,QAAb;AACAC,yBAAa,oBAAb;AACA;AACJ,aAAK,QAAL;AACIF,qBAAS,UAAT;AACAC,yBAAa,QAAb;AACAC,yBAAa,OAAb;AACA;AACJ,aAAK,WAAL;AACA,aAAK,YAAL;AACIF,qBAAS,SAAT;AACAE,yBAAa,UAAb;AACA;AAlCR;;AAsCA,QAAGH,MAAMC,MAAT,EACIA,SAASD,MAAMC,MAAf;;AAEJ,QAAGD,MAAME,UAAT,EACIA,aAAaF,MAAME,UAAnB;;AAEJ,QAAGF,MAAM5D,KAAT,EACI+D,aAAaH,MAAM5D,KAAnB;;AAEJ,WAAO,EAAC6D,cAAD,EAASC,sBAAT,EAAqB9D,OAAO+D,UAA5B,EAAwCC,QAAQ,SAAhD,EAAP;AACH,CAtDD;;AAwDA;;;AAGA,IAAMC,UAAQ,SAARA,KAAQ,QAAS;AAAA,QAEZC,WAFY,GAE8Dra,KAF9D,CAEZqa,WAFY;AAAA,QAECC,YAFD,GAE8Dta,KAF9D,CAECsa,YAFD;AAAA,QAEeC,WAFf,GAE8Dva,KAF9D,CAEeua,WAFf;AAAA,QAE4BC,SAF5B,GAE8Dxa,KAF9D,CAE4Bwa,SAF5B;AAAA,QAEuCpb,SAFvC,GAE8DY,KAF9D,CAEuCZ,SAFvC;AAAA,QAEkDf,QAFlD,GAE8D2B,KAF9D,CAEkD3B,QAFlD;;AAGnB,QAAMoc,0BAAkBX,sBAAsBS,WAAtB,CAAlB,EAAyDpd,uBAAuBod,WAAvB,EAAoCna,cAApC,CAAzD,CAAN;;AAHmB,oBAKW1B,eAAS,KAAT,CALX;AAAA;AAAA,QAKZ8X,OALY;AAAA,QAKHkE,UALG;;AAAA,qBAMiBhc,eAAS,EAAT,CANjB;AAAA;AAAA,QAMZic,UANY;AAAA,QAMAC,aANA;;AAAA,qBAOoBlc,eAAS,EAAT,CAPpB;AAAA;AAAA,QAOZmc,YAPY;AAAA,QAOEC,cAPF;;AASnB,QAAMnc,YAAYH,YAAlB;;AAEAK,oBAAU,YAAM;AACZ+b,sBAAcJ,SAAd;AACH,KAFD,EAEG,EAFH;;AAIA;AACApb,cAAU1D,GAAV,CAAc,gBAAQ;AAClB,eAAOmD,gBAAW,YAAM;AACpB,gBAAGF,aAAaxD,KAAK6B,IAArB,EAA2B;AACvB;AACA7B,qBAAKoF,QAAL,IAAiBpF,KAAKoF,QAAL,CAAc;AAC3BlE,2BAAO2D,MAAM7E,KAAK6B,IAAX,CADoB;AAE3BsB,+BAAW0B,MAAS7E,KAAK6B,IAAd,eAFgB;AAG3B+d,8CAH2B;AAI3BD,kDAJ2B;AAK3BE,+BAAWC,YALgB;AAM3BC,gCAAYC;AANe,iBAAd,CAAjB;AAQH;AACD;AACH,SAbM,EAaJ,CAACnb,MAAM7E,KAAK6B,IAAX,CAAD,CAbI,CAAP;AAcH,KAfD;;AAiBA,QAAM+d,eAAe,SAAfA,YAAe,CAAC1e,KAAD;AAAA,eAAWue,iBAAiBA,cAAcve,KAAd,CAA5B;AAAA,KAArB;AACA,QAAM4e,eAAe,SAAfA,YAAe;AAAA,eAAMP,WAAW,IAAX,CAAN;AAAA,KAArB;AACA,QAAMS,gBAAgB,SAAhBA,aAAgB;AAAA,eAAMT,WAAW,KAAX,CAAN;AAAA,KAAtB;;AAEA,QAAMU,kBAAkB,SAAlBA,eAAkB,CAAC1V,MAAD,EAAY;AAAE;AAClC;;AAEA,YAAI2V,gBAAJ;AACA,YAAGZ,WAAW9f,IAAX,CAAgB2gB,UAAhB,CAA2B,KAA3B,CAAH,EACID,uBAAc3V,MAAd,EADJ,KAGI2V,uBAAcV,UAAd,EAA6BjV,MAA7B;;AAEJtH,wBAAgB,EAACC,kBAAD,EAAW7D,cAAcwF,MAAMxF,YAA/B,EAA6C6B,OAAOgf,OAApD,EAAhB;;AAEA,YAAIZ,WAAWc,cAAX,IAA6B5B,iBAAiBjc,QAAjB,CAA0B+c,WAAW9f,IAArC,CAAjC,EAA6E;AACzE,gBAAMkL,SAAU4U,WAAW9f,IAAX,KAAoB,aAApB,IAAqC8f,WAAW9f,IAAX,KAAoB,kBAA1D,GAAgF,MAAhF,GAAyF,KAAxG;AACA;AACA8f,uBAAWc,cAAX,CAA0B;AACtB1V,8BADsB;AAEtBrK,sBAAM6f;AAFgB,aAA1B,EAIKvV,IAJL,CAIU,oBAAY;AACd,kDAAaC,OAAb,CAAqB;AACjBjI,6BAAS;AADQ,iBAArB;AAGAqd;AACH,aATL,EAUKnV,KAVL,CAUW;AAAA,uBAASpI,kBAAkBC,KAAlB,EAAyB,uBAAzB,CAAT;AAAA,aAVX;AAWH,SAdD,MAcOsd;;AAEP,YAAIV,WAAWe,IAAf,EAAqBf,WAAWe,IAAX,CAAgB9V,MAAhB;AACrB,YAAI+U,WAAWjV,QAAf,EAAyBiV,WAAWjV,QAAX,CAAoBE,MAApB;AAC5B,KA7BD;;AA+BA,QAAM+V,wBAAwB,SAAxBA,qBAAwB,CAACvV,SAAD,EAAe;AACzC;AACAlI,gBAAQH,KAAR,CAAc,2BAAd,EAA2CqI,SAA3C;AACAlG,cAAMiG,cAAN,IAAwBjG,MAAMiG,cAAN,CAAqBC,SAArB,CAAxB;AACH,KAJD;;AAMA,QAAMwV,sBAAsB,SAAtBA,mBAAsB,CAACC,QAAD;AAAA,eACxBC,WAAWxX,YAAX,CAAwBuX,QAAxB,EAAkChB,UAAlC,CADwB;AAAA,KAA5B;;AAIA,QAAMkB,mBAAmB,SAAnBA,gBAAmB,CAAC/a,CAAD,EAAO;AAC5B;AACA;AACAqa;AACA,YAAIV,WAAWqB,QAAf,EAAyBrB,WAAWqB,QAAX,CAAoBhb,CAApB;AAC5B,KALD;;AAOA,QAAMib,gBAAgB,CAClB;AACI9b,uBAAe,MADnB;AAEI8C;AACI9C,2BAAe,QADnB;AAEIuB,mBAAOiZ,WAAWR,UAFtB;AAGIpX,uBAAW,MAHf;AAIInB,qBAASma;AAJb,WAKOpB,WAAWuB,iBALlB;AAFJ,KADkB,EAWlB;AACI/b,uBAAe,MADnB;AAEI8C;AACI9C,2BAAe,QADnB;AAEIuB,mBAAOiZ,WAAWT,MAFtB;AAGIrf,kBAAM8f,WAAWN,MAHrB;AAII8B,sBAAU;AAJd,WAKOxB,WAAWyB,aALlB;AAFJ,KAXkB,CAAtB;;AAuBA,QAAMN;AACFrX,gBAAQwX,aADN;AAEF3X,sBAAc,sBAACuX,QAAD,EAAWjhB,GAAX;AAAA,mBAAmBihB,SAASjhB,GAAT,CAAnB;AAAA;AAFZ,OAGC+f,WAAWrV,IAHZ,CAAN;;AAMA,WACI3G;AAAC,iCAAD,CAAO,QAAP;AAAA;AACI;AAAA;AAAa6b,wBAAb;AACI;AAAA;AAAA;AACI,0BAAK;AADT,mBAEQD,WAFR,EAGQQ,YAHR;AAII,6BAASI;AAJb;AAKEZ,+BAAeA,YAAY7Y;AAL7B;AADJ,SADJ;AAgBI;AAAA;AAAA,yBACQiZ,UADR;AAEI,8BAFJ;AAGI,oCAHJ;AAII,yBAASjE,OAJb;AAKI,0BAAUqF,gBALd;AAMI,sCAAYM,SAAS,CAArB,IAA2B1B,WAAW2B,SAAtC,CANJ;AAOI,wBAAQ;AAPZ;AASI;AAAC,sBAAD;AAAA,6BACQR,UADR;AAEI,8BAAUR,eAFd;AAGI,oCAAgBK,qBAHpB;AAII,kCAAcC;AAJlB;AAKE1b,sBAAMrE;AALR;AATJ;AAhBJ,KADJ;AAmCH,CArJD;;AAuJAye,QAAMlX,SAAN,GAAkB;;AAEd;;AAEAmX,iBAAalX,8BAAU/F,MAJT;;AAMd;AACAmd,iBAAapX,8BAAU+R,KAAV,CAAgB;AACzB;AACAva,cAAMwI,8BAAUgS,KAAV,CAAgB0E,aAAhB,CAFmB;;AAIzB;AACA0B,wBAAgBpY,8BAAUqD,IALD;;AAOzB;;AAEApB,cAAMjC,8BAAU/F;AATS,KAAhB,CAPC;;AAmBd;AACAod,eAAWrX,8BAAU/F,MApBP;;AAsBd;AACAiB,cAAU8E,8BAAU/F,MAvBN;;AAyBd;;;;;;;;AAQAgC,eAAW+D,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B;AAjCG,CAAlB;;AAoCAgd,QAAMza,YAAN,GAAqBA,cAArB;;AAEA,IAAMV,oBAAkB,SAAlBA,eAAkB,CAACC,KAAD,EAAQC,QAAR,EAAqB;AAAA,QAClCC,SADkC,GACrBD,QADqB,CAClCC,SADkC;;AAEzC,QAAIC,QAAQ,EAAZ;AACA,QAAGD,aAAaA,UAAUxD,MAAV,GAAmB,CAAnC,EAAqC;AACjCwD,kBAAU5B,OAAV,CAAkB,gBAAQ;AAAA,gBACfR,IADe,GACU7B,IADV,CACf6B,IADe;AAAA,gBACTvC,IADS,GACUU,IADV,CACTV,IADS;AAAA,gBACH6D,SADG,GACUnD,IADV,CACHmD,SADG;;AAEtB,gBAAGtB,QAAQvC,IAAX,EACI4E,MAAMrC,IAAN,IAAcsC,+BAAWC,GAAX,CAAeL,KAAf,EAAsBzE,IAAtB,CAAd;AACJ,gBAAGuC,QAAQsB,SAAX,EACIe,MAASrC,IAAT,kBAA4BsC,+BAAWC,GAAX,CAAeL,KAAf,EAAsBZ,SAAtB,CAA5B;AACP,SAND;AAOH;AACD,WAAOe,KAAP;AACH,CAbD;AAcA,IAAMI,uBAAqB,SAArBA,kBAAqB,CAACpB,QAAD;AAAA,WACvBqB,yBAAoB,EAAElF,cAAcA,YAAhB,EAApB,EAAqD6D,QAArD,CADuB;AAAA,CAA3B;;AAGA,cAAe0B,mBAAQd,iBAAR,EAAyBQ,oBAAzB,EAA6C2a,OAA7C,CAAf;;ACtRA,IAAMza,eAAe;AACjB0c,uBAAmBvhB,IADF;AAEjBwhB,gBAAY,EAFK;AAGjBC,uBAAmBzhB,IAHF;AAIjB0hB,oBAAgB1hB,IAJC;AAKjB2hB,iBAAa,EALI;AAMjBnC,kBAAc,EANG;AAOjBD,iBAAa;;AAGjB;AAVqB,CAArB,CAWA,IAAMqC,aAAa,SAAbA,UAAa,QAAS;AAAA,QAGpBL,iBAHoB,GAUpBrc,KAVoB,CAGpBqc,iBAHoB;AAAA,QAIpBC,UAJoB,GAUpBtc,KAVoB,CAIpBsc,UAJoB;AAAA,QAKpBC,iBALoB,GAUpBvc,KAVoB,CAKpBuc,iBALoB;AAAA,QAMpBC,cANoB,GAUpBxc,KAVoB,CAMpBwc,cANoB;AAAA,QAOpBC,WAPoB,GAUpBzc,KAVoB,CAOpByc,WAPoB;AAAA,QAQpBnC,YARoB,GAUpBta,KAVoB,CAQpBsa,YARoB;AAAA,QASpBD,WAToB,GAUpBra,KAVoB,CASpBqa,WAToB;;;AAYxB,QAAMsC,cAAc,SAAdA,WAAc,CAACC,IAAD,EAAU;AAC1B;AACAC,qBAAaD,IAAb,EAAmB,SAAnB;AACA,YAAIP,iBAAJ,EAAuB;AACnBA,8BAAkB,EAAEO,MAAMA,IAAR,EAAcN,sBAAd,EAAlB,EACKxW,IADL,CACU,UAAC/H,QAAD,EAAc;AAChB8e,6BAAaD,IAAb,EAAmB,SAAnB;AACH,aAHL,EAIK5W,KAJL,CAIW,YAAM;AACT6W,6BAAaD,IAAb,EAAmB,OAAnB;AACH,aANL;AAOH;AACD,eAAO,KAAP;AACH,KAbD;AAcA,QAAMC,eAAe,SAAfA,YAAe,CAACD,IAAD,EAAOjiB,IAAP,EAAgB;AACjC,YAAMmiB,aAAa;AACfrf,iBAAKmf,KAAKG,GADK;AAEfC,sBAAUriB,SAAS,SAAT,GAAqB,CAArB,GAAyB,CAFpB;AAGfsiB,kBAAMtiB,SAAS,SAAT,GACA8D,qEAAM,WAAWA,wCAACuI,qBAAD,IAAiB,OAAO,EAAEC,UAAU,EAAZ,EAAxB,EAA0C,UAA1C,GAAjB,GADA,GAEA,IALS;AAMfnJ,qBAASW;AAAA;AAAA;AAAA;AAAsB;AAAA,oDAAY,IAAZ;AAAA,sBAAiB,UAAjB;AAAuBme,yBAAK5f;AAA5B;AAAtB;AANM,SAAnB;AAQA,gBAAQrC,IAAR;AACI,iBAAK,SAAL;AACI,kDAAgBuiB,IAAhB,CAAqBJ,UAArB;AACA;AACJ,iBAAK,SAAL;AACI,kDAAgB/W,OAAhB,CAAwB+W,UAAxB;AACAP,kCAAkBK,IAAlB;AACA5c,sBAAMO,QAAN,CAAeqc,IAAf;AACA;AACJ,iBAAK,OAAL;AACI,kDAAgB/e,KAAhB,CAAsBif,UAAtB;AACAN,+BAAeI,IAAf;AACA;AACJ,iBAAK,OAAL;AACI,kDAAgBO,KAAhB,CAAsBP,KAAKG,GAA3B;AACA;AAfR;AAmBH,KA5BD;AA6BA,QAAMK,qBAAqB;AACvBC,kBAAU,IADa;AAEvBC,wBAAgB,KAFO;AAGvBC,sBAAcZ;AAHS,KAA3B;;AAMA,WACIle;AAAA;AAAA,qBAAY2e,kBAAZ,EAAoCX,WAApC;AACI;AAAA;AAAanC,wBAAb;AACI;AAAA;AAAA;AACI,0BAAM7b,wCAAC+e,yBAAD;AADV,mBAEQnD,WAFR;AAGEA,+BAAeA,YAAY7Y;AAH7B;AADJ;AADJ,KADJ;AAUH,CAvED;;AAyEAkb,WAAWxZ,SAAX,GAAuB;AACnB;AACAmZ,uBAAmBlZ,8BAAUqD,IAAV,CAAepD,UAFf;;AAInB;AACAkZ,gBAAYnZ,8BAAU/F,MALH;;AAOnB;AACAmf,uBAAmBpZ,8BAAUqD,IARV;;AAUnB;AACAgW,oBAAgBrZ,8BAAUqD,IAXP;;AAanB;AACAiW,iBAAatZ,8BAAU/F,MAdJ;;AAgBnB;AACAkd,kBAAcnX,8BAAU/F,MAjBL;;AAmBnB;AACAid,iBAAalX,8BAAU/F;AApBJ,CAAvB;;AAuBAsf,WAAW/c,YAAX,GAA0BA,YAA1B;;AC7EA;;;AAGO,IAAMsC,gBAAgB,SAAhBA,aAAgB,CAAClD,SAAD;AAAA,WAAe,UAACiB,KAAD,EAAW;AACnD,eAAQvB;AAAC,qBAAD;AAAeuB,iBAAf;AAAuBA,kBAAMrE;AAA7B,SAAR;AACH,KAF4B;AAAA,CAAtB;;AAIA,IAAMiG,yBAAyB,SAAzBA,sBAAyB,CAAC7C,SAAD;AAAA,WAAe,UAACiB,KAAD,EAAW;AAC5D,eAAQvB;AAAC,qBAAD;AAAeuB,iBAAf;AAAuBA,kBAAMwB,KAAN,IAAexB,MAAM3D,KAArB,IAA8B2D,MAAMrE;AAA3D,SAAR;AACH,KAFqC;AAAA,CAA/B;;AAIP,IAAM8hB,iCAAiC,SAAjCA,8BAAiC,CAAC1e,SAAD,EAAYkB,aAAZ;AAAA,WAA8B,UAACD,KAAD,EAAW;AAC5E,eAAOiC,cAAclD,SAAd,eAA6BiB,KAA7B,IAAoCC,4BAApC,IAAP;AACH,KAFsC;AAAA,CAAvC;;AAIO,IAAM+C,sBAAsB,SAAtBA,mBAAsB,CAAC0a,aAAD;AAAA,WAAmB,UAAC1d,KAAD,EAAW;AAC7D,YAAG2d,QAAQD,aAAR,CAAH,EAA2B;AACvB;AACA,mBAAOzb,cAAc0b,QAAQD,aAAR,CAAd,EAAsC1d,KAAtC,CAAP;AACH,SAHD,MAGO;AACHhC,oBAAQ4H,GAAR,CAAY,4BAAZ,EAA0C8X,aAA1C;AACA,mBAAO,IAAP;AACH;AACJ,KARkC;AAAA,CAA5B;AASA,IAAMzZ,0BAA0B,SAA1BA,uBAA0B,CAACyZ,aAAD;AAAA,WAAmB,UAAC1d,KAAD;AAAA,eAAW,UAACrE,QAAD,EAAc;AAC/E,gBAAGgiB,QAAQD,aAAR,CAAH,EAA2B;AACvB;AACA,uBAAOE,kBAAkBD,QAAQD,aAAR,CAAlB,EAA0C1d,KAA1C,EAAiDrE,QAAjD,CAAP;AACH,aAHD,MAGO;AACHqC,wBAAQ4H,GAAR,CAAY,gCAAZ,EAA8C8X,aAA9C;AACA,uBAAO,IAAP;AACH;AACJ,SARyD;AAAA,KAAnB;AAAA,CAAhC;;AAUA,IAAME,oBAAoB,SAApBA,iBAAoB,CAAC7e,SAAD;AAAA,WAAe,UAACiB,KAAD;AAAA,eAAW,UAACrE,QAAD,EAAc;AACrE;AACA,mBAAQ8C;AAAC,yBAAD;AAAeuB,qBAAf;AAAuBrE;AAAvB,aAAR;AACH,SAH+C;AAAA,KAAf;AAAA,CAA1B;;AAKP,IAAMkiB,0BAA0B,SAA1BA,uBAA0B,CAAC9e,SAAD;AAAA,WAAe,UAACiB,KAAD,EAAW;AACtD,YAAM8d,iBAAiB3gB,uBAAuB6C,KAAvB,EAA8B,CAAC,WAAD,CAA9B,CAAvB;AACA,eAAO4d,kBAAkBvY,0BAAQ0Y,IAA1B,eACE/d,MAAMiD,SADR,IACmB+a,SAAS,EAAEhe,MAAMiD,SAAN,IAAmBjD,MAAMiD,SAAN,CAAgBzB,KAArC,CAD5B,KAEFS,cAAclD,SAAd,EAAyB+e,cAAzB,CAFE,CAAP;AAGH,KAL+B;AAAA,CAAhC;;AAQA;AACA,IAAMG,mBAAmB,SAAnBA,gBAAmB,CAAClf,SAAD;AAAA,WAAe,UAACiB,KAAD,EAAW;AAC/C;AACA,YAAMke,iBAAiBpf,YAAUC,SAAV,EAAqB,EAArB,CAAvB;AACA,eAAO8e,wBAAwBK,cAAxB,EAAwCle,KAAxC,CAAP;AACH,KAJwB;AAAA,CAAzB;AAKA,IAAMme,4BAA4B,SAA5BA,yBAA4B,CAACpf,SAAD;AAAA,WAAe,UAACiB,KAAD,EAAW;AACxD,YAAMke,iBAAiBpf,YAAUC,SAAV,EAAqB,EAArB,CAAvB;AACA,eAAO8e,wBAAwBjc,uBAAuBsc,cAAvB,CAAxB,EAAgEle,KAAhE,CAAP;AACH,KAHiC;AAAA,CAAlC;AAIA,IAAMoe,kCAAkC,SAAlCA,+BAAkC,CAACrf,SAAD,EAAYsf,WAAZ;AAAA,WAA4B,UAACre,KAAD,EAAW;AAC3E,YAAMke,iBAAiBpf,YAAUC,SAAV,EAAqB,EAArB,CAAvB;AACA,YAAMuf,eAAgBte,SAASA,MAAMqe,WAAhB,GAA+Bre,MAAMqe,WAArC,GAAmDA,WAAxE;AACA,eAAOR,wBAAwBK,cAAxB,eAA4Cle,KAA5C,IAAmDqe,aAAaC,YAAhE,IAAP;AACH,KAJuC;AAAA,CAAxC;AAKA,IAAMC,+BAA+B,SAA/BA,4BAA+B,CAACxf,SAAD;AAAA,WAAe,UAACiB,KAAD,EAAW;AAC3D;AACA,eAAO6d,wBAAwB9e,SAAxB,EAAmCiB,KAAnC,CAAP;AACH,KAHoC;AAAA,CAArC;;AAKA,IAAMwe,oBAAoB;AACtBra,UAAYsa,MADU;AAEtBrc,gBAAYA,UAFU;AAGtBC,cAAYA,QAHU;AAItBM,gBAAYA,UAJU;AAKtB+b,cAAYrZ,0BAAQsZ,IALE;AAMtBC,WAAYf,mDANU;AAOtBgB,SAAYhB,iDAPU;AAQtBiB,SAAYjB,iDARU;AAStBnX,YAAYmX,wBAAwBkB,QAAxB,CATU;AAUtBC,mCAVsB;AAWtBpc,aAAYqc,OAXU;AAYtBN,UAAYd;AAZU,CAA1B;AAcA,IAAMqB,oBAAoB;AACtBzd,YAAY8c,6BAA6BY,MAA7B,CADU;AAEtBC,WAAYjB,0BAA0BkB,gCAAcD,KAAxC,CAFU;AAGtBE,UAAYnB,0BAA0BkB,gCAAcC,IAAxC,CAHU;AAItBC,aAAYpB,uDAJU;AAKtBqB,cAAYrB,wDALU;AAMtB/c,gBAAYgd,gCAAgCqB,UAAhC,EAA8C,eAA9C,CANU;AAOtBC,cAAYzB,iBAAiB1c,gBAAjB,CAPU;AAQtBoe,WAAYvB,4DAA0C,kBAA1C,CARU;AAStBwB,YAAYxB,gCAAgCyB,2BAASD,MAAzC,EAAiD,OAAjD,CATU;AAUtBE,cAAY1B,gCAAgCyB,2BAASC,QAAzC,EAAmD,eAAnD,CAVU;AAWtBC,cAAY3B,gCAAgCyB,2BAASE,QAAzC,EAAmD,gBAAnD,CAXU;AAYtBC,iBAAY5B,kEAAgD,kBAAhD,CAZU;AAatB6B,YAAYhC,6CAbU;AActBiC,gBAAYjC,iBAAiBkC,2BAASC,KAA1B,CAdU;AAetBnJ,YAAYmH,gCAAgCiC,QAAhC,EAA0C,mBAA1C,CAfU;AAgBtB9G,gBAAY6E,gCAAgCkC,UAAhC,EAA8C,mBAA9C,CAhBU;AAiBtB9V,WAAY+T,6BAA6BgC,YAA7B,CAjBU;AAkBtBnG,WAAYmE,6BAA6BiC,OAA7B,CAlBU;AAmBtB3e,YAAYoc,iBAAiBpc,MAAjB,CAnBU;AAoBtB+E,cAAYqX,iBAAiBwC,QAAjB,CApBU;AAqBtB/D,gBAAYuB,iBAAiByC,UAAjB;AArBU,CAA1B;;IAwBa/C,uBACNa,iBADM,EAENjhB,OAAON,IAAP,CAAYiiB,iBAAZ,EACEjkB,MADF,CACS,UAAC0lB,GAAD,EAAMljB,GAAN;AAAA,wBACEkjB,GADF,qBACQljB,GADR,EACcggB,+BAA+ByB,kBAAkBzhB,GAAlB,CAA/B,EAAuDA,GAAvD,CADd;AAAA,CADT,EAEuF,EAFvF,CAFM;;IAOAmjB,cACTrjB,OAAON,IAAP,CAAY0gB,OAAZ,EACC1iB,MADD,CACQ,UAAC0lB,GAAD,EAAMljB,GAAN;AAAA,wBACEkjB,GADF,qBACQljB,GADR,EACcmgB,kBAAkBD,QAAQlgB,GAAR,CAAlB,CADd;AAAA,CADR,EAE0D,EAF1D;;AClJG,IAAMqJ,QACZrI;AAAA;AAAA,GAAK,WAAW,oBAAhB;AACE,IADF;AAEC;AAAA;AAAA;AAAA;AAAA,EAFD;AAEyB;AAFzB,CADM;;AAOA,IAAMsI,UACZtI;AAAA;AAAA,GAAK,WAAW,oBAAhB;AACE,IADF;AAEC;AACC,OAAI,qDADL;AAEC,aAAWA,wCAACuI,qBAAD,IAAiB,OAAO,EAACC,UAAU,EAAX,EAAxB,EAAwC,UAAxC;AAFZ,GAFD;AAKI;AALJ,CADM;;ACPP,IAAMC,gBAAgB,SAAhBA,aAAgB,CAAClH,KAAD,EAAW;AAAA,KACzBmH,MADyB,GACJnH,KADI,CACzBmH,MADyB;AAAA,KACjBC,SADiB,GACJpH,KADI,CACjBoH,SADiB;AAAA,KAEzBtL,MAFyB,GAE0BqL,MAF1B,CAEzBrL,MAFyB;AAAA,KAEjBuL,WAFiB,GAE0BF,MAF1B,CAEjBE,WAFiB;AAAA,KAEJC,eAFI,GAE0BH,MAF1B,CAEJG,eAFI;AAAA,KAEaC,SAFb,GAE0BJ,MAF1B,CAEaI,SAFb;;;AAIhC,KAAMC,gBAAgB,SAAhBA,aAAgB,CAAC1G,CAAD,EAAO;AAC5B,MAAMrF,UAAUV,QAAQc,gBAAgBuL,UAAUpH,KAAV,CAAgBxE,IAAhC,EAAsC2L,OAAOrL,MAA7C,CAAR,CAAhB;AACA,MAAM2L,aAAa1M,QAAQQ,mBAAmB6L,UAAUpH,KAAV,CAAgBxE,IAAnC,CAAR,EAA0DkM,MAA1D,CAAiE,UAACvM,IAAD;AAAA,UAAUM,QAAQiC,QAAR,CAAiBvC,KAAKW,MAAL,CAAjB,CAAV;AAAA,GAAjE,CAAnB;AACA,MAAM6L,cAAclM,QAAQG,MAA5B;AACA,MAAMgM,eAAeN,gBAAgB1L,MAArC;AACA,MAAMiM,UAAU,EAAEF,gBAAgBC,YAAlB,CAAhB;;AAEA;AACAP,cAAY,EAACS,UAAUD,OAAX,EAAoBpM,SAASA,OAA7B,EAAsCgM,YAAYA,UAAlD,EAAZ;AACA,EATD;;AAWA,QACChJ;AACC,iBAAe8I,cAAc,IAD9B;AAEC,YAAUC,aAFX;AAGC,WAASD;AAHV,GADD;AAOA,CAtBD;;ACIA,IAAMQ,iBAAiB,SAAjBA,cAAiB,CAACvM,IAAD,EAAOM,MAAP;AAAA,QACtBN,KAAKE,GAAL,CAAS,UAACP,IAAD,EAAU;AAClB,MAAIA,KAAKQ,QAAL,IAAiBR,KAAKQ,QAAL,CAAcC,MAAnC,EAA2C;AAC1C,UAAO,CAACT,KAAKW,MAAL,CAAD,EAAeiM,eAAe5M,KAAKQ,QAApB,EAA8BG,MAA9B,CAAf,CAAP;AACA;AACD,SAAOX,KAAKW,MAAL,CAAP;AACA,EALD,CADsB;AAAA,CAAvB;;AAQA,IAAMkM,eAAe,SAAfA,YAAe,CAACxM,IAAD,EAAOyM,QAAP,EAAiBnM,MAAjB,EAAyBoM,SAAzB,EAAuD;AAAA,KAAnBzM,OAAmB,uEAAT,IAAS;;AAC3E,KAAI0M,MAAM,EAAV;AACA3M,MAAKgC,OAAL,CAAa,UAACrC,IAAD,EAAU;AACtB,MACCA,KAAK+M,SAAL,KACA/M,KAAK+M,SAAL,MAAoBD,SAASC,SAAT,CADpB,IAEA/M,KAAKW,MAAL,MAAiBmM,SAASnM,MAAT,CAHlB,EAIE;AACD,OAAIL,YAAY,IAAhB,EAAsB;AACrB,QAAIA,QAAQiC,QAAR,CAAiBvC,KAAKW,MAAL,CAAjB,CAAJ,EAAoC;AACnCqM,SAAI3F,IAAJ,CAASrH,KAAKW,MAAL,CAAT;AACA;AACD,IAJD,MAIO;AACNqM,QAAI3F,IAAJ,CAASrH,KAAKW,MAAL,CAAT;AACA;AACD,GAZD,MAYO,IAAIX,KAAKQ,QAAL,IAAiBR,KAAKQ,QAAL,CAAcC,MAAnC,EAA2C;AACjDuM,OAAI3F,IAAJ,CACCwF,aACC7M,KAAKQ,QADN,EAECsM,QAFD,EAGCnM,MAHD,EAICoM,SAJD,EAKCzM,OALD,CADD;AASA;AACD,EAxBD;AAyBA,QAAO0M,GAAP;AACA,CA5BD;;AA8BO,IAAMC,iBAAiB,SAAjBA,cAAiB,OASxB;AAAA,KARLC,OAQK,QARLA,OAQK;AAAA,KAPLvM,MAOK,QAPLA,MAOK;AAAA,KANLoM,SAMK,QANLA,SAMK;AAAA,KALLL,OAKK,QALLA,OAKK;AAAA,KAJLS,cAIK,QAJLA,cAIK;AAAA,KAHLC,QAGK,QAHLA,QAGK;AAAA,KAFLjB,eAEK,QAFLA,eAEK;AAAA,KADLkB,oBACK,QADLA,oBACK;;AACL,KAAIC,+CAAuBnB,eAAvB,EAAJ;AACA,KAAIoB,oDAA4BF,oBAA5B,EAAJ;;AAEA,KAAIG,iBAAiBN,OAArB;AACA,KAAIO,cAAc,CAAC,CAACD,eAAeT,SAAf,CAApB;AACA,KAAIW,iBAAiBhB,UAAU,SAAV,GAAsB,QAA3C;AACA,KAAIiB,aAAa,EAAjB;AACA,KAAIC,aAAa,KAAjB;;AAEA;AACA,QAAOH,eAAeN,cAAtB,EAAsC;AACrC,MAAMU,wBAAwBjO,QAC7BiN,aACCO,QADD,EAECI,cAFD,EAGC7M,MAHD,EAICoM,SAJD,EAKCQ,qBALD,CAD6B,CAA9B;AASA,MAAMO,mBAAmBlO,QACxBiN,aACCO,QADD,EAECI,cAFD,EAGC7M,MAHD,EAICoM,SAJD,EAKCO,gBALD,CADwB,CAAzB;AASA,MAAMS,cAAcnO,QACnBiN,aAAaO,QAAb,EAAuBI,cAAvB,EAAuC7M,MAAvC,EAA+CoM,SAA/C,CADmB,CAApB;;AAIA,MAAIL,OAAJ,EAAa;AACZ,OACCgB,mBAAmB,SAAnB,IACAI,iBAAiBrN,MAAjB,KAA4BsN,YAAYtN,MAFzC,EAICkN,aAAa,SAAb,CAJD,KAKKA,aAAa,QAAb;AACL,GAPD,MAOO;AACN,OACC,CAACjB,OAAD,IACA,CAACkB,UADD,KAECE,iBAAiBrN,MAAjB,IAA2BoN,sBAAsBpN,MAFlD,CADD,EAKCmN,aAAa,IAAb;AACD,OAAIA,UAAJ,EAAgBD,aAAa,QAAb,CAAhB,KACKA,aAAa,MAAb;AACL;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACAH,mBAAiB5M,iBAChBwM,QADgB,EAEhBzM,MAFgB,EAGhB6M,eAAeT,SAAf,CAHgB,CAAjB;;AAMA,MAAIY,eAAe,SAAnB,EAA8B;AAC7B;AACA;AACAD,oBAAiB,SAAjB;AACA,OAAI,CAACJ,iBAAiB/K,QAAjB,CAA0BiL,eAAe7M,MAAf,CAA1B,CAAL,EACC2M,iBAAiBjG,IAAjB,CAAsBmG,eAAe7M,MAAf,CAAtB;AACD,OAAM2H,QAAQiF,sBAAsBS,OAAtB,CAA8BR,eAAe7M,MAAf,CAA9B,CAAd;AACA,OAAI2H,QAAQ,CAAC,CAAb,EAAgBiF,sBAAsBU,MAAtB,CAA6B3F,KAA7B,EAAoC,CAApC;AAChB,GARD,MAQO,IAAIqF,eAAe,QAAnB,EAA6B;AACnC;AACA;AACAD,oBAAiB,QAAjB;AACA,OAAI,CAACH,sBAAsBhL,QAAtB,CAA+BiL,eAAe7M,MAAf,CAA/B,CAAL,EACC4M,sBAAsBlG,IAAtB,CAA2BmG,eAAe7M,MAAf,CAA3B;AACD,OAAM2H,SAAQgF,iBAAiBU,OAAjB,CAAyBR,eAAe7M,MAAf,CAAzB,CAAd;AACA,OAAI2H,SAAQ,CAAC,CAAb,EAAgBgF,iBAAiBW,MAAjB,CAAwB3F,MAAxB,EAA+B,CAA/B;AAChB,GARM,MAQA,IAAIqF,eAAe,MAAnB,EAA2B;AACjC;AACA;AACAD,oBAAiB,MAAjB;AACA,OAAMQ,SAASZ,iBAAiBU,OAAjB,CAAyBR,eAAe7M,MAAf,CAAzB,CAAf;AACA,OAAIuN,SAAS,CAAC,CAAd,EAAiBZ,iBAAiBW,MAAjB,CAAwBC,MAAxB,EAAgC,CAAhC;AACjB,OAAMC,SAASZ,sBAAsBS,OAAtB,CACdR,eAAe7M,MAAf,CADc,CAAf;AAGA,OAAIwN,SAAS,CAAC,CAAd,EAAiBZ,sBAAsBU,MAAtB,CAA6BE,MAA7B,EAAqC,CAArC;AACjB;;AAEDV,gBAAc,CAAC,CAACD,eAAeT,SAAf,CAAhB;AACA;AACA;;AAED,QAAO,CAACO,gBAAD,EAAmBC,qBAAnB,CAAP;AACA,CA7GM;;AA+GP,IAAMsB,gBAAgB,SAAhBA,aAAgB,CAAChK,KAAD,EAAW;AAChC,KAAMwH,gBAAgB,SAAhBA,aAAgB,CAACK,OAAD,EAAa;AAAA,MAC3BQ,OAD2B,GACarI,KADb,CAC3BqI,OAD2B;AAAA,MAClBmB,QADkB,GACaxJ,KADb,CAClBwJ,QADkB;AAAA,MACRrC,MADQ,GACanH,KADb,CACRmH,MADQ;AAAA,MACAC,SADA,GACapH,KADb,CACAoH,SADA;AAAA,MAGjC7G,QAHiC,GAS9B4G,MAT8B,CAGjC5G,QAHiC;AAAA,MAIjC+G,eAJiC,GAS9BH,MAT8B,CAIjCG,eAJiC;AAAA,MAKjCkB,oBALiC,GAS9BrB,MAT8B,CAKjCqB,oBALiC;AAAA,MAMjC1M,MANiC,GAS9BqL,MAT8B,CAMjCrL,MANiC;AAAA,MAOjCoM,SAPiC,GAS9Bf,MAT8B,CAOjCe,SAPiC;AAAA,MAQjCI,cARiC,GAS9BnB,MAT8B,CAQjCmB,cARiC;;AAWlC;AACA;AACA;AACA;AACA;;AAEA,MAAIG,+CAAuBnB,eAAvB,EAAJ;AACA,MAAIoB,oDAA4BF,oBAA5B,EAAJ;;AAEA;AACA,MAAIkB,cAAc,EAAlB;AACA,MAAI7B,OAAJ,EAAa;AACZ,OAAIQ,QAAQ1M,QAAR,IAAoB2M,cAAxB,EACCoB,cAAc3O,QAAQgN,eAAeM,QAAQ1M,QAAvB,EAAiCG,MAAjC,CAAR,CAAd;;AAED2M,sBAAmBA,iBACjBrN,MADiB,CACV,CAACiN,QAAQvM,MAAR,CAAD,CADU,EAEjBV,MAFiB,CAEVsO,WAFU,CAAnB;AAGAhB,2BAAwBA,sBAAsBhB,MAAtB,CACvB,UAACiC,OAAD;AAAA,WACCA,YAAYtB,QAAQvM,MAAR,CAAZ,IACA,CAAC4N,YAAYhM,QAAZ,CAAqBiM,OAArB,CAFF;AAAA,IADuB,CAAxB;AAKA,GAZD,MAYO;AACN,OAAItB,QAAQ1M,QAAR,IAAoB2M,cAAxB,EACCoB,cAAc3O,QACbgN,eAAeM,QAAQ1M,QAAvB,EAAiCG,MAAjC,CADa,CAAd;;AAID2M,sBAAmBA,iBAAiBf,MAAjB,CAClB,UAACiC,OAAD;AAAA,WACCA,YAAYtB,QAAQvM,MAAR,CAAZ,IACA,CAAC4N,YAAYhM,QAAZ,CAAqBiM,OAArB,CAFF;AAAA,IADkB,CAAnB;AAKAjB,2BAAwBA,sBAAsBhB,MAAtB,CACvB,UAACiC,OAAD;AAAA,WACCA,YAAYtB,QAAQvM,MAAR,CAAZ,IACA,CAAC4N,YAAYhM,QAAZ,CAAqBiM,OAArB,CAFF;AAAA,IADuB,CAAxB;AAKA;;AAlDiC,wBAoDUvB,eAAe;AAC1DC,mBAD0D;AAE1DvM,iBAF0D;AAG1DoM,uBAH0D;AAI1DL,mBAJ0D;AAK1DS,iCAL0D;AAM1DC,aAAUnB,UAAUpH,KAAV,CAAgBxE,IANgC;AAO1D8L,oBAAiBmB,gBAPyC;AAQ1DD,yBAAsBE;AARoC,GAAf,CApDV;;AAAA;;AAoDjCD,kBApDiC;AAoDfC,uBApDe;;;AA+DlC,MAAMzL,mCAAW,IAAI2M,GAAJ,CAAQnB,gBAAR,CAAX,EAAN;AACA,MAAMoB,sBAAsB9O,QAAQQ,mBAAmB6L,UAAUpH,KAAV,CAAgBxE,IAAnC,CAAR,EAA0DkM,MAA1D,CAAiE,UAACvM,IAAD;AAAA,UAAU8B,KAAKS,QAAL,CAAcvC,KAAKW,MAAL,CAAd,CAAV;AAAA,GAAjE,CAA5B;AACA;AACA;;AAEA;AACA,MAAIyL,kBAAJ;AACA,MAAMK,eAAea,iBAAiB7M,MAAtC;AACA,MAAM+L,cAAc5M,QACnBc,gBAAgBuL,UAAUpH,KAAV,CAAgBxE,IAAhC,EAAsC2L,OAAOrL,MAA7C,CADmB,EAElBF,MAFF;;AAIA,MAAIgM,iBAAiB,CAArB,EAAwBL,YAAY,KAAZ,CAAxB,KACK,IAAII,gBAAgBC,YAApB,EAAkCL,YAAY,IAAZ,CAAlC,KACA,IAAII,gBAAgBC,YAApB,EAAkCL,YAAY,IAAZ;;AAIvChH,WAAS;AACRuH,aAAUD,OADF;AAERiC,iBAAc;AACbzB,0BAAaA,OAAb,CADa;AAEbmB,cAAUA,QAFG;AAGb1N,YAAQA;AAHK,IAFN;AAORiO,eAAYxC,SAPJ;AAQRkB,qBAAkBxL,IARV;AASR4M,wBAAqBA,mBATb;AAURnB,sDAA2B,IAAIkB,GAAJ,CAAQlB,qBAAR,CAA3B;AAVQ,GAAT;;AAaA;AACA;AACA,EAhGD;;AADgC,KAmGzBL,OAnGyB,GAmGNrI,KAnGM,CAmGzBqI,OAnGyB;AAAA,KAmGhBlB,MAnGgB,GAmGNnH,KAnGM,CAmGhBmH,MAnGgB;AAAA,KAoGzBG,eApGyB,GAoGwBH,MApGxB,CAoGzBG,eApGyB;AAAA,KAoGRkB,oBApGQ,GAoGwBrB,MApGxB,CAoGRqB,oBApGQ;AAAA,KAoGc1M,MApGd,GAoGwBqL,MApGxB,CAoGcrL,MApGd;;AAqGhC,KAAMmO,MAAMzB,qBAAqB9K,QAArB,CAA8B2K,QAAQvM,MAAR,CAA9B,CAAZ;AACA,KAAM+L,UAAUP,gBAAgB5J,QAAhB,CAAyB2K,QAAQvM,MAAR,CAAzB,CAAhB;;AAEA,QACC2C;AACC,iBAAewL,GADhB;AAEC,YAAU,kBAACnJ,CAAD;AAAA,UAAO0G,cAAc1G,EAAE+X,MAAF,CAAShR,OAAvB,CAAP;AAAA,GAFX;AAGC,WAASA;AAHV,GADD;AAOA,CA/GD;;IChJMgZ,YAAY,SAAZA,SAAY,CAAC7gB,KAAD,EAAW;AAC5B;AAD4B,iBAEEtB,eAAS,KAAT,CAFF;AAAA;AAAA,KAErBoiB,OAFqB;AAAA,KAEZC,UAFY;;AAAA,kBAGQriB,eAASf,SAAT,CAHR;AAAA;AAAA,KAGrBqjB,UAHqB;AAAA,KAGTC,aAHS;;AAAA,kBAIIviB,eAASf,SAAT,CAJJ;AAAA;AAAA,KAIrBujB,QAJqB;AAAA,KAIXC,WAJW;;AAAA,KAOrBte,SAPqB,GAiBxB7C,KAjBwB,CAOrB6C,SAPqB;AAAA,KAQ3Bue,SAR2B,GAiBxBphB,KAjBwB,CAQ3BohB,SAR2B;AAAA,KAS3BC,OAT2B,GAiBxBrhB,KAjBwB,CAS3BqhB,OAT2B;AAAA,KAU3BC,UAV2B,GAiBxBthB,KAjBwB,CAU3BshB,UAV2B;AAAA,KAW3B/gB,QAX2B,GAiBxBP,KAjBwB,CAW3BO,QAX2B;AAAA,KAYrBsR,IAZqB,GAiBxB7R,KAjBwB,CAYrB6R,IAZqB;AAAA,KAa3BsE,KAb2B,GAiBxBnW,KAjBwB,CAa3BmW,KAb2B;AAAA,KAc3BoL,UAd2B,GAiBxBvhB,KAjBwB,CAc3BuhB,UAd2B;AAAA,KAe3BC,QAf2B,GAiBxBxhB,KAjBwB,CAe3BwhB,QAf2B;AAAA,KAgB3BC,QAhB2B,GAiBxBzhB,KAjBwB,CAgB3ByhB,QAhB2B;;;AAmB5B5iB,iBAAU,YAAM;AACf,MAAI,CAACiiB,OAAL,EAAc;AACb,OAAI9gB,MAAM0hB,iBAAV,EAA6B;AAChB;AACAzI,cACXmI,SADW,EAEXjoB,4BACC6G,MAAM0hB,iBADP,EAECJ,UAFD,CAFW;AAOZL,kBACC9nB,4BACC6G,MAAM0hB,iBADP,EAECJ,UAFD,CADD;AAMA;AACD,OAAIthB,MAAM2hB,eAAV,EAA2B;AAC1B1I,cACCoI,OADD,EAECloB,4BACC6G,MAAM2hB,eADP,EAECL,UAFD,CAFD;AAOAH,gBACChoB,4BACC6G,MAAM2hB,eADP,EAECL,UAFD,CADD;AAMA;AACDP,cAAW,IAAX;AACA;AACD,EAnCD,EAmCG,CAACD,OAAD,CAnCH;;AAqCAjiB,iBAAU,YAAM;AACf,MAAI0iB,UAAJ,EAAgB;AACfN,iBAAc3nB,2BAAOioB,UAAP,CAAd;AACA;AACA,GAHD,MAGO,IAAI,CAACvhB,MAAM0hB,iBAAX,EAA8BT,cAAc,IAAd;AACrC,EALD,EAKG,CAACM,UAAD,CALH;AAMA1iB,iBAAU,YAAM;AACf,MAAI2iB,QAAJ,EAAc;AACbL,eAAY7nB,2BAAOkoB,QAAP,CAAZ;AACA;AACA,GAHD,MAGO,IAAI,CAACxhB,MAAM2hB,eAAX,EAA4BR,YAAY,IAAZ;AACnC,EALD,EAKG,CAACK,QAAD,CALH;;AAOA,KAAMI,oBAAoB,SAApBA,iBAAoB,CAACZ,UAAD,EAAgB;AACzC,MAAI,CAACA,UAAD,IAAe,CAACE,QAApB,EAA8B;AAC7B,UAAO,KAAP;AACA;AACD,SAAOF,WAAWa,OAAX,KAAuBX,SAASW,OAAT,EAA9B;AACA,EALD;;AAOA,KAAMC,kBAAkB,SAAlBA,eAAkB,CAACZ,QAAD,EAAc;AACrC,MAAI,CAACA,QAAD,IAAa,CAACF,UAAlB,EAA8B;AAC7B,UAAO,KAAP;AACA;AACD,SAAOE,SAASW,OAAT,MAAsBb,WAAWa,OAAX,EAA7B;AACA,EALD;;AAOA,KAAME,gBAAgB,SAAhBA,aAAgB,CAAC3oB,IAAD,EAAU;AAC/B6nB,gBAAc7nB,IAAd;AACA6f,YAAUmI,SAAV,EAAqBhoB,IAArB;AACA,EAHD;;AAKA,KAAM4oB,cAAc,SAAdA,WAAc,CAAC5oB,IAAD,EAAU;AAC7B+nB,cAAY/nB,IAAZ;AACA6f,YAAUoI,OAAV,EAAmBjoB,IAAnB;AACA,EAHD;;AAKA,KAAM6f,YAAY,SAAZA,SAAY,CAACjc,IAAD,EAAOX,KAAP,EAAiB;AAClC,MAAIA,KAAJ;AACC,OAAGolB,QAAH,EACClhB,SAASvD,IAAT,EAAexD,oBAAoB6C,KAApB,CAAf,EADD,KAGCkE,SAASvD,IAAT,EAAevD,+BAA+B4C,KAA/B,CAAf;AAJF,SAMKkE,SAASvD,IAAT,EAAeX,KAAf;AACL,EARD;;AAUA,QACCoC;AAAA;AAAA,IAAK,WAAcoE,SAAd,SAA2B1B,QAA3B,gBAAL;AACC;AAAA;AAAA;AACcgV,WAAQ1X;AAAA;AAAA,MAAK,WAAW,OAAhB;AAA0B0X;AAA1B,IAAR,GAAiD,IAD/D;AAEC;AAAA;AAAA,MAAM,WAAW,eAAjB;AAAA;AAAA,IAFD;AAGC;AACC,YAAQ8L;AACR;AAFD,MAGC,MAAMpQ,IAHP;AAIC,WAAO,EAACvQ,OAAO,CAAC,CAACmgB,QAAF,GAAa,OAAb,GAAuB,OAA/B,EAJR;AAKC,kBAAcG,iBALf;AAMC,cAAUG,aANX;AAOC,YAAQT,UAPT;AAQC,iBAAa,eARd;AASC,WAAON,UATR;AAUC,cAAUS;AAVX;AAHD,GADD;AAiBC;AAAA;AAAA;AACC;AAAA;AAAA,MAAM,WAAW,aAAjB;AAAA;AAAA,IADD;AAEC;AACC,YAAQQ;AACR;AAFD,MAGC,MAAMpQ,IAHP;AAIC,WAAO,EAACvQ,OAAOmgB,WAAW,OAAX,GAAqB,OAA7B,EAJR;AAKC,kBAAcK,eALf;AAMC,cAAUE,WANX;AAOC,YAAQV,UAPT;AAQC,iBAAa,eARd;AASC,WAAOJ,QATR;AAUC,cAAUO;AAVX;AAFD;AAjBD,EADD;AAmCA;;AAEDZ,UAAU3d,SAAV,GAAsB;AACrB;AACAoe,aAAYne,8BAAUsD,MAFD;;AAIrB;AACA;;AAEA;AACA;;AAEG;AACA5D,YAAWM,8BAAUsD,MAXH;;AAarB;AACA2a,YAAWje,8BAAUsD,MAdA;;AAgBrB;AACA4a,UAASle,8BAAUsD,MAjBE;;AAmBrB;AACAlG,WAAU4C,8BAAUqD,IApBC;;AAsBlB;AACAqL,OAAM1O,8BAAUgS,KAAV,CAAgB,CAAC,OAAD,EAAU,QAAV,EAAoB,OAApB,CAAhB,CAvBY;;AAyBrB;AACAgB,QAAOhT,8BAAUsD;;AAEjB;AACA;;AAEA;AACA;AAhCqB,CAAtB;;AAmCAoa,UAAUlhB,YAAV,GAAyB;AACrBkD,YAAW,EADU;AAExBue,YAAW,WAFa;AAGxBC,UAAS,SAHe;AAIxBC,aAAY,YAJY;AAKxB/gB,WAAUzF,IALc;AAMrB+W,OAAM;AACN;AAPqB,CAAzB;;IClLMqQ,aAAa,SAAbA,UAAa,CAACliB,KAAD,EAAW;AAC7B;AAD6B,iBAECtB,eAAS,KAAT,CAFD;AAAA;AAAA,KAEtBoiB,OAFsB;AAAA,KAEbC,UAFa;;AAAA,kBAGFriB,eAAS,IAAT,CAHE;AAAA;AAAA,KAGtB8B,MAHsB;AAAA,KAGd2hB,QAHc;;AAAA,KAKtBb,UALsB,GAK+CthB,KAL/C,CAKtBshB,UALsB;AAAA,KAKVc,YALU,GAK+CpiB,KAL/C,CAKVoiB,YALU;AAAA,KAKIplB,IALJ,GAK+CgD,KAL/C,CAKIhD,IALJ;AAAA,KAKUuD,QALV,GAK+CP,KAL/C,CAKUO,QALV;AAAA,KAKoB4V,KALpB,GAK+CnW,KAL/C,CAKoBmW,KALpB;AAAA,KAK2B9Z,KAL3B,GAK+C2D,KAL/C,CAK2B3D,KAL3B;AAAA,KAKkCwG,SALlC,GAK+C7C,KAL/C,CAKkC6C,SALlC;;;AAO7BhE,iBAAU,YAAM;AACf,MAAI,CAACiiB,OAAL,EAAc;AACb;AACA,OAAIsB,YAAJ,EAAkB;AACjBnJ,cACCjc,IADD,EAEC7D,4BAA4BipB,YAA5B,EAA0Cd,UAA1C,CAFD;AAIAa,aAAShpB,4BAA4BipB,YAA5B,EAA0Cd,UAA1C,CAAT;AACA;AACDP,cAAW,IAAX;AACA;AACD,EAZD,EAYG,CAACD,OAAD,CAZH;;AAcAjiB,iBAAU,YAAM;AACf,MAAIxC,KAAJ,EAAW;AACV8lB,YAAS7oB,2BAAO+C,KAAP,CAAT;AACA,GAFD,MAEO,IAAI,CAAC+lB,YAAL,EAAmBD,SAAS,IAAT;AAC1B,EAJD,EAIG,CAAC9lB,KAAD,CAJH;;AAMA,KAAMgmB,kBAAkB,SAAlBA,eAAkB,CAACjpB,IAAD,EAAU;AACjC+oB,WAAS/oB,IAAT;AACA6f,YAAUjc,IAAV,EAAgB5D,IAAhB;AACA,EAHD;;AAKA,KAAM6f,YAAY,SAAZA,SAAY,CAACjc,IAAD,EAAOX,KAAP,EAAiB;AAClC,MAAIA,KAAJ,EAAWkE,SAASvD,IAAT,EAAevD,+BAA+B4C,KAA/B,CAAf,EAAX,KACKkE,SAASvD,IAAT,EAAeX,KAAf;AACL,EAHD;;AAKA,QACCoC;AAAA;AAAA,IAAK,sCAAoCoE,SAAzC;AACC;AAAA;AAAA,KAAK,WAAW,OAAhB;AAA0BsT;AAA1B,GADD;AAEC;AACC,SAAM,OADP;AAEC,UAAO,EAAC7U,OAAO,OAAR,EAFR;AAGC,aAAU+gB,eAHX;AAIC,WAAQf,UAJT;AAKC,gBAAa,eALd;AAMC,UAAO9gB;AANR;AAFD,EADD;AAaA;;AAED0hB,WAAWhf,SAAX,GAAuB;AACtB;AACAoe,aAAYne,8BAAUsD,MAFA;;AAItB;AACA2b,eAAcjf,8BAAUsD,MALF;;AAOtB;AACAzJ,OAAMmG,8BAAUsD,MARM;;AAUnB;AACA5D,YAAWM,8BAAUsD,MAXF;;AAatB;AACAlG,WAAU4C,8BAAUqD,IAdE;;AAgBtB;AACA2P,QAAOhT,8BAAUsD,MAjBK;;AAmBtB;AACApK,QAAO8G,8BAAUsD;AApBK,CAAvB;;AAuBAyb,WAAWviB,YAAX,GAA0B;AACzB3C,OAAM,MADmB;AAEzBskB,aAAY,YAFa;AAGzB/gB,WAAUzF,IAHe;AAIzBqb,QAAO;AAJkB,CAA1B;;IC5EMmM,cAAc,SAAdA,WAAc,CAACtiB,KAAD,EAAW;AAC7B;;;;;;;AAD6B,kBAQDtB,eAASsB,MAAMwM,aAAf,CARC;AAAA;AAAA,MAQtB9E,MARsB;AAAA,MAQd2D,SARc;AAS7B;;AAT6B,MAY3BkX,kBAZ2B,GAsBzBviB,KAtByB,CAY3BuiB,kBAZ2B;AAAA,MAa3BC,eAb2B,GAsBzBxiB,KAtByB,CAa3BwiB,eAb2B;AAAA,MAc3BC,iBAd2B,GAsBzBziB,KAtByB,CAc3ByiB,iBAd2B;AAAA,MAe3BC,WAf2B,GAsBzB1iB,KAtByB,CAe3B0iB,WAf2B;AAAA,MAgB3BC,cAhB2B,GAsBzB3iB,KAtByB,CAgB3B2iB,cAhB2B;AAAA,MAiB3BC,aAjB2B,GAsBzB5iB,KAtByB,CAiB3B4iB,aAjB2B;AAAA,MAkB3BC,YAlB2B,GAsBzB7iB,KAtByB,CAkB3B6iB,YAlB2B;AAAA,MAmB3BC,iBAnB2B,GAsBzB9iB,KAtByB,CAmB3B8iB,iBAnB2B;AAAA,MAoB3BC,kBApB2B,GAsBzB/iB,KAtByB,CAoB3B+iB,kBApB2B;AAAA,MAqB3BC,eArB2B,GAsBzBhjB,KAtByB,CAqB3BgjB,eArB2B;;;AAwB7BnkB,kBAAU,YAAM;AACdwM,cAAUrL,MAAMwM,aAAhB;AACD,GAFD,EAEG,EAFH;;AAIA,MAAMyW,gBAAgB,SAAhBA,aAAgB,CAACjmB,IAAD,EAAOX,KAAP,EAAiB;AACrC;AACA,QAAI+O,uBAAe1D,MAAf,CAAJ;AACA,QAAIrL,UAAU,IAAd,EAAoB;AAClB,aAAO+O,QAAQpO,IAAR,CAAP;AACD,KAFD,MAEO;AACLoO,6BAAeA,OAAf,qBAA8BpO,IAA9B,EAAqCX,KAArC;AACD;AACD;AACAgP,cAAUD,OAAV;AACAuX,mBAAevX,OAAf;AACD,GAXD;;AAaA,MAAM8X,eAAe,SAAfA,YAAe,GAAM;AACzB;AACAN,kBAAclb,MAAd;AACD,GAHD;AAIA,MAAMyb,eAAe,SAAfA,YAAe,GAAM;AACzB;AACA9X,cAAUrL,MAAMwM,aAAhB;AACAmW,mBAAe3iB,MAAMwM,aAArB;AACAoW,kBAAc5iB,MAAMwM,aAApB;AACA;AACD,GAND;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM4W,cAAc,SAAdA,WAAc,GAAM;AACxB,QAAI9gB,MAAM,CAAInB,QAAJ,mBAAV;AACAmB,QAAIE,IAAJ,aAAmBkgB,WAAnB;AACA,QAAIG,aAAaQ,SAAb,CAAuB,UAACloB,IAAD;AAAA,aAAU,CAAC,CAACA,KAAKgb,KAAjB;AAAA,KAAvB,MAAmD,CAAC,CAAxD,EACE7T,IAAIE,IAAJ,CAAYrB,QAAZ;AACF,WAAOmB,IAAII,IAAJ,CAAS,GAAT,CAAP;AACD,GAND;;AAQA,SACEjE;AAAC,6BAAD,CAAO,QAAP;AAAA;AACGokB,oBAAgBA,aAAajnB,MAA7B,GACC6C;AAAA;AAAA,QAAK,WAAW2kB,aAAhB;AACGP,mBAAannB,GAAb,CAAiB,UAACP,IAAD,EAAOsI,KAAP,EAAiB;AACjC;AACA,YAAInB,MAAM,CAAInB,QAAJ,wBAAV;AACAhG,aAAK0H,SAAL,IAAkBP,IAAIE,IAAJ,CAASrH,KAAK0H,SAAd,CAAlB;AACA,gBAAQ1H,KAAK8E,aAAb;AACE,eAAK,WAAL;AACE,mBACExB,wCAAC,SAAD;AACE,mBAAKgF;AADP,eAEMtI,IAFN;AAGE,yBAAWmH,IAAII,IAAJ,CAAS,GAAT,CAHb;AAIE,iCACEgF,OAAOvM,KAAKimB,SAAZ,IACI1Z,OAAOvM,KAAKimB,SAAZ,CADJ,GAEI,IAPR;AASE,+BACE1Z,OAAOvM,KAAKkmB,OAAZ,IACI3Z,OAAOvM,KAAKkmB,OAAZ,CADJ,GAEI,IAZR;AAcE,wBAAU4B,aAdZ;AAeE,0BAAYvb,OAAOvM,KAAKimB,SAAZ,CAfd;AAgBE,wBAAU1Z,OAAOvM,KAAKkmB,OAAZ;AAhBZ,eADF;AAoBF,eAAK,YAAL;AACE,mBACE5iB,wCAAC,UAAD;AACE,mBAAKgF;AADP,eAEMtI,IAFN;AAGE,yBAAWmH,IAAII,IAAJ,CAAS,GAAT,CAHb;AAIE,0BACEvH,KAAKmmB,UAAL,GACInmB,KAAKmmB,UADT,GAEI3jB,SAPR;AASE,4BACE+J,OAAOvM,KAAK6B,IAAZ,IACI0K,OAAOvM,KAAK6B,IAAZ,CADJ,GAEI,IAZR;AAcE,wBAAUimB,aAdZ;AAeE,qBAAOvb,OAAOvM,KAAK6B,IAAZ;AAfT,eADF;AAmBF,eAAK,aAAL;AACA,eAAK,cAAL;AACE,mBACEyB,wCAACwY,QAAD;AACE,mBAAKxT;AADP,eAEMtI,IAFN;AAGE,oBAAMA,KAAK8E,aAHb;AAIE,sCACEyH,OAAOvM,KAAK6B,IAAZ,IACI0K,OAAOvM,KAAK6B,IAAZ,CADJ,GAEI,IAPR;AASE,+BAAiB0K,OAAOvM,KAAK6B,IAAZ,IAAoB0K,OAAOvM,KAAK6B,IAAZ,CAApB,GAAwC,EAT3D;AAUE,yBAAWsF,IAAII,IAAJ,CAAS,GAAT,CAVb;AAWE,4BAAcugB,aAXhB;AAYE,4BACEvb,OAAOvM,KAAK6B,IAAZ,IACI0K,OAAOvM,KAAK6B,IAAZ,CADJ,GAEI,IAfR;AAiBE,qBAAO0K,OAAOvM,KAAK6B,IAAZ;AAjBT,eADF;AAqBF,eAAK,QAAL;AACE,mBACEyB;AAAC,uCAAD,CAAO,QAAP;AAAA,gBAAgB,KAAKgF,KAArB;AAEItI,mBAAK6G,MAAL,CAAY;AACVzB,0BAAU0iB,aADA;AAEVb,8BAAc1a,OAAOvM,KAAK6B,IAAZ,IACV0K,OAAOvM,KAAK6B,IAAZ,CADU,GAEV,IAJM;AAKVX,uBAAOqL,OAAOvM,KAAK6B,IAAZ;AALG,eAAZ;AAFJ,aADF;AAYF;AACE,mBAAO,IAAP;AA/EJ;AAiFD,OArFA,CADH;AAuFE;AAAA;AAAA,UAAS,OAAOulB,kBAAhB;AACE;AAAA;AAAA;AACE,kBAAK,SADP;AAEE,kBAAMC,eAFR;AAGE,mBAAO,EAAEc,YAAY,MAAd,EAHT;AAIE,qBAASJ;AAJX;AAMGT;AANH;AADF,OAvFF;AAiGE;AAAA;AAAA,UAAS,OAAOM,kBAAhB;AACE;AAAA;AAAA;AACE,kBAAMC,eADR;AAEE,mBAAO,EAAEM,YAAY,MAAd,EAFT;AAGE,qBAASH;AAHX;AAKGL;AALH;AADF;AAjGF,KADD,GA4GG;AA7GN,GADF;AAiHD;;AAEDR,YAAYpf,SAAZ,GAAwB;;AAEtB;AACAqf,sBAAoBpf,8BAAUsD,MAHR;;AAKtB;AACA+b,mBAAiBrf,8BAAUgS,KAAV,CAAgB,CAAC,OAAD,EAAU,QAAV,EAAoB,OAApB,CAAhB,CANK;;AAQtB;AACAsN,qBAAmBtf,8BAAUoH,SAAV,CAAoB,CACrCpH,8BAAUqD,IAD2B,EAErCrD,8BAAUwG,OAF2B,EAGrCxG,8BAAUsD,MAH2B,CAApB,CATG;;AAetB;;AAEAic,eAAavf,8BAAUgS,KAAV,CAAgB,CAC3B,KAD2B,EAE3B,MAF2B,EAG3B,KAH2B,EAI3B,MAJ2B,EAK3B,QAL2B,EAM3B,OAN2B,EAO3B,YAP2B,EAQ3B,YAR2B,CAAhB,CAjBS;;AA4BtB;AACA3I,iBAAerJ,8BAAU/F,MA7BH;;AA+BtB;AACAylB,gBAAc1f,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAhCQ;;AAkCtB;AACAwlB,iBAAezf,8BAAUqD,IAnCH;;AAqCtB;AACAmc,kBAAgBxf,8BAAUqD,IAtCJ;;AAwCtB;AACAuc,sBAAoB5f,8BAAUsD,MAzCR;;AA2CtB;AACAuc,mBAAiB7f,8BAAUgS,KAAV,CAAgB,CAAC,OAAD,EAAU,QAAV,EAAoB,OAApB,CAAhB,CA5CK;;AA8CtB;AACA2N,qBAAmB3f,8BAAUoH,SAAV,CAAoB,CACrCpH,8BAAUqD,IAD2B,EAErCrD,8BAAUwG,OAF2B,EAGrCxG,8BAAUsD,MAH2B,CAApB;AA/CG,CAAxB;;AAsDA6b,YAAY3iB,YAAZ,GAA2B;AACzB4iB,sBAAoB,kBADK;AAEzBC,mBAAiB,QAFQ;AAGzBC,qBAAmB,WAHM;AAIzBC,eAAa,MAJY;AAKzBlW,iBAAe,EALU;AAMzBqW,gBAAc,EANW;AAOzBD,iBAAe9nB,IAPU;AAQzB6nB,kBAAgB7nB,IARS;AASzBioB,sBAAoB,iBATK;AAUzBC,mBAAiB,QAVQ;AAWzBF,qBAAmB;AAXM,CAA3B;;ACpPA,IAAM5Y,gBAAgB,SAAhBA,aAAgB,CAAClK,KAAD,EAAW;AAAA,KACzBmK,kBADyB,GAC2BnK,KAD3B,CACzBmK,kBADyB;AAAA,KACLC,SADK,GAC2BpK,KAD3B,CACLoK,SADK;AAAA,KACMC,iBADN,GAC2BrK,KAD3B,CACMqK,iBADN;;AAGhC;;AACA,QACC5L;AAAA;AAAA,IAAK,WAAc0C,QAAd,yBAAL;AACEgJ,wBAAsBA,mBAAmBvO,MAAnB,GAA4B,CAAlD,GACA6C;AAAA;AAAA;AACE0L,sBAAmBzO,GAAnB,CAAuB,UAACP,IAAD,EAAOsI,KAAP;AAAA,WACvBhF;AAAA;AAAA,OAAI,KAAKgF,KAAT;AAEE,YAAO2G,SAAP,KAAqB,UAArB,GACAA,UAAU,EAAC/B,SAASlN,IAAV,EAAgBqO,UAAU/F,KAA1B,EAAV,CADA,GAGAhF;AAAA;AAAA;AAAMtD,WAAKiP,SAAL;AAAN,MALF;AAOC;AAAA;AAAA,QAAK,SAAS;AAAA,eAAMC,kBAAkBlP,IAAlB,CAAN;AAAA,QAAd;AACC,8CAACmP,yBAAD;AADD;AAPD,KADuB;AAAA,IAAvB;AADF,GADA,GAiBA7L;AAAA;AAAA;AAAA;AAAA;AAlBF,EADD;AAuBA,CA3BD;;AA6BAyL,cAAchH,SAAd,GAA0B;AACzB;;;;AAIAkH,YAAWjH,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUqD,IAAX,EAAiBrD,8BAAUsD,MAA3B,CAApB,CALc;;AAOzB;AACA0D,qBAAoBhH,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,EAAoCgG,UAR/B;;AAUzB;AACAiH,oBAAmBlH,8BAAUqD,IAAV,CAAepD;AAXT,CAA1B;;AAcA8G,cAAcvK,YAAd,GAA6B,EAA7B;;ACtBA,IAAM6K,QAAQC,iBAAW,UAACzK,KAAD,EAAQ0K,GAAR,EAAgB;AACxC;AADwC,iBAEVhM,eAAS,KAAT,CAFU;AAAA;AAAA;AAAA,SAExBqiB,UAFwB;AAGxC;;;AAHwC,kBAIVriB,eAAS,IAAT,CAJU;AAAA;AAAA,KAIjCiM,OAJiC;AAAA,KAIxBC,UAJwB;AAKxC;;;AALwC,kBAMVlM,eAAS,KAAT,CANU;AAAA;AAAA,KAMjCmM,OANiC;AAAA,KAMxBC,UANwB;;AAQxC;;;AARwC,kBASdpM,eAAS,EAAT,CATc;AAAA;AAAA,KASjCqM,KATiC;AAAA,KAS1BC,QAT0B;;AAAA,kBAUOtM,eAAS,EAAT,CAVP;AAAA;AAAA,KAUjC+J,gBAViC;AAAA,KAUfwC,kBAVe;;AAAA,mBAWDvM,eAAS,EAAT,CAXC;AAAA;AAAA,KAWjCwM,YAXiC;AAAA,KAWnBC,cAXmB;;AAAA,mBAYXzM,eAAS,KAAT,CAZW;AAAA;AAAA,KAYjC0M,OAZiC;AAAA,KAYxBC,SAZwB;;AAAA,mBAaX3M,eAAS,KAAT,CAbW;AAAA;AAAA,KAajC4M,OAbiC;AAAA,KAaxBC,SAbwB;;AAexC;;;AAfwC,mBAgBN7M,eAAS,KAAT,CAhBM;AAAA;AAAA,KAgBjC6I,SAhBiC;AAAA,KAgBtBiE,YAhBsB;;AAkBxC;;;AAlBwC,mBAmBiB9M,eAAS,EAAT,CAnBjB;AAAA;AAAA,KAmBjCgK,qBAnBiC;AAAA,KAmBV+C,uBAnBU;;AAAA,mBAoBU/M,eAAS,EAAT,CApBV;AAAA;AAAA,KAoB9BgN,gBApB8B;AAAA,KAoBZC,kBApBY;;AAAA,mBAsBQjN,eAAS,CAAT,CAtBR;AAAA;AAAA,KAsB9BoN,eAtB8B;AAAA,KAsBbC,iBAtBa;;AAAA,mBAwBCrN,eAAS,KAAT,CAxBD;AAAA;AAAA,KAwB9BkN,WAxB8B;AAAA,KAwBjBC,cAxBiB;;AA0BrC,KAAMG,WAAWC,cAAjB;;AA1BqC,KA8BvCI,WA9BuC,GAgGpCrM,KAhGoC,CA8BvCqM,WA9BuC;AAAA,KA+BvCC,sBA/BuC,GAgGpCtM,KAhGoC,CA+BvCsM,sBA/BuC;AAAA,KAgCvCC,kBAhCuC,GAgGpCvM,KAhGoC,CAgCvCuM,kBAhCuC;AAAA,KAiCvCC,aAjCuC,GAgGpCxM,KAhGoC,CAiCvCwM,aAjCuC;AAAA,KAkCvCC,aAlCuC,GAgGpCzM,KAhGoC,CAkCvCyM,aAlCuC;AAAA,KAqCvChD,IArCuC,GAgGpCzJ,KAhGoC,CAqCvCyJ,IArCuC;AAAA,KAsCvCiD,OAtCuC,GAgGpC1M,KAhGoC,CAsCvC0M,OAtCuC;AAAA,KAuCvCpF,eAvCuC,GAgGpCtH,KAhGoC,CAuCvCsH,eAvCuC;AAAA,KAwCvCqF,WAxCuC,GAgGpC3M,KAhGoC,CAwCvC2M,WAxCuC;AAAA,KAyCvCjF,MAzCuC,GAgGpC1H,KAhGoC,CAyCvC0H,MAzCuC;AAAA,KA0CvCkF,MA1CuC,GAgGpC5M,KAhGoC,CA0CvC4M,MA1CuC;AAAA,KA6CvCV,OA7CuC,GAgGpClM,KAhGoC,CA6CvCkM,OA7CuC;AAAA,KA8CvCvR,IA9CuC,GAgGpCqF,KAhGoC,CA8CvCrF,IA9CuC;AAAA,KAiDvC4oB,cAjDuC,GAgGpCvjB,KAhGoC,CAiDvCujB,cAjDuC;AAAA,KAkDvCznB,MAlDuC,GAgGpCkE,KAhGoC,CAkDvClE,MAlDuC;AAAA,KAqDvCgL,KArDuC,GAgGpC9G,KAhGoC,CAqDvC8G,KArDuC;AAAA,KAsDvCgG,cAtDuC,GAgGpC9M,KAhGoC,CAsDvC8M,cAtDuC;AAAA,KAgGpC9M,KAhGoC,CAuDvCwjB,YAvDuC;AAAA,KAgGpCxjB,KAhGoC,CAwDvCyjB,UAxDuC;AAAA,KAgGpCzjB,KAhGoC,CAyDjC0jB,YAzDiC;AAAA,SA2DvC3W,YA3DuC,GAgGpC/M,KAhGoC,CA2DvC+M,YA3DuC;AAAA,KA4DvCC,SA5DuC,GAgGpChN,KAhGoC,CA4DvCgN,SA5DuC;AAAA,KA6DvCE,UA7DuC,GAgGpClN,KAhGoC,CA6DvCkN,UA7DuC;AAAA,KA8DvCD,WA9DuC,GAgGpCjN,KAhGoC,CA8DvCiN,WA9DuC;AAAA,KA+DvCE,kBA/DuC,GAgGpCnN,KAhGoC,CA+DvCmN,kBA/DuC;AAAA,KAkEvCE,aAlEuC,GAgGpCrN,KAhGoC,CAkEvCqN,aAlEuC;AAAA,KAmEvCC,QAnEuC,GAgGpCtN,KAhGoC,CAmEvCsN,QAnEuC;AAAA,KAoEvCC,eApEuC,GAgGpCvN,KAhGoC,CAoEvCuN,eApEuC;AAAA,KAqEjCC,gBArEiC,GAgGpCxN,KAhGoC,CAqEjCwN,gBArEiC;AAAA,KAsEvCC,eAtEuC,GAgGpCzN,KAhGoC,CAsEvCyN,eAtEuC;AAAA,KAyEvCC,UAzEuC,GAgGpC1N,KAhGoC,CAyEvC0N,UAzEuC;AAAA,KA4EvCpF,cA5EuC,GAgGpCtI,KAhGoC,CA4EvCsI,cA5EuC;AAAA,KA6EvCqF,eA7EuC,GAgGpC3N,KAhGoC,CA6EvC2N,eA7EuC;AAAA,KA8EvCG,eA9EuC,GAgGpC9N,KAhGoC,CA8EvC8N,eA9EuC;AAAA,KA+EvCD,cA/EuC,GAgGpC7N,KAhGoC,CA+EvC6N,cA/EuC;AAAA,KAgFvCD,gBAhFuC,GAgGpC5N,KAhGoC,CAgFvC4N,gBAhFuC;AAAA,KAmFvCG,UAnFuC,GAgGpC/N,KAhGoC,CAmFvC+N,UAnFuC;AAAA,KAoFvCC,gBApFuC,GAgGpChO,KAhGoC,CAoFvCgO,gBApFuC;AAAA,KAqFvCC,WArFuC,GAgGpCjO,KAhGoC,CAqFvCiO,WArFuC;AAAA,KAsFvCC,oBAtFuC,GAgGpClO,KAhGoC,CAsFvCkO,oBAtFuC;AAAA,KAuFvCC,oBAvFuC,GAgGpCnO,KAhGoC,CAuFvCmO,oBAvFuC;AAAA,KA0FvCC,aA1FuC,GAgGpCpO,KAhGoC,CA0FvCoO,aA1FuC;AAAA,KA2FvCC,sBA3FuC,GAgGpCrO,KAhGoC,CA2FvCqO,sBA3FuC;AAAA,KA8FvCC,YA9FuC,GAgGpCtO,KAhGoC,CA8FvCsO,YA9FuC;AAAA,KA+FvClP,SA/FuC,GAgGpCY,KAhGoC,CA+FvCZ;;AAGD;;AACA,KAAMukB,iCACFC,aAAajkB,YADX,EAEFK,MAAM2jB,iBAFJ,CAAN;AAIA,KAAME,gCACFvB,YAAY3iB,YADV,EAEFK,MAAM6jB,gBAFJ,CAAN;;AAKA,KAAMtV,2BACF/D,MAAM7K,YAAN,CAAmB4O,WADjB,EAEFvO,MAAMuO,WAFJ,CAAN;;AAKA,KAAMC,uBAAuBF,gBAAmBA,YAAnB,cAA7B;AACA,KAAMG,mBAAmBH,gBAAmBA,YAAnB,UAAzB;;AAGAzP,iBAAU,YAAM;AACT;AACA;;AAEN;AACA;AACA8P,kBAAgBtC,WAAhB;AACApB,qBAAmBqB,sBAAnB;AACAnB,iBAAeoB,kBAAf;AACAlB,YAAUmB,aAAV;AACAjB,YAAUkB,aAAV;AACAjB,eACCa,YAAYzQ,MAAZ,GAAqB,CAArB,IACCyQ,YAAYzQ,MAAZ,KAAuB0Q,uBAAuB1Q,MAFhD;AAIA;AACAiQ,iBACE0C,YAAYO,YAAZ,CAAyBlT,MAAzB,IACD2S,YAAYQ,qBADX,IAEDR,YAAYS,uBAFX,IAGDT,YAAYU,sBAJb;;AAMA,MAAI,CAAC,CAACtB,eAAF,IAAqB,CAACE,cAA1B,EAA0C;AACzC;AACA,OAAID,gBAAJ,EACCjC,mBACC5Q,QAAQc,gBAAgBwQ,WAAhB,EAA6BvQ,MAA7B,CAAR,CADD;AAGD;AACA,OAAIwQ,0BAA0BA,uBAAuB1Q,MAAvB,GAAgC,CAA9D,EAAiE;AAChE,QAAIsT,WAAWnU,QAAQc,gBAAgBwQ,WAAhB,EAA6BvQ,MAA7B,CAAR,CAAf;AACA,QAAIqT,cAAcD,SAASxH,MAAT,CAAgB,UAACvM,IAAD;AAAA,YACjCmR,uBAAuB5O,QAAvB,CAAgCvC,KAAKW,MAAL,CAAhC,CADiC;AAAA,KAAhB,CAAlB;AAGA,QAAI4M,yBAAwB,EAA5B;AACAyG,gBAAY3R,OAAZ,CAAoB,UAACrC,IAAD,EAAU;AAAA,2BACZiN,eAAe;AAC/BC,eAASlN,IADsB;AAE/BW,oBAF+B;AAG/BoM,iBAAW4F,eAHoB;AAI/BjG,eAAS,IAJsB;AAK/BS,oCAL+B;AAM/BC,gBAAU8D,WANqB;AAO/B/E,uBAAiBgF,sBAPc;AAQ/B9D,4BAAsBE;AARS,MAAf,CADY;AAAA;AAAA;AAAA,aAClB0G,EADkB;;AAW7B1G,4BAAsBlG,IAAtB,iDAA8B4M,EAA9B;AACA,KAZD;AAaA3D,wDAA4B,IAAI7B,GAAJ,CAAQlB,sBAAR,CAA5B;AACA;AACD;;AAED,MAAI/N,SAAS,WAAb,EAA0B;AACzB0U,mBAAgB;AACfzC,YAAQH,aADO;AAEf/E,YAAQ8E,aAFO;AAGf3L,gBAAY0L,kBAHG;AAIf+C,YAAQ;AAJO,IAAhB;AAMA;AACD;AACAyR,aAAW,IAAX;AACA,MAAIrW,OAAO,OAAOA,GAAP,KAAe,UAA1B,EAAsCA,IAAI,EAAC6E,sBAAD,EAAJ,EAAtC,KACK,IAAI7E,OAAO,QAAOA,GAAP,yCAAOA,GAAP,OAAe,QAA1B,EAAoCA,IAAI8E,OAAJ,GAAc,EAACD,sBAAD,EAAd;AACzC,EAhED,EAgEG,EAhEH;;AAkEA1Q,iBAAU,YAAM;AACf,MAAIlE,SAAS,WAAb,EAA0B;AACzB;AACA;AACAgU,mBAAgBlF,IAAhB;AACAwB,sBAAmB3D,eAAnB;AACA6D,kBAAewB,WAAf;AACAtB,aAAU3D,MAAV;AACA6D,aAAUqB,MAAV;AACA,OAAI,CAAC,CAACe,eAAF,IAAqB,CAACE,cAA1B,EAA0C;AACzC;AACA,QAAID,gBAAJ,EACCjC,mBAAmB5Q,QAAQc,gBAAgB4N,IAAhB,EAAsB3N,MAAtB,CAAR,CAAnB;AACD;AACD;AACE,EAfJ,EAeM,CAAC2N,IAAD,EAAOnC,eAAP,EAAwBqF,WAAxB,EAAqCjF,MAArC,EAA6CkF,MAA7C,CAfN;;AAiBA;AACA/N,iBAAW,YAAM;AAChB,MAAGO,UAAUpC,IAAb,EAAmB;AAClB;AACAoC,aAAUmB,QAAV,IAAsBnB,UAAUmB,QAAV,CAAmB,EAAClE,OAAO2D,MAAMZ,UAAUpC,IAAhB,CAAR,EAA+B8mB,gBAAgBvU,UAA/C,EAAnB,CAAtB;AACA;AACD,EALD,EAKG,CAACvP,MAAMZ,UAAUpC,IAAhB,CAAD,CALH;;AAQA;AACA,KAAM2R,kBAAkB,SAAlBA,eAAkB,CAAClF,IAAD,EAAU;AACjCuB,WAASvB,IAAT;AACAiH,eAAajH,IAAb;AACA,EAHD;AAIA,KAAMsa,iBAAiB,SAAjBA,cAAiB,CAACta,IAAD,EAAU;AAChCiD,UAAQjD,IAAR;AACAiH,eAAajH,IAAb;AACA,EAHD;AAIA,KAAMiH,eAAe,SAAfA,YAAe,CAACjH,IAAD,EAAU;AAC9BgF,sBAAoBzO,MAAMxF,YAA1B,IAA0CwF,MAAMxF,YAAN,CAAmBiU,gBAAnB,EAAqChF,IAArC,CAA1C;AACA,EAFD;;AAIA,KAAM8F,aAAa,SAAbA,UAAa,OAAmC;AAAA,MAAjC3C,MAAiC,QAAjCA,MAAiC;AAAA,MAAzBlF,MAAyB,QAAzBA,MAAyB;AAAA,MAAjBiF,WAAiB,QAAjBA,WAAiB;;AACrD;AACM,MAAG3M,MAAM3D,KAAN,IAAe2D,MAAM3D,KAAN,CAAYT,MAAZ,GAAqB,CAAvC,EACIqP,mBAAmBjL,MAAM3D,KAAN,CAAYX,GAAZ,CAAgB;AAAA,UAAQP,KAAKW,MAAL,CAAR;AAAA,GAAhB,CAAnB,EADJ,KAGImP,mBAAmB,EAAnB;AACV;AACA,MAAG2B,MAAH,EAAWrB,UAAUqB,MAAV;AACX,MAAGlF,MAAH,EAAW2D,UAAU3D,MAAV;AACX,MAAGiF,WAAH,EAAgBxB,eAAewB,WAAf;AAChB0C,kBAAgB;AACfzC,WAAQA,SAASA,MAAT,GAAkBtB,OADX;AAEf5D,WAAQA,SAASA,MAAT,GAAkB0D,OAFX;AAGfvK,eAAY8L,cAAcA,WAAd,GAA4BzB,YAHzB;AAIfoE,WAAQ;AAJO,GAAhB;AAMM;AACH,EAjBJ;;AAmBA,KAAMD,kBAAkB,SAAlBA,eAAkB,CAACkC,MAAD,EAAY;AACnC;AADmC,MAE5B3E,MAF4B,GAEqB2E,MAFrB,CAE5B3E,MAF4B;AAAA,MAEpBlF,MAFoB,GAEqB6J,MAFrB,CAEpB7J,MAFoB;AAAA,MAEZ7G,UAFY,GAEqB0Q,MAFrB,CAEZ1Q,UAFY;AAAA,MAEA2Q,SAFA,GAEqBD,MAFrB,CAEAC,SAFA;AAAA,MAEWlC,MAFX,GAEqBiC,MAFrB,CAEWjC,MAFX;;AAGnC,UAAQ3U,IAAR;AACC,QAAK,UAAL;AACA,QAAK,YAAL;AACC,QAAI,CAACgQ,WAAW2E,MAAZ,KAAuB,CAACzE,OAA5B,EAAqC;AACpCC,gBAAW,IAAX;AACA,SAAM2G,UAAUnC,SACb,CADa,GAEboC,KAAKC,KAAL,CAAW5G,MAAMnP,MAAN,GAAe0R,QAA1B,CAFH;AAGA,SAAMiE,UAAS;AACdK,YAAMH,OADQ;AAEdI,YAAMvE,QAFQ;AAGdwE,YACClF,UAAUA,OAAOnP,GAAjB,GACGmP,OAAOnP,GAAP,GAAa,GAAb,GAAmBmP,OAAOmF,KAD7B,GAEG;AANU,MAAf;AAQA,SAAMC,yBACgBtK,MADhB,EAEiB7G,gCACI4M,eADJ,EACsB5M,UADtB,IAEE,IAJnB,CAAN;AAMA;;AAEe,SAAGlG,SAAS,UAAT,IAAuB2U,MAAvB,IAAiC9B,qBAAqB1S,IAAtD,IAA8D,CAAC6S,eAA/D,IAAkF,CAACE,cAAtF,EAAsG;AAClGL,uBAAiB;AACb+D,sBADa;AAEb/V,aAAMwW;AAFO,OAAjB,EAIKlM,IAJL,CAIU,UAAC/H,QAAD,EAAc;AAChB;AACA;AACAgO,yBAAkBhO,SAASvC,IAA3B;AACH,OARL,EAShBwK,KATgB,CASV;AAAA,cACNpI,kBAAkBC,KAAlB,EAAyB,gDAAzB,CADM;AAAA,OATU;AAWH;;AAED;AACA;AACA;AACA;AACA0P,qBAAgB;AAC9BgE,qBAD8B;AAE9B/V,YAAMwW;AAFwB,MAAhB,EAIblM,IAJa,CAIR,UAAC/H,QAAD,EAAc;AACnB;AACA,UAAMxB,SAASwB,SAASvC,IAAxB;AACA;AACA,UAAI,CAAC,CAACmS,eAAF,IAAqBE,cAAzB,EAAyC;AACxC;AACA;AACA,WAAI4D,YAAY,CAAhB,EAAmB;AAClBlV,eAAOiB,OAAP,CAAe,UAACuF,KAAD,EAAW;AACzBA,eAAMpH,QAAN,GAAiB,oBACdG,MADc,EACLU,cADK,EAAjB;AAGA,SAJD;AAKA;AACAmS,wBAAgBpS,MAAhB;AACA,QARD,MAQO;AACN,YAAI0V,sCAAclH,KAAd,EAAJ;AACA;AACAxO,eAAOiB,OAAP,CAAe,UAACuF,KAAD,EAAW;AACzBA,eAAMpH,QAAN,GAAiB,oBACdG,MADc,EACLU,cADK,EAAjB;AAGA,SAJD;AAKA,YAAIP,OAAOF,iBACVkW,OADU,EAEVnW,MAFU,EAGV0V,UAAU1V,MAAV,CAHU,CAAX;AAKAG,aAAKN,QAAL,GAAgBY,MAAhB;AACA;AACA;AACAoS,wBAAgBsD,OAAhB;AACA;AACD,OA7BD,MA6BO;AACN,WAAI1V,UAAUA,OAAOX,MAAP,GAAgB0R,QAA9B,EAAwC;AACvC1C,mBAAW,KAAX;AACA,QAFD,MAEO;AACNA,mBAAW,IAAX;AACA;AACD6G,mBAAY,CAAZ,GACG9C,gBAAgBpS,MAAhB,CADH;AAAA,SAEGoS,gBAAgB5D,MAAM3P,MAAN,CAAamB,MAAb,CAAhB,CAFH,CANM;;AAUN;AACA,WAAIqR,gBAAJ,EACCjC,mBACC5Q,QAAQc,gBAAgBU,MAAhB,EAAwBT,MAAxB,CAAR,CADD;AAGD;;AAEDgP,iBAAW,KAAX;AACA,MAvDa,EAwDb9E,KAxDa,CAwDP,UAACnI,KAAD,EAAW;AACjBD,wBAAkBC,KAAlB,EAAyB,wBAAzB;AACA8Q,sBAAgB5D,KAAhB,EAFiB;AAGjB;AACAD,iBAAW,KAAX;AACA,MA7Da;AA8Df;AACD;AAzGF;AAkHA,EArHD;;AAuHA;AACA,KAAMyH,oBAAoB;AACzB7Q,WAAS,wBAAwC;AAAA,OAAtC2G,OAAsC,SAAtCA,OAAsC;AAAA,OAA7BmB,QAA6B,SAA7BA,QAA6B;AAAA,OAAnB1N,MAAmB,SAAnBA,MAAmB;AAAA,aAAXyY;;AACrC,OAAI,CAAC7G,UAAL,EAAiB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAM2E,eAAe;AACpBhK,2BAAaA,OAAb,CADoB;AAEpBmB,eAAUA,QAFU;AAGpB1N,aAAQA;AAHY,KAArB;AAKA;AACAmP,uBAAmB,CAACnP,MAAD,CAAnB;AACA;AACA;AACA0S,4BAAwBxO,MAAMxF,YAA9B,IAA8CwF,MAAMxF,YAAN,CAAmBgU,oBAAnB,EAAyCnG,OAAzC,CAA9C;AACA0F;AACCjG,eAAU;AADX,OAEIuK,YAFJ;AAIAnE,yBAAqB,CAACpS,MAAD,CAArB,EAA+B,CAACuM,OAAD,CAA/B;AACA;AACA;AACD,GAjCwB;AAkCzBmK,iBAAe,8BAAiC;AAAA,OAA/BnK,OAA+B,SAA/BA,OAA+B;AAAA,OAAtBmB,QAAsB,SAAtBA,QAAsB;AAAA,OAAZ1N,MAAY,SAAZA,MAAY;;AAC/C;AACAkS,oBAAiB,EAAC3F,gBAAD,EAAUmB,kBAAV,EAAoB1N,cAApB,EAAjB;AACA;AACD;AACA;AACA;AAxCyB,EAA1B;;AA2CA;AACA,KAAM2W,gBAAgB,SAAhBA,aAAgB,CAAC7F,MAAD,EAAY;AACjC;AACAZ,WAASwD,OAAT,CAAiB2B,WAAjB,CAA6B,CAA7B,EAAgC,MAAhC;AACA5F,YAAUqB,MAAV;;AAEA;AACA,MAAIjS,SAAS,WAAb,EAA0B;AACzBsQ,sBAAmB,EAAnB;AACA;AACD,MAAMyH,aAAa;AAClB9F,WAAQA,MADU;AAElBlF,WAAQ0D,OAFU;AAGlBvK,eAAYqK,YAHM;AAIlBoE,WAAQ;AAJU,GAAnB;AAMAD,kBAAgBqD,UAAhB;AACA,EAhBD;;AAkBA;AACA,KAAMU,cAAc,SAAdA,WAAc,GAAM;AACzB,MAAI2C,uCAAe7J,OAAf,EAAJ;;AAEA;AACA,MAAIwB,UAAJ,EAAgB;AACf,OAAM2F,eAAe;AACpB5V,SAAK,eADe;AAEpB6V,oBAAgBpM,aAFI;AAGpBqM,kBAAcvJ,aAHM;AAIpB1I,WAAO,EAJa;AAKpBkS,gBAAY,CALQ;AAMpBC,eAAW,KANS;AAOpBC,YAAQ,MAPY;AAQpB5X,YAAQA,MARY;AASpBoM,eAAW4F,eATS;AAUpBxG,qBAAiBmB,gBAVG;AAWpBD,0BAAsBE,qBAXF;AAYpBJ,oBAAgBA,cAZI;AAapB/H,cAAU2S,sBAbU;AAcpB3L,eAAWA,SAdS;AAepBF,iBAAa8L;AAfO,IAArB;AAiBA4C,YAASiO,OAAT,CAAiB3Q,YAAjB;AACA;AACD,SAAO0C,QAAP;AACA,EAzBD;;AA2BA;;AAEA,KAAMpD,UACLlU;AAAC,2BAAD,CAAO,QAAP;AAAA;AACEmN,gBACCnN;AAAC,4BAAD,CAAO,QAAP;AAAA;AAEC;AAAA;AAAA,MAAK,KAAK,yBAAV,EAAqC,WAAW,kBAAhD;AACE8P,gBAAYQ,qBAAZ,GAAoCtQ,wCAAC,SAAD,IAAW,OAAO8P,YAAYQ,qBAA9B,GAApC,GAA8F;AADhG,IAFD;AAKC;AAAA;AAAA,MAAK,KAAK,2BAAV,EAAuC,WAAW,oBAAlD;AACER,gBAAYS,uBAAZ,GAAsCvQ,wCAAC,SAAD,IAAW,OAAO8P,YAAYS,uBAA9B,GAAtC,GAAkG;AADpG,IALD;AAQC;AAAA;AAAA,MAAK,KAAK,0BAAV,EAAsC,WAAW,mBAAjD;AACET,gBAAYU,sBAAZ,GAAqCxQ,wCAAC,SAAD,IAAW,OAAO8P,YAAYU,sBAA9B,GAArC,GAAgG;AADlG,IARD;AAYEvB,gBACAjP;AAAC,6BAAD,CAAO,QAAP;AAAA;AACE8P,gBAAYO,YAAZ,CAAyBpR,QAAzB,CAAkC,UAAlC,IACEe;AAAA;AAAA;AAAO8P,iBAAYqE,aAAnB;AAAA;AAAmCnK,sBAAiB7M;AAApD,KADF,GAEE,IAHJ;AAIE2S,gBAAYO,YAAZ,CAAyBpR,QAAzB,CAAkC,QAAlC,IACEe;AAAA;AAAA;AAAO8P,iBAAYsE,WAAnB;AAAA;AAAiC9X,aAAQc,gBAAgBkP,KAAhB,EAAuBjP,MAAvB,CAAR,EAAwCF;AAAzE,KADF,GAEE;AANJ,IADA,GASI,IArBN;AAuBE2S,eAAYO,YAAZ,CAAyBpR,QAAzB,CAAkC,OAAlC,IACE/C,SAAS,UAAT,IAAuB6S,qBAAqB1S,IAA5C,IAAoD,CAAC6S,eAArD,IAAwE,CAACE,cAAzE,GACCpP;AAAA;AAAA;AAAO8P,gBAAYuE,UAAnB;AAAA;AAAgChH;AAAhC,IADD,GAECrN;AAAA;AAAA;AAAO8P,gBAAYuE,UAAnB;AAAA;AAAgC/X,YAAQc,gBAAgBkP,KAAhB,EAAuBjP,MAAvB,CAAR,EAAwCF;AAAxE,IAHH,GAIE;AA3BJ,GADD,GA+BI;AAhCN,EADD;;AAqCA;AACA,KAAMmX,gBAAgB,SAAhBA,aAAgB,QAAyB;AAAA,MAAvB1K,OAAuB,SAAvBA,OAAuB;AAAA,MAAdmB,QAAc,SAAdA,QAAc;AAAA,MACvCwJ,YADuC,GACvBhT,KADuB,CACvCgT,YADuC;;AAE9C,SAAO,CACNA,YADM,EAENvK,iBAAiB/K,QAAjB,CAA0B2K,QAAQvM,MAAR,CAA1B,KAA8C,cAFxC,EAGNoR,aAAc1D,WAAW,CAAX,KAAiB,CAAjB,GAAqB,MAArB,GAA8B,KAA5C,GAAqD,EAH/C,EAIN,UAJM,EAKL9G,IALK,CAKA,GALA,CAAP;AAMA,EARD;;AAUA;AACA,KAAMuQ,eAAe,SAAfA,YAAe,GAAM;AAC1B,MAAI1L,kBAAJ;AACA,MAAMK,eAAea,iBAAiB7M,MAAtC;AACA,MAAIgM,iBAAiB,CAArB,EAAwBL,YAAY,KAAZ,CAAxB,KACK,IAAIK,eAAe,CAAnB,EAAsBL,YAAY,IAAZ;;AAE3BiE,eAAajE,SAAb;;AAEA,MAAI5M,SAAS,UAAb,EAAyB;AACxB,OAAM+X,aAAa;AAClB9F,YAAQtB,OADU;AAElB5D,YAAQ0D,OAFU;AAGlBvK,gBAAYqK,YAHM;AAIlBoE,YAAQ;AAJU,IAAnB;AAMAD,mBAAgBqD,UAAhB;AACA;AACD,EAjBD;;AAmBA;;AAEA;AACA,KAAMQ,yBAAyB,SAAzBA,sBAAyB,QAOzB;AAAA,MANLpL,QAMK,SANLA,QAMK;AAAA,MALLgC,YAKK,SALLA,YAKK;AAAA,MAJLC,UAIK,SAJLA,UAIK;AAAA,MAHLtB,gBAGK,SAHLA,gBAGK;AAAA,MAFLoB,mBAEK,SAFLA,mBAEK;AAAA,MADLnB,qBACK,SADLA,qBACK;;AACLuC,qBAAmBxC,gBAAnB;AACAgD,0BAAwB/C,qBAAxB;AACA8C,eAAazB,UAAb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAyE,0BAAwBxO,MAAMxF,YAA9B,IAA8CwF,MAAMxF,YAAN,CAAmBgU,oBAAnB,EAAyC3E,mBAAzC,CAA9C;AACAkE,aAAW;AACVjG,qBADU;AAEVO,YAASyB,aAAazB,OAFZ;AAGVmB,aAAUM,aAAaN,QAHb;AAIV1N;AAJU,GAAX;AAMAoS,uBAAqBzF,gBAArB,EAAuCoB,mBAAvC;AACA,EAxCD;;AA0CA;AACA,KAAMsJ,sBAAsB,SAAtBA,mBAAsB,QAAqC;AAAA,MAAnCrL,QAAmC,SAAnCA,QAAmC;AAAA,MAAzBrM,OAAyB,SAAzBA,OAAyB;AAAA,MAAhBgM,UAAgB,SAAhBA,UAAgB;;AAChE,MAAMkJ,eAAe7I,WAAWrM,OAAX,GAAqB,EAA1C;AACAwP,qBAAmB0F,YAAnB;AACAlF,0BAAwB,EAAxB;AACAD,eAAa1D,QAAb;AACA0G,0BAAwBxO,MAAMxF,YAA9B,IAA8CwF,MAAMxF,YAAN,CAAmBgU,oBAAnB,EAAyC1G,WAAWL,UAAX,GAAwB,EAAjE,CAA9C;AACA;AACA;AACAyG,uBAAqByC,YAArB,EAAmClJ,UAAnC;AACA,EATD;;AAWA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAMkM,wBAAwB,SAAxBA,qBAAwB,CAACC,eAAD,EAAqB;AAClD;AACAzF,uBAAqByF,eAArB;AACA,EAHD;AAIA,KAAMC,eAAe,SAAfA,YAAe,SAA2C;AAAA,MAAzCC,QAAyC,UAAzCA,QAAyC;AAAA,MAA/BzL,OAA+B,UAA/BA,OAA+B;AAAA,MAAtBmB,QAAsB,UAAtBA,QAAsB;AAAA,MAAZ1N,MAAY,UAAZA,MAAY;;AAC/D;AACA,MAAIgY,QAAJ,EAAc;AACbnI,kDAAuBD,gBAAvB,IAAyC5P,MAAzC;;AAEA,OAAI+R,cAAJ,EAAoB;AACnB,QAAM6E,aAAa;AAClB9F,aAAQtB,OADU;AAElB5D,0BAAY0D,OAAZ,qBAAsB0C,eAAtB,EAAwChS,MAAxC,EAFkB;AAGlB+E,iBAAYqK,YAHM;AAIlBoE,aAAQ,KAJU;AAKlBkC,gBAAWnJ;AALO,KAAnB;AAOA;AACAgH,oBAAgBqD,UAAhB;AACA;AACD,GAdD,MAcO;AACN,OAAIkB,8CAAsBlI,gBAAtB,EAAJ;AACA,OAAIqI,eAAehZ,QAClBc,gBAAgBwM,QAAQ1M,QAAxB,EAAkCqE,MAAMlE,MAAxC,CADkB,CAAnB;AAGAiY,gBAAavR,IAAb,CAAkB1G,MAAlB;AACA;AACA6P,sBACCiI,gBAAgBlM,MAAhB,CAAuB,UAACvM,IAAD;AAAA,WAAU,CAAC4Y,aAAarW,QAAb,CAAsBvC,IAAtB,CAAX;AAAA,IAAvB,CADD;AAGA;AACD8S,cAAY,EAAC6F,kBAAD,EAAWzL,gBAAX,EAAoBmB,kBAApB,EAA8B1N,cAA9B,EAAZ;AACA,EA5BD;;AA8BA;;AAEA,KAAMmoB,qCAAqC,SAArCA,kCAAqC,GAAM;AAChD;AACA,MAAIC,gDAAwBP,kBAAkBQ,gBAA1C,EAAJ;AACA,MAAIxpB,SAAS,UAAb,EAAyB;AACxBupB,qBAAkB1hB,IAAlB,CAAuB,IAAvB,EAA6B,MAA7B;AACS;AACH;AACP,MAAIkL,cAAcjF,iBAAiB7M,MAAjB,GAA0B,CAA5C,EAA+C;AAC9CsoB,qBAAkB1hB,IAAlB,CAAuB,WAAvB,EAAoC,MAApC,EAA4C,IAA5C,EAAkD,MAAlD;AACS;AACH;AACP,MAAIiG,iBAAiB7M,MAAjB,KAA4B,CAAhC,EAAmC;AAClCsoB,qBAAkB1hB,IAAlB,CAAuB,WAAvB,EAAoC,MAApC,EAA4C,QAA5C,EAAsD,IAAtD,EAA4D,MAA5D;AACS;AACH;AACP;AACC;AACA;AACS;AACJ;AACA;;AAEA,qCAAW,IAAIoH,GAAJ,CAAQsa,iBAAR,CAAX;AACN,EAvBD;;AAyBA,KAAME,oBAAoB,SAApBA,iBAAoB,CAAC7P,KAAD,EAAW;AACpC;AACAoP,oBAAkBU,gBAAlB,CACC9P,KADD,EAECxY,iBAAiBgP,KAAjB,EAAwBjP,MAAxB,EAAgC2M,iBAAiB,CAAjB,CAAhC,CAFD;AAIA,EAND;;AAQA,KAAM6b,eAAe,SAAfA,YAAe,CAAC/P,KAAD,EAAW;AAC/B;AACAoP,oBAAkBY,WAAlB,CAA8BhQ,KAA9B,EAAqC;AACpClM,YAAStM,iBAAiBgP,KAAjB,EAAwBjP,MAAxB,EAAgC2M,iBAAiB,CAAjB,CAAhC;AAD2B,GAArC;AAGA;AACA,EAND;;AAQA,KAAM+b,iBAAiB,SAAjBA,cAAiB,CAACjQ,KAAD,EAAW;AACjC;AACA,MAAIgP,cAAJ,EAAoB;AACnB,OAAI5oB,SAAS,WAAb,EAA0B;AACzBopB,mBACChZ,MAAMrD,MAAN,CACC,UAACvM,IAAD;AAAA,YAAU,CAACsN,iBAAiB/K,QAAjB,CAA0BvC,KAAKW,MAAL,CAA1B,CAAX;AAAA,KADD,CADD;AAKA,IAND,MAMO;AACN6S,oBACC5D,MAAMrD,MAAN,CACC,UAACvM,IAAD;AAAA,YAAU,CAACsN,iBAAiB/K,QAAjB,CAA0BvC,KAAKW,MAAL,CAA1B,CAAX;AAAA,KADD,CADD;AAKA;AACDmP,sBAAmB,EAAnB;AACA;AACD0Y,oBAAkBc,aAAlB,CAAgClQ,KAAhC,EAAuC9L,gBAAvC;AACA,EAnBD;;AAqBA,KAAMuL,OAAO,SAAPA,IAAO,CAACxY,IAAD,EAAOiC,GAAP,EAAYwW,QAAZ,EAAyB;AACrC,OAAK,IAAI/X,IAAI,CAAb,EAAgBA,IAAIV,KAAKI,MAAzB,EAAiCM,GAAjC,EAAsC;AACrC,OAAIV,KAAKU,CAAL,EAAQJ,MAAR,MAAoB2B,GAAxB,EAA6B;AAC5B;AACA,WAAOwW,SAASzY,KAAKU,CAAL,CAAT,EAAkBA,CAAlB,EAAqBV,IAArB,CAAP;AACA;AAGD,OAAIA,KAAKU,CAAL,EAAQP,QAAZ,EAAsB;AACrBqY,SAAKxY,KAAKU,CAAL,EAAQP,QAAb,EAAuB8B,GAAvB,EAA4BwW,QAA5B;AACA;AACD;AACD,EAZD;;AAcA,KAAMyQ,aAAa,SAAbA,UAAa,CAACnQ,KAAD,EAAW;AAC7B,MAAM/Y,mCAAWuP,KAAX,EAAN;AACA,MAAMtN,MAAMgL,iBAAiB,CAAjB,CAAZ;AACAuL,OAAKxY,IAAL,EAAWiC,GAAX,EAAgB,UAACtC,IAAD,EAAOsI,KAAP,EAAc0E,GAAd,EAAuB;AACtC,OAAMqM,cAAcC,gBAAgBhR,KAAhB,EAAuBA,QAAQ,CAA/B,CAApB;AACAiR,mBAAgBjR,KAAhB,EAAuB+Q,WAAvB,EAAoCrM,GAApC,EAAyC3M,IAAzC;AACAmoB,qBAAkBgB,SAAlB,CAA4BpQ,KAA5B,EAAmC;AAClC/K,cAAUgL,WADwB;AAElCnM,aAAStM,iBAAiBgP,KAAjB,EAAwBjP,MAAxB,EAAgC2M,iBAAiB,CAAjB,CAAhC;AAFyB,IAAnC,EAGGjN,IAHH;AAIA,GAPD;AAQA,EAXD;;AAaA,KAAMopB,eAAe,SAAfA,YAAe,CAACrQ,KAAD,EAAW;AAC/B,MAAM/Y,mCAAWuP,KAAX,EAAN;AACA,MAAMtN,MAAMgL,iBAAiB,CAAjB,CAAZ;AACAuL,OAAKxY,IAAL,EAAWiC,GAAX,EAAgB,UAACtC,IAAD,EAAOsI,KAAP,EAAc0E,GAAd,EAAuB;AACtC,OAAMqM,cAAcC,gBAAgBhR,KAAhB,EAAuBA,QAAQ,CAA/B,CAApB;AACAiR,mBAAgBjR,KAAhB,EAAuB+Q,WAAvB,EAAoCrM,GAApC,EAAyC3M,IAAzC;AACAmoB,qBAAkBkB,WAAlB,CAA8BtQ,KAA9B,EAAqC;AACpC/K,cAAUgL,WAD0B;AAEpCnM,aAAStM,iBAAiBgP,KAAjB,EAAwBjP,MAAxB,EAAgC2M,iBAAiB,CAAjB,CAAhC;AAF2B,IAArC,EAGGjN,IAHH;AAIA,GAPD;AAQA,EAXD;;AAaA,KAAMiZ,kBAAkB,SAAlBA,eAAkB,CAACE,QAAD,EAAWC,QAAX;AAAA,SACvBA,YAAY,CAAZ,IAAiBA,WAAW7J,MAAMnP,MAAlC,GAA2CgZ,QAA3C,GAAsDD,QAD/B;AAAA,EAAxB;;AAGA,KAAMD,kBAAkB,SAAlBA,eAAkB,CAACC,QAAD,EAAWC,QAAX,EAAqBzM,GAArB,EAA0B3M,IAA1B,EAAmC;AAC1D,MAAIoZ,YAAY,CAAZ,IAAiBA,WAAWzM,IAAIvM,MAApC,EAA4C;AAC3C;AACA,OAAMT,OAAOgN,IAAIiB,MAAJ,CAAWuL,QAAX,EAAqB,CAArB,CAAb,CAF2C;AAG3C;AACAxM,OAAIiB,MAAJ,CAAWwL,WAAW,CAAX,GAAeA,QAAf,GAA0B,CAArC,EAAwC,CAAxC,EAA2CzZ,KAAK,CAAL,CAA3C,EAJ2C;AAK3C;AACA,OAAIR,SAAS,WAAb,EAA0B;AACzBopB,mBAAevoB,IAAf;AACA,IAFD,MAEO;AACNmT,oBAAgBnT,IAAhB;AACA;AACD;AACD,EAbD;;AAeA,KAAMoF,YAAY,SAAZA,SAAY,CAACC,UAAD,EAAaC,CAAb,EAAmB;AAC9BA,IAAEC,cAAF;AACN;AACMiL,WAASwD,OAAT,CAAiB2B,WAAjB,CAA6B,CAA7B,EAAgC,MAAhC;AACNhG,iBAAetK,UAAf;AACA,MAAM6R,aAAa;AAClB9F,WAAQtB,OADU;AAElB5D,WAAQ0D,OAFU;AAGlBvK,eAAYA,UAHM;AAIlByO,WAAQ;AAJU,GAAnB;AAMAD,kBAAgBqD,UAAhB;AACAiR,oBAAkBziB,QAAlB,CAA2BL,UAA3B;AACA,EAbD;;AAeA;;AAEA,KAAMikB,kBAAkB,SAAlBA,eAAkB,CAACpd,MAAD,EAAY;AACnC;AACAkD,aAAW,IAAX;AACAS,YAAU3D,MAAV;AACAmc,mBAAiBlB,cAAjB,CAAgCjb,MAAhC;AACA,EALD;AAMA,KAAMqd,iBAAiB,SAAjBA,cAAiB,CAACrd,MAAD,EAAY;AAClC;AACA,MAAMgL,aAAa;AAClB9F,WAAQtB,OADU;AAElB5D,WAAQA,MAFU;AAGlB7G,eAAYqK,YAHM;AAIlBoE,WAAQ;AAJU,GAAnB;AAMAD,kBAAgBqD,UAAhB;AACAmR,mBAAiBjB,aAAjB,CAA+Blb,MAA/B;AACA,EAVD;;AAYA;;AAEA,KAAMmN,4BAA4B,SAA5BA,yBAA4B,CAACC,UAAD,EAAgB;AACjD,MAAMC,kBAAkBtM,iBAAiBf,MAAjB,CACvB,UAACvM,IAAD;AAAA,UAAUA,SAAS2Z,WAAWhZ,MAAX,CAAnB;AAAA,GADuB,CAAxB;AAGAmP,qBAAmB8J,eAAnB;AACA7G,uBAAqB6G,eAArB;AACA,EAND;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QACCtW;AAAA;AAAA;AACC,cAAc0C,QAAd,WADD;AAEC,UAAO,EAACG,OAAO,MAAR,EAAgB+E,QAAQ,MAAxB;AAFR;AAIC;AAAA;AAAA,KAAK,WAAclF,QAAd,qBAAL;AACC,2CAAC,YAAD,eACKwiB,iBADL;AAEC,wBAAoBpX,kBAFrB;AAGC,sBAAkB0X,oCAHnB;AAIC,sBAAkBG,iBAJnB;AAKC,mBAAeI,cALhB;AAMC,iBAAaI,YANd;AAOC,iBAAaN,YAPd;AAQC,eAAWI,UARZ;AASC,cAAU9jB;AATX,MADD;AAaC,2CAAC,WAAD,eACKijB,gBADL;AAEC,mBAAerX,aAFhB;AAGC,oBAAgBsY,eAHjB;AAIC,mBAAeC;AAJhB;AAbD,GAJD;AAyBC;AAAA;AAAA,KAAK,WAAc5jB,QAAd,eAAL;AACC;AAAC,yBAAD;AAAA;AACE;AAAA,SAAEG,KAAF,UAAEA,KAAF;AAAA,SAAS+E,MAAT,UAASA,MAAT;AAAA,YACA5H,wCAACuW,6BAAD;AACC,WAAKhJ;AACL;AAFD,QAGC,SAASoH,aAHV;AAIC,YAAMrI;AACN;AALD,QAMC,QAAQO;AACR;AAPD,QAQC,OAAOhK,KARR;AASC,cAAQ+E,MATT;AAUC,cAAQvK;AACR;;AAEA;AAbD,QAcC,cAAciX,aAdf;AAeC,qBAAejM,KAfhB;AAgBC,aAAOgG,cAhBR;AAiBC,oBAAclB,cAAc2C,YAAYlI,MAA1B,GAAmC,CAjBlD;AAkBC,oBAAc0G,YAlBf;AAmBC,iBAAWC,SAnBZ;AAoBC,uBAAiBnC,UAAU9D,OAAV,GAAoB,IApBtC;AAqBC,sBAAgB4L,OArBjB;AAsBC,mBAAa1F,WAtBd;AAuBC,0BAAoBE;AACpB;AAxBD,QAyBC,uBAAuBE,aAzBxB;AA0BC,oBACC1S,SAAS,UAAT,GAAsBsY,YAAtB,GAAqCtV,SA3BvC;AA6BC,gBAAUkN;AACV;AA9BD,QA+BC,iBAAiB8C,eA/BlB;AAgCC,uBAAiBjC;AACjB;AAjCD,QAkCC,cAAc+G,aAlCf;AAmCC,wBAAkBF,iBAnCnB;AAoCC,4BAAsBoB,qBApCvB;AAqCC,mBAAaE;AArCd,OADA;AAAA;AADF;AADD,GAzBD;AAsEEzF,mBAAiBV,UAAjB,IAA+B,CAACC,eAAhC,GACAlP,wCAAC,aAAD;AACC,sBAAmBoW,yBADpB;AAEC,uBAAoB9Z,QACnBQ,mBAAmBwP,KAAnB,CADmB,EAElBrD,MAFkB,CAEX,UAACvM,IAAD;AAAA,WAAUsN,iBAAiB/K,QAAjB,CAA0BvC,KAAKW,MAAL,CAA1B,CAAV;AAAA,IAFW,CAFrB;AAKC,cAAWuS;AALZ,IADA,GAQG;AA9EL,EADD;AAkFA,CAp4Ba,CAAd;;AAs4BA7D,MAAMtH,SAAN,GAAkB;AACjB;;;;AAIA;AACAgJ,UAAS/I,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,EAAoCgG,UAN5B;;AAQjB;;;;AAIAzI,OAAMwI,8BAAUgS,KAAV,CAAgB,CAAC,UAAD,EAAa,YAAb,EAA2B,WAA3B,CAAhB,EAAyD/R,UAZ9C;;AAcjB;AACAugB,oBAAmBxgB,8BAAU/F,MAfZ;;AAiBjB;AACAymB,mBAAkB1gB,8BAAU/F,MAlBX;;AAoBjB;;;;AAIA;AACAiP,cAAalJ,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAzBI;;AA2BjB;AACAkP,yBAAwBnJ,8BAAUe,OAAV,CACvBf,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUsD,MAAX,EAAmBtD,8BAAU8R,MAA7B,CAApB,CADuB,CA5BP;;AAgCjB;AACA1I,qBAAoBpJ,8BAAUsD,MAjCb;;AAmCjB;AACA+F,gBAAerJ,8BAAU/F,MApCR;;AAsCjB;AACAqP,gBAAetJ,8BAAU+R,KAAV,CAAgB;AAC9B;AACAzX,OAAK0F,8BAAUsD,MAFe;AAG9B;AACAsL,SAAO5O,8BAAUgS,KAAV,CAAgB,CAAC,KAAD,EAAQ,MAAR,CAAhB;AAJuB,EAAhB,CAvCE;;AA8CjB;;;;AAIA;AACA1L,OAAMtG,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAnDW;;AAqDd;AACAsP,UAASvJ,8BAAUqD,IAtDL;;AAwDjB;AACAc,kBAAiBnE,8BAAUe,OAAV,CAChBf,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUsD,MAAX,EAAmBtD,8BAAU8R,MAA7B,CAApB,CADgB,CAzDA;;AA6DjB;AACAtI,cAAaxJ,8BAAUsD,MA9DN;;AAgEjB;AACAiB,SAAQvE,8BAAU/F,MAjED;;AAmEjB;AACAwP,SAAQzJ,8BAAU+R,KAAV,CAAgB;AACvB;AACAzX,OAAK0F,8BAAUsD,MAFQ;AAGvB;AACAsL,SAAO5O,8BAAUgS,KAAV,CAAgB,CAAC,KAAD,EAAQ,MAAR,CAAhB;AAJgB,EAAhB,CApES;;AA2EjB;;;;AAIA;AACAoO,iBAAgBpgB,8BAAUoD,IAhFT;;AAkFjB;AACAzK,SAAQqH,8BAAUsD,MAnFD;;AAqFjB;;;;AAIA;AACAK,QAAO3D,8BAAUwG,OA1FA;;AA4FjB;AACA5C,UAAS5D,8BAAUwG,OA7FF;;AA+FjB;AACAmD,iBAAgB3J,8BAAUoD,IAhGT;;AAkGjB;AACAid,eAAcrgB,8BAAU8R,MAnGP;;AAqGjB;AACAwO,aAAYtgB,8BAAUoD,IAtGL;;AAwGd;AACAmd,eAAcvgB,8BAAU+R,KAAV,CAAgB;AAChC;AACM8P,gBAAc7hB,8BAAUsD,MAFE;AAGhC;AACMwe,cAAY9hB,8BAAUsD,MAJI;AAKhC;AACAye,aAAW/hB,8BAAUsD;AANW,EAAhB,CAzGA;;AAkHjB8H,cAAapL,8BAAU+R,KAAV,CAAgB;;AAE5B;AACA7O,UAAQlD,8BAAU8R,MAHU;;AAK5B;;AAEAnG,gBAAc3L,8BAAUe,OAAV,CAAkBf,8BAAUsD,MAA5B,CAPc;;AAS5B;AACAmM,iBAAezP,8BAAUsD,MAVG;;AAY5B;AACAoM,eAAa1P,8BAAUsD,MAbK;;AAe5B;AACAqM,cAAY3P,8BAAUsD,MAhBM;;AAkB5B;AACAsI,yBAAuB5L,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAnBK;;AAqB5B;AACA4R,2BAAyB7L,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAtBG;;AAwB5B;AACA6R,0BAAwB9L,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B;AAzBI,EAAhB,CAlHI;;AA8IjB;AACA2P,eAAc5J,8BAAU8R,MA/IP;;AAiJjB;AACAjI,YAAW7J,8BAAU8R,MAlJJ;;AAoJjB;;AAEAhI,cAAa9J,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUqD,IAAX,EAAiBrD,8BAAUwG,OAA3B,CAApB,CAtJI;;AAwJjB;AACAuD,aAAY/J,8BAAUoD,IAzJL;;AA2JjB;;;;AAIA;;AAEA8G,gBAAelK,8BAAU8R,MAjKR;;AAmKjB;AACA3H,WAAUnK,8BAAU8R,MApKH;;AAsKjB;AACA1H,kBAAiBpK,8BAAUqD,IAvKV;;AAyKd;AACAgH,mBAAkBrK,8BAAUqD,IA1Kd;;AA4KjB;AACAiH,kBAAiBtK,8BAAUsD,MA7KV;;AA+KjB;;;;AAIA;AACAiH,aAAYvK,8BAAUoD,IApLL;;AAsLjB;;;;AAIA;AACA+B,iBAAgBnF,8BAAUoD,IA3LT;;AA6LjB;AACAoH,kBAAiBxK,8BAAUsD,MA9LV;;AAgMjB;AACAmH,mBAAkBzK,8BAAUoD,IAjMX;;AAmMjB;AACAsH,iBAAgB1K,8BAAUoD,IApMT;;AAsMjB;AACAuH,kBAAiB3K,8BAAUsD,MAvMV;;AAyMjB;;;;AAIA;;AAEAsH,aAAY5K,8BAAUqD,IA/ML;;AAiNjB;;AAEAwH,mBAAkB7K,8BAAUqD,IAnNX;;AAqNjB;;AAEAyH,cAAa9K,8BAAUqD,IAvNN;;AAyNjB;;AAEA0H,uBAAsB/K,8BAAUqD,IA3Nf;;AA6NjB;;AAEA2H,uBAAsBhL,8BAAUqD,IA/Nf;;AAiOjB;;AAEA;AACA4H,gBAAejL,8BAAUoD,IApOR;;AAsOjB;;;;AAIA8H,yBAAwBlL,8BAAUoH,SAAV,CAAoB,CAC3CpH,8BAAUqD,IADiC,EAE3CrD,8BAAUsD,MAFiC,CAApB,CA1OP;;AA+OjB;AACA6H,eAAcnL,8BAAUsD,MAhPP;;AAkPjB;AACArH,YAAW+D,8BAAU/F;AAnPJ,CAAlB;;AAsPAoN,MAAM7K,YAAN,GAAqB;AACpB0M,cAAa,EADO;AAEpBC,yBAAwB,EAFJ;AAGpBC,qBAAoB,EAHA;AAIpBC,gBAAe,EAJK;AAKpBC,gBAAe,EALK;;AAOpBhD,OAAM,EAPc;AAQpBnC,kBAAiB,EARG;AASpBqF,cAAa,EATO;AAUpBjF,SAAQ,EAVY;AAWpBkF,SAAQ,EAXY;;AAapB2W,iBAAgB,IAbI;AAcpBznB,SAAQ,IAdY;;AAgBpBgL,QAAOA,KAhBa;AAiBpBC,UAASA,OAjBW;AAkBpB+F,iBAAgB,KAlBI;AAmBpB0W,eAAc,EAnBM;AAoBpBC,aAAY,KApBQ;AAqBjBC,eAAc;AACVsB,gBAAc,WADJ;AAEVC,cAAY,oBAFF;AAGVC,aAAW;AAHD,EArBG;AA0BpB3W,cAAa;AACZlI,UAAQ,EADI;AAEZyI,gBAAc,EAFF;AAGZ8D,iBAAe,WAHH;AAIZC,eAAa,oBAJD;AAKZC,cAAY,gBALA;AAMZ/D,yBAAuB,IANX;AAOZC,2BAAyB,IAPb;AAQZC,0BAAwB;AARZ,EA1BO;AAoCpBlC,eAAc,EApCM;AAqCpBC,YAAW,EArCS;AAsCpBE,aAAY,KAtCQ;;AAwCpBG,gBAAe,GAxCK;AAyCpBC,WAAU,EAzCU;AA0CpBC,kBAAiBzS,IA1CG;AA2CjB0S,mBAAkB1S,IA3CD;AA4CpB2S,kBAAiB,YA5CG;;AA8CpBC,aAAY,KA9CQ;;AAgDpBpF,iBAAgB,IAhDI;AAiDpBqF,kBAAiBhQ,SAjDG;AAkDpBiQ,mBAAkB,IAlDE;AAmDpBC,iBAAgB,KAnDI;AAoDpBC,kBAAiB,UApDG;;AAsDpBC,aAAYjT,IAtDQ;AAuDpBkT,mBAAkBlT,IAvDE;AAwDpBmT,cAAanT,IAxDO;AAyDpBoT,uBAAsBpT,IAzDF;AA0DpBqT,uBAAsBrT,IA1DF;;AA4DpBsT,gBAAe,KA5DK;;AA8DpBhP,YAAW;AA9DS,CAArB;;AAiEA,IAAMH,oBAAkB,SAAlBA,eAAkB,CAACC,KAAD,EAAQC,QAAR,EAAqB;AAAA,KACrCC,SADqC,GACxBD,QADwB,CACrCC,SADqC;;AAE5C,KAAGA,SAAH,EAAa;AAAA,MACLpC,IADK,GACSoC,SADT,CACLpC,IADK;AAAA,MACCvC,IADD,GACS2E,SADT,CACC3E,IADD;;AAEZ,MAAGuC,QAAQvC,IAAX,EACC,0BAAUuC,IAAV,EAAiBsC,+BAAWC,GAAX,CAAeL,KAAf,EAAsBzE,IAAtB,CAAjB;AACD;;AAED,QAAO,EAAP;AACA,CATD;AAUA,IAAMgF,uBAAqB,SAArBA,kBAAqB,CAACpB,QAAD;AAAA,QAC1BqB,yBAAmB,EAAElF,cAAcA,YAAhB,EAAnB,EAAkD6D,QAAlD,CAD0B;AAAA,CAA3B;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA,cAAe0B,mBAAQd,iBAAR,EAAyBQ,oBAAzB,EAA6C,IAA7C,EAAmD,EAAEgL,YAAY,IAAd,EAAnD,EAAyED,KAAzE,CAAf;;ICrvCO2a,4CAAAA;;;AAEP,IAAMlO,SAAS,SAATA,MAAS,CAACjX,KAAD,EAAW;AAAA,iBACsBtB,eAAS,EAAT,CADtB;AAAA;AAAA,KAClB+J,gBADkB;AAAA,KACAwC,kBADA;;AAAA,kBAEuBvM,eAAS,IAAT,CAFvB;AAAA;AAAA,KAElB0mB,gBAFkB;AAAA,KAEAC,mBAFA;;AAAA,kBAGmB3mB,eAAS,KAAT,CAHnB;AAAA;AAAA,KAGlB4mB,cAHkB;AAAA,KAGFC,iBAHE;;AAAA,kBAIqB7mB,eAAS,KAAT,CAJrB;AAAA;AAAA,KAIlB8mB,eAJkB;AAAA,KAIDC,kBAJC;;AAAA,KAOxBzoB,IAPwB,GAkCrBgD,KAlCqB,CAOxBhD,IAPwB;AAAA,KAQxBoN,SARwB,GAkCrBpK,KAlCqB,CAQxBoK,SARwB;AAAA,KASlBvH,SATkB,GAkCrB7C,KAlCqB,CASlB6C,SATkB;AAAA,KAUxBlI,IAVwB,GAkCrBqF,KAlCqB,CAUxBrF,IAVwB;AAAA,KAWxBwb,KAXwB,GAkCrBnW,KAlCqB,CAWxBmW,KAXwB;AAAA,KAYxBkI,WAZwB,GAkCrBre,KAlCqB,CAYxBqe,WAZwB;AAAA,KAalB/W,eAbkB,GAkCrBtH,KAlCqB,CAalBsH,eAbkB;AAAA,KAelBuK,IAfkB,GAkCrB7R,KAlCqB,CAelB6R,IAfkB;AAAA,KAgBxBuF,YAhBwB,GAkCrBpX,KAlCqB,CAgBxBoX,YAhBwB;AAAA,KAiBxBsO,UAjBwB,GAkCrB1lB,KAlCqB,CAiBxB0lB,UAjBwB;AAAA,KAkBxBC,WAlBwB,GAkCrB3lB,KAlCqB,CAkBxB2lB,WAlBwB;AAAA,KAoBxBC,YApBwB,GAkCrB5lB,KAlCqB,CAoBxB4lB,YApBwB;AAAA,KAkCrB5lB,KAlCqB,CAqBlBoiB,YArBkB;AAAA,KAkCrBpiB,KAlCqB,CAsBlB3D,KAtBkB;AAAA,SAyBxBiQ,sBAzBwB,GAkCrBtM,KAlCqB,CAyBxBsM,sBAzBwB;AAAA,KA0BxBxQ,MA1BwB,GAkCrBkE,KAlCqB,CA0BxBlE,MA1BwB;AAAA,KA2BxB6R,eA3BwB,GAkCrB3N,KAlCqB,CA2BxB2N,eA3BwB;AAAA,KA4BxBS,aA5BwB,GAkCrBpO,KAlCqB,CA4BxBoO,aA5BwB;AAAA,KA6BxBb,eA7BwB,GAkCrBvN,KAlCqB,CA6BxBuN,eA7BwB;AAAA,KA8BxBsY,kBA9BwB,GAkCrB7lB,KAlCqB,CA8BxB6lB,kBA9BwB;AAAA,KA+BlBlC,iBA/BkB,GAkCrB3jB,KAlCqB,CA+BlB2jB,iBA/BkB;AAAA,KAgCxBla,IAhCwB,GAkCrBzJ,KAlCqB,CAgCxByJ,IAhCwB;AAAA,KAiCxB6E,YAjCwB,GAkCrBtO,KAlCqB,CAiCxBsO;;;AAGD,KAAME,uBAAuBF,gBAAmBA,YAAnB,cAA7B;AACA,KAAMwX,aAAanC,qBAAqBA,kBAAkB7U,YAAvC,IAAuD6U,kBAAkB7U,YAAlB,CAA+BpR,QAA/B,CAAwC,QAAxC,CAA1E;AACA,KAAMzB,OAAOgQ,aAAO,IAAP,CAAb;;AAEA,KAAM8Z,qBAAqB,SAArBA,kBAAqB,CAAC1d,OAAD,EAAa;AACvCmG,0BAAwBxO,MAAMxF,YAA9B,IAA8CwF,MAAMxF,YAAN,CAAmBgU,oBAAnB,EAAyCnG,OAAzC,CAA9C;AACAgd,sBAAoBhd,OAApB;AACA,EAHD;;AAKA,KAAM2d,qBAAqB,SAArBA,kBAAqB,OAAuB;AAAA,MAArB1e,eAAqB,QAArBA,eAAqB;;AAC3C,MAAGA,eAAH,EAAoB;AAChB,OAAImB,0BAAJ;AACT,OAAGpN,MAAMC,OAAN,CAAcgM,eAAd,CAAH,EAAmC;AAClC2D,uBAAmB3D,eAAnB;AACAmB,wBAAmBnB,eAAnB;AACA,IAHD,MAIc;AACJ2D,uBAAmB,CAAC3D,eAAD,CAAnB;AACTmB,wBAAmB,CAACnB,eAAD,CAAnB;AACA;;AAED;;AAEA,OAAM2e,UAAUJ,qBACDA,kBADC,GAEDtY,eAFf;;AAIS,OAAI,CAAC,CAAC0Y,OAAF,IAAa,CAACxc,IAAd,IAAsBhB,kBAAiB7M,MAAjB,GAA0B,CAApD,EAAuD;AACnD;AACAqqB,YAAQ;AACJzqB,8BACKM,MADL,EACe2M,iBADf;AADI,KAAR,EAKK3C,IALL,CAKU,UAAC/H,QAAD,EAAc;AAChB,SAAIxB,SAASwB,SAASvC,IAAtB;AAClB;AACA,SAAIe,OAAOX,MAAP,GAAgB,CAApB,EAAuBmqB,mBAAmBxpB,OAAO,CAAP,CAAnB;AACR,KATL,EAUVyJ,KAVU,CAUJ;AAAA,YAASpI,kBAAkBC,KAAlB,EAAyB,iCAAzB,CAAT;AAAA,KAVI;AAYH,IAdD,MAcO,IAAI4L,QAAQhB,iBAAR,IAA4B9N,SAAS,cAAzC,EAAyD;AAC/D,QAAIurB,MAAMzd,kBAAiB,CAAjB,CAAV;AACT;AACA;AACS;AACT;;AAEY,QAAM0d,UAAU1c,KAAKwM,IAAL,CAAU,UAACvb,GAAD;AAAA,YAASA,IAAIoB,MAAJ,MAAgBoqB,GAAzB;AAAA,KAAV,CAAhB;AACA;AACAH,uBAAmBI,OAAnB;AACH,IAVM,MAUA;AACHJ,uBAAmB,IAAnB;AACH;AACJ;AACP,EA9CD;;AAgDAlnB,iBAAU,YAAM;AACTmnB,qBAAmB,EAAC1e,iBAAiBgF,sBAAlB,EAAnB;AACN8Z,SAAOC,gBAAP,CAAwB,WAAxB,EAAqCC,gBAArC,EAAuD,KAAvD;AACA,SAAO,YAAM;AACZF,UAAOG,mBAAP,CAA2B,WAA3B,EAAwCD,gBAAxC,EAA0D,KAA1D;AACA,GAFD;AAGA,EAND,EAMG,EANH;;AAQAznB,iBAAU,YAAM;AACf;AACMmnB,qBAAmB,EAAC1e,iBAAiBA,eAAlB,EAAnB;AACH,EAHJ,EAGM,CAACA,eAAD,CAHN;;AAKAzI,iBAAU,YAAM;AACf,MAAG4J,qBAAqB9K,SAArB,IAAkCynB,qBAAqBznB,SAA1D,EAAoE;AACnE;AACAqoB,sBAAmB,EAAC1e,iBAAiBmB,gBAAlB,EAAnB;AACA;AACD,EALD,EAKG,CAACgB,IAAD,CALH;;AAOA5K,iBAAU,YAAM;AACf;AACA;AACA,MAAG,CAAC2mB,eAAD,IAAoBF,cAAvB,EACCkB;AACD,EALD,EAKG,CAAChB,eAAD,CALH;;AAOA;AACA;AACA;;AAEA,KAAMtZ,UAAU,CACf;AACCzO,OAAK3B,MADN;AAECqa,SAAOA,KAFR;AAGCC,WAASta,MAHV;AAICwF,SAAO,GAJR;AAKCiS,gBACC,OAAOnJ,SAAP,KAAqB,UAArB,GACGA,SADH,GAEG;AAAA,OAAE/B,OAAF,SAAEA,OAAF;AAAA,UAAe5J;AAAA;AAAA,MAAK,WAAW,eAAhB;AAAkC4J,YAAQ+B,SAAR;AAAlC,IAAf;AAAA;AARL,EADe,CAAhB;;AAaA,KAAMqc,cAAc,SAAdA,WAAc,GAAM;AACtB,MAAInkB,MAAM,CAAInB,QAAJ,oBAAV;;AAEA,MAAGmkB,cAAH,EACOhjB,IAAIE,IAAJ,CAAS,QAAT;;AAEP,MAAGiG,oBAAoBA,iBAAiB7M,MAAjB,GAA0B,CAAjD,EACI0G,IAAIE,IAAJ,CAAS,UAAT;;AAEJ,UAAQqP,IAAR;AACO,QAAK,OAAL;AACIvP,QAAIE,IAAJ,CAAYrB,QAAZ;AACA;AACJ,QAAK,OAAL;AACImB,QAAIE,IAAJ,CAAYrB,QAAZ;AACA;AANX;;AAUA,SAAOmB,IAAII,IAAJ,CAAS,GAAT,CAAP;AACA,EApBJ;;AAsBA,KAAMgkB,eAAe,SAAfA,YAAe,GAAM;AAC1B,MAAI/rB,SAAS,cAAb,EAA6B;AAC3B,OAAGyqB,gBAAH;AACC,QAAG,OAAOhb,SAAP,KAAqB,UAAxB,EACC,OAAOA,UAAU,EAAC/B,SAAS+c,gBAAV,EAAV,CAAP,CADD,KAGC,YAAUA,iBAAiBhb,SAAjB,CAAV;AAJF,UAMC,YAAUiU,WAAV;AACF,GARD,MAQO;AACN,UAAO5V,iBAAiB7M,MAAjB,GAA0B,CAA1B,oDACQ6M,iBAAiB7M,MADzB,QAEDyiB,WAFN;AAGA;AACD,EAdD;;AAgBG,KAAMsI,eAAe,SAAfA,YAAe,GAAM;AAC1B;AACG,MAAIrkB,MAAM,CAAInB,QAAJ,mBAAV;;AAEA,MAAGgV,KAAH,EACI7T,IAAIE,IAAJ,CAAYrB,QAAZ;;AAEJ,SAAOmB,IAAII,IAAJ,CAAS,GAAT,CAAP;AACH,EARD;AASH,KAAMkkB,iBAAiB,SAAjBA,cAAiB,GAAM;AAC5B;AACA;;AAEA,MAAIvgB,SAAS,EAAb;AACA,MAAIwgB,aAAa,CAAjB;;AAEA,MAAI,CAACtZ,eAAD,IAAoB9D,IAAxB,EACC,IAAIkE,eAAJ,EACCkZ,aAAa9rB,QAAQc,gBAAgB4N,IAAhB,EAAsB3N,MAAtB,CAAR,EAAuCF,MAApD,CADD,KAEKirB,aAAapd,KAAK7N,MAAlB;;AAEN;AACA,MAAIirB,cAAcA,aAAa,CAA/B,EAAkC;AACjCxgB,YACCwgB,aAAa,EAAb;AACCf,gBAAa,EAAb,GAAkB,CADnB;AAECnrB,YAAS,aAAT,GAAyB,EAAzB,GAA8B,CAF/B;AAGCyT,mBAAgB,GAAhB,GAAsB,CAHvB;AAIA,KALD,CADiC;AAOjC;AACA,OAAI/H,SAASsf,WAAb,EAA0Btf,SAAYsf,WAAZ,QAA1B,KACKtf,SAAYA,MAAZ;AACL,GAVD,MAUO;AACN;AACAA,YAAYsf,WAAZ;AACA;;AAED;AACA,SAAO,EAACtf,cAAD,EAAS/E,OAAUokB,UAAV,OAAT,EAAP;AACA,EA9BD;;AAgCA,KAAMoB,YAAY,SAAZA,SAAY,GAAM;AACvB,SAAQnD,qBAAqBA,kBAAkBoD,cAAvC,IAAyDxpB,OAAON,IAAP,CAAY0mB,kBAAkBoD,cAA9B,CAA1D,IAA4G,EAAnH;AACA,EAFD;;AAIA,KAAM9N,YAAY,SAAZA,SAAY,CAACtI,YAAD,EAAkB;AACnC;AACA1F,qBAAmB0F,YAAnB;AACA;AACAiV,eAAa5oB,IAAb,EAAmB2T,aAAa/U,MAAb,GAAsB+U,YAAtB,GAAqC,IAAxD;AACA;AACA;AACA,MAAIhW,SAAS,cAAb,EAA6B;AAC5B4qB,qBAAkB,KAAlB;AACA;AACD,EAVD;;AAYA,KAAMyB,mBAAmB,SAAnBA,gBAAmB,QAAmC;AAAA,QAAjClf,QAAiC;AAAA,UAAvBO,OAAuB,SAAvBA,OAAuB;AAAA,YAAdmB;;AAC7C;AACAuc,qBAAmB1d,OAAnB;AACA;AACA,EAJD;;AAMA,KAAMie,mBAAmB,SAAnBA,gBAAmB,CAACxlB,CAAD,EAAO;AAC/B7E,UAAQA,KAAKuT,OAAb,IAAwBiW,mBAAmBxpB,KAAKuT,OAAL,CAAayX,QAAb,CAAsBnmB,EAAE+X,MAAxB,CAAnB,CAAxB;AACA,EAFD;;AAIA,KAAM2N,eAAgB,SAAhBA,YAAgB,GAAM;AAC3BjB,oBAAkB,KAAlB;AACA,EAFD;;AAIA,KAAM2B,cAAc,SAAdA,WAAc,GAAM;AACzB,MAAG,CAAC5B,cAAJ,EACCC,kBAAkB,IAAlB,EADD,KAGCA,kBAAkB,KAAlB;AACD,EALD;;AAOA,KAAM4B,eAAe,SAAfA,YAAe,GAAM;AAC1B;AACApB,qBAAmB,IAAnB;AACA9M,YAAU,EAAV;AACA,EAJD;;AAMA,QACCxa;AAAA;AAAA;AACU,cAAc0C,QAAd,iBAAiC0B,YAAYA,SAAZ,GAAwB,EAAzD,CADV;AAEC,QAAK5G;AAFN;AAIEka,UAAQ1X;AAAA;AAAA,KAAK,WAAW,OAAhB;AAA0B0X;AAA1B,GAAR,GAAiD,IAJnD;AAKC;AAAA;AAAA;AACC,eAAWsQ,aADZ;AAEC,WAAO;AACNnlB,YAAO8V,iBAAiB,CAAjB,GAAqB,MAArB,GAAiCA,YAAjC;AADD;;AAFR;AAOC;AAAA;AAAA,MAAK,WAAcjW,QAAd;AACH;AADF,OAEE,SAAU+lB;AAFZ;AAIC;AAAC,cAAD;AAAA,OAAW,cAAX;AAAA;AAAsBR,mBAAtB;AAAA;AAAA;AAJD,IAPD;AAacpB,oBAAiB7mB,wCAAC2oB,gBAAD,IAAY,SAAUF,WAAtB,EAAoC,WAAc/lB,QAAd,wBAApC,GAAjB,GAAuG1C,wCAAC4oB,kBAAD,IAAc,SAAUH,WAAxB,EAAsC,WAAc/lB,QAAd,wBAAtC,GAbrH;AAeEsH,oBAAiB7M,MAAjB,GAA0B,CAA1B,GAA8B6C,wCAAC6oB,uBAAD,IAAmB,SAASH,YAA5B,EAA0C,WAAchmB,QAAd,yBAA1C,GAA9B,GAA0H;AAf5H,GALD;AAuBEmkB,mBACA7mB;AAAA;AAAA,KAAK,WAAWkoB,cAAhB,EAAgC,OAAOC,gBAAvC;AACC,2CAACpc,OAAD,eACKxK,KADL;AAEC,oCACIA,MAAM2jB,iBADV;AAEC7U,mBAAcgY,WAFf;AAAA,MAFD;AAMC,4BAAwBre,gBANzB;AAOmB,qBAAiBA,gBAPpC;AAQC,kBAAc,CARf;AASC,aAASyD,OATV;AAUC,UAAM,CAAC,CAACqB,eAAF,GAAoB,YAApB,GAAmC;AACzC;AAXD,MAYC,YAAY5S,SAAS,aAZtB;AAaC,gBAAYA,SAAS,aAbtB;AAcC,mBAAeyT,aAdhB;AAeC,4BAAwBhE,SAfzB;AAgBC,gBAAY4c,gBAhBb;AAiBC,0BAAsB/N;AAjBvB,MADD;AAoBEte,YAAS,aAAT,GACA8D;AAAA;AAAA,MAAK,WAAW,aAAhB;AACC;AAAA;AAAA;AACC,eAAS;AAAA,cAAM8mB,kBAAkB,KAAlB,CAAN;AAAA,OADV;AAEC,YAAM;AAFP;AAAA;AAAA;AADD,IADA,GASG;AA7BL,GADA,GAgCG;AAvDL,EADD;AA2DA,CA9TD;;AAgUAtO,OAAO/T,SAAP,GAAmB;AAClB;AACAlG,OAAMmG,8BAAUoH,SAAV,CAAoB,CACzBpH,8BAAUsD,MADe,EAEzBtD,8BAAU8R,MAFe,EAGzB9R,8BAAUe,OAAV,CACCf,8BAAUoH,SAAV,CACC,CAACpH,8BAAUsD,MAAX,EAAmBtD,8BAAU8R,MAA7B,CADD,CADD,CAHyB,CAApB,EAOD7R,UATa;;AAWlB;;;;AAIAgH,YAAWjH,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUqD,IAAX,EAAiBrD,8BAAUsD,MAA3B,CAApB,EACTrD,UAhBgB;;AAkBlB;AACAzI,OAAMwI,8BAAUgS,KAAV,CAAgB,CAAC,cAAD,EAAiB,aAAjB,CAAhB,EAAiD/R,UAnBrC;;AAqBf;AACAP,YAAWM,8BAAUsD,MAtBN;;AAwBlB;AACA0P,QAAOhT,8BAAUsD,MAzBC;;AA2BlB;AACA4X,cAAalb,8BAAUsD,MA5BL;;AA8BlB;AACAof,qBAAoB1iB,8BAAUqD,IA/BZ;;AAiCf;AACAc,kBAAiBnE,8BAAUe,OAAV,CACbf,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUsD,MAAX,EAAmBtD,8BAAU8R,MAA7B,CAApB,CADa,CAlCF;;AAsCf;AACApD,OAAM1O,8BAAUgS,KAAV,CAAgB,CAAC,OAAD,EAAU,QAAV,EAAoB,OAApB,CAAhB,CAvCS;;AAyClB;AACA;;AAEA;AACAiC,eAAcjU,8BAAU8R,MA7CN;;AA+ClB;AACAyQ,aAAYviB,8BAAU8R,MAhDJ;;AAkDlB;AACA0Q,cAAaxiB,8BAAU8R,MAnDL;;AAqDf;AACH2Q,eAAcziB,8BAAUqD,IAtDN;;AAwDlB;AACA1K,SAAQqH,8BAAUsD,MAzDA;;AA2DlB;AACAuG,YAAW7J,8BAAU8R,MA5DH;;AA8DlB;AACA/H,aAAY/J,8BAAUoD,IA/DJ;;AAiElB;AACAgH,kBAAiBpK,8BAAUqD,IAlET;;AAoElB;AACAgH,mBAAkBrK,8BAAUqD,IArEV;;AAuElB;AACAmG,cAAaxJ,8BAAUsD,MAxEL;;AA0ElB;AACAgH,kBAAiBtK,8BAAUsD,MA3ET;;AA6ElB;AACA6B,iBAAgBnF,8BAAUoD,IA9ER;;AAgFlB;AACAoH,kBAAiBxK,8BAAUsD,MAjFT;;AAmFlB;AACAmH,mBAAkBzK,8BAAUoD,IApFV;;AAsFlB;AACAsH,iBAAgB1K,8BAAUoD,IAvFR;;AAyFlB;AACAuH,kBAAiB3K,8BAAUsD;AA1FT,CAAnB;;AA6FAwQ,OAAOtX,YAAP,GAAsB;AACrBimB,eAAc9qB,IADO;AAErB;AACAujB,cAAa,SAHQ;AAIrB;AACGxM,OAAM,QALY;AAMrBuF,eAAc,GANO;AAOrBsO,aAAY,GAPS;AAQrBC,cAAa,GARQ;AASlB7pB,SAAQ,IATU;AAUrBkR,YAAW,EAVU;AAWrBE,aAAY,KAXS;;AAarB2Y,qBAAoBloB,SAbC;AAcrB4P,kBAAiB5P,SAdI;AAerB6P,mBAAkB7P,SAfG;AAgBrBgP,cAAa,EAhBQ;AAiBrBc,kBAAiB,YAjBI;;AAmBrBnF,iBAAgB,IAnBK;AAoBrBqF,kBAAiBhQ,SApBI;AAqBrBiQ,mBAAkB,IArBG;AAsBrBC,iBAAgB,KAtBK;AAuBrBC,kBAAiB;AAvBI,CAAtB;AAyBA,IAAMrO,uBAAqB,SAArBA,kBAAqB,CAACpB,QAAD;AAAA,QAC1BqB,yBAAmB,EAAElF,cAAcA,YAAhB,EAAnB,EAAkD6D,QAAlD,CAD0B;AAAA,CAA3B;;AAGA,eAAe0B,mBAAQ,IAAR,EAAcN,oBAAd,EAAkCwX,MAAlC,CAAf;;;;IC/bMsQ,gBAAgB9c,iBAAW,UAACzK,KAAD,EAAQ0K,GAAR,EAAgB;AAAA,iBACpBhM,eAAS,EAAT,CADoB;AAAA;AAAA,KACzCoX,MADyC;AAAA,KACjC0R,SADiC;;AAAA,KAI/CC,UAJ+C,GAa5CznB,KAb4C,CAI/CynB,UAJ+C;AAAA,KAKzCrS,iBALyC,GAa5CpV,KAb4C,CAKzCoV,iBALyC;AAAA,KAM/C5I,aAN+C,GAa5CxM,KAb4C,CAM/CwM,aAN+C;AAAA,KAO/CmB,eAP+C,GAa5C3N,KAb4C,CAO/C2N,eAP+C;AAAA,KAQ/CE,cAR+C,GAa5C7N,KAb4C,CAQ/C6N,cAR+C;AAAA,KAS/CC,eAT+C,GAa5C9N,KAb4C,CAS/C8N,eAT+C;AAAA,KAU/CR,QAV+C,GAa5CtN,KAb4C,CAU/CsN,QAV+C;AAAA,KAW/CxR,MAX+C,GAa5CkE,KAb4C,CAW/ClE,MAX+C;AAAA,KAY/CwZ,iBAZ+C,GAa5CtV,KAb4C,CAY/CsV,iBAZ+C;;;AAehDzW,iBAAU,YAAM;AACT,MAAI6W,kBAAkB,KAAtB;AACA,MAAMC;AAAA,qEAAW;AAAA;AAAA;AAAA;AAAA;AACb,YAAIL,iBAAJ,EAAuB;AACnB;AACA;AACAA,6BACKxP,IADL,CACU,UAAC/H,QAAD,EAAc;AAChB;AACA;AACA,cAAG,CAAC2X,eAAJ,EACI8R,UAAUzpB,SAASvC,IAAnB;AACP,UANL,EAOKwK,KAPL,CAOW;AAAA,iBAASpI,kBAAkBC,KAAlB,EAAyB,+BAAzB,CAAT;AAAA,UAPX;AAQH,SAXD,MAWO;AACH,aAAG,CAAC6X,eAAJ,EACI8R,UAAUC,UAAV;AACP;;AAfY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAX;;AAAA;AAAA;AAAA;AAAA,KAAN;AAiBA9R;AACA,SAAO;AAAA,UAAMD,kBAAkB,IAAxB;AAAA,GAAP;AACN,EArBD,EAqBG,EArBH;;AAuBA,KAAMgS,kBAAkB,SAAlBA,eAAkB;AAAA,SACvB5R,UACAA,OAAOjS,MADP,IAEAiS,OAAOjS,MAAP,CAAcnI,GAAd,CAAkB,UAACP,IAAD,EAAU;;AAE3B,OAAM6a,WACOZ,qBACAA,kBAAkBa,IAAlB,CACI,UAACjU,MAAD;AAAA,WACIA,OAAOhF,IAAP,KAAgB7B,KAAK6B,IAArB,IAA6BgF,OAAOhF,IAAP,KAAgB7B,KAAK+a,KADtD;AAAA,IADJ,CAFb;AAMA;AACCzY,SAAKtC,KAAK6B,IADX;AAECmZ,WAAOhb,KAAKkJ,MAAL,GAAclJ,KAAKkJ,MAAnB,GAA4BlJ,KAAK6B,IAFzC;AAGCoZ,aAASjb,KAAK+a,KAAL,GAAa/a,KAAK+a,KAAlB,GAA0B/a,KAAK6B,IAHzC;AAICqZ,WAAOlb,KAAKkb,KAJb;AAKC/U,WAAOnG,KAAKmG,KALb;AAMCmS,eAAWtY,KAAKsY,SANjB;AAOC6C,cAAUnb,KAAKmb,QAPhB;AAQCC,YAAQ,CAACpb,KAAKqb;AARf,MAUgBR,QAVhB;AAWazC,kBAAc,sBAACnW,MAAD,EAAY;AACrC,SAAI4Y,YAAYA,SAASzC,YAAzB,EACC,OAAO9U,wCAAC,QAAD,CAAU,YAAV,EAA2BrB,MAA3B,CAAP;AACD;AAFA,UAIC,OAAOA,OAAOsZ,QAAP,GACJjY;AAAA,uCAAY,IAAZ;AAAA,SAAiB,UAAU,IAA3B,EAAiC,OAAO,EAAC6C,OAAO,MAAR,EAAxC,EAAyD,WAAW,eAApE;AAAsFlE,cAAOsZ;AAA7F,OADI,GAEJjY;AAAA,uCAAY,IAAZ;AAAA,SAAiB,UAAU,IAA3B,EAAiC,OAAO,EAAC6C,OAAO,MAAR,EAAxC,EAAyD,WAAW,eAApE;AAAA;AAAA,OAFH;AAGD;AACY;AApBd;AAsBA,GA9BD,CAHuB;AAAA,EAAxB;;AAmCA,KAAMqmB,mBAAmB,SAAnBA,gBAAmB,GAAM;AAC9B,MAAI7R,UAAUA,OAAOc,YAAjB,IAAiCd,OAAOe,iBAA5C,EAA+D;AAC9D,OAAM3O,YAAY4N,OAAOgB,cAAP,GACfhB,OAAOgB,cAAP,CAAsBC,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CADe,GAEfjJ,eAFH;AAGA,uBAAWtB,aAAX,qBAA2BtE,SAA3B,EAAuC,IAAvC;AACA,GALD,MAKO,OAAOsE,aAAP;AACP,EAPD;;AASA,KAAIsJ,UAAUA,OAAOjS,MAArB,EAA6B;AAC5B;AACA,SACCpF,wCAAC+L,OAAD,eACKxK,KADL;AAEC,QAAK0K,GAFN;AAGC,YAASgd,iBAHV;AAIC,kBAAeC,kBAJhB;AAKC,WACC7R,UAAUA,OAAOc,YAAjB,IAAiCd,OAAOgB,cAAxC,GACGhB,OAAOgB,cAAP,CAAsBC,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CADH,GAEGjb,MARL;AAUC,oBACCga,UAAUA,OAAOc,YAAjB,IAAiCd,OAAOgB,cAAxC,GACGhB,OAAOgB,cAAP,CAAsBC,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,CADH,GAEGjJ,eAbL;AAeC,oBACCgI,UAAUA,OAAOc,YAAjB,IAAiCd,OAAOkB,aAAxC,GACGlB,OAAOkB,aADV,GAEGrJ,eAlBL;AAoBC,mBACCmI,UAAUA,OAAOc,YAAjB,IAAiCd,OAAOe,iBAAxC,GACGf,OAAOe,iBADV,GAEGhJ,cAvBL;AAyBC,aAAUiI,UAAUA,OAAOc,YAAjB,GAAgC,CAAhC,GAAoCtJ;AAzB/C,KADD;AA6BA,EA/BD,MA+BO,OAAO,IAAP;AACP,CAlHqB;;AAoHtBia,cAAcrkB,SAAd,GAA0B;AACzB;AACAoS,oBAAmBnS,8BAAUqD,IAFJ;;AAIzB;AACAihB,aAAYtkB,8BAAU+R,KAAV,CAAgB;AAC3B0B,gBAAczT,8BAAUoD,IADG;AAE3BuQ,kBAAgB3T,8BAAUsD,MAFC;AAG3BuQ,iBAAe7T,8BAAUsD,MAHE;AAI3BoQ,qBAAmB1T,8BAAUoD,IAJF;AAK3B1C,UAAQV,8BAAUe,OAAV,CACPf,8BAAU+R,KAAV,CAAgB;AACflY,SAAMmG,8BAAUsD,MADD;AAEfyP,UAAO/S,8BAAUsD,MAFF;AAGfpC,WAAQlB,8BAAUsD,MAHH;AAIf+P,YAASrT,8BAAUoD,IAJJ;AAKfkN,cAAWtQ,8BAAUoD,IALN;AAMf+P,aAAUnT,8BAAUoD,IANL;AAOf8P,UAAOlT,8BAAUgS,KAAV,CAAgB,CAAC,MAAD,EAAS,QAAT,EAAmB,OAAnB,CAAhB,CAPQ;AAQf7T,UAAO6B,8BAAU8R;AARF,GAAhB,CADO;AALmB,EAAhB,CALa;;AAwBzB;AACGG,oBAAmBjS,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B;AAzBG,CAA1B;;AA4BAmqB,cAAc5nB,YAAd,GAA6B,EAA7B;;AC/IA,IAAMS,iBAAe,CAAC,WAAD,EAAc,YAAd,EAA4B,QAA5B,EAAsC,MAAtC,EAA8C,QAA9C,EAAwD,cAAxD,EAAwE,cAAxE,EAAwF,iBAAxF,EAA2G,gBAA3G,EAA6H,uBAA7H,CAArB;;IAGM+D,OAAO,SAAPA,IAAO,CAACnE,KAAD,EAAW;AAAA,QACZoE,YADY,GAEyDpE,KAFzD,CACZoE,YADY;AAAA,QACEC,MADF,GAEyDrE,KAFzD,CACEqE,MADF;AAAA,QACUC,IADV,GAEyDtE,KAFzD,CACUsE,IADV;AAAA,QACgBC,MADhB,GAEyDvE,KAFzD,CACgBuE,MADhB;AAAA,QAEhBC,YAFgB,GAEyDxE,KAFzD,CAEhBwE,YAFgB;AAAA,QAEFC,eAFE,GAEyDzE,KAFzD,CAEFyE,eAFE;AAAA,QAEeC,cAFf,GAEyD1E,KAFzD,CAEe0E,cAFf;AAAA,QAE+BC,qBAF/B,GAEyD3E,KAFzD,CAE+B2E,qBAF/B;;AAIpB;;AAJoB,oBAKQjG,eAAS,KAAT,CALR;AAAA;AAAA,QAKbkG,MALa;AAAA,QAKLC,SALK;;AAAA,qBAMoBnG,eAAS,EAAT,CANpB;AAAA;AAAA,QAMboG,YANa;AAAA,QAMCC,eAND;;AAAA,qBAOoBrG,eAAS,EAAT,CAPpB;AAAA;AAAA,QAObsG,YAPa;AAAA,QAOCC,eAPD;;AASpBpG,oBAAU,YAAM;AACZ,YAAI,CAAC+F,MAAL,EAAa;AACT,gBAAIR,iBAAiBtJ,IAArB,EACIsJ,aAAac,gBAAb,EADJ,KAGIL,UAAU,IAAV;AACP;AACJ,KAPD,EAOG,CAACD,MAAD,CAPH;;AASA/F,oBAAU,YAAM;AACZkG,wBAAgB5H,uBAAuB6C,KAAvB,EAA8BI,cAA9B,CAAhB;AACA;AACH,KAHD,EAGG,CAACJ,KAAD,CAHH;;AAMA,QAAMkF,mBAAmB,SAAnBA,gBAAmB,CAAC1J,IAAD,EAAU;AAC/B;AACAyJ,wBAAgBzJ,IAAhB;AACAqJ,kBAAU,IAAV;AACH,KAJD;;AAOA,QAAIM,gBAAJ;AACA,QAAInF,SAASA,MAAMoF,IAAnB,EAAyB;AACrBD,kBAAUnF,MAAMoF,IAAhB;AACH,KAFD,MAEO;AAAA,+BACYC,0BAAQC,OAAR,EADZ;AAAA;AAAA,YACIF,IADJ;;AAEHD,kBAAUC,IAAV;AACH;;AAED,QAAMG,aAAa,SAAbA,UAAa,GAAM;AACrB,YAAIjD,MAAM,CAAInB,QAAJ,gBAAV;AACAnB,cAAMuC,SAAN,IAAmBD,IAAIE,IAAJ,CAAYrB,QAAZ,2BAAnB;AACAnB,cAAMyC,UAAN,IAAoBH,IAAIE,IAAJ,CAAYrB,QAAZ,2BAApB;AACA,eAAOmB,IAAII,IAAJ,CAAS,GAAT,CAAP;AACH,KALD;;AAOA,QAAM8C,WAAW,SAAXA,QAAW,CAACC,SAAD,EAAe;AAC5B,YAAMC,SAASf,wBAAwBA,sBAAsBc,SAAtB,CAAxB,GAA2DA,SAA1E;AACAzH,gBAAQ4H,GAAR,qBAA6B5F,MAAMhD,IAAN,GAAagD,MAAMhD,IAAnB,GAA0B,cAAvD,WAA4E0I,MAA5E;AACA,YAAIlB,gBAAgBC,eAApB,EAAqC;AACjC,gBAAMkB,0BACCX,YADD,EAECU,MAFD,CAAN;AAKAjB,4BAAgB;AACZoB,wBAAQnB,cADI;AAEZlJ,sBAAMmK;AAFM,aAAhB,EAIKG,IAJL,CAIU,oBAAY;AACd,kDAAaC,OAAb,CAAqB;AACjBjI,6BAAS;AADQ,iBAArB;AAGA,oBAAIkC,MAAMwF,QAAV,EACIxF,MAAMwF,QAAN,CAAeE,MAAf;AACP,aAVL,EAWKM,KAXL,CAWW;AAAA,uBAASpI,kBAAkBC,KAAlB,EAAyB,uBAAzB,CAAT;AAAA,aAXX;AAYH,SAlBD,MAkBO,IAAImC,MAAMwF,QAAV,EACHxF,MAAMwF,QAAN,CAAeE,MAAf;AACP,KAvBD;;AAyBA,QAAMO,iBAAiB,SAAjBA,cAAiB,YAAa;AAChCjI,gBAAQH,KAAR,CAAc,SAAd,EAAyBqI,SAAzB;AACAlG,cAAMiG,cAAN,IAAwBjG,MAAMiG,cAAN,CAAqBC,SAArB,CAAxB;AACH,KAHD;;AAKA,WACIzH;AAAC,iCAAD,CAAO,QAAP;AAAA;AACKmG,iBACGnG;AAAA;AAAA;AACI,sBAAM0G;AADV,eAEQL,YAFR;AAGI,2BAAcA,aAAajC,SAA3B,SAAwC1B,QAAxC,UAHJ;AAII,oCAAY2D,aAAazD,KAAzB,IAAgCC,OAAO,MAAvC,EAA+C+E,QAAQ,MAAvD,GAJJ;AAKI,4CAAoBvB,aAAawB,aAAjC,EAAmDtB,YAAnD,CALJ;AAMI,0BAAUQ,QANd;AAOI,gCAAgBS;AAPpB;AASK5B,qBAAS5F;AAAA;AAAA,kBAAK,WAAc0C,QAAd,iBAAL;AAA2C,wDAAC,SAAD,IAAW,OAAOkD,MAAlB;AAA3C,aAAT,GAAwF,IAT7F;AAUI;AAAA;AAAA,kBAAK,WAAWkB,YAAhB;AAA8B,wDAAC,SAAD,IAAW,OAAOjB,IAAlB;AAA9B,aAVJ;AAWKC,qBAAS9F;AAAA;AAAA,kBAAK,WAAc0C,QAAd,iBAAL;AAA2C,wDAAC,SAAD,IAAW,OAAOoD,MAAlB;AAA3C,aAAT,GAAwF;AAX7F,SADH,GAcK;AAfV,KADJ;AAmBH;;AAEDJ,KAAKjB,SAAL,GAAiB;;AAEb;AACAX,eAAWY,8BAAUoD,IAHR;;AAKb;;AAEA9D,gBAAYU,8BAAUoD,IAPT;;AASb;AACAlC,YAAQlB,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAVK;;AAYb;AACAkH,UAAMnB,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,EAAoCgG,UAb7B;;AAeb;AACAmB,YAAQpB,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAhBK;;AAkBb;;AAEAgH,kBAAcjB,8BAAUqD,IApBX;;AAsBb;AACAhC,kBAAcrB,8BAAUoD,IAvBX;;AAyBb;AACA9B,qBAAiBtB,8BAAUqD,IA1Bd;;AA4Bb;AACA9B,oBAAgBvB,8BAAUsD,MA7Bb;;AA+Bb;AACA9B,2BAAuBxB,8BAAUqD;AAhCpB,CAAjB;;AAmCArC,KAAKxE,YAAL,GAAoB;AAChB4C,eAAW,KADK;AAEhBE,gBAAY,KAFI;AAGhB2B,kBAActJ,IAHE;AAIhB0J,kBAAc;AAJE,CAApB;;ACxIA,IAAMpE,iBAAe,CAAC,MAAD,EAAS,eAAT,EAA0B,MAA1B,CAArB;;AAEA,IAAMwnB,YAAY,SAAZA,SAAY,QAAS;AAAA,QAGnB7N,KAHmB,GAQnB/Z,KARmB,CAGnB+Z,KAHmB;AAAA,QAInB5K,WAJmB,GAQnBnP,KARmB,CAInBmP,WAJmB;AAAA,QAKnBqH,OALmB,GAQnBxW,KARmB,CAKnBwW,OALmB;AAAA,QAMnBkE,UANmB,GAQnB1a,KARmB,CAMnB0a,UANmB;AAAA,QAOnBmN,OAPmB,GAQnB7nB,KARmB,CAOnB6nB,OAPmB;;;AAUvB,QAAM/N,wBAAwB,SAAxBA,qBAAwB,GAAM;;AAEhC,YAAIE,SAAS,EAAb;AACA,YAAIC,aAAa,EAAjB;AACA,YAAIC,aAAa,EAAjB;;AAEA,gBAAQH,MAAMpf,IAAd;AACI,iBAAK,aAAL;AACA,iBAAK,kBAAL;AACIqf,yBAAS,WAAT;AACAC,6BAAa,QAAb;AACAC,6BAAa,sBAAb;AACA;AACJ,iBAAK,YAAL;AACA,iBAAK,iBAAL;AACIF,yBAAS,WAAT;AACAC,6BAAa,QAAb;AACAC,6BAAa,oBAAb;AACA;AACJ,iBAAK,cAAL;AACA,iBAAK,mBAAL;AACIF,yBAAS,WAAT;AACAC,6BAAa,QAAb;AACAC,6BAAa,uBAAb;AACA;AACJ,iBAAK,aAAL;AACA,iBAAK,kBAAL;AACIF,yBAAS,WAAT;AACAC,6BAAa,QAAb;AACAC,6BAAa,oBAAb;AACA;AACJ,iBAAK,QAAL;AACIF,yBAAS,UAAT;AACAC,6BAAa,QAAb;AACAC,6BAAa,OAAb;AACA;AACJ,iBAAK,WAAL;AACA,iBAAK,YAAL;AACIF,yBAAS,SAAT;AACAE,6BAAa,UAAb;AACA;AAlCR;;AAsCA,YAAGH,MAAMC,MAAT,EACIA,SAASD,MAAMC,MAAf;;AAEJ,YAAGD,MAAME,UAAT,EACIA,aAAaF,MAAME,UAAnB;;AAEJ,YAAGF,MAAM5D,KAAT,EACI+D,aAAaH,MAAM5D,KAAnB;;AAEJ,eAAO,EAAC6D,cAAD,EAASC,sBAAT,EAAqB9D,OAAO+D,UAA5B,EAAwCC,QAAQ,SAAhD,EAAP;AACH,KAtDD;;AAwDA,QAAIM,0BAAkBX,uBAAlB,EAA8C3c,uBAAuB4c,KAAvB,EAA8B3Z,cAA9B,CAA9C,CAAJ;;AAEA,QAAMoF,WAAW,SAAXA,QAAW,SAAU;AACvB;AACA,YAAI6V,UAAU,EAAd;AACA,YAAGtB,MAAMpf,IAAN,CAAW2gB,UAAX,CAAsB,KAAtB,CAAH,EACID,uBAAc3V,MAAd,EADJ,KAGI2V,uBAAclM,WAAd,EAA8BzJ,MAA9B;;AAEJmiB,gBAAQ,EAACltB,MAAMof,MAAMpf,IAAb,EAAmBD,KAAK2gB,OAAxB,EAAiCE,gBAAgBxB,MAAMwB,cAAvD,EAAR;;AAEA,YAAId,WAAWe,IAAf,EAAqBf,WAAWe,IAAX,CAAgB9V,MAAhB;AACrB,YAAI+U,WAAWjV,QAAf,EAAyBiV,WAAWjV,QAAX,CAAoBE,MAApB;AAC5B,KAZD;;AAcA,QAAMO,iBAAiB,SAAjBA,cAAiB,YAAa;AAChC;AACAjI,gBAAQH,KAAR,CAAc,2BAAd,EAA2CqI,SAA3C;AACAlG,cAAMiG,cAAN,IAAwBjG,MAAMiG,cAAN,CAAqBC,SAArB,CAAxB;AACH,KAJD;;AAMA,QAAM2V,mBAAmB,SAAnBA,gBAAmB,CAAC/a,CAAD,EAAO;AAC5B;AACA;AACA4Z,mBAAWX,MAAMpf,IAAjB,EAAuB,KAAvB;AACA,YAAI8f,WAAWqB,QAAf,EAAyBrB,WAAWqB,QAAX,CAAoBhb,CAApB;AAC5B,KALD;;AAOA,QAAMgnB,kBAAkB,SAAlBA,eAAkB,CAACnM,QAAD,EAAc;AAClC;AACAC,mBAAWxX,YAAX,CAAwBuX,QAAxB,EAAkCxM,WAAlC;AACH,KAHD;;AAKA,QAAM4M,gBAAgB,CAClB;AACI9b,uBAAe,MADnB;AAEI8C;AACI9C,2BAAe,QADnB;AAEIuB,mBAAOiZ,WAAWR,UAFtB;AAGIpX,uBAAW,MAHf;AAIInB,qBAASma;AAJb,WAKOpB,WAAWuB,iBALlB;AAFJ,KADkB,EAWlB;AACI/b,uBAAe,MADnB;AAEI8C;AACI9C,2BAAe,QADnB;AAEIuB,mBAAOiZ,WAAWT,MAFtB;AAGIrf,kBAAM8f,WAAWN,MAHrB;AAII8B,sBAAU;AAJd,WAKOxB,WAAWyB,aALlB;AAFJ,KAXkB,CAAtB;;AAuBA,QAAMN;AACFrX,gBAAQwX;AADN,OAEChC,MAAM3U,IAFP,CAAN;AAIA,WACI3G;AAAA;AAAA,qBACQgc,UADR;AAEI,0BAFJ;AAGI,gCAHJ;AAII,qBAASjE,OAJb;AAKI,sBAAUqF,gBALd;AAMI,kCAAYM,SAAS,CAArB,IAA2B1B,WAAW2B,SAAtC,CANJ;AAOI,oBAAQ;AAPZ;AASI,gDAAC,IAAD,eACQR,UADR;AAEI,sBAAUpW,QAFd;AAGI,4BAAgBS,cAHpB;AAII,0BAAc6hB;AAJlB;AATJ,KADJ;AAkBH,CAjJD;;AAmJAF,UAAU1kB,SAAV,GAAsB;AAClB;AACA6W,WAAO5W,8BAAU/F,MAFC;;AAIlB;AACA+R,iBAAahM,8BAAU/F,MALL;;AAOlB;AACAoZ,aAASrT,8BAAUoD,IARD;;AAUlB;AACAmU,gBAAYvX,8BAAUqD,IAXJ;;AAalB;AACAqhB,aAAS1kB,8BAAUqD;AAdD,CAAtB;;;;AChJA,IAAMpG,iBAAe,CAAC,UAAD,EAAa,cAAb,EAA6B,QAA7B,EAAuC,QAAvC,EAAiD,SAAjD,CAArB;;AAEA,IAAM2nB,YAAYtd,iBAAW,UAACzK,KAAD,EAAQ0K,GAAR,EAAgB;;AAEzC;AAFyC,oBAGXhM,eAAS,KAAT,CAHW;AAAA;AAAA,QAGlCmM,OAHkC;AAAA,QAGzBC,UAHyB;;AAKzC;;;AALyC,qBAMCpM,eAAS;AAC/CspB,qBAAa,KADkC;AAE/CC,sBAAc,KAFiC;AAG/CC,oBAAY,KAHmC;AAI/CC,qBAAa,KAJkC;AAK/CC,0BAAkB,KAL6B;AAM/CC,2BAAmB,KAN4B;AAO/CC,yBAAiB,KAP8B;AAQ/CC,0BAAkB,KAR6B;AAS/CC,gBAAQ,KATuC;AAU/CC,mBAAW,KAVoC;AAW/CC,oBAAY,KAXmC,EAAT,CAND;AAAA;AAAA,QAMlCC,aANkC;AAAA,QAMnBC,gBANmB;;AAAA,qBAkBPlqB,eAAS,EAAT,CAlBO;AAAA;AAAA,QAkBlCmqB,SAlBkC;AAAA,QAkBvBC,YAlBuB;;AAAA,qBAmBepqB,eAAS,EAAT,CAnBf;AAAA;AAAA,QAmBlCqqB,oBAnBkC;AAAA,QAmBZC,uBAnBY;;AAAA,qBAoBOtqB,eAAS,EAAT,CApBP;AAAA;AAAA,QAoBlCuqB,gBApBkC;AAAA,QAoBhBC,mBApBgB;;AAsBzC;;;AAtByC,sBAuBTxqB,eAAS,EAAT,CAvBS;AAAA;AAAA,QAuBlCsN,QAvBkC;AAAA,QAuBxBmd,WAvBwB;;AAwBzC,QAAMC,eAAe,SAAfA,YAAe,CAACC,IAAD,EAAU;AAC3BF,oBAAYE,IAAZ;AACA3e,eAAOA,IAAI2e,IAAJ,CAAP;AACH,KAHD;;AAxByC,QA8BrCvtB,MA9BqC,GA+CrCkE,KA/CqC,CA8BrClE,MA9BqC;AAAA,QA+BrCwtB,UA/BqC,GA+CrCtpB,KA/CqC,CA+BrCspB,UA/BqC;AAAA,QAgCrCzc,YAhCqC,GA+CrC7M,KA/CqC,CAgCrC6M,YAhCqC;AAAA,QAiCrC0c,MAjCqC,GA+CrCvpB,KA/CqC,CAiCrCupB,MAjCqC;AAAA,QAkCrCC,UAlCqC,GA+CrCxpB,KA/CqC,CAkCrCwpB,UAlCqC;AAAA,QAmCrCC,OAnCqC,GA+CrCzpB,KA/CqC,CAmCrCypB,OAnCqC;AAAA,QAqCrCxpB,aArCqC,GA+CrCD,KA/CqC,CAqCrCC,aArCqC;AAAA,QAsCrCjD,IAtCqC,GA+CrCgD,KA/CqC,CAsCrChD,IAtCqC;AAAA,QAyCrCX,KAzCqC,GA+CrC2D,KA/CqC,CAyCrC3D,KAzCqC;AAAA,QA4CrCqtB,gBA5CqC,GA+CrC1pB,KA/CqC,CA4CrC0pB,gBA5CqC;AAAA,QA8CrCC,aA9CqC,GA+CrC3pB,KA/CqC,CA8CrC2pB,aA9CqC;;AAgDzC,QAAMC,WAAW5pB,MAAM2jB,iBAAvB;;AAEA;;AAEA;AACA9kB,oBAAU,YAAM;AACZ;AACA,YAAG,CAACgM,OAAD,IAAY7K,MAAMrF,IAAN,KAAe,WAA9B,EAA2C;AACvC,gBAAI+a,kBAAkB,KAAtB;AACA5K,uBAAW,IAAX;AACA,gBAAM6K;AAAA,mFAAW;AAAA;AAAA;AAAA;AAAA;AACb,wCAAI,CAAC9K,OAAD,IAAY7K,MAAMuN,eAAtB,EAAuC;AACnCvN,8CAAMuN,eAAN,CAAsB,EAACgE,QAAQ,EAACK,MAAM,CAAP,EAAUC,MAAM,CAAhB,EAAT,EAA6BrW,MAAM,EAAnC,EAAtB,EACKsK,IADL,CACU,UAAC/H,QAAD,EAAc;AAChB;AACA;AACA,gDAAI,CAAC2X,eAAL,EACImU,qBAAqB9rB,SAASvC,IAA9B,EAAoCa,KAApC;AACP,yCANL,EAOK2J,KAPL,CAOW;AAAA,mDAASpI,kBAAkBC,KAAlB,EAAyB,wBAAzB,CAAT;AAAA,yCAPX;AAQH;AACD;AACAiN,+CAAW,KAAX;;AAZa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAX;;AAAA;AAAA;AAAA;AAAA,eAAN;AAcA6K;AACA,mBAAO;AAAA,uBAAMD,kBAAkB,IAAxB;AAAA,aAAP;AACH;AACJ,KAtBD,EAsBG,CAAC1V,MAAMrF,IAAP,CAtBH;;AAwBAkE,oBAAU,YAAM;AACZ,YAAGmB,MAAM0N,UAAT,EAAqB;AACjB1P,oBAAQ4H,GAAR,CAAY,mCAAZ,EAAiDvJ,KAAjD;AACA,gBAAGA,SAASA,MAAMT,MAAN,GAAe,CAA3B,EACIotB,wBAAwB3sB,MAAMX,GAAN,CAAU;AAAA,uBAAQP,KAAKW,MAAL,CAAR;AAAA,aAAV,CAAxB,EADJ,KAGIktB,wBAAwB,EAAxB;AAEP;AACJ,KATD,EASG,CAAC3sB,KAAD,CATH;;AAWA;AACA,QAAMyqB,YAAY,SAAZA,SAAY,GAAM;AACpB,eAAQ8C,YAAYA,SAAS7C,cAArB,IAAuCxpB,OAAON,IAAP,CAAY2sB,SAAS7C,cAArB,CAAxC,IAAiF,EAAxF;AACH,KAFD;;AAIA;AACA,QAAM+C,YAAY,SAAZA,SAAY,GAAM;AACpB,eAAOP,OAAO7tB,GAAP,CAAW,UAACqe,KAAD,EAAQtW,KAAR,EAAkB;AAChC,mBACIhF,wCAAC,SAAD;AACI,qBAAKgF,KADT;AAEI,uBAAOsW,KAFX;AAGI,6BAAakP,gBAHjB;AAII,yBAASN,cAAc5O,MAAMpf,IAApB,CAJb;AAKI,4BAAY,oBAACA,IAAD,EAAO0B,KAAP;AAAA,2BAAiBusB,8BAAsBD,aAAtB,qBAAsChuB,IAAtC,EAA6C0B,KAA7C,GAAjB;AAAA,iBALhB;AAMI,yBAAS0tB;AANb,cADJ;AAWH,SAZM,CAAP;AAaH,KAdD;;AAgBA;AACA,QAAMC,gBAAgB,SAAhBA,aAAgB,CAACC,OAAD;AAAA,eAAcL,YAAYA,SAAS7C,cAArB,IAAuC6C,SAAS7C,cAAT,CAAwBkD,OAAxB,CAArD;AAAA,KAAtB;;AAEA;AACA,QAAMC,yBAAyB,SAAzBA,sBAAyB,CAACD,OAAD,EAAUE,UAAV,EAAyB;AACpD,YAAGH,cAAcC,OAAd,CAAH,EAA2B;AACvB,gBAAGA,YAAY,MAAf,EAAuB;AACnB,oBAAMG,SAASD,WAAWpT,KAAX,CAAiB,GAAjB,CAAf;AACA,oBAAGqT,OAAO,CAAP,MAAc,GAAjB,EAAsB;AAClB,2BAAO,CAAC,EAAER,SAAS7C,cAAT,CAAwBkD,OAAxB,EAAiCE,UAAjC,IACHP,SAAS7C,cAAT,CAAwBkD,OAAxB,EAAiCE,UAAjC,CAA4CvuB,MAA5C,KAAuD,CADpD,IAEHguB,SAAS7C,cAAT,CAAwBkD,OAAxB,EAAiCE,UAAjC,CAA4C,CAA5C,MAAmDC,OAAO,CAAP,CAFlD,CAAR;AAGH,iBAJD,MAKK,IAAIA,OAAO,CAAP,MAAc,GAAlB,EAAuB;AACxB,2BAAO,CAAC,EAAER,SAAS7C,cAAT,CAAwBkD,OAAxB,EAAiCE,UAAjC,IACHP,SAAS7C,cAAT,CAAwBkD,OAAxB,EAAiCE,UAAjC,CAA4CvuB,MAA5C,KAAuD,CADpD,IAEHguB,SAAS7C,cAAT,CAAwBkD,OAAxB,EAAiCE,UAAjC,CAA4C,CAA5C,MAAmDC,OAAO,CAAP,CAFlD,CAAR;AAGH;AACJ,aAZD,MAYO;AACH,uBAAO,CAAC,EAAER,SAAS7C,cAAT,CAAwBkD,OAAxB,EAAiCE,UAAjC,IACHP,SAAS7C,cAAT,CAAwBkD,OAAxB,EAAiCE,UAAjC,KAAgDA,UAD/C,CAAR;AAEH;AACJ;AACD,eAAO,KAAP;AACH,KApBD;;AAsBA;AACA;AACA,QAAME,qBAAqB,SAArBA,kBAAqB,GAAM;AAC7B,YAAGH,uBAAuB,KAAvB,EAA8B,OAA9B,CAAH,EAA2C;AACvC;AACA,gBAAIlqB,MAAMrF,IAAN,KAAe,WAAnB,EAAgC;AAC5BiuB,8CAAqBD,aAArB,IAAoCX,aAAa,IAAjD;AACH,aAFD,MAEO;AACH,oBAAIuB,UAAWA,OAAOtT,IAAP,CAAY;AAAA,2BAAS8D,MAAMpf,IAAN,KAAe,QAAxB;AAAA,iBAAZ,MAAkDgD,SAAjE,EAA6E;AACzEirB,kDAAqBD,aAArB,IAAoCH,QAAQ,IAA5C;AACA;AACH,iBAHD,MAGO;AACHI,kDAAqBD,aAArB,IAAoCT,YAAY,IAAhD;AACA;AACH;AACJ;AACJ,SAbD,MAaO,IAAIgC,uBAAuB,KAAvB,EAA8B,MAA9B,CAAJ,EAA2C;AAC9CT,oBAAQjnB,IAAR,CAAgBinB,QAAQa,QAAR,CAAiBC,QAAjC;AACH;AACJ,KAjBD;;AAmBA;AACA,QAAMC,2BAA2B,SAA3BA,wBAA2B,CAACjW,KAAD,EAAQ7Z,GAAR,EAAgB;AAC7C+vB,4BAAoB/vB,GAApB;AACH,KAFD;;AAIA;AACA,QAAMgwB,0BAA0B,SAA1BA,uBAA0B,GAAM;AAClC,YAAGR,uBAAuB,UAAvB,EAAmC,OAAnC,CAAH,EAAgD;AAC5C;AACA,gBAAIlqB,MAAMrF,IAAN,KAAe,WAAnB,EACIiuB,8BAAqBD,aAArB,IAAoCP,kBAAkB,IAAtD,KADJ,KAGIQ,8BAAqBD,aAArB,IAAoCL,iBAAiB,IAArD;AACP,SAND,MAMO,IAAI4B,uBAAuB,UAAvB,EAAmC,MAAnC,CAAJ,EAAgD;AACnD;AACAT,oBAAQjnB,IAAR,CAAgBinB,QAAQa,QAAR,CAAiBC,QAAjC;AACH;AACJ,KAXD;;AAaA;AACA,QAAMI,sBAAsB,SAAtBA,mBAAsB,CAACpW,KAAD,SAAsB;AAAA,YAAblM,OAAa,SAAbA,OAAa;;AAC9C;AACA,YAAIA,QAAQmhB,UAAR,CAAJ,EAAyB;AACrB,gBAAIU,uBAAuB,MAAvB,EAA+B,SAA/B,CAAJ,EAA+C;AAC3C;AACA,oBAAIlqB,MAAMrF,IAAN,KAAe,WAAnB,EACIiuB,8BAAqBD,aAArB,IAAoCN,mBAAmB,IAAvD,KADJ,KAGIO,8BAAqBD,aAArB,IAAoCJ,kBAAkB,IAAtD;AACP,aAND,MAMO,IAAI2B,uBAAuB,MAAvB,EAA+B,QAA/B,CAAJ,EAA8C;AACjD;AACAT,wBAAQjnB,IAAR,CAAgBinB,QAAQa,QAAR,CAAiBC,QAAjC,SAA6CliB,QAAQvM,MAAR,CAA7C;AACH;AACJ,SAXD,MAWO;AACH,gBAAIouB,uBAAuB,MAAvB,EAA+B,SAA/B,CAAJ,EAA+C;AAC3C;AACA,oBAAIlqB,MAAMrF,IAAN,KAAe,WAAnB,EACIiuB,8BAAqBD,aAArB,IAAoCV,cAAc,IAAlD,KADJ,KAGIW,8BAAqBD,aAArB,IAAoCR,aAAa,IAAjD;AACP,aAND,MAMO,IAAI+B,uBAAuB,MAAvB,EAA+B,QAA/B,CAAJ,EAA8C;AACjD;AACAT,wBAAQjnB,IAAR,CAAgBinB,QAAQa,QAAR,CAAiBC,QAAjC,SAA6CliB,QAAQvM,MAAR,CAA7C;AACH;AACJ;AACJ,KAzBD;;AA2BA;AACA,QAAM0oB,iBAAiB,SAAjBA,cAAiB,CAACjQ,KAAD,EAAQ9L,gBAAR,EAA6B;AAChD,YAAGzI,MAAMrF,IAAN,KAAe,WAAlB,EAA+B;AAC3B,gBAAMoQ,QAAQ8d,UAAUnhB,MAAV,CACV,UAACvM,IAAD;AAAA,uBAAU,CAACsN,iBAAiB/K,QAAjB,CAA0BvC,KAAKW,MAAL,CAA1B,CAAX;AAAA,aADU,CAAd;AAGAgtB,yBAAa/d,KAAb;AACAkO,sBAAUlO,KAAV;AACH,SAND,MAMO;AACH,gBAAGtC,oBAAoBA,iBAAiB7M,MAAjB,GAA0B,CAA9C,IAAmD8tB,gBAAtD,EAAuE;AACnE,oBAAMkB,aAAaniB,iBAAiB/M,GAAjB,CAAqB,gBAAQ;AAAE,uDAASI,MAAT,EAAkBX,IAAlB,GAA2BwuB,aAA3B;AAA2C,iBAA1E,CAAnB;AACAD,iCAAiB,EAACluB,MAAM,EAACovB,YAAYA,UAAb,EAAP,EAAjB,EACK9kB,IADL,CACU,UAAC/H,QAAD,EAAc;AAChB,sDAAgBgI,OAAhB,CAAwB,EAACjI,SAAS,qBAAV,EAAxB;AACAkO,gCAAYA,SAASuD,UAAT,CAAoB,EAApB,CAAZ;AAEH,iBALL,EAMKvJ,KANL,CAMW,iBAAS;AACZpI,sCAAkBC,KAAlB,EAAyB,wBAAzB;AACAmO,gCAAYA,SAASuD,UAAT,CAAoB,EAApB,CAAZ;AACH,iBATL;AAUH;AACJ;AACDqa,iBAASnF,aAAT,IAA0BmF,SAASnF,aAAT,CAAuBlQ,KAAvB,EAA8B9L,gBAA9B,CAA1B;AACH,KAvBD;;AAyBA;AACA,QAAMoiB,oBAAoB,SAApBA,iBAAoB,CAACtW,KAAD,EAAQ7Z,GAAR,EAAa+O,IAAb,EAAsB;AAC5CwP,kBAAUxP,IAAV;AACAmgB,iBAASjF,SAAT,IAAsBiF,SAASjF,SAAT,CAAmBpQ,KAAnB,EAA0B7Z,GAA1B,EAA+B+O,IAA/B,CAAtB;AACH,KAHD;;AAKA,QAAMqhB,sBAAsB,SAAtBA,mBAAsB,CAACvW,KAAD,EAAQ7Z,GAAR,EAAa+O,IAAb,EAAsB;AAC9CwP,kBAAUxP,IAAV;AACAmgB,iBAAS/E,WAAT,IAAwB+E,SAAS/E,WAAT,CAAqBtQ,KAArB,EAA4B7Z,GAA5B,EAAiC+O,IAAjC,CAAxB;AACH,KAHD;;AAKA;AACA,QAAMsgB,aAAa,SAAbA,UAAa,QAAiC;AAAA,YAA/BpvB,IAA+B,SAA/BA,IAA+B;AAAA,YAAzBD,GAAyB,SAAzBA,GAAyB;AAAA,YAApB6gB,cAAoB,SAApBA,cAAoB;;AAChD;AACA,YAAG5gB,SAAS,QAAZ,EAAsB;AAClB;AACA,gBAAIowB,aAAarwB,IAAIsC,IAAJ,CAAjB;AACA;AACA;;AAEA;AACA,gBAAIkX,WAAW6W,WAAWrjB,MAAX,CAAkB,UAACyM,IAAD;AAAA,uBAC7B0U,UAAUxF,SAAV,CAAoB,UAAC2H,IAAD;AAAA,2BAAUA,KAAKlvB,MAAL,MAAiBqY,KAAKrY,MAAL,CAA3B;AAAA,iBAApB,MAAiE,CAAC,CADrC;AAAA,aAAlB,CAAf;AAGA;AACA,gBAAI+Q,YAAJ;AACI;AACAqH,2BAAWA,SAASxM,MAAT,CAAgB,UAACyM,IAAD,EAAU;AACjC,wBAAIra,UAAU,IAAd;AACA+S,iCAAarP,OAAb,CAAqB,UAACmE,KAAD,EAAW;AAC5B;AACA,4BAAGA,MAAMyS,QAAT,EACIta,UAAU6H,MAAMyS,QAAN,CAAeD,IAAf,EAAqB0U,SAArB,CAAV;;AAEJ;AACA,4BAAGlnB,MAAMtF,KAAT,EACI8X,KAAKxS,MAAM3E,IAAX,IAAmB2E,MAAMtF,KAAN,CAAY8X,IAAZ,EAAkB0U,SAAlB,CAAnB;AACP,qBARD;AASA,wBAAG/uB,OAAH,EACI,OAAOqa,IAAP;AACP,iBAbU,CAAX;AAcJyU,0CAAsBD,aAAtB,qBAAsChuB,IAAtC,EAA6C,KAA7C;AACA,8CAAaoL,OAAb,CAAqB;AACjBjI,qFAAsBoW,SAAStY,MAA/B;AADiB,aAArB;AAGA;AACAiuB,6DAAyBhB,SAAzB,qBAAuC3U,QAAvC;AACH,SAjCD,MAkCK;AACD,gBAAI2T,uBAAcntB,GAAd,CAAJ;AACA,gBAAGC,KAAKwO,OAAL,CAAa,OAAb,MAA0B,CAAC,CAA9B,EACI0e,QAAQ2B,UAAR,IAAsB,IAAtB,CADJ,KAGI3B,QAAQ2B,UAAR,IAAsB,KAAtB;AACJ,gBAAI3c,YAAJ,EACIA,aAAarP,OAAb,CAAqB,UAACmE,KAAD;AAAA,uBAAWkmB,QAAQlmB,MAAM3E,IAAd,IAAsB2E,MAAMtF,KAAN,CAAYwrB,OAAZ,EAAqBgB,SAArB,CAAjC;AAAA,aAArB;AACJ,oBAAQluB,IAAR;AACI,qBAAK,aAAL;AACA,qBAAK,cAAL;AACA,qBAAK,kBAAL;AACA,qBAAK,mBAAL;AACIswB,yCAAqB,EAAC1P,8BAAD,EAAiB5gB,UAAjB,EAAuBktB,gBAAvB,EAArB;AACA;AACJ,qBAAK,YAAL;AACA,qBAAK,iBAAL;AACIe,kDAAsBD,aAAtB,qBAAsChuB,IAAtC,EAA6C,KAA7C;AACA8vB,wCAAoB5C,OAApB;AACA;AACJ,qBAAK,aAAL;AACA,qBAAK,kBAAL;AACIe,kDAAsBD,aAAtB,qBAAsChuB,IAAtC,EAA6C,KAA7C;AACAuwB,yCAAqBrD,OAArB;AACA;;AAEJ;AACA;AACA;AACA;AACA;AACA,qBAAK,WAAL;AACA,qBAAK,YAAL;AACIe,kDAAsBD,aAAtB,qBAAsChuB,IAAtC,EAA6C,KAA7C;AACA;AA1BR;AA4BA;AACH;AAEJ,KA3ED;;AA6EA,QAAM8vB,sBAAsB,SAAtBA,mBAAsB,CAAC/vB,GAAD,EAAS;AACjC,YAAI2gB,uBAAc3gB,GAAd,CAAJ;AACA,YAAG4uB,eAAe,MAAlB,EACIjO,QAAQvf,MAAR,IAAkBU,cAAlB;;AAEJ;AACAqtB,yDAAyBhB,SAAzB,IAAoCxN,OAApC;AACH,KAPD;;AASA,QAAM6P,uBAAuB,SAAvBA,oBAAuB,CAACxwB,GAAD,EAAS;AAClC,YAAIyN,kCAAU0gB,SAAV,EAAJ;AACA,YAAMrf,WAAWrB,IAAIkb,SAAJ,CAAc;AAAA,mBAAQloB,KAAKW,MAAL,MAAiBpB,IAAIoB,MAAJ,CAAzB;AAAA,SAAd,CAAjB;AACAqM,YAAIiB,MAAJ,CAAWI,QAAX,EAAqB,CAArB,EAAwB9O,GAAxB;AACAouB,qBAAa3gB,GAAb;AACA+gB,4BAAoBxuB,GAApB;AACAue,kBAAU9Q,GAAV;AACH,KAPD;;AASA,QAAM0hB,uBAAuB,SAAvBA,oBAAuB,CAACpgB,IAAD,EAAOxM,IAAP,EAAgB;AACzC;AACA6rB,qBAAarf,IAAb;AACA,YAAGzJ,MAAM0N,UAAT,EACIuL,UAAUhc,IAAV,EADJ,KAGIgc,UAAUxP,IAAV;AACP,KAPD;;AASA,QAAMwhB,uBAAuB,SAAvBA,oBAAuB,QAAqC;AAAA,YAAnC1P,cAAmC,SAAnCA,cAAmC;AAAA,YAAnB5gB,IAAmB,SAAnBA,IAAmB;AAAA,YAAbktB,OAAa,SAAbA,OAAa;;AAC9D,YAAItM,kBACG,CAAC,aAAD,EAAgB,cAAhB,EAAgC,kBAAhC,EAAoD,mBAApD,EAAyE7d,QAAzE,CAAkF/C,IAAlF,CADP,EAEE;AACE,gBAAMkL,SAAUlL,SAAS,aAAT,IAA0BA,SAAS,kBAApC,GAA0D,MAA1D,GAAmE,KAAlF;AACA;AACA4gB,2BAAe;AACX1V,8BADW;AAEXrK,sBAAMqsB;AAFK,aAAf,EAIK/hB,IAJL,CAIU,oBAAY;AACd,kDAAaC,OAAb,CAAqB;AACjBjI,6BAAS;AADQ,iBAArB;AAGA8qB,8CAAsBD,aAAtB,qBAAsChuB,IAAtC,EAA6C,KAA7C;AACAqR,4BAAYA,SAASuD,UAAT,CAAoB,EAAE7H,QAAQ1H,MAAMwM,aAAhB,EAApB,CAAZ;AACA;AACA;AACH,aAZL,EAaKxG,KAbL,CAaW;AAAA,uBAASpI,kBAAkBC,KAAlB,EAAyB,uBAAzB,CAAT;AAAA,aAbX;AAcH;AACJ,KArBD;;AAuBA,QAAMqU,cAAc,SAAdA,WAAc,QAA2C;AAAA,YAAzCpK,QAAyC,SAAzCA,QAAyC;AAAA,YAA/BO,OAA+B,SAA/BA,OAA+B;AAAA,YAAtBmB,QAAsB,SAAtBA,QAAsB;AAAA,YAAZ1N,MAAY,SAAZA,MAAY;;AAC3D,YAAG,CAACkE,MAAM0N,UAAV,EAAsB;AAClBwb,gCAAoB7gB,OAApB;AACA2gB,oCAAwB,CAACltB,MAAD,CAAxB;AACA,gBAAGmE,kBAAkB,aAArB,EACIgZ,UAAU,CAAC5Q,OAAD,CAAV;AACP;AACDrI,cAAM+N,UAAN,IAAoB/N,MAAM+N,UAAN,CAAiB,EAACjG,kBAAD,EAAWO,gBAAX,EAAoBmB,kBAApB,EAA8B1N,cAA9B,EAAjB,CAApB;AACH,KARD;;AAUA,QAAMsW,oBAAoB,SAApBA,iBAAoB,QAAiC;AAAA,YAA/B/J,OAA+B,SAA/BA,OAA+B;AAAA,YAAtBmB,QAAsB,SAAtBA,QAAsB;AAAA,YAAZ1N,MAAY,SAAZA,MAAY;;AACvD,YAAIuM,QAAQmhB,UAAR,CAAJ,EAAyB;AACrBZ,0CAAqBD,aAArB,IAAoCF,WAAW,IAA/C;AACH,SAFD,MAEO;AACHG,0CAAqBD,aAArB,IAAoCD,YAAY,IAAhD;AACH;AACD1oB,cAAMgO,gBAAN,IAA0BhO,MAAMgO,gBAAN,CAAuB,EAAC3F,gBAAD,EAAUmB,kBAAV,EAAoB1N,cAApB,EAAvB,CAA1B;AACH,KAPD;;AASA,QAAMqvB,wBAAwB,SAAxBA,qBAAwB,CAACluB,IAAD,EAAOwM,IAAP,EAAgB;AAC1C;AACA,YAAGzJ,MAAM0N,UAAT,EAAqB;AACjBwb,gCAAoBzf,KAAK,CAAL,CAApB;AACAuf,oCAAwB/rB,IAAxB;AACAgc,sBAAUxP,IAAV;AACH;AACJ,KAPD;;AASA,QAAMwP,YAAY,SAAZA,SAAY,CAACxP,IAAD,EAAU;AACxB,YAAGA,SAAS9L,SAAZ,EACIqC,MAAMO,QAAN,CAAekJ,IAAf,EADJ,KAGIzJ,MAAMO,QAAN,CAAesoB,SAAf;AACP,KALD;;AAOA,QAAMuC,cAAc,SAAdA,WAAc,GAAM;AACtB,YAAI9oB,MAAM,CAAInB,QAAJ,iBAAV;AACA,YAAInB,MAAM6C,SAAV,EACIP,IAAIE,IAAJ,CAASxC,MAAM6C,SAAf;AACJ,eAAOP,IAAII,IAAJ,CAAS,GAAT,CAAP;AACH,KALD;;AAOA,WACIjE;AAAA;AAAA,UAAK,WAAW2sB,aAAhB,EAA+B,OAAOprB,MAAMqB,KAA5C;AACI,gDAAC,aAAD;AACI,iBAAK+nB;AADT,WAEQjsB,uBAAuB6C,KAAvB,EAA8BI,cAA9B,CAFR;AAGI,kBAAMyoB,SAHV;AAII,qBAASC;AACT;AALJ,cAMI,iBAAiBC,oBANrB;AAOI,wBAAY7W,WAPhB;AAQI,8BAAkBE,iBARtB;AASI,kCAAsB+Y,qBAT1B;AAUI,4BAAgB,KAVpB;AAWI,4CACOnrB,MAAM2jB,iBADb;AAEI7U,8BAAcgY,WAFlB;AAGIuE,4BAAYhB,kBAHhB;AAIIhG,kCAAkBmG,wBAJtB;AAKIc,iCAAiBZ,uBALrB;AAMInG,6BAAaoG,mBANjB;AAOIlG,+BAAeD,cAPnB;AAQIK,6BAAaiG,mBARjB;AASInG,2BAAWkG;AATf,cAXJ;AAsBI,2CACO7qB,MAAM6jB,gBADb;AAtBJ,WADJ;AA4BK0F,kBAAUO;AA5Bf,KADJ;AAgCH,CA3biB,CAAlB;;AA6bA/B,UAAU7kB,SAAV,GAAsB;AAClB;AACAygB,uBAAmBxgB,8BAAU/F,MAFX;;AAIlB;AACAymB,sBAAkB1gB,8BAAU/F,MALV;;AAOlB;;;;AAIA;AACAiP,iBAAalJ,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAZK;;AAclB;AACAkP,4BAAwBnJ,8BAAUe,OAAV,CACpBf,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUsD,MAAX,EAAmBtD,8BAAU8R,MAA7B,CAApB,CADoB,CAfN;;AAmBlB;AACA1I,wBAAoBpJ,8BAAUsD,MApBZ;;AAsBlB;AACA+F,mBAAerJ,8BAAU/F,MAvBP;;AAyBlB;AACAqP,mBAAetJ,8BAAU+R,KAAV,CAAgB;AAC3BzX,aAAK0F,8BAAUsD,MADY;AAE3BsL,eAAO5O,8BAAUgS,KAAV,CAAgB,CAACoW,8BAAUC,GAAX,EAAgBD,8BAAUE,IAA1B,CAAhB;AAFoB,KAAhB,CA1BG;;AA+BlB;;;;AAIA;AACA9e,iBAAaxJ,8BAAUsD,MApCL;;AAsClB;AACAiB,YAAQvE,8BAAU/F,MAvCA;;AAyClB;;;;AAIAwP,YAAQzJ,8BAAU+R,KAAV,CAAgB;AACpBzX,aAAK0F,8BAAUsD,MADK;AAEpBsL,eAAO5O,8BAAUgS,KAAV,CAAgB,CAACoW,8BAAUC,GAAX,EAAgBD,8BAAUE,IAA1B,CAAhB;AAFa,KAAhB,CA7CU;;AAkDlB;;;;AAIA;AACAlI,oBAAgBpgB,8BAAUoD,IAvDR;;AAyDlB;AACAzK,YAAQqH,8BAAUsD,MA1DA;;AA4DlB;AACA6iB,gBAAYnmB,8BAAUgS,KAAV,CAAgB,CAAC,MAAD,EAAS,QAAT,CAAhB,CA7DM;;AA+DlB;;;;AAIA;AACArO,WAAO3D,8BAAUwG,OApEC;;AAsElB;AACA5C,aAAS5D,8BAAUwG,OAvED;;AAyElB;AACAmD,oBAAgB3J,8BAAUoD,IA1ER;;AA4ElB;AACAid,kBAAcrgB,8BAAU8R,MA7EN;;AA+ElB;AACAwO,gBAAYtgB,8BAAUoD,IAhFJ;;AAkFlB;AACAmd,kBAAcvgB,8BAAU+R,KAAV,CAAgB;AAC1B8P,sBAAc7hB,8BAAUsD,MADE;AAE1Bwe,oBAAY9hB,8BAAUsD,MAFI;AAG1Bye,mBAAW/hB,8BAAUsD;AAHK,KAAhB,CAnFI;;AAyFlB;AACAsG,kBAAc5J,8BAAU8R,MA1FN;;AA4FlB;AACAjI,eAAW7J,8BAAU8R,MA7FH;;AA+FlB;;AAEAhI,iBAAa9J,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUqD,IAAX,EAAiBrD,8BAAUwG,OAA3B,CAApB,CAjGK;;AAmGlB;AACAuD,gBAAY/J,8BAAUoD,IApGJ;;AAsGlB;;;;AAIA;;AAEA8G,mBAAelK,8BAAU8R,MA5GP;;AA8GlB;AACA3H,cAAUnK,8BAAU8R,MA/GF;;AAiHlB;AACA1H,qBAAiBpK,8BAAUqD,IAlHT;;AAoHlB;AACAgH,sBAAkBrK,8BAAUqD,IArHV;;AAuHlB;AACAiH,qBAAiBtK,8BAAUsD,MAxHT;;AA0HlB;;;;AAIA;AACAiH,gBAAYvK,8BAAUoD,IA/HJ;;AAiIlB;;;;AAIA;AACA+B,oBAAgBnF,8BAAUoD,IAtIR;;AAwIlB;AACAoH,qBAAiBxK,8BAAUsD,MAzIT;;AA2IlB;AACAmH,sBAAkBzK,8BAAUoD,IA5IV;;AA8IlB;AACAsH,oBAAgB1K,8BAAUoD,IA/IR;;AAiJlB;AACAuH,qBAAiB3K,8BAAUsD,MAlJT;;AAoJlB;;;;AAIA;;AAEAsH,gBAAY5K,8BAAUqD,IA1JJ;;AA4JlB;;AAEAwH,sBAAkB7K,8BAAUqD,IA9JV;;AAgKlB;;AAEAyH,iBAAa9K,8BAAUqD,IAlKL;;AAoKlB;;AAEA0H,0BAAsB/K,8BAAUqD,IAtKd;;AAwKlB;;AAEA2H,0BAAsBhL,8BAAUqD,IA1Kd;;AA4KlB;;AAEA;AACA4H,mBAAejL,8BAAUoD,IA/KP;;AAiLlB;;;;AAIA8H,4BAAwBlL,8BAAUoH,SAAV,CAAoB,CACxCpH,8BAAUqD,IAD8B,EAExCrD,8BAAUsD,MAF8B,CAApB,CArLN;;AA2LlB;AACA2O,uBAAmBjS,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CA5LD;;AA8LlB;AACAyP,kBAAc1J,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CA/LI;;AAiMlB;AACAmsB,YAAQpmB,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAlMU;;AAoMlB;;AAEAmD,cAAU4C,8BAAUqD,IAtMF;;AAwMlB;AACA;;AAEA;AACA4b,kBAAcjf,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CA5MI;;AA8MlB;AACAyF,eAAWM,8BAAUsD,MA/MH;;AAiNlB;AACApF,WAAO8B,8BAAU/F,MAlNC;;AAoNlB;AACAosB,gBAAYrmB,8BAAUsD,MArNJ;;AAuNlB;AACAgjB,aAAStmB,8BAAU/F,MAxND;;AA0NlB;AACAkY,uBAAmBnS,8BAAUqD,IA3NX;;AA6NlB;AACAkjB,sBAAkBvmB,8BAAUqD,IA9NV;;AAgOlB;AACAmjB,mBAAexmB,8BAAU/F;AAjOP,CAAtB;;AAoOA2qB,UAAUpoB,YAAV,GAAyB;AACrB0M,iBAAa,EADQ;AAErBC,4BAAwB,EAFH;AAGrBC,wBAAoB,EAHC;AAIrBC,mBAAe,EAJM;AAKrBC,mBAAe,EALM;;AAOrBE,iBAAa,EAPQ;AAQrBjF,YAAQ,EARa;AASrBkF,YAAQ,EATa;;AAWrB2W,oBAAgB,IAXK;AAYrBznB,YAAQ,IAZa;;AAcrBgL,WAAOA,KAdc;AAerBC,aAASA,OAfY;AAgBrB+F,oBAAgB,KAhBK;AAiBrB0W,kBAAc,EAjBO;AAkBrBC,gBAAY,KAlBS;AAmBrBC,kBAAc;AACVsB,sBAAc,WADJ;AAEVC,oBAAY,oBAFF;AAGVC,mBAAW;AAHD,KAnBO;AAwBrBnY,kBAAc,EAxBO;AAyBrBC,eAAW,EAzBU;AA0BrBE,gBAAY,KA1BS;;AA4BrBG,mBAAe,GA5BM;AA6BrBC,cAAU,EA7BW;AA8BrBC,qBAAiBzS,IA9BI;AA+BrB0S,sBAAkB1S,IA/BG;AAgCrB2S,qBAAiB,YAhCI;;AAkCrBC,gBAAY,KAlCS;;AAoCrBpF,oBAAgB,IApCK;AAqCrBqF,qBAAiBhQ,SArCI;AAsCrBiQ,sBAAkB,IAtCG;AAuCrBC,oBAAgB,KAvCK;AAwCrBC,qBAAiB,UAxCI;;AA0CrBC,gBAAYjT,IA1CS;AA2CrBkT,sBAAkBlT,IA3CG;AA4CrBmT,iBAAanT,IA5CQ;AA6CrBoT,0BAAsBpT,IA7CD;AA8CrBqT,0BAAsBrT,IA9CD;;AAgDrBsT,mBAAe,KAhDM;;AAkDrBkb,gBAAY,MAlDS;AAmDrB/oB,cAAUzF,IAnDW;AAoDrB0uB,gBAAY;AApDS,CAAzB;;ACpqBO,IAAM1qB,YAAY,SAAZA,SAAY,CAACC,SAAD,EAAYC,gBAAZ,EAAiC;;AAEtD,QAAMC,kBAAkB,SAAlBA,eAAkB,CAACC,KAAD,EAAQC,QAAR,EAAqB;AAAA,YAClCC,SADkC,GACrBD,QADqB,CAClCC,SADkC;;AAEzC,YAAGA,SAAH,EAAa;AAAA,gBACFpC,IADE,GACYoC,SADZ,CACFpC,IADE;AAAA,gBACIvC,IADJ,GACY2E,SADZ,CACI3E,IADJ;;AAET,gBAAGuC,QAAQvC,IAAX,EACI,0BAAUuC,IAAV,EAAiBsC,+BAAWC,GAAX,CAAeL,KAAf,EAAsBzE,IAAtB,CAAjB;AACP;;AAED,eAAO,EAAP;AACH,KATD;AAUA,QAAMgF,qBAAqB,SAArBA,kBAAqB,CAACpB,QAAD;AAAA,eACvBqB,yBAAmB,EAAElF,cAAcA,YAAhB,EAAnB,EAAkD6D,QAAlD,CADuB;AAAA,KAA3B;;AAUA,QAAMsB,eAAe;AACjBC,iBAAS,UADQ;AAEjBC,uBAAe;AAFE,KAArB;;AAKA,QAAMC,8BAAsBH,YAAtB,EAAuCX,gBAAvC,CAAN;;AAEA,WAAOe,mBAAQd,eAAR,EAAyBQ,kBAAzB,EAA8C,UAACO,KAAD,EAAW;AAAA,YAErDsO,YAFqD,GAErCtO,KAFqC,CAErDsO,YAFqD;;;AAI5D,YAAMlP,YAAYY,MAAMZ,SAAN,GAAkBY,MAAMZ,SAAxB,GAAoC,EAAtD;;AAJ4D,wBAMhBV,eAAS,EAAT,CANgB;AAAA;AAAA,YAMrDwB,cANqD;AAAA,YAMrCC,iBANqC;;AAAA,YAQrDP,OARqD,GAQRE,cARQ,CAQrDF,OARqD;AAAA,YAQRE,cARQ,CAQ5C4rB,iBAR4C;AAAA,gBAQzB7rB,aARyB,GAQRC,cARQ,CAQzBD;;;AAEnC,YAAMO,eAAe,CAAC,eAAD,EAAkB,cAAlB,EAAkC,WAAlC,EAA+ChB,UAAUpC,IAAzD,EAA+D,cAA/D,CAArB;;AAcA;AACA6B,wBAAW,YAAM;AACb,gBAAGO,UAAUpC,IAAb,EAAmB;AACf;AACAoC,0BAAUmB,QAAV,IAAsBnB,UAAUmB,QAAV,CAAmB,EAAClE,OAAO2D,MAAMZ,UAAUpC,IAAhB,CAAR,EAA+BmD,oCAA/B,EAAnB,CAAtB;AACH;AACD;AACH,SAND,EAMG,CAACH,MAAMZ,UAAUpC,IAAhB,CAAD,CANH;;AAQA6B,wBAAU,YAAM;AACZ;AACA,gBAAGyP,YAAH,EAAiB;AACb,oBAAMqd,WAAW3rB,MAAMH,aAAN,CAAjB;AACA;AACAyO,gCAAgBtO,MAAMxF,YAAtB,IAAsCwF,MAAMxF,YAAN,CAAmB8T,YAAnB,EAAiCqd,QAAjC,CAAtC;AACH;AACJ,SAPD,EAOG,CAAC3rB,KAAD,CAPH;;AASAnB,wBAAU,YAAM;AACZ,gBAAGqB,eAAe7D,KAAlB,EAAyB;AACrB;AACA2D,sBAAMJ,OAAN,KAAkBI,MAAMJ,OAAN,EAAeM,eAAe7D,KAA9B,CAAlB;AACH;AACJ,SALD,EAKG,CAAC6D,eAAe7D,KAAhB,CALH;;AAOA,YAAMkE,WAAW,SAAXA,QAAW,GAAa;AAC1B;AACA;AACAP,kBAAMJ,OAAN,KAAkBI,MAAMJ,OAAN,yBAAlB;AACH,SAJD;;AAMA,YAAMoB,aAAa7D,uBAAuB6C,KAAvB,EAA8BI,YAA9B,CAAnB;AACA,eAAO3B,wCAAC,SAAD,eAAeuC,UAAf,EAA+Bd,cAA/B,qBAAqDN,OAArD,EAA+DW,QAA/D,GAAP;AACH,KAzDM,CAAP;AA0DH,CAvFM;;AA0FA,IAAMqrB,gBAAgB,SAAhBA,aAAgB,CAAC7sB,SAAD,EAAe;AACxC,WAAO,iBAAS;AACZ;AACA,YAAGiB,MAAM3D,KAAT,EAAe;AACX,gBAAG,OAAO2D,MAAM3D,KAAb,KAAuB,QAA1B,EAAmC;AAC/B;AACA2D,sBAAMO,QAAN,CAAejH,2BAAO0G,MAAM3D,KAAb,CAAf,EAAoC2D,MAAM3D,KAA1C;AACH;AACD;AACA;AACA;AACA;AACH;AACD,YAAMA,QAAQ2D,MAAM3D,KAAN,GAAe,OAAO2D,MAAM3D,KAAb,KAAuB,QAAvB,GAAkC/C,2BAAO0G,MAAM3D,KAAb,CAAlC,GAAwD2D,MAAM3D,KAA7E,GAAsF,IAApG;AACA,eAAOoC,wCAAC,SAAD,eAAeuB,KAAf,IAAsB,OAAO3D,KAA7B,IAAP;AACH,KAdD;AAeH,CAhBM;;AAkBA,IAAMwvB,kBAAkB,SAAlBA,eAAkB,CAAC7rB,KAAD;AAAA,WAC3BvB;AAAA,wCAAe,KAAf;AAAyBuB,aAAzB;AAAA;AAAkCA,cAAMwB,KAAN,IAAexB,MAAM3D,KAAvD;AAAA;AAAA,KAD2B;AAAA,CAAxB;;AAGA,IAAMyvB,iBAAiB,SAAjBA,cAAiB,CAAC9rB,KAAD;AAAA,WAC1BvB;AAAA,wCAAe,IAAf;AAAwBuB,aAAxB;AAAA;AAAiCA,cAAMwB,KAAN,IAAexB,MAAM3D,KAAtD;AAAA;AAAA,KAD0B;AAAA,CAAvB;;AAGA,IAAMkF,iBAAiB,SAAjBA,cAAiB,CAACvB,KAAD,EAAW;AAAA,QAC9BwB,KAD8B,GACLxB,KADK,CAC9BwB,KAD8B;AAAA,QACvBnF,KADuB,GACL2D,KADK,CACvB3D,KADuB;AAAA,QAChBhD,MADgB,GACL2G,KADK,CAChB3G,MADgB;;AAErC,QAAMmH,SAASnE,QAAShD,SAASM,SAAS0C,KAAT,EAAgBhD,MAAhB,CAAT,GAAmCc,OAAOkC,KAAP,CAA5C,GAA6D,IAA5E;AACA,WAAOoC;AAAA,wCAAe,IAAf;AAAwBuB,aAAxB;AAAA;AAAiCwB,iBAAShB,MAA1C;AAAA;AAAA,KAAP;AACH,CAJM;;AC5HP,IAAMurB,WAAW,SAAXA,QAAW,CAACpxB,IAAD,EAAOgP,OAAP,EAAmB;AAChC,QAAGA,YAAY,OAAf;AACI,YAAGhP,SAAS,MAAZ,EACI,OAAO,iBAAP,CADJ,KAGI,OAAO,gBAAP;AAJR,WAMI,OAAO,iBAAP;AACP,CARD;;AAUA,IAAMyf,UAAQ,SAARA,KAAQ,CAACzf,IAAD,EAAOgP,OAAP,EAAgB4R,cAAhB,EAAgC5W,sBAAhC,EAAuDqnB,iBAAvD,EAA0Eze,eAA1E,EAA8F;AACxG;AACA,QAAI4B,oBAAJ;AACA,WAAO;AACHxU,mBAASA,IAAT,GAAgBgP,OAAhB,aADG;AAEHwM,eAAO4V,SAASpxB,IAAT,EAAegP,OAAf,CAFJ;AAGH4R,wBAAgBA,cAHb;AAIHja,eAAO,GAJJ;AAKH;AACA8D,cAAM;AACFpI,kBAAM,uBADJ;AAEFivB,sBAAU,EAACC,MAAM,CAAP,EAFR;AAGFC,wBAAY,EAACD,MAAM,EAAP,EAHV;AAIFvnB,mCAAuB,+BAACc,SAAD;AAAA,uBAAed,uBAAsBc,SAAtB,EAAiC9K,IAAjC,EAAuCgP,OAAvC,CAAf;AAAA,aAJrB;AAKFvF,0BAAc,sBAACuX,QAAD,EAAWjhB,GAAX,EAAmB;AAC7ByU,8BAAczU,GAAd;AACAihB,yBAAShhB,SAAS,MAAT,GAAkBD,GAAlB,GAAwB,IAAjC;AACH,aARC;AASF4J,kBAAM,CACF;AACIrE,+BAAe,MADnB;AAEIuB,uBAAO,cAFX;AAGIxE,sBAAM,MAHV;AAIIovB,uBAAO,CACH;AACItuB,8JADJ;AAEIuuB,8BAAU;AAFd,iBADG,CAJX;AAUItpB,uBAAO,EAAC9C,eAAe,OAAhB;AAVX,aADE,EAaFtF,SAAS,MAAT,GACM;AACEsF,+BAAe,MADjB;AAEEuB,uBAAO,UAFT;AAGExE,sBAAM,UAHR;AAIE+F,uBAAO;AACH9C,mCAAe,cADZ;AAEHmX,kCAAc,CAFX;AAGHuO,iCAAa,GAHV;AAIHhY,qCAAiB,IAJd;AAKHvD,+BAAW,MALR;AAMH9B,oCAAgB,KANb;AAOHsF,sCAAkB,IAPf;AAQH;AACA;AACAL,qCAAiB,yBAAC2P,IAAD;AAAA,+BAAU8O,kBAAkBrxB,IAAlB,EAAwBwU,WAAxB,EAAqC+N,IAArC,CAAV;AAAA,qBAVd;AAWH2I,wCAAoBtY;AAXjB;AAJT,aADN,GAmBM,EAhCJ;AATJ;AANH,KAAP;AAmDH,CAtDD;;AAwDO,IAAM+e,iBAAiB,SAAjBA,cAAiB;AAAA,sCAAIC,IAAJ;AAAIA,YAAJ;AAAA;;AAAA,WAAanS,0BAAM,KAAN,EAAa,OAAb,SAAyBmS,IAAzB,EAAb;AAAA,CAAvB;AACA,IAAMC,kBAAkB,SAAlBA,eAAkB;AAAA,uCAAID,IAAJ;AAAIA,YAAJ;AAAA;;AAAA,WAAanS,0BAAM,MAAN,EAAc,OAAd,SAA0BmS,IAA1B,EAAb;AAAA,CAAxB;AACA,IAAME,gBAAgB,SAAhBA,aAAgB;AAAA,uCAAIF,IAAJ;AAAIA,YAAJ;AAAA;;AAAA,WAAanS,0BAAM,MAAN,EAAc,EAAd,SAAqBmS,IAArB,EAAb;AAAA,CAAtB;;AClEA,IAAMG,sBAAsB,SAAtBA,mBAAsB,OAAQ;AAC1C,KAAI,CAACC,UAAUC,SAAf,EAA0B;AACzBC,8BAA4BC,IAA5B;AACA;AACA;AACDH,WAAUC,SAAV,CAAoBG,SAApB,CAA8BD,IAA9B,EAAoChnB,IAApC,CACC,YAAW;AACVknB,2BACC,SADD,EAEC,SAFD,QAGKF,IAHL;AAKA,EAPF,EAQC,UAASG,GAAT,EAAc;AACbD,2BACC,OADD,EAEC,QAFD,QAGKF,IAHL;AAKA,EAdF;AAgBA,CArBM;;AAuBP,IAAMD,8BAA8B,SAA9BA,2BAA8B,OAAQ;AAC3C,KAAIK,WAAWC,SAASC,aAAT,CAAuB,UAAvB,CAAf;AACAF,UAAS7wB,KAAT,GAAiBywB,IAAjB;;AAEA;AACAI,UAAS7rB,KAAT,CAAegsB,GAAf,GAAqB,GAArB;AACAH,UAAS7rB,KAAT,CAAeisB,IAAf,GAAsB,GAAtB;AACAJ,UAAS7rB,KAAT,CAAeksB,QAAf,GAA0B,OAA1B;;AAEAJ,UAAS7oB,IAAT,CAAckpB,WAAd,CAA0BN,QAA1B;AACAA,UAASO,KAAT;AACAP,UAAS1E,MAAT;;AAEA,KAAI;AACH,MAAIkF,aAAaP,SAASQ,WAAT,CAAqB,MAArB,CAAjB;AACA,MAAID,UAAJ,EAAgB;AACfV,4BACC,SADD,EAEC,SAFD,QAGKF,IAHL;AAKA,GAND,MAMO;AACNE,4BACC,OADD,EAEC,QAFD,QAGKF,IAHL;AAKA;AACD,EAfD,CAeE,OAAOG,GAAP,EAAY;AACbD,2BACC,OADD,EAEC,QAFD,QAGKF,IAHL;AAKA;AACDK,UAAS7oB,IAAT,CAAcspB,WAAd,CAA0BV,QAA1B;AACA,CApCD;;AAsCA,IAAMF,2BAA2B,SAA3BA,wBAA2B,CAACryB,IAAD,EAAOwb,KAAP,EAAc0X,GAAd,EAAsB;AACtD,mCAAalzB,IAAb,EAAmB;AAClBmD,WAASqY,KADS;AAElBhY,eAAa0vB;AAFK,EAAnB;AAIA,CALD;;ICpCMC,cAAc,SAAdA,WAAc,QAAS;AAAA;;AAAA,QAGrBhyB,MAHqB,GAMrBkE,KANqB,CAGrBlE,MAHqB;AAAA,QAIrB0tB,UAJqB,GAMrBxpB,KANqB,CAIrBwpB,UAJqB;AAAA,QAKrB1b,eALqB,GAMrB9N,KANqB,CAKrB8N,eALqB;;AAAA,oBAQOpP,eAAS,EAAT,CARP;AAAA;AAAA,QAQlBsN,QARkB;AAAA,QAQRmd,WARQ;;AASzB,QAAMC,eAAe,SAAfA,YAAe,CAAC1e,GAAD;AAAA,eAASye,YAAYze,GAAZ,CAAT;AAAA,KAArB;;AAEA;;AAXyB,qBAaWhM,eAAS,kCAAG5C,MAAH,EAAY,IAAZ,gCAAwB2C,wCAACsvB,kBAAD,OAAxB,SAAT,CAbX;AAAA;AAAA,QAalBC,UAbkB;AAAA,QAaNC,aAbM;;AAAA,qBAcavvB,gCAAUwvB,SAAS,KAAnB,IAA2BpgB,eAA3B,EAA6C,IAA7C,EAdb;AAAA;AAAA,QAclBqgB,WAdkB;AAAA,QAcLC,cAdK;;AAkBzB;;;;AAIA;;;AACA,QAAMhc,oBAAoB,SAApBA,iBAAoB,QAAiC;AAAA,YAA/B/J,OAA+B,SAA/BA,OAA+B;AAAA,YAAtBmB,QAAsB,SAAtBA,QAAsB;AAAA,YAAZ1N,MAAY,SAAZA,MAAY;;AACvD,YAAGuM,QAAQgmB,OAAX,EAAoB;AAChBC,kDAAcN,UAAd,IAA0B3lB,OAA1B,uBAAuCyF,eAAvC,EAAyDhS,MAAzD;AACH,SAFD,MAEO;AACHkE,kBAAMuuB,mBAAN,CAA0BzyB,MAA1B;AACH;AACDkE,cAAMgO,gBAAN,IAA0BhO,MAAMgO,gBAAN,CAAuB,EAAC3F,gBAAD,EAAUmB,kBAAV,EAAoB1N,cAApB,EAAvB,CAA1B;AACH,KAPD;;AASA;AACA,QAAM0yB,qBAAqB,SAArBA,kBAAqB,CAACC,QAAD,EAAWhrB,KAAX,EAAqB;AAC5C6qB,kBAAUN,WAAWU,KAAX,CAAiB,CAAjB,EAAoBjrB,KAApB,CAAV,qBAAwCqK,eAAxC,EAA0D2gB,QAA1D;AACH,KAFD;;AAIA;AACA,QAAME,eAAe,SAAfA,YAAe,GAAM;AACvB,YAAGX,WAAWpyB,MAAX,GAAoB,CAAvB,EAA0B;AACtB,gBAAMgzB,gBAAgBZ,WAAWU,KAAX,CAAiB,CAAjB,EAAoBV,WAAWpyB,MAAX,GAAoB,CAAxC,CAAtB;AACA;AACA;AACA0yB,sBAAUM,aAAV,qBAA4B9gB,eAA5B,EAA8C8gB,cAAcA,cAAchzB,MAAd,GAAuB,CAArC,EAAwCE,MAAxC,CAA9C;AACH;AACJ,KAPD;;AASA;AACA,QAAM0oB,iBAAiB,SAAjBA,cAAiB,CAACjQ,KAAD,EAAQ9L,gBAAR,EAA6B;AAChD,YAAGA,oBAAoBA,iBAAiB7M,MAAjB,GAA0B,CAAjD,EAAmD;AAAA;;AAC/CoE,kBAAM0pB,gBAAN,CAAuB,EAACluB,yCAAQM,MAAR,EAAiB2M,iBAAiB,CAAjB,CAAjB,oCAA+C,IAA/C,SAAD,EAAvB,EACK3C,IADL,CACU,UAAC/H,QAAD,EAAc;AAChB,kDAAgBgI,OAAhB,CAAwB,EAACjI,SAAS,qBAAV,EAAxB;AACAkO,4BAAYA,SAASuD,UAAT,CAAoB,EAAC7H,QAAQymB,WAAT,EAApB,CAAZ;AACH,aAJL,EAKKnoB,KALL,CAKW,iBAAS;AACZpI,kCAAkBC,KAAlB,EAAyB,uBAAzB;AACAmO,4BAAYA,SAASuD,UAAT,CAAoB,EAAC7H,QAAQymB,WAAT,EAApB,CAAZ;AACH,aARL;AASH;AACJ,KAZD;;AAcA;;;AAGA,QAAMG,YAAY,SAAZA,SAAY,CAACN,UAAD,EAAatmB,MAAb,EAAwB;AACtCumB,sBAAcD,UAAd;AACA,YAAMa,yBAAgBV,WAAhB,EAAgCzmB,MAAhC,CAAN;AACA0mB,uBAAeS,SAAf;AACA7iB,oBAAYA,SAASuD,UAAT,CAAoB,EAAC7H,QAAQmnB,SAAT,EAApB,CAAZ;AACH,KALD;;AAQA;;;AAGA,QAAMC,yBAAyB,SAAzBA,sBAAyB,CAACrpB,SAAD,EAAY9K,IAAZ,EAAkBgP,OAAlB,EAA8B;AACzD,YAAIjE,sBAAaD,SAAb,CAAJ;AACA,YAAG9K,SAAS,KAAZ,EACI+K,OAAOoI,eAAP,IAA0BkgB,WAAWA,WAAWpyB,MAAX,GAAoB,CAA/B,EAAkCE,MAAlC,CAA1B;;AAEJ,YAAG6N,YAAY,OAAf,EACIjE,OAAOqpB,SAAP,GAAmB,KAAnB;AACJ;AACA,eAAOrpB,MAAP;AACH,KATD;;AAWA,QAAMsmB,oBAAoB,SAApBA,iBAAoB,CAACrxB,IAAD,EAAOwU,WAAP,SAAuC;AAAA,YAAlBoC,MAAkB,SAAlBA,MAAkB;AAAA,YAAV/V,IAAU,SAAVA,IAAU;;AAC7D,YAAIwzB,uBAAcxzB,IAAd,qBAAqBguB,UAArB,EAAkC,IAAlC,EAAJ;AACA,YAAI7uB,SAAS,MAAb,EAAqBq0B,QAAQC,KAAR,GAAgB9f,eAAeA,YAAYrT,MAAZ,CAA/B;AACrB,eAAOkE,MAAMkvB,iBAAN,CAAwB,EAAE3d,cAAF,EAAU/V,MAAMwzB,OAAhB,EAAxB,CAAP;AACH,KAJD;;AAMA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;;;AAIA,QAAMrS,cAAc,SAAdA,WAAc,CAACC,IAAD,EAAU;AAC1B;AACAC,qBAAaD,IAAb,EAAmB,SAAnB;AACA,YAAI5c,MAAMqc,iBAAV,EAA6B;AACzBrc,kBAAMqc,iBAAN,kBAA0BO,MAAMA,IAAhC,IAAuC9O,eAAvC,EAAyDkgB,WAAWA,WAAWpyB,MAAX,GAAoB,CAA/B,EAAkCE,MAAlC,CAAzD,GACKgK,IADL,CACU,UAAC/H,QAAD,EAAc;AAChB8e,6BAAaD,IAAb,EAAmB,SAAnB;AACA5Q,4BAAYA,SAASuD,UAAT,CAAoB,EAAE7H,QAAQymB,WAAV,EAApB,CAAZ;AACH,aAJL,EAKKnoB,KALL,CAKW,YAAM;AACT6W,6BAAaD,IAAb,EAAmB,OAAnB;AACA5Q,4BAAYA,SAASuD,UAAT,CAAoB,EAAE7H,QAAQymB,WAAV,EAApB,CAAZ;AACH,aARL;AASH;AACD,eAAO,KAAP;AACH,KAfD;;AAiBA,QAAMtR,eAAe,SAAfA,YAAe,CAACD,IAAD,EAAOjiB,IAAP,EAAgB;AACjC,YAAMmiB,aAAa;AACfrf,iBAAKmf,KAAKG,GADK;AAEfC,sBAAUriB,SAAS,SAAT,GAAqB,CAArB,GAAyB,CAFpB;AAGfsiB,kBAAMtiB,SAAS,SAAT,GACA8D,qEAAM,WAAWA,wCAACuI,qBAAD,IAAiB,OAAO,EAAEC,UAAU,EAAZ,EAAxB,EAA0C,UAA1C,GAAjB,GADA,GAEA,IALS;AAMfnJ,qBAASW;AAAA;AAAA;AAAA;AAAsB;AAAA,oDAAY,IAAZ;AAAA,sBAAiB,UAAjB;AAAuBme,yBAAK5f;AAA5B;AAAtB;AANM,SAAnB;AAQA,gBAAQrC,IAAR;AACI,iBAAK,SAAL;AACI,kDAAgBuiB,IAAhB,CAAqBJ,UAArB;AACA;AACJ,iBAAK,SAAL;AACI,kDAAgB/W,OAAhB,CAAwB+W,UAAxB;AACA;AACJ,iBAAK,OAAL;AACI,kDAAgBjf,KAAhB,CAAsBif,UAAtB;AACA;AACJ,iBAAK,OAAL;AACI,kDAAgBK,KAAhB,CAAsBP,KAAKG,GAA3B;AACA;AAZR;AAgBH,KAzBD;;AA2BA;;;AAGA,QAAM3H,oBAAoB,CACtB;AACIpY,cAAM,YADV;AAEIuW,sBAAc;AAAA,gBAAEmD,QAAF,SAAEA,QAAF;AAAA,mBAAgBzc,iBAAiByc,QAAjB,CAAhB;AAAA;AAFlB,KADsB,EAKtB;AACI1Z,cAAM,YADV;AAEIuW,sBAAc;AAAA,gBAAEmD,QAAF,SAAEA,QAAF;AAAA,mBAAgBzc,iBAAiByc,QAAjB,CAAhB;AAAA;AAFlB,KALsB,EAStB;AACI1Z,cAAM,MADV;AAEIuW,sBAAc;AAAA,gBAAElL,OAAF,SAAEA,OAAF;AAAA,mBACVA,QAAQmhB,UAAR,IAAsB,IAAtB,GAEA/qB;AAAA;AAAA,kBAAS,OAAM,mIAAf;AACI,wDAAC0wB,kBAAD,IAAc,SAAS;AAAA,+BAAMzC,oBAAoB1sB,MAAMovB,gBAAN,CAAuB/mB,QAAQvM,MAAR,CAAvB,CAApB,CAAN;AAAA,qBAAvB;AADJ,aAHU;AAAA;AAFlB,KATsB,EAkBtB;AACIkB,cAAM,MADV;AAEIuW,sBAAc,6BAAe;AAAA,gBAAblL,OAAa,SAAbA,OAAa;;AACzB,gBAAMgnB,WAAW,EAACC,SAAS,MAAV,EAAkBC,YAAY,QAA9B,EAAjB;AACA,gBAAIC,aAAJ;AACA,gBAAIC,YAAY,EAACC,aAAa,MAAd,EAAsBzoB,UAAU,MAAhC,EAAhB;AACA,oBAAQoB,QAAQ0mB,SAAhB;AACI,qBAAK,KAAL;AACIS,2BAAOG,kBAAP;AACAF,8BAAUG,KAAV,GAAkB,SAAlB;AACA;AACJ,qBAAK,KAAL;AACA,qBAAK,MAAL;AACA,qBAAK,MAAL;AACA,qBAAK,KAAL;AACA,qBAAK,MAAL;AACIJ,2BAAOK,sBAAP;AACAJ,8BAAUG,KAAV,GAAkB,SAAlB;AACA;AACJ,qBAAK,KAAL;AACA,qBAAK,KAAL;AACA,qBAAK,MAAL;AACA,qBAAK,KAAL;AACA,qBAAK,MAAL;AACA,qBAAK,MAAL;AACA,qBAAK,MAAL;AACIJ,2BAAOM,uBAAP;AACAL,8BAAUG,KAAV,GAAkB,SAAlB;AACA;AACJ,qBAAK,KAAL;AACA,qBAAK,KAAL;AACA,qBAAK,MAAL;AACA,qBAAK,MAAL;AACA,qBAAK,KAAL;AACA,qBAAK,KAAL;AACA,qBAAK,KAAL;AACA,qBAAK,KAAL;AACIJ,2BAAOO,uBAAP;AACA;AACJ,qBAAK,UAAL;AACA,qBAAK,IAAL;AACIP,2BAAOQ,0BAAP;AACAP,8BAAUG,KAAV,GAAkB,SAAlB;AACA;AACJ,qBAAK,KAAL;AACIJ,2BAAOS,qBAAP;AACAR,8BAAUG,KAAV,GAAkB,SAAlB;AACA;AACJ,qBAAK,KAAL;AACIJ,2BAAOU,qBAAP;AACAT,8BAAUG,KAAV,GAAkB,SAAlB;AACA;AACJ,qBAAK,KAAL;AACIJ,2BAAOW,sBAAP;AACA;AACJ,qBAAK,KAAL;AACIX,2BAAOY,qBAAP;AACA;AACJ;AACIZ,2BAAOa,kBAAP;AArDR;;AAyDA,mBACI5xB;AAAA;AAAA,kBAAK,OAAO4wB,QAAZ;AAKI,wDAAC,IAAD,IAAM,OAAOI,SAAb,GALJ;AAMKpnB,wBAAQrL;AANb,aADJ;AAUH;AAzEL,KAlBsB,CAA1B;;AA+FA,QAAMyf,cAAc;AAChBY,kBAAU,IADM;AAEhBC,wBAAgB,KAFA;AAGhBC,sBAAcZ;AAHE,KAApB;;AAMA,QAAM2T,eAAe,SAAfA,YAAe,GAAM;AACvB,eACI7xB;AAAA;AAAYge,uBAAZ;AACI,mFAAQ,MAAMhe,wCAAC8xB,kBAAD,OAAd;AADJ,SADJ;AAKH,KAND;;AAQA,QAAMC,mBAAmB,SAAnBA,gBAAmB,GAAM;AAC3B,eACI/xB;AAAA;AAAA,cAAM,WAAc0C,QAAd,kCAAN;AACK6sB,uBAAWtyB,GAAX,CAAe,UAACP,IAAD,EAAOsI,KAAP;AAAA,uBACZhF;AAAA;AAAA;AACI,6BAAKtD,KAAKW,MAAL;AACL;AAFJ,0BAGI,WAAcqF,QAAd,iCAHJ;AAII,iCAAS;AAAA,mCAAMqtB,mBAAmBrzB,KAAKW,MAAL,CAAnB,EAAiC2H,QAAQ,CAAzC,CAAN;AAAA;AAJb;AAMI;AAAA;AAAA;AAAA;AAAA,qBANJ;AAMkB;AAAA;AAAA;AAAOtI,6BAAK6B;AAAZ;AANlB,iBADY;AAAA,aAAf;AADL,SADJ;AAcH,KAfD;;AAiBA,WACIyB,wCAAC,SAAD,eACQuB,KADR;AAEI,aAAKopB,YAFT;AAGI,cAAM,YAHV;AAII,uBAAe,YAJnB;AAKI,0BAAkBhX,iBALtB;AAMI,uBAAe+b,WANnB;AAOI,2BAAmB/Y,iBAPvB;AAQI,wCACOpV,MAAM2jB,iBADb;AAEIc,2BAAeD,cAFnB;AAGIuC,4BAAgB;AACZ0J,qBAAK;AACDtG,gCAAY,OADX;AAEDuG,6BAAS,mBAFR;AAGD1uB,4BAAQsuB;AAHP,iBADO;AAMZK,0BAAU,EAACxG,YAAY,OAAb,EAAsBuG,SAAS,eAA/B,EANE;AAOZE,sBAAM,EAACzG,YAAY,CAAC,OAAD,EAAU,OAAV,CAAb,EAPM;AAQZ0G,wBAAQ;AARI,aAHpB;AAaI9hB,mCAAuB,CACnB;AACI9O,+BAAe,MADnB;AAEI8C,uBAAO;AACH9C,mCAAe,QADZ;AAEHgd,0BAAMxe,wCAACqyB,sBAAD,OAFH;AAGHtvB,2BAAO,MAHJ;AAIHqB,+BAAW,MAJR;AAKHyW,8BAAW0U,WAAWpyB,MAAX,KAAsB,CAL9B;AAMH8F,6BAASitB;AANN;AAFX,aADmB,EAYnB;AACI1uB,+BAAe,MADnB;AAEI8C,uBAAO;AACH9C,mCAAe,QADZ;AAEH+B,4BAAQwuB;AAFL;AAFX,aAZmB;AAoBvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CJ,UARJ;AAsDI,gBAAQ,CACJlE,eAAetsB,MAAMub,cAArB,EAAqCuT,sBAArC,EAA6D9C,iBAA7D,EAAgFhsB,MAAMuN,eAAtF,CADI,EAEJif,gBAAgBxsB,MAAMub,cAAtB,EAAsCuT,sBAAtC,EAA8D9C,iBAA9D,EAAiFhsB,MAAMuN,eAAvF,CAFI,EAGJkf,cAAczsB,MAAMub,cAApB,EAAoCuT,sBAApC,EAA4D9C,iBAA5D,EAA+EhsB,MAAMuN,eAArF,CAHI;AAtDZ,OADJ;AA8DH;;AAEDugB,YAAY5qB,SAAZ,GAAwB;;AAEpB;AACAqK,qBAAiBpK,8BAAUqD,IAHP;;AAKpB;AACA8O,uBAAmBnS,8BAAUqD;AANT,CAAxB;;AASAsnB,YAAYnuB,YAAZ,GAA2B;AACvB7D,YAAQ,IADe;AAEvB0tB,gBAAY,SAFW;AAGvB1b,qBAAiB;AAHM,CAA3B;;ACjXA,IAAMsM,QAAQ,SAARA,KAAQ,QAAS;AAAA,QAEZC,WAFY,GAEyCra,KAFzC,CAEZqa,WAFY;AAAA,QAECE,WAFD,GAEyCva,KAFzC,CAECua,WAFD;AAAA,QAEcC,SAFd,GAEyCxa,KAFzC,CAEcwa,SAFd;AAAA,QAEyBlM,YAFzB,GAEyCtO,KAFzC,CAEyBsO,YAFzB;;AAAA,oBAIW5P,eAAS,KAAT,CAJX;AAAA;AAAA,QAIZ8X,OAJY;AAAA,QAIHkE,UAJG;;AAAA,qBAKiBhc,eAAS,EAAT,CALjB;AAAA;AAAA,QAKZic,UALY;AAAA,QAKAC,aALA;;AAAA,qBAMoBlc,eAAS,EAAT,CANpB;AAAA;AAAA,QAMZmc,YANY;AAAA,QAMEC,cANF;;AAQnB,QAAM1b,YAAYY,MAAMZ,SAAN,GAAkBY,MAAMZ,SAAxB,GAAoC,EAAtD;;AAEA,QAAM2b,eAAe,SAAfA,YAAe,CAAC1e,KAAD,EAAW;AAC5B;AACAue,yBAAiBA,cAAcve,KAAd,CAAjB;AACH,KAHD;;AAKAwC,oBAAU,YAAM;AACZ+b,sBAAcJ,SAAd;AACH,KAFD,EAEG,EAFH;;AAIA;AACA3b,oBAAW,YAAM;AACb,YAAGO,UAAUpC,IAAb,EAAmB;AACf;AACAoC,sBAAUmB,QAAV,IAAsBnB,UAAUmB,QAAV,CAAmB,EAAClE,OAAO2D,MAAMZ,UAAUpC,IAAhB,CAAR,EAA+B+d,0BAA/B,EAA6CD,8BAA7C,EAAnB,CAAtB;AACH;AACD;AACH,KAND,EAMG,CAAC9a,MAAMZ,UAAUpC,IAAhB,CAAD,CANH;;AAQA,QAAMie,eAAe,SAAfA,YAAe,GAAM;AACvB;AACAP,mBAAW,IAAX;AACH,KAHD;;AAKA,QAAMS,gBAAgB,SAAhBA,aAAgB,GAAM;AACxBT,mBAAW,KAAX;AACH,KAFD;;AAIA,QAAMqP,aAAa,SAAbA,UAAa,OAAiC;AAAA,YAA/BpvB,IAA+B,QAA/BA,IAA+B;AAAA,YAAzBD,GAAyB,QAAzBA,GAAyB;AAAA,YAApB6gB,cAAoB,QAApBA,cAAoB;;AAChDjN,wBAAgBtO,MAAMxF,YAAtB,IAAsCwF,MAAMxF,YAAN,CAAmB8T,YAAnB,EAAiC5T,GAAjC,CAAtC;;AAEA,YAAI6gB,kBACG,CAAC,aAAD,EAAgB,cAAhB,EAAgC,kBAAhC,EAAoD,mBAApD,EAAyE7d,QAAzE,CAAkF/C,IAAlF,CADP,EAEE;AACE,gBAAMkL,SAAUlL,SAAS,aAAT,IAA0BA,SAAS,kBAApC,GAA0D,MAA1D,GAAmE,KAAlF;AACA;AACA4gB,2BAAe;AACX1V,8BADW;AAEXrK,sBAAMd;AAFK,aAAf,EAIKoL,IAJL,CAIU,oBAAY;AACd,kDAAaC,OAAb,CAAqB;AACjBjI,6BAAS;AADQ,iBAArB;AAGAqd;AACH,aATL,EAUKnV,KAVL,CAUW;AAAA,uBAASpI,kBAAkBC,KAAlB,EAAyB,uBAAzB,CAAT;AAAA,aAVX;AAWH,SAhBD,MAgBOsd;AACV,KApBD;;AAsBA,WACI1c;AAAC,iCAAD,CAAO,QAAP;AAAA;AACI;AAAA;AAAA;AACI,sBAAK;AADT,eAEQ4b,WAFR,EAGQQ,YAHR;AAII,yBAASI;AAJb;AAKEZ,2BAAeA,YAAY7Y;AAL7B,SADJ;AAOI,gDAAC,SAAD;AACI,mBAAO+Y,WADX;AAEI,yBAAaI,UAFjB;AAGI,qBAASnE,OAHb;AAII,wBAAY2E,aAJhB;AAKI,qBAAS4O;AALb;AAPJ,KADJ;AAiBH,CA5ED;;AA8EA3P,MAAMlX,SAAN,GAAkB;;AAEd;;AAEAmX,iBAAalX,8BAAU/F,MAJT;;AAMd;AACAmd,iBAAapX,8BAAU/F,MAPT;;AASd;AACAod,eAAWrX,8BAAU/F,MAVP;;AAYd;AACAkR,kBAAcnL,8BAAUsD,MAbV;;AAed;AACArH,eAAW+D,8BAAU/F;AAhBP,CAAlB;;AAmBA,IAAM6B,kBAAkB,SAAlBA,eAAkB,CAACC,KAAD,EAAQC,QAAR,EAAqB;AAAA,QAClCC,SADkC,GACrBD,QADqB,CAClCC,SADkC;;AAEzC,QAAGA,SAAH,EAAa;AAAA,YACFpC,IADE,GACYoC,SADZ,CACFpC,IADE;AAAA,YACIvC,IADJ,GACY2E,SADZ,CACI3E,IADJ;;AAET,YAAGuC,QAAQvC,IAAX,EACI,0BAAUuC,IAAV,EAAiBsC,+BAAWC,GAAX,CAAeL,KAAf,EAAsBzE,IAAtB,CAAjB;AACP;AACD,WAAO,EAAP;AACH,CARD;AASA,IAAMgF,qBAAqB,SAArBA,kBAAqB,CAACpB,QAAD;AAAA,WACvBqB,yBAAoB,EAAElF,cAAcA,YAAhB,EAApB,EAAqD6D,QAArD,CADuB;AAAA,CAA3B;;AAGA,cAAe0B,mBAAQd,eAAR,EAAyBQ,kBAAzB,EAA6C2a,KAA7C,CAAf;;AClGA,IAAMha,iBAAe,CAAC,OAAD,EAAU,eAAV,EAA2B,OAA3B,CAArB;;AAGA,IAAM0C,WAAW,SAAXA,QAAW,CAAC9C,KAAD,EAAW;AAAA,KAEpB+C,KAFoB,GAEJ/C,KAFI,CAEpB+C,KAFoB;AAAA,KAEbpB,KAFa,GAEJ3B,KAFI,CAEb2B,KAFa;;AAG3B,KAAI3C,mBAAmB7B,uBAAuB6C,KAAvB,EAA8BI,cAA9B,CAAvB;;AAEA;AACG,KAAI2C,SAASA,MAAM9C,aAAf,KAAiC8C,MAAM9C,aAAN,KAAwB,cAAxB,IAA0C8C,MAAM9C,aAAN,KAAwB,aAAnG,CAAJ,EAAuH;AACnHjB,mBAAiBa,aAAjB,GAAiC,wBAAjC;AACAb,mBAAiB0sB,iBAAjB,GAAqC3oB,MAAM9C,aAAN,KAAwB,cAAxB,GAAyClD,wBAAzC,GAAoEG,uBAAzG;AACA8B,mBAAiBY,OAAjB,GAA2B,cAA3B;AACH,EAJD,MAIO,IAAImD,SAASA,MAAM9C,aAAf,IAAgC8C,MAAM9C,aAAN,KAAwB,aAA5D,EAA2E;AAC9E;AACA;;;AAGP;;AAEA,KAAM8wB,UAAU,SAAVA,OAAU,GAAM;AACrB,MAAIhuB,KAAJ,EAAW;AACP;AACH,OAAM/B,0BAAiB+B,KAAjB,CAAN;AACS;AACT,OAAIhE,kBAAJ;AACA,OAAIsf,oBAAJ;AACS,WAAQtb,MAAM9C,aAAd;AACR,SAAK,QAAL;AACClB,iBAAYD,uCAAkBE,gBAAlB,CAAZ;AACA;AACA,SAAM0C,UAAU,SAAVA,OAAU,CAACZ,CAAD;AAAA,aAAOE,WAAWU,OAAX,IAAsBV,WAAWU,OAAX,CAAmBZ,CAAnB,EAAsBa,KAAtB,CAA7B;AAAA,MAAhB;AACA,YAAQlD;AAAC,eAAD;AAAA,mBAAeuC,UAAf,IAA2B,SAASU,OAApC;AAA8CV,oBAAcA,WAAWQ;AAAvE,MAAR;AACD,SAAK,OAAL;AACCzC,iBAAYD,UAAU+sB,eAAV,EAA2B7sB,gBAA3B,CAAZ;AACA,YAAQP,wCAAC,SAAD,eAAesE,KAAf,IAAsB,eAAeA,MAAM9C,aAA3C,IAAR;AACD,SAAK,MAAL;AACClB,iBAAYD,UAAUgtB,cAAV,EAA0B9sB,gBAA1B,CAAZ;AACA,YAAQP,wCAAC,SAAD,eAAesE,KAAf,IAAsB,mBAAtB,IAAR;AACD,SAAK,SAAL;AACChE,iBAAYD,wCAAmBE,gBAAnB,CAAZ;AACA,YAAQP;AAAC,eAAD;AAAeuC,gBAAf;AAA4BA,oBAAcA,WAAWQ;AAArD,MAAR;AACD,SAAK,UAAL;AACCzC,iBAAYD,yCAAoBE,gBAApB,CAAZ;AACA,YAAQP;AAAC,eAAD;AAAeuC,gBAAf;AAA4BA,oBAAcA,WAAWQ;AAArD,MAAR;AACD,SAAK,YAAL;AACCzC,iBAAYD,UAAU8sB,8CAAV,EAAqC5sB,gBAArC,CAAZ;AACAqf,mBAAcrd,cAAcA,WAAWqd,WAAzB,GAAuCrd,WAAWqd,WAAlD,GAAgE,eAA9E;AACA,SAAMhd,mBAASC,OAAO,MAAhB,IAA4BN,cAAcA,WAAWK,KAArD,CAAN;AACA,YAAQ5C,wCAAC,SAAD,eAAcuC,UAAd,IAA0B,OAAOK,KAAjC,EAAwC,aAAagd,WAArD,IAAR;AACD,SAAK,UAAL;AACCtf,iBAAYD,UAAUyC,cAAV,EAA0BvC,gBAA1B,CAAZ;AACA,YAAQP,wCAAC,SAAD,EAAesE,KAAf,CAAR;AACD,SAAK,OAAL;AACChE,iBAAYD,sCAAiBE,gBAAjB,CAAZ;AACAqf,mBAAcrd,cAAcA,WAAWqd,WAAzB,GAAuCrd,WAAWqd,WAAlD,GAAgE,kBAA9E;AACA,YAAQ5f,wCAAC,SAAD,eAAeuC,UAAf,IAA2B,aAAaqd,WAAxC,IAAR;AACD,SAAK,UAAL;AACCtf,iBAAYD,UAAU+gB,2BAAMC,QAAhB,EAA0B9gB,gBAA1B,CAAZ;AACA,YAAQP,wCAAC,SAAD,EAAeuC,UAAf,CAAR;AACD,SAAK,UAAL;AACCjC,iBAAYD,UAAU+gB,2BAAME,QAAhB,EAA0B/gB,gBAA1B,CAAZ;AACAqf,mBAAcrd,cAAcA,WAAWqd,WAAzB,GAAuCrd,WAAWqd,WAAlD,GAAgE,gBAA9E;AACA,YAAQ5f,wCAAC,SAAD,eAAeuC,UAAf,IAA2B,aAAaqd,WAAxC,IAAR;AACD,SAAK,aAAL;AACCtf,iBAAYD,4CAAuBE,gBAAvB,CAAZ;AACAqf,mBAAcrd,cAAcA,WAAWqd,WAAzB,GAAuCrd,WAAWqd,WAAlD,GAAgE,kBAA9E;AACA,YAAQ5f,wCAAC,SAAD,eAAeuC,UAAf,IAA2B,OAAO,EAACM,OAAO,MAAR,EAAlC,EAAmD,aAAa+c,WAAhE,IAAR;AACD,SAAK,OAAL;AACCtf,iBAAYD,sCAAiBE,gBAAjB,CAAZ;AACA,YAAOP;AAAC,eAAD;AAAeuC,gBAAf;AAA4BA,oBAAcA,WAAWQ;AAArD,MAAP;AACD,SAAK,aAAL;AACCzC,iBAAYD,UAAUqhB,2BAAM1e,MAAhB,EAAwBzC,gBAAxB,CAAZ;AACA,YAAQP;AAAC,eAAD;AAAeuC,gBAAf;AAA4BA,oBAAcA,WAAWQ;AAArD,MAAR;AACD,SAAK,QAAL;AACCzC,iBAAYD,uCAAkBE,gBAAlB,CAAZ;AACA,YAAOP,wCAAC,SAAD,EAAeuC,UAAf,CAAP;AACW,SAAK,YAAL;AACIjC,iBAAYD,UAAUqhB,2BAAMC,KAAhB,EAAuBphB,gBAAvB,CAAZ;AACA,YAAQP,wCAAC,SAAD,EAAeuC,UAAf,CAAR;AAChB,SAAK,cAAL;AACY,SAAK,aAAL;AACX,YAAOvC,wCAACwY,QAAD,eAAYjW,UAAZ,IAAwB,MAAM+B,MAAM9C,aAApC,EAAmD,MAAMjB,iBAAiBhC,IAA1E,IAAP;AACA;AACW,SAAK,eAAL;AACIgE,gBAAWrG,IAAX,GAAkB,UAAlB;AACA,YAAO8D,wCAAC,SAAD,eAAeuC,UAAf,IAA2B,MAAMhB,MAAMhD,IAAvC,EAA6C,eAAe+F,MAAM9C,aAAlE,IAAP;AACJ,SAAK,aAAL;AACIe,gBAAWrG,IAAX,GAAkB,YAAlB;AACA,YAAO8D,wCAAC,SAAD,eAAeuC,UAAf,IAA2B,MAAMhB,MAAMhD,IAAvC,EAA6C,eAAe+F,MAAM9C,aAAlE,IAAP;AACJ,SAAK,YAAL;AACIe,gBAAWrG,IAAX,GAAkB,WAAlB;AACA,YAAO8D,wCAAC,SAAD,eAAeuC,UAAf,IAA2B,MAAMhB,MAAMhD,IAAvC,EAA6C,eAAe+F,MAAM9C,aAAlE,IAAP;AACJ,SAAK,aAAL;AACXe,gBAAWrG,IAAX,GAAkB,WAAlB;AACA,YAAO8D,wCAAC,SAAD,eAAeuC,UAAf,IAA2B,MAAMhB,MAAMhD,IAAvC,EAA6C,eAAe+F,MAAM9C,aAAlE,IAAP;AACD,SAAK,aAAL;AACC,YAAOxB,wCAAC,WAAD,eAAiBuC,UAAjB,IAA6B,MAAMhB,MAAMhD,IAAzC,IAAP;AACD,SAAK,OAAL;AACC,YAAOyB,wCAAC2b,OAAD,eAAWpZ,UAAX,IAAuB,MAAMhB,MAAMhD,IAAnC,IAAP;AACD,SAAK,QAAL;AACC+B,iBAAYD,UAAUiE,MAAMf,MAAhB,EAAwBhD,gBAAxB,CAAZ;AACA,YAAOP,wCAAC,SAAD,EAAeuC,UAAf,CAAP;AACD;AACC,YAAO,IAAP;AA7EO;AA+ET;AACD,EAvFD;;AAyFG,KAAG,CAAChC,iBAAiBwC,KAArB,EACI,OAAO/C;AAAA,4BAAS,IAAT;AAAA,eAAkBO,gBAAlB,IAAoC,aAApC;AAA6C+xB;AAA7C,EAAP,CADJ,KAGI,OAAOtyB;AAAA,4BAAS,IAAT;AAAkBO,kBAAlB;AAAqC+xB;AAArC,EAAP;AACP,CA9GD;;AAgHAjuB,SAASI,SAAT,GAAqB;AACpBH,QAAOI,8BAAU/F,MAAV,CAAiBgG;AADJ,CAArB;;ACpIA,IAAMsD,SAAS,SAATA,MAAS,QAAS;;AAEpB,QAAIzD,YAAY,EAAhB;AACA1F,WAAON,IAAP,CAAY+C,KAAZ,EAAmBxC,OAAnB,CAA2B,UAACC,GAAD;AAAA,eACvBA,QAAQ,UAAR,GAAsBwF,UAAUxF,GAAV,IAAiBuC,MAAMvC,GAAN,CAAvC,GAAqD,IAD9B;AAAA,KAA3B;;AAIA,QAAMkJ,SAAS,SAATA,MAAS,GAAM;AACjB,YAAIrE,MAAM,CAAInB,QAAJ,aAAV;AACA8B,kBAAUJ,SAAV,IAAuBP,IAAIE,IAAJ,CAASS,UAAUJ,SAAnB,CAAvB;AACA,eAAOP,IAAII,IAAJ,CAAS,GAAT,CAAP;AACH,KAJD;;AAMA,WACIjE;AAAA;AAAA,qBAASwE,SAAT,IAAoB,WAAW0D,QAA/B;AACK3G,cAAMrE;AADX,KADJ;AAKH,CAlBD;;AAoBA+K,OAAOxD,SAAP,GAAmB;AACf;AACAL,eAAWM,8BAAUsD,MAFN;;AAIf;AACApF,WAAO8B,8BAAU/F;AALF,CAAnB;;ACjBA,IAAMgD,eAAe,CAAC,UAAD,EAAa,eAAb,CAArB;;AAEA,IAAMiD,YAAY,SAAZA,SAAY,CAACrD,KAAD,EAAW;AAAA,QACjBsD,KADiB,GACPtD,KADO,CACjBsD,KADiB;;AAGzB;;AAEA,QAAMC,WAAW,SAAXA,QAAW,CAAC/H,IAAD,EAAOgI,iBAAP,EAA6B;;AAE1C,eAAQhI,QAAQA,KAAKE,GAAL,CAAS,UAACP,IAAD,EAAOsI,KAAP,EAAiB;AACtC,gBAAIR,YAAY9F,uBAAuBhC,IAAvB,EAA6BiF,YAA7B,CAAhB;AACA;;AAEA,oBAAQjF,KAAK8E,aAAb;AACI,qBAAK,KAAL;AACI,2BACIxB;AAAA;AAAA,mCAAK,KAAKgF,KAAV,IAAqBR,SAArB;AACK9H,6BAAKQ,QAAL,IACDR,KAAKQ,QAAL,CAAcC,MAAd,GAAuB,CADtB,IAED2H,SAASpI,KAAKQ,QAAd,EAAwB6H,iBAAxB;AAHJ,qBADJ;AAOJ,qBAAK,KAAL;AACI,2BACI/E;AAAA;AAAA,mCAAK,KAAKgF,KAAV,IAAqBR,SAArB;AACK9H,6BAAKQ,QAAL,IACDR,KAAKQ,QAAL,CAAcC,MAAd,GAAuB,CADtB,IAED2H,SAASpI,KAAKQ,QAAd,EAAwB6H,iBAAxB;AAHJ,qBADJ;AAOJ,qBAAK,QAAL;AACI,2BACI/E;AAAC,8BAAD;AAAA,mCAAQ,KAAKgF,KAAb,IAAwBR,SAAxB;AACK9H,6BAAKQ,QAAL,IACDR,KAAKQ,QAAL,CAAcC,MAAd,GAAuB,CADtB,IAED2H,SAASpI,KAAKQ,QAAd,EAAwB6H,iBAAxB;AAHJ,qBADJ;AAOJ,qBAAK,MAAL;AACI,2BACI/E;AAAA;AAAA,mCAAM,KAAKgF,KAAX,IAAsBR,SAAtB;AACK9H,6BAAKQ,QAAL,IACDR,KAAKQ,QAAL,CAAcC,MAAd,GAAuB,CADtB,IAED2H,SAASpI,KAAKQ,QAAd,EAAwB6H,iBAAxB;AAHJ,qBADJ;AAOJ,qBAAK,SAAL;AACI,2BACI/E;AAAA,kDAAM,OAAN;AAAA,mCAAc,KAAKgF,KAAnB,IAA8BR,SAA9B;AACK9H,6BAAKQ,QAAL,IACDR,KAAKQ,QAAL,CAAcC,MAAd,GAAuB,CADtB,IAED2H,SAASpI,KAAKQ,QAAd,EAAwB6H,iBAAxB;AAHJ,qBADJ;AAOJ,qBAAK,YAAL;AACI,2BACI/E;AAAA,mDAAO,KAAP;AAAA,mCAAa,KAAKgF,KAAlB,IAA6BR,SAA7B;AACK9H,6BAAKQ,QAAL,IACDR,KAAKQ,QAAL,CAAcC,MAAd,GAAuB,CADtB,IAED2H,SAASpI,KAAKQ,QAAd,EAAwB6H,iBAAxB;AAHJ,qBADJ;AAOJ,qBAAK,MAAL;AACI,wBAAIE,qBAAavI,IAAb,CAAJ;AACA,wBAAIwI,OAAOF,KAAX;AACA,wBAAID,qBAAqBA,kBAAkB7B,KAA3C,EAAkD;AAC9C,4BAAI+B,MAAM1G,IAAV,EAAgB;AACZ,gCAAI3B,MAAMC,OAAN,CAAcoI,MAAM1G,IAApB,CAAJ,EAA+B;AAC3B0G,sCAAM1G,IAAN,IAAcwG,kBAAkB7B,KAAlB,CAAwB3E,IAAtC,2BAA+C0G,MAAM1G,IAArD;AACA0G,sCAAME,QAAN,IAAkBJ,kBAAkB7B,KAAlB,CAAwB3E,IAA1C,2BAAmD0G,MAAM1G,IAAzD;AACH,6BAHD,MAGO;AACH0G,sCAAM1G,IAAN,GAAa,CAACwG,kBAAkB7B,KAAlB,CAAwB3E,IAAzB,EAA+B0G,MAAM1G,IAArC,CAAb;AACA0G,sCAAME,QAAN,IAAkBJ,kBAAkB7B,KAAlB,CAAwB3E,IAA1C,2BAAmD0G,MAAM1G,IAAzD;AACH;AACJ;AACJ;AACD;AACA,2BAAOyB,wCAAC,QAAD,aAAU,UAAQkF,IAAlB,IAA8BD,KAA9B,IAAqC,oBAAYF,iBAAZ,CAArC,IAAP;AACJ,qBAAK,WAAL;AACI,2BACI/E;AAAA,kDAAS,IAAT;AAAA,mCAAc,KAAKgF,KAAnB,IAA8BR,SAA9B;AACK,kCAACY,MAAD,EAASC,SAAT,EAAuB;AACpB,gCAAMC,QAAQ,EAAEF,oCAAYA,MAAZ,EAAF,EAAuBC,wBAAgBA,SAAhB,CAAvB,EAAd;AACA,mCAAOP,SAASpI,KAAKQ,QAAd,EAAwBoI,KAAxB,CAAP;AACH;AAJL,qBADJ;AAQJ,qBAAK,UAAL;AACI;AACA,2BACItF;AAAA;AAAA,0BAAK,KAAKgF,KAAV;AACKD,6CAAqBA,kBAAkBK,MAAvC,IAAiDL,kBAAkBK,MAAlB,CAAyBnI,GAAzB,CAA6B,UAACiG,KAAD,EAAQqC,MAAR,EAAmB;AAC9F;AACA,gCAAMD,mBAAUpC,oBAAYA,KAAZ,CAAV,IAAkC6B,iBAAlC,CAAN;AACA,mCAAO/E;AAAA;AAAA,kCAAK,KAAKkD,MAAMlE,GAAhB;AAAsB8F,yCAASpI,KAAKQ,QAAd,EAAwBoI,KAAxB,CAAtB;AAAA;AAAA,6BAAP;AACH,yBAJiD;AADtD,qBADJ;;AAWJ;AACI,2BAAO,IAAP;AAxFR;AA0FH,SA9Fe,CAAT,IA8FA,IA9FP;AA+FH,KAjGD;;AAmGA,WAAOR,SAASD,KAAT,CAAP;AACH,CAzGD;;AA2GAD,UAAUH,SAAV,GAAsB;AAClBI,WAAOH,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,EAAoCgG;AADzB,CAAtB;;IClGO4tB,qCAAAA;;;IAEDpN,eAAe,SAAfA,YAAe,CAAC5jB,KAAD,EAAW;AAAA,KAE9B0iB,WAF8B,GAsB3B1iB,KAtB2B,CAE9B0iB,WAF8B;AAAA,KAG9BuO,kBAH8B,GAsB3BjxB,KAtB2B,CAG9BixB,kBAH8B;AAAA,KAI9BC,aAJ8B,GAsB3BlxB,KAtB2B,CAI9BkxB,aAJ8B;AAAA,KAK9BC,iBAL8B,GAsB3BnxB,KAtB2B,CAK9BmxB,iBAL8B;AAAA,KAM9BC,kBAN8B,GAsB3BpxB,KAtB2B,CAM9BoxB,kBAN8B;AAAA,KAO9BC,wBAP8B,GAsB3BrxB,KAtB2B,CAO9BqxB,wBAP8B;AAAA,KAQ9BhG,UAR8B,GAsB3BrrB,KAtB2B,CAQ9BqrB,UAR8B;AAAA,KAS9BhH,gBAT8B,GAsB3BrkB,KAtB2B,CAS9BqkB,gBAT8B;AAAA,KAU9BiH,eAV8B,GAsB3BtrB,KAtB2B,CAU9BsrB,eAV8B;AAAA,KAW9B7G,aAX8B,GAsB3BzkB,KAtB2B,CAW9BykB,aAX8B;AAAA,KAY9BF,WAZ8B,GAsB3BvkB,KAtB2B,CAY9BukB,WAZ8B;AAAA,KAa9BI,SAb8B,GAsB3B3kB,KAtB2B,CAa9B2kB,SAb8B;AAAA,KAc9BE,WAd8B,GAsB3B7kB,KAtB2B,CAc9B6kB,WAd8B;AAAA,KAe9B3jB,QAf8B,GAsB3BlB,KAtB2B,CAe9BkB,QAf8B;AAAA,KAgB9B4N,YAhB8B,GAsB3B9O,KAtB2B,CAgB9B8O,YAhB8B;AAAA,KAiBxBiY,cAjBwB,GAsB3B/mB,KAtB2B,CAiBxB+mB,cAjBwB;AAAA,KAkB9B5C,gBAlB8B,GAsB3BnkB,KAtB2B,CAkB9BmkB,gBAlB8B;AAAA,KAmB9BpV,qBAnB8B,GAsB3B/O,KAtB2B,CAmB9B+O,qBAnB8B;AAAA,KAoB9BC,uBApB8B,GAsB3BhP,KAtB2B,CAoB9BgP,uBApB8B;AAAA,KAqB9BC,sBArB8B,GAsB3BjP,KAtB2B,CAqB9BiP,sBArB8B;;;AAwB5B,KAAMqiB,wBAAwB;AAC1Bb,OAAK;AACDC,YAAS,UADR;AAEDhvB,YAAS2pB,UAFR;AAGDpO,SAAMxe,wCAAC8xB,kBAAD;AAHL,GADqB;AAM1BgB,aAAW;AACPb,YAAS,uBADF;AAEPhvB,YAAS2iB,gBAFF;AAGPpH,SAAMxe,wCAAC0wB,kBAAD;AAHC,GANe;AAW1BwB,YAAU;AACND,YAAS,iBADH;AAENhvB,YAAS4pB,eAFH;AAGNrO,SAAMxe,wCAAC+yB,uBAAD;AAHA,GAXgB;AAgB1BZ,QAAM;AACFF,YAAS,UADP;AAEFhvB,YAAS6iB,WAFP;AAGFtH,SAAMxe,wCAACgzB,kBAAD;AAHJ,GAhBoB;AAqB1BZ,UAAQ;AACJH,YAAS,SADL;AAEJzT,SAAMxe,wCAACizB,oBAAD;AAFF,GArBkB;AAyB1BC,MAAI;AACAjB,YAAS,mBADT;AAEAhvB,YAASijB,SAFT;AAGA1H,SAAMxe,wCAACmzB,qBAAD;AAHN,GAzBsB;AA8B1BC,QAAM;AACFnB,YAAS,kBADP;AAEFhvB,YAASmjB,WAFP;AAGF5H,SAAMxe,wCAACqzB,uBAAD;AAHJ,GA9BoB;AAmChCC,UAAQ;AACP1T,gBAAa,OADN;AAEPnd,aAAUA;AAFH,GAnCwB;AAuC1B8wB,YAAU;AACNtB,YAAS,mBADH;AAENuB,qBAAkB,UAFZ;AAGNvwB,YAAS,mBAAM,EAHT;AAINub,SAAMxe,wCAACyzB,qBAAD;AAJA,GAvCgB;AA6C1BxqB,UAAQ;AACJgpB,YAAS,oBADL;AAEJuB,qBAAkB,UAFd;AAGJvwB,YAAS,mBAAM,EAHX;AAIJub,SAAMxe,wCAAC0zB,oBAAD;AAJF;AA7CkB,EAA9B;;AAqDH,KAAM3N,iBAAiB,SAAjBA,cAAiB,CAACjQ,KAAD,EAAW;AACjC,MAAI4c,sBAAsB,OAA1B,EAAmC;AAClCiB;AACA,GAFD,MAEO;AACN3N,iBAAclQ,KAAd;AACA;AACD,EAND;;AAQA,KAAM8d,2BAA2B,SAA3BA,wBAA2B,GAAM;AACtC,SACC5zB;AAAA;AAAA;AACC,eAAU,KADX;AAEC,WAAO4yB,wBAFR;AAGC,eAAW5M,aAHZ;AAIC,YAAO,cAJR;AAKC,gBAAW;AALZ;AAOE6N,mBAAgB,KAAhB;AAPF,GADD;AAWA,EAZD;;AAcG,KAAMF,2BAA2B,SAA3BA,wBAA2B,GAAM;AACzCpB,UAAQ;AACP7a,UAAOib,kBADA;AAEPnU,SAAMxe,wCAAC8zB,+BAAD,OAFC;AAGPC,YAASnB,wBAHF;AAIPoB,aAAU,IAJH;AAKPzY,WAAQ,IALD;AAMPC,eAAY,QANL;AAOPuB,OAPO,kBAOA;AACNiJ;AACA;AATM,GAAR;AAWA,EAZE;;AAcA,KAAM6N,kBAAkB,SAAlBA,eAAkB,CAACI,WAAD,EAAiB;AACrC,MAAMC,wBAAerB,sBAAsB,KAAtB,CAAf,EAAgDvK,eAAe,KAAf,CAAhD,CAAN;AACA,MAAM6L,wBAAetB,sBAAsB,QAAtB,CAAf,EAAmDvK,eAAe,QAAf,CAAnD,CAAN;;AAEA,SACItoB;AAAA;AAAA,KAAS,OAAOm0B,SAASlC,OAAzB;AACI,qFACQiC,QADR;AAEI,eAAcxxB,QAAd,SAFJ;AAGI,UAAMyxB,SAAS3V,IAHnB;AAII,aAASyV,cAAclO,cAAd,GAA+B,IAJ5C;AAKI,cAAUL,iBAAiBzmB,QAAjB,CAA0B,QAA1B;AALd;AADJ,GADJ;AAWH,EAfD;;AAiBA,KAAMm1B,YAAY,SAAZA,SAAY,CAACl4B,IAAD,EAAU;AACxB,MAAMg4B,wBAAerB,sBAAsB,KAAtB,CAAf,EAAgDvK,eAAe,KAAf,CAAhD,CAAN;AACA,MAAM6L,wBAAetB,sBAAsB32B,IAAtB,CAAf,EAA+CosB,eAAepsB,IAAf,CAA/C,CAAN;;AAEA,MAAGmU,aAAapR,QAAb,CAAsB/C,IAAtB,CAAH,EAAgC;AAC5B,OAAGi4B,SAAS5wB,MAAZ,EACI,OAAO4wB,SAAS5wB,MAAT,CAAgB;AACnBsX,cAAU6K,iBAAiBzmB,QAAjB,CAA0B/C,IAA1B,CADS;AAEnB+G,aAASkxB,SAASlxB,OAFC;AAGlCR,cAAU0xB,SAAS1xB;AAHe,IAAhB,CAAP,CADJ,KAOE,IAAIvG,SAAS,QAAb,EACT,OACC8D,mEAAO,MAAP;AACC,cAAU0lB,iBAAiBzmB,QAAjB,CAA0B/C,IAA1B,CADX;AAEC,kBAAcs2B,kBAFf;AAGC,iBAAa2B,SAASvU,WAHvB;AAIC,cAAUuU,SAAS1xB,QAJpB;AAKC,eAAW;AALZ,KADD,CADS,KAWT,OACCzC;AAAA;AAAA,MAAS,OAAOm0B,SAASlC,OAAzB,EAAkC,WAAWkC,SAASX,gBAAT,GAA4BW,SAASX,gBAArC,GAAwD,KAArG;AACC,sFACKU,QADL;AAEC,gBAAcxxB,QAAd,SAFD;AAGC,WAAMyxB,SAAS3V,IAHhB;AAIC,cAAS2V,SAASlxB,OAJnB;AAKC,eAAUyiB,iBAAiBzmB,QAAjB,CAA0B/C,IAA1B;AALX;AADD,IADD;AAWI,GA9BD,MAgCI,OAAO,IAAP;AACP,EArCD;;AAuCH,QACC8D;AAAC,2BAAD,CAAO,QAAP;AAAA;AACEqQ,eAAalT,MAAb,IACDmT,qBADC,IAEDC,uBAFC,IAGDC,sBAHC,GAIAxQ;AAAA;AAAA;AACC,eAAc0C,QAAd,8BAA+CuhB;AADhD;AAGC;AAAA;AAAA,MAAK,WAAW,kBAAhB;AACoBmQ,cAAU,KAAV,CADpB;AAEoBA,cAAU,WAAV,CAFpB;AAGoBA,cAAU,UAAV,CAHpB;AAIoBA,cAAU,MAAV,CAJpB;AAME/jB,iBAAapR,QAAb,CAAsB,QAAtB,IACEwzB,gBACCC,sBAAsB,OAAtB,GACCkB,0BADD,GAECC,gBAAgB,IAAhB,CAHF,GAICA,gBAAgB,IAAhB,CALH,GAME,IAZJ;AAcoBO,cAAU,IAAV,CAdpB;AAeoBA,cAAU,MAAV;AAfpB,IAHD;AAoBC;AAAA;AAAA,MAAK,WAAW,kBAAhB;AACE9jB,4BAAwBtQ,wCAAC,SAAD,IAAW,OAAOsQ,qBAAlB,GAAxB,GAAsE;AADxE,IApBD;AAuBC;AAAA;AAAA,MAAK,WAAW,oBAAhB;AACEC,8BAA0BvQ,wCAAC,SAAD,IAAW,OAAOuQ,uBAAlB,GAA1B,GAA0E;AAD5E,IAvBD;AA0BC;AAAA;AAAA,MAAK,WAAW,mBAAhB;AACEC,6BAAyBxQ,wCAAC,SAAD,IAAW,OAAOwQ,sBAAlB,GAAzB,GAAwE;AAD1E,IA1BD;AA6BC;AAAA;AAAA,MAAK,WAAW,mBAAhB;AACE4jB,cAAU,QAAV,CADF;AAEoBA,cAAU,UAAV,CAFpB;AAGoBA,cAAU,QAAV;AAHpB;AA7BD,GAJA,GAuCG;AAxCL,EADD;AA4CA;;AAEDjP,aAAa1gB,SAAb,GAAyB;AACxB;AACA8L,0BAAyB7L,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAFD;;AAIxB;;AAEAslB,cAAavf,8BAAUgS,KAAV,CAAgB,CAC5B,KAD4B,EAE5B,MAF4B,EAG5B,KAH4B,EAI5B,MAJ4B,EAK5B,QAL4B,EAM5B,OAN4B,EAO5B,YAP4B,EAQ5B,YAR4B,CAAhB,CANW;;AAiBxB;AACA8b,qBAAoB9tB,8BAAUsD,MAlBN;;AAoBxB;AACAyqB,gBAAe/tB,8BAAUoD,IArBD;;AAuBxB;AACA4qB,oBAAmBhuB,8BAAUgS,KAAV,CAAgB,CAAC,OAAD,EAAU,OAAV,CAAhB,CAxBK;;AA0BxB;AACAic,qBAAoBjuB,8BAAUsD,MA3BN;;AA6BxB;AACA4qB,2BAA0BluB,8BAAUsD,MA9BZ;;AAgCxB;;AAEA0d,mBAAkBhhB,8BAAUe,OAAV,CAAkBf,8BAAUsD,MAA5B,CAlCM;;AAoCxB;AACAsI,wBAAuB5L,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CArCC;;AAuCxB;AACAiuB,aAAYloB,8BAAUqD,IAxCE;;AA0CxB;AACA6d,mBAAkBlhB,8BAAUqD,IA3CJ;;AA6CxB;AACA8kB,kBAAiBnoB,8BAAUqD,IA9CH;;AAgDxB;AACAie,gBAAethB,8BAAUqD,IAjDD;;AAmDxB;AACAqe,cAAa1hB,8BAAUqD,IApDC;;AAsDxB;AACA+d,cAAaphB,8BAAUqD,IAvDC;;AAyDxB;AACAme,YAAWxhB,8BAAUqD,IA1DG;;AA4DxB;AACAtF,WAAUiC,8BAAUqD,IA7DI;;AA+DxB;AACAyI,yBAAwB9L,8BAAUe,OAAV,CAAkBf,8BAAU/F,MAA5B,CAhEA;;AAkExB;;AAEA0R,eAAc3L,8BAAUe,OAAV,CAAkBf,8BAAUsD,MAA5B,CApEU;;AAsErB;;AAEAsgB,iBAAgB5jB,8BAAU/F;AAxEL,CAAzB;;AA2EAwmB,aAAajkB,YAAb,GAA4B;AAC3BqP,0BAAyB,IADE;AAE3B0T,cAAa,QAFc;AAG3BuO,qBAAoBtzB,SAHO;AAI3BuzB,gBAAe,IAJY;AAK3BC,oBAAmB,OALQ;AAM3BC,qBAAoB,uBANO;AAO3BC,2BAA0B,kCAPC;AAQ3BlN,mBAAkB,EARS;AAS3BpV,wBAAuB,IATI;AAU3Bsc,aAAYvwB,IAVe;AAW3BupB,mBAAkBvpB,IAXS;AAY3BwwB,kBAAiBxwB,IAZU;AAa3B2pB,gBAAe3pB,IAbY;AAc3BypB,cAAazpB,IAdc;AAe3B6pB,YAAW7pB,IAfgB;AAgB3B+pB,cAAa/pB,IAhBc;AAiB3BoG,WAAUpG,IAjBiB;AAkB3BmU,yBAAwB,IAlBG;AAmB3BH,eAAc,EAnBa;AAoBxBiY,iBAAgB;AApBQ,CAA5B;;AClTA;;;IAGMpI,OAAO,SAAPA,IAAO,CAAC3e,KAAD,EAAW;AAAA,KAChBlE,MADgB,GACYkE,KADZ,CAChBlE,MADgB;AAAA,KACRsO,SADQ,GACYpK,KADZ,CACRoK,SADQ;AAAA,KACG+L,KADH,GACYnW,KADZ,CACGmW,KADH;;;AAGvB,KAAMjK,UAAU,CACf;AACCzO,OAAK3B,MADN;AAECqa,SAAOA,KAFR;AAGCC,WAASta,MAHV;AAICwF,SAAO,GAJR;AAKCiS,gBACC,OAAOnJ,SAAP,KAAqB,UAArB,GACGA,SADH,GAEG;AAAA,OAAE/B,OAAF,QAAEA,OAAF;AAAA,UAAe5J;AAAA;AAAA;AAAM4J,YAAQ+B,SAAR;AAAN,IAAf;AAAA;AARL,EADe,CAAhB;AAYA,QAAO3L,wCAAC+L,OAAD,eAAWxK,KAAX,IAAkB,SAASkM,OAA3B,EAAoC,cAAciK,QAAQ,EAAR,GAAa,CAA/D,IAAP;AACA;;AAEDwI,KAAKzb,SAAL,GAAiB;AAChB;AACApH,SAAQqH,8BAAUsD,MAFF;;AAIhB;;;;AAIA2D,YAAWjH,8BAAUoH,SAAV,CAAoB,CAACpH,8BAAUqD,IAAX,EAAiBrD,8BAAUsD,MAA3B,CAApB,CARK;;AAUhB;AACA0P,QAAOhT,8BAAUsD;AAXD,CAAjB;;AAcAkY,KAAKhf,YAAL,GAAoB;AACnB7D,SAAQ,IADW;AAEnBsO,YAAW,IAFQ;AAGnB+L,QAAOxY;AAHY,CAApB;;ICpCMm1B,aAAa,SAAbA,UAAa,GAAwB;AAAA,QAAvBzzB,KAAuB,uEAAf,EAAe;AAAA,QAAX0zB,MAAW;;AACvC,YAAQA,OAAOp4B,IAAf;AACI,aAAKC,MAAYN,UAAjB;AAA6B;AAAA,oBAClBG,IADkB,GACVs4B,OAAOl4B,OADG,CAClBJ,IADkB;AAEzB;;AACA,oBAAIu4B,wBAAe3zB,KAAf,CAAJ;AACAC,+CAAW2zB,GAAX,CAAeD,QAAf,EAAyBv4B,IAAzB,EAA+B,EAA/B;AACA,uBAAOu4B,QAAP;AACH;AACD,aAAKp4B,MAAYL,cAAjB;AAAiC;AAAA,sCACTw4B,OAAOl4B,OADE;AAAA,oBACtBJ,KADsB,mBACtBA,IADsB;AAAA,oBAChBC,GADgB,mBAChBA,GADgB;;;AAG7B,oBAAIs4B,yBAAe3zB,KAAf,CAAJ;AACAC,+CAAW2zB,GAAX,CAAeD,SAAf,EAAyBv4B,KAAzB,EAA+BC,GAA/B,EAJ6B;;AAM7BsD,wBAAQk1B,KAAR,CAAc,gBAAd,EAAgCz4B,KAAhC,EAAsCC,GAAtC;AACA;AACA;AACA;AACA;;AAEA,uBAAOs4B,SAAP;AACH;AACD;AACI,mBAAO3zB,KAAP;AAvBR;AAyBH;;IC1BY8zB,iBAAiB,SAAjBA,cAAiB,CAAClN,OAAD;AAAA,WAAa,UAAC9O,OAAD;AAAA,eAAa8O,QAAQ9O,OAAR,EACnDrR,IADmD,CAC9C,oBAAY;AACd,8CAAaC,OAAb,CAAqB;AACjBjI,yBAAS;AADQ,aAArB;AAGH,SALmD,EAMnDkI,KANmD,CAM7C;AAAA,mBAASpI,kBAAkBC,KAAlB,EAAyB,uBAAzB,CAAT;AAAA,SAN6C,CAAb;AAAA,KAAb;AAAA;;ICDxBu1B,aAAa,EAAEjvB,MAAMwZ,QAAQxZ,IAAhB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}