{"version":3,"file":"index.js","sources":["../src/components/utils/baseUtils.js","../src/components/utils/variables.js","../src/components/Table/defaultSettings.js","../src/components/Table/Selectable/SelectionHead.js","../src/components/Table/Selectable/SelectionCell.js","../src/components/utils/datesUtils.js","../src/components/DateRange/DateRange.js","../src/components/SingleDate/SingleDate.js","../src/components/FilterPanel/FilterPanel.js","../src/components/Table/SelectionList/SelectionList.js","../src/redux/rtd.action.types.js","../src/redux/rtd.actions.js","../src/components/Table/Table.js","../src/components/Select/Select.js","../src/components/AdvancedTable/AdvancedTable.js","../src/components/Form/Form.js","../src/components/Form/FormModal.js","../src/components/Form/FormTable.js","../src/components/Form/HOCs.js","../src/components/FileManager/AddFolderModal.js","../src/components/utils/clipboardUtils.js","../src/components/FileManager/FileManager.js","../src/components/Modal/Modal.js","../src/components/Form/FormItem.js","../src/components/Layout/Layout.js","../src/components/Form/FormItems.js","../src/components/CommandPanel/CommandPanel.js","../src/components/List/List.js","../src/redux/rtd.reducer.js"],"sourcesContent":["import {notification} from 'antd';\n\nexport const noop = () => {};\n\nexport const flatten = (arrayOfArrays) =>\n\tarrayOfArrays.reduce(\n\t\t(flattened, item) =>\n\t\t\tflattened.concat(Array.isArray(item) ? flatten(item) : [item]),\n\t\t[]\n\t);\n\nexport const getTableRowObjects = (data) => {\n\tconst rowKeys = data.map((item) => {\n\t\tif (item.children && item.children.length) {\n\t\t\treturn [item, getTableRowObjects(item.children)];\n\t\t}\n\t\treturn item;\n\t});\n\treturn rowKeys;\n};\n\nexport const getTableRowKeys = (data, rowKey) => {\n\tconst rowKeys = data.map((item) => {\n\t\tif (item.children && item.children.length) {\n\t\t\treturn [item[rowKey], getTableRowKeys(item.children, rowKey)];\n\t\t}\n\t\treturn item[rowKey];\n\t});\n\treturn rowKeys;\n};\n\nexport const findNodeByRowKey = (data, rowKey, rowValue) => {\n\tlet node = {};\n\tlet item = {};\n\tfor (let i = 0; i < data.length; i++) {\n\t\titem = _findNodeByRowKey(data[i], rowKey, rowValue);\n\t\tif (item !== false) return item;\n\t}\n\treturn node;\n};\n\nconst _findNodeByRowKey = (currentNode, rowKey, value) => {\n\tlet i, currentChild, result;\n\n\tif (value === currentNode[rowKey]) {\n\t\treturn currentNode;\n\t} else {\n\t\tif (currentNode.children) {\n\t\t\tfor (i = 0; i < currentNode.children.length; i += 1) {\n\t\t\t\tcurrentChild = currentNode.children[i];\n\t\t\t\tresult = _findNodeByRowKey(currentChild, rowKey, value);\n\t\t\t\tif (result !== false) return result;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n};\n\nexport const generateUUID = () => {\n\treturn ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, (c) =>\n\t\t(\n\t\t\tc ^\n\t\t\t(crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\n\t\t).toString(16)\n\t);\n};\n\n\nexport const getValueFromSingleSelect = (name, keys) => (keys && keys.length > 0) ? keys[0] : null;\n\nexport const getValueFromMultiSelect = (name, keys) => (keys && keys.length > 0) ? keys : null;\n\nexport const getValueFromSelectTable = (rows) => {\n    if (rows && rows.length > 0) return rows[0];\n    else return null;\n};\n\nexport const getObjectExcludedProps = (object, exclude) => {\n    let returnObject = {};\n    Object.keys(object).forEach((key) =>\n        !exclude.includes(key) ? (returnObject[key] = object[key]) : null\n    );\n    return returnObject;\n};\n\nexport const notificationError = (error, message) => {\n\tif (error.response) {\n\t\tconsole.error(error.response.status, error.response.data);\n\t\tconst errorDescription = (error.response.data && error.response.data.error)\n\t\t\t? error.response.data.error\n\t\t\t: \"Нет описания ошибки\";\n\t\tnotification.error({\n\t\t\tmessage: `[${error.response.status}] ${message}`,\n\t\t\tdescription: errorDescription,\n\t\t});\n\t} else {\n\t\tconsole.error(error);\n\t\tnotification.error({\n\t\t\tmessage: 'Не удалось детектировать ошибку. См. console.error',\n\t\t});\n\t}\n};\n","export const rtPrefix = 'rt';\n","import {Spin} from 'antd';\nimport {LoadingOutlined} from '@ant-design/icons';\nimport React from 'react';\n\nexport const empty = (\n\t<div className={'BaseTable__overlay'}>\n\t\t{' '}\n\t\t<span>Нет данных</span>{' '}\n\t</div>\n);\n\nexport const overlay = (\n\t<div className={'BaseTable__overlay'}>\n\t\t{' '}\n\t\t<Spin\n\t\t\ttip='Загрузка...'\n\t\t\tindicator={<LoadingOutlined style={{fontSize: 24}} spin />}\n\t\t/>{' '}\n\t</div>\n);\n","import React from 'react';\nimport {Checkbox} from 'antd';\nimport { flatten, getTableRowKeys, getTableRowObjects } from \"../../utils/baseUtils\";\n\nconst SelectionHead = (props) => {\n\tconst {column, container} = props;\n\tconst {rowKey, onSelectAll, selectedRowKeys, selectAll} = column;\n\n\tconst _handleChange = (e) => {\n\t\tconst rowKeys = flatten(getTableRowKeys(container.props.data, column.rowKey));\n\t\tconst rowObjects = flatten(getTableRowObjects(container.props.data, rowKey)).filter((item) => rowKeys.includes(item[rowKey]));\n\t\tconst totalLength = rowKeys.length;\n\t\tconst selectLength = selectedRowKeys.length;\n\t\tconst checked = !(totalLength === selectLength);\n\n\t\t// const newRowKeys = container.props.data.map((item) => { return item[column.rowKey] });\n\t\tonSelectAll({selected: checked, rowKeys: rowKeys, rowObjects: rowObjects});\n\t};\n\n\treturn (\n\t\t<Checkbox\n\t\t\tindeterminate={selectAll === null}\n\t\t\tonChange={_handleChange}\n\t\t\tchecked={selectAll}\n\t\t/>\n\t);\n};\n\nexport default SelectionHead;\n","import React from 'react';\nimport {Checkbox} from 'antd';\nimport {\n\tflatten,\n\tgetTableRowKeys,\n\tfindNodeByRowKey, getTableRowObjects\n} from \"../../utils/baseUtils\";\n\nconst getRowChildren = (data, rowKey) =>\n\tdata.map((item) => {\n\t\tif (item.children && item.children.length) {\n\t\t\treturn [item[rowKey], getRowChildren(item.children, rowKey)];\n\t\t}\n\t\treturn item[rowKey];\n\t});\n\nconst findBrothers = (data, selfItem, rowKey, parentKey, rowKeys = null) => {\n\tlet arr = [];\n\tdata.forEach((item) => {\n\t\tif (\n\t\t\titem[parentKey] &&\n\t\t\titem[parentKey] === selfItem[parentKey] &&\n\t\t\titem[rowKey] !== selfItem[rowKey]\n\t\t) {\n\t\t\tif (rowKeys !== null) {\n\t\t\t\tif (rowKeys.includes(item[rowKey])) {\n\t\t\t\t\tarr.push(item[rowKey]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tarr.push(item[rowKey]);\n\t\t\t}\n\t\t} else if (item.children && item.children.length) {\n\t\t\tarr.push(\n\t\t\t\tfindBrothers(\n\t\t\t\t\titem.children,\n\t\t\t\t\tselfItem,\n\t\t\t\t\trowKey,\n\t\t\t\t\tparentKey,\n\t\t\t\t\trowKeys\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t});\n\treturn arr;\n};\n\nexport const parentAnalysis = ({\n\trowData,\n\trowKey,\n\tparentKey,\n\tchecked,\n\tnodeAssociated,\n\ttreeData,\n\tselectedRowKeys,\n\tindeterminateRowKeys,\n}) => {\n\tlet _selectedRowKeys = [...selectedRowKeys];\n\tlet _indeterminateRowKeys = [...indeterminateRowKeys];\n\n\tlet currentRowData = rowData;\n\tlet parentExist = !!currentRowData[parentKey];\n\tlet lastTypeSelect = checked ? 'checked' : 'square';\n\tlet typeSelect = '';\n\tlet nextSquare = false;\n\n\t/** Пока есть родитель */\n\twhile (parentExist && nodeAssociated) {\n\t\tconst indeterminateBrothers = flatten(\n\t\t\tfindBrothers(\n\t\t\t\ttreeData,\n\t\t\t\tcurrentRowData,\n\t\t\t\trowKey,\n\t\t\t\tparentKey,\n\t\t\t\t_indeterminateRowKeys\n\t\t\t)\n\t\t);\n\t\tconst selectedBrothers = flatten(\n\t\t\tfindBrothers(\n\t\t\t\ttreeData,\n\t\t\t\tcurrentRowData,\n\t\t\t\trowKey,\n\t\t\t\tparentKey,\n\t\t\t\t_selectedRowKeys\n\t\t\t)\n\t\t);\n\t\tconst allBrothers = flatten(\n\t\t\tfindBrothers(treeData, currentRowData, rowKey, parentKey)\n\t\t);\n\n\t\tif (checked) {\n\t\t\tif (\n\t\t\t\tlastTypeSelect === 'checked' &&\n\t\t\t\tselectedBrothers.length === allBrothers.length\n\t\t\t)\n\t\t\t\ttypeSelect = 'checked';\n\t\t\telse typeSelect = 'square';\n\t\t} else {\n\t\t\tif (\n\t\t\t\t!checked &&\n\t\t\t\t!nextSquare &&\n\t\t\t\t(selectedBrothers.length || indeterminateBrothers.length)\n\t\t\t)\n\t\t\t\tnextSquare = true;\n\t\t\tif (nextSquare) typeSelect = 'square';\n\t\t\telse typeSelect = 'none';\n\t\t}\n\n\t\t// console.log(\"allBrothers \", allBrothers);\n\t\t// console.log(\"findParentById \", treeData,\n\t\t//     rowKey,\n\t\t//     parentKey,\n\t\t//     currentRowData[parentKey]);\n\t\t//\n\t\t// console.log(\"findNodeByRowKey \", findNodeByRowKey(treeData, rowKey, currentRowData[parentKey]));\n\n\t\t// Найти родителя\n\t\tcurrentRowData = findNodeByRowKey(\n\t\t\ttreeData,\n\t\t\trowKey,\n\t\t\tcurrentRowData[parentKey]\n\t\t);\n\n\t\tif (typeSelect === 'checked') {\n\t\t\t// Выделить галкой\n\t\t\t// console.log(\"checked\");\n\t\t\tlastTypeSelect = 'checked';\n\t\t\tif (!_selectedRowKeys.includes(currentRowData[rowKey]))\n\t\t\t\t_selectedRowKeys.push(currentRowData[rowKey]);\n\t\t\tconst index = _indeterminateRowKeys.indexOf(currentRowData[rowKey]);\n\t\t\tif (index > -1) _indeterminateRowKeys.splice(index, 1);\n\t\t} else if (typeSelect === 'square') {\n\t\t\t// Выдлеить квадратом\n\t\t\t// console.log(\"square: \");\n\t\t\tlastTypeSelect = 'square';\n\t\t\tif (!_indeterminateRowKeys.includes(currentRowData[rowKey]))\n\t\t\t\t_indeterminateRowKeys.push(currentRowData[rowKey]);\n\t\t\tconst index = _selectedRowKeys.indexOf(currentRowData[rowKey]);\n\t\t\tif (index > -1) _selectedRowKeys.splice(index, 1);\n\t\t} else if (typeSelect === 'none') {\n\t\t\t// Снять выделение\n\t\t\t// console.log(\"none: \");\n\t\t\tlastTypeSelect = 'none';\n\t\t\tconst indexS = _selectedRowKeys.indexOf(currentRowData[rowKey]);\n\t\t\tif (indexS > -1) _selectedRowKeys.splice(indexS, 1);\n\t\t\tconst indexI = _indeterminateRowKeys.indexOf(\n\t\t\t\tcurrentRowData[rowKey]\n\t\t\t);\n\t\t\tif (indexI > -1) _indeterminateRowKeys.splice(indexI, 1);\n\t\t}\n\n\t\tparentExist = !!currentRowData[parentKey];\n\t\t// parentExist = проверка наличия след родителя\n\t}\n\n\treturn [_selectedRowKeys, _indeterminateRowKeys];\n};\n\nconst SelectionCell = (props) => {\n\tconst _handleChange = (checked) => {\n\t\tconst {rowData, rowIndex, column, container} = props;\n\t\tconst {\n\t\t\tonChange,\n\t\t\tselectedRowKeys,\n\t\t\tindeterminateRowKeys,\n\t\t\trowKey,\n\t\t\tparentKey,\n\t\t\tnodeAssociated,\n\t\t} = column;\n\n\t\t// const rowKeys = flatten(getTableRowKeys([rowData], column.rowKey));\n\t\t// const totalLength = container.props.data.length;\n\t\t// const checked = e.target.checked;\n\t\t// const currentRowKey = {[rowKey]: rowData[rowKey], checked};\n\t\t// console.log(\"_handleChange: \", selectedRowKeys);\n\n\t\tlet _selectedRowKeys = [...selectedRowKeys];\n\t\tlet _indeterminateRowKeys = [...indeterminateRowKeys];\n\n\t\t/** Обработка себя, поиск детей, выделение / снятие их */\n\t\tlet rowChildren = [];\n\t\tif (checked) {\n\t\t\tif (rowData.children && nodeAssociated)\n\t\t\t\trowChildren = flatten(getRowChildren(rowData.children, rowKey));\n\n\t\t\t_selectedRowKeys = _selectedRowKeys\n\t\t\t\t.concat([rowData[rowKey]])\n\t\t\t\t.concat(rowChildren);\n\t\t\t_indeterminateRowKeys = _indeterminateRowKeys.filter(\n\t\t\t\t(element) =>\n\t\t\t\t\telement !== rowData[rowKey] &&\n\t\t\t\t\t!rowChildren.includes(element)\n\t\t\t);\n\t\t} else {\n\t\t\tif (rowData.children && nodeAssociated)\n\t\t\t\trowChildren = flatten(\n\t\t\t\t\tgetRowChildren(rowData.children, rowKey, false)\n\t\t\t\t);\n\n\t\t\t_selectedRowKeys = _selectedRowKeys.filter(\n\t\t\t\t(element) =>\n\t\t\t\t\telement !== rowData[rowKey] &&\n\t\t\t\t\t!rowChildren.includes(element)\n\t\t\t);\n\t\t\t_indeterminateRowKeys = _indeterminateRowKeys.filter(\n\t\t\t\t(element) =>\n\t\t\t\t\telement !== rowData[rowKey] &&\n\t\t\t\t\t!rowChildren.includes(element)\n\t\t\t);\n\t\t}\n\n\t\t[_selectedRowKeys, _indeterminateRowKeys] = parentAnalysis({\n\t\t\trowData,\n\t\t\trowKey,\n\t\t\tparentKey,\n\t\t\tchecked,\n\t\t\tnodeAssociated,\n\t\t\ttreeData: container.props.data,\n\t\t\tselectedRowKeys: _selectedRowKeys,\n\t\t\tindeterminateRowKeys: _indeterminateRowKeys,\n\t\t});\n\n\t\tconst keys = [...new Set(_selectedRowKeys)];\n\t\tconst _selectedRowObjects = flatten(getTableRowObjects(container.props.data, rowKey)).filter((item) => keys.includes(item[rowKey]));\n\t\t//return [...new Set(_disabledElements)]\n\t\t// onChange({ selected: checked, totalLength, rowData, rowIndex });\n\n\t\t/** Выясняем новое состояние галочки \"Выделить все\" */\n\t\tlet selectAll;\n\t\tconst selectLength = _selectedRowKeys.length;\n\t\tconst totalLength = flatten(\n\t\t\tgetTableRowKeys(container.props.data, column.rowKey)\n\t\t).length;\n\n\t\tif (selectLength === 0) selectAll = false;\n\t\telse if (totalLength === selectLength) selectAll = true;\n\t\telse if (totalLength !== selectLength) selectAll = null;\n\n\n\n\t\tonChange({\n\t\t\tselected: checked,\n\t\t\t_selectedRow: {\n\t\t\t\trowData: {...rowData},\n\t\t\t\trowIndex: rowIndex,\n\t\t\t\trowKey: rowKey,\n\t\t\t},\n\t\t\t_selectAll: selectAll,\n\t\t\t_selectedRowKeys: keys, //[...new Set(_selectedRowKeys)],\n\t\t\t_selectedRowObjects: _selectedRowObjects,\n\t\t\t_indeterminateRowKeys: [...new Set(_indeterminateRowKeys)],\n\t\t});\n\n\t\t// let uniqIds = {};\n\t\t// onChange({selected: checked, rowKeys: rowKeys.filter(obj => !uniqIds[obj[rowKey]] && (uniqIds[obj[rowKey]] = true)) });\n\t};\n\n\tconst {rowData, column} = props;\n\tconst {selectedRowKeys, indeterminateRowKeys, rowKey} = column;\n\tconst det = indeterminateRowKeys.includes(rowData[rowKey]);\n\tconst checked = selectedRowKeys.includes(rowData[rowKey]);\n\n\treturn (\n\t\t<Checkbox\n\t\t\tindeterminate={det}\n\t\t\tonChange={(e) => _handleChange(e.target.checked)}\n\t\t\tchecked={checked}\n\t\t/>\n\t);\n};\n\nexport default SelectionCell;\n","import moment from 'moment';\n\nexport const APP_TIME_OFFSET = 3;\n\nexport const getMomentFromStringByFormat = (date, format) =>\n\tdate ? moment(date, format).utcOffset(APP_TIME_OFFSET) : null;\n\n// export const getMomentWithOffset = (date) =>\n// \tmoment(date).utcOffset(APP_TIME_OFFSET);\nexport const getMomentWithOffset = (date) => moment(date).format();\n\nexport const getMomentWithOffsetTruncateDay = (date) =>\n\tgetMomentWithOffset(date)\n\t\t.hours(0)\n\t\t.minutes(0)\n\t\t.seconds(0)\n\t\t.milliseconds(0)\n\t\t.format();\n\n\nexport const toFormat = (dateString, format) => {\n\tif (!dateString) {\n\t\treturn '';\n\t}\n\tconst mom = moment(dateString);\n\treturn mom.isValid() ? mom.format(format) : dateString;\n};\n\nexport const toDDMMYYYYdot = (dateString) => toFormat(dateString, 'DD.MM.YYYY');\n\nexport const toDDMMYYYYdotAltDashDash = (dateString) =>\n\ttoDDMMYYYYdot(dateString) || '--';\n\nexport const toDDMMYYYYHHMMSS = (dateString) =>\n\ttoFormat(dateString, 'DD.MM.YYYY HH:mm:ss') || '--';\n\nexport const toDDMMYYYYdash = (dateString) =>\n\ttoFormat(dateString, 'DD-MM-YYYY');\n\nexport const getISO = (date) =>\n\tmoment(date).utcOffset(APP_TIME_OFFSET).toISOString();\n","import React, {useState, useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\nimport {DatePicker} from 'antd';\nimport locale from 'antd/es/date-picker/locale/ru_RU';\nimport {noop} from '../utils/baseUtils';\nimport {rtPrefix} from '../utils/variables';\nimport {\n\tgetMomentWithOffset,\n\tgetMomentWithOffsetTruncateDay,\n\tgetMomentFromStringByFormat,\n} from '../utils/datesUtils';\n\nconst DateRange = (props) => {\n\t/** Состояние первоначалной настройки компонента */\n\tconst [mounted, setMounted] = useState(false);\n\tconst [startValue, setStartValue] = useState(undefined);\n\tconst [endValue, setEndValue] = useState(undefined);\n\n\tconst {\n        className,\n\t\tnameStart,\n\t\tnameEnd,\n\t\tdateFormat,\n\t\tonChange,\n        size,\n\t\ttitle,\n\t\tvalueStart,\n\t\tvalueEnd,\n\t\tshowTime,\n\t} = props;\n\n\tuseEffect(() => {\n\t\tif (!mounted) {\n\t\t\tif (props.defaultValueStart) {\n                // console.log(\"DateRange mounted :\", nameStart, props.defaultValueStart);\n                _onChange(\n\t\t\t\t\tnameStart,\n\t\t\t\t\tgetMomentFromStringByFormat(\n\t\t\t\t\t\tprops.defaultValueStart,\n\t\t\t\t\t\tdateFormat\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\tsetStartValue(\n\t\t\t\t\tgetMomentFromStringByFormat(\n\t\t\t\t\t\tprops.defaultValueStart,\n\t\t\t\t\t\tdateFormat\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (props.defaultValueEnd) {\n\t\t\t\t_onChange(\n\t\t\t\t\tnameEnd,\n\t\t\t\t\tgetMomentFromStringByFormat(\n\t\t\t\t\t\tprops.defaultValueEnd,\n\t\t\t\t\t\tdateFormat\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\tsetEndValue(\n\t\t\t\t\tgetMomentFromStringByFormat(\n\t\t\t\t\t\tprops.defaultValueEnd,\n\t\t\t\t\t\tdateFormat\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\tsetMounted(true);\n\t\t}\n\t}, [mounted]);\n\n\tuseEffect(() => {\n\t\tif (valueStart) {\n\t\t\tsetStartValue(moment(valueStart));\n\t\t\t// console.log('useEffect -> valueStart', valueStart);\n\t\t} else if (!props.defaultValueStart) setStartValue(null);\n\t}, [valueStart]);\n\tuseEffect(() => {\n\t\tif (valueEnd) {\n\t\t\tsetEndValue(moment(valueEnd));\n\t\t\t// console.log('useEffect -> valueEnd', valueEnd);\n\t\t} else if (!props.defaultValueEnd) setEndValue(null);\n\t}, [valueEnd]);\n\n\tconst disabledStartDate = (startValue) => {\n\t\tif (!startValue || !endValue) {\n\t\t\treturn false;\n\t\t}\n\t\treturn startValue.valueOf() > endValue.valueOf();\n\t};\n\n\tconst disabledEndDate = (endValue) => {\n\t\tif (!endValue || !startValue) {\n\t\t\treturn false;\n\t\t}\n\t\treturn endValue.valueOf() <= startValue.valueOf();\n\t};\n\n\tconst onStartChange = (date) => {\n\t\tsetStartValue(date);\n\t\t_onChange(nameStart, date);\n\t};\n\n\tconst onEndChange = (date) => {\n\t\tsetEndValue(date);\n\t\t_onChange(nameEnd, date);\n\t};\n\n\tconst _onChange = (name, value) => {\n\t\tif (value)\n\t\t\tif(showTime)\n\t\t\t\tonChange(name, getMomentWithOffset(value));\n\t\t\telse\n\t\t\t\tonChange(name, getMomentWithOffsetTruncateDay(value));\n\n\t\telse onChange(name, value);\n\t};\n\n\treturn (\n\t\t<div className={`${className} ${rtPrefix}-date-range`}>\n\t\t\t<div>\n                {title ? <div className={'title'}>{title}</div> : null}\n\t\t\t\t<span className={'subtitleStart'}>c</span>\n\t\t\t\t<DatePicker\n\t\t\t\t\tlocale={locale}\n\t\t\t\t\t// defaultValue={ checkDefValue(props.defaultValueStart) }\n\t\t\t\t\tsize={size}\n\t\t\t\t\tstyle={{width: !!showTime ? '160px' : '135px'}}\n\t\t\t\t\tdisabledDate={disabledStartDate}\n\t\t\t\t\tonChange={onStartChange}\n\t\t\t\t\tformat={dateFormat}\n\t\t\t\t\tplaceholder={'Выберите дату'}\n\t\t\t\t\tvalue={startValue}\n\t\t\t\t\tshowTime={showTime}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<span className={'subtitleEnd'}>по</span>\n\t\t\t\t<DatePicker\n\t\t\t\t\tlocale={locale}\n\t\t\t\t\t// defaultValue={ checkDefValue(props.defaultValueEnd) }\n\t\t\t\t\tsize={size}\n\t\t\t\t\tstyle={{width: showTime ? '160px' : '135px'}}\n\t\t\t\t\tdisabledDate={disabledEndDate}\n\t\t\t\t\tonChange={onEndChange}\n\t\t\t\t\tformat={dateFormat}\n\t\t\t\t\tplaceholder={'Выберите дату'}\n\t\t\t\t\tvalue={endValue}\n\t\t\t\t\tshowTime={showTime}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nDateRange.propTypes = {\n\t/** Формат отображения даты (не влияет на формат в onChange) */\n\tdateFormat: PropTypes.string,\n\n\t/** Значение по умолчанию для первого пикера */\n\t// defaultValueStart: PropTypes.string,\n\n\t/** Значение по умолчанию для второго пикера */\n\t// defaultValueEnd: PropTypes.string,\n\n    /** Дополнительное имя класса для элемента */\n    className: PropTypes.string,\n\n\t/** Наименование параметра для первого пикера */\n\tnameStart: PropTypes.string,\n\n\t/** Наименование параметра для второго пикера */\n\tnameEnd: PropTypes.string,\n\n\t/** Событие при изменении любого из пикеров */\n\tonChange: PropTypes.func,\n\n    /** Размер пикера ['small', 'middle', 'large'] */\n    size: PropTypes.oneOf(['small', 'middle', 'large']),\n\n\t/** Заголовок */\n\ttitle: PropTypes.string,\n\n\t/** Значение даты первого пикера (используется для управления датой из родительного компонента) */\n\t// valueStart: PropTypes.string,\n\n\t/** Значение даты второго пикера (используется для управления датой из родительного компонента) */\n\t// valueEnd: PropTypes.string,\n};\n\nDateRange.defaultProps = {\n    className: '',\n\tnameStart: 'dateStart',\n\tnameEnd: 'dateEnd',\n\tdateFormat: 'DD.MM.YYYY',\n\tonChange: noop,\n    size: 'middle',\n    // title: 'Период',\n};\n\nexport default DateRange;\n","import React, {useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport {DatePicker} from 'antd';\nimport moment from 'moment';\nimport {noop} from '../utils/baseUtils';\nimport {\n\tgetMomentFromStringByFormat,\n\tgetMomentWithOffsetTruncateDay,\n} from '../utils/datesUtils';\n\nconst SingleDate = (props) => {\n\t/** Состояние первоначалной настройки компонента */\n\tconst [mounted, setMounted] = useState(false);\n\tconst [_value, setValue] = useState(null);\n\n\tconst {dateFormat, defaultValue, name, onChange, title, value, className} = props;\n\n\tuseEffect(() => {\n\t\tif (!mounted) {\n\t\t\t// console.log(\"DateRange mounted :\", nameFrom, props.defaultValueFrom);\n\t\t\tif (defaultValue) {\n\t\t\t\t_onChange(\n\t\t\t\t\tname,\n\t\t\t\t\tgetMomentFromStringByFormat(defaultValue, dateFormat)\n\t\t\t\t);\n\t\t\t\tsetValue(getMomentFromStringByFormat(defaultValue, dateFormat));\n\t\t\t}\n\t\t\tsetMounted(true);\n\t\t}\n\t}, [mounted]);\n\n\tuseEffect(() => {\n\t\tif (value) {\n\t\t\tsetValue(moment(value));\n\t\t} else if (!defaultValue) setValue(null);\n\t}, [value]);\n\n\tconst _onChangePicker = (date) => {\n\t\tsetValue(date);\n\t\t_onChange(name, date);\n\t};\n\n\tconst _onChange = (name, value) => {\n\t\tif (value) onChange(name, getMomentWithOffsetTruncateDay(value));\n\t\telse onChange(name, value);\n\t};\n\n\treturn (\n\t\t<div className={`single-date-container ${className}`}>\n\t\t\t<div className={'title'}>{title}</div>\n\t\t\t<DatePicker\n\t\t\t\tsize={'small'}\n\t\t\t\tstyle={{width: '135px'}}\n\t\t\t\tonChange={_onChangePicker}\n\t\t\t\tformat={dateFormat}\n\t\t\t\tplaceholder={'Выберите дату'}\n\t\t\t\tvalue={_value}\n\t\t\t/>\n\t\t</div>\n\t);\n};\n\nSingleDate.propTypes = {\n\t/** Формат отображения даты (не влияет на формат в onChange) */\n\tdateFormat: PropTypes.string,\n\n\t/** Значение по умолчанию */\n\tdefaultValue: PropTypes.string,\n\n\t/** Наименование параметра */\n\tname: PropTypes.string,\n\n    /** Дополнительное имя класса для элемента */\n    className: PropTypes.string,\n\n\t/** Событие при изменении пикера */\n\tonChange: PropTypes.func,\n\n\t/** Заголовок */\n\ttitle: PropTypes.string,\n\n\t/** Значение даты */\n\tvalue: PropTypes.string,\n};\n\nSingleDate.defaultProps = {\n\tname: 'date',\n\tdateFormat: 'DD.MM.YYYY',\n\tonChange: noop,\n\ttitle: 'Дата',\n};\n\nexport default SingleDate;\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Button, Tooltip } from \"antd\";\nimport { noop } from \"../utils/baseUtils\";\nimport DateRange from \"../DateRange/DateRange\";\nimport SingleDate from \"../SingleDate/SingleDate\";\nimport Select from \"../Select/Select\";\nimport { rtPrefix } from \"../utils/variables\";\n\nconst FilterPanel = (props) => {\n  /**\n   * Период с, по (день / месяц / год)\n   * Множественный выбор (дерево с галочками с поиском) (ajax / const)\n   * Множественный выбор (список с поиском) (ajax / const)\n   * Единственный выбор (список с поиском) (ajax / const)\n   */\n\n  const [filter, setFilter] = useState(props.defaultFilter);\n  // const [multiSelectObjects, setMultiSelectObjects] = useState([]);\n\n  const {\n    applyFilterTooltip,\n    applyFilterSize,\n    applyFilterRender,\n    borderStyle,\n    onChangeFilter,\n    onApplyFilter,\n    configFilter,\n    resetFilterRender,\n    resetFilterTooltip,\n    resetFilterSize\n  } = props;\n\n  useEffect(() => {\n    setFilter(props.defaultFilter);\n  }, []);\n\n  const _onChangeData = (name, value) => {\n    // console.log(\"FilterPanel -> onChangeData\", name, value);\n    let _filter = { ...filter };\n    if (value === null) {\n      delete _filter[name];\n    } else {\n      _filter = { ..._filter, ...{ [name]: value } };\n    }\n    // console.log(\"onChangeData:\", _filter);\n    setFilter(_filter);\n    onChangeFilter(_filter);\n  };\n\n  const _applyFilter = () => {\n    // console.log(\"_applyFilter:\", filter);\n    onApplyFilter(filter);\n  };\n  const _resetFilter = () => {\n    // console.log(\"_resetFilter:\", props.defaultFilter);\n    setFilter(props.defaultFilter);\n    onChangeFilter(props.defaultFilter);\n    onApplyFilter(props.defaultFilter);\n    // setMultiSelectObjects([]);\n  };\n\n  // const _onChangeObjects = (name, value) => {\n  // \tlet _multiSelectObjects = {...multiSelectObjects};\n  // \tif (value === null) {\n  // \t\tdelete _multiSelectObjects[name];\n  // \t} else {\n  // \t\t_multiSelectObjects = {..._multiSelectObjects, ...{[name]: value}};\n  // \t}\n  // \t// console.log(\"onChangeData:\", _filter);\n  // \tsetMultiSelectObjects(_multiSelectObjects);\n  // };\n  const getPanelCls = () => {\n    let cls = [`${rtPrefix}-filter-panel`];\n    cls.push(`border-${borderStyle}`);\n    if (configFilter.findIndex((item) => !!item.title) === -1)\n      cls.push(`${rtPrefix}-filter-panel-no-title`);\n    return cls.join(\" \");\n  };\n\n  return (\n    <React.Fragment>\n      {configFilter && configFilter.length ? (\n        <div className={getPanelCls()}>\n          {configFilter.map((item, index) => {\n            // console.log(\"item.defaultRows\", item.defaultRows);\n            let cls = [`${rtPrefix}-filter-panel-item`];\n            item.className && cls.push(item.className);\n            switch (item.componentType) {\n              case \"DateRange\":\n                return (\n                  <DateRange\n                    key={index}\n                    {...item}\n                    className={cls.join(\" \")}\n                    defaultValueStart={\n                      filter[item.nameStart]\n                        ? filter[item.nameStart]\n                        : null\n                    }\n                    defaultValueEnd={\n                      filter[item.nameEnd]\n                        ? filter[item.nameEnd]\n                        : null\n                    }\n                    onChange={_onChangeData}\n                    valueStart={filter[item.nameStart]}\n                    valueEnd={filter[item.nameEnd]}\n                  />\n                );\n              case \"SingleDate\":\n                return (\n                  <SingleDate\n                    key={index}\n                    {...item}\n                    className={cls.join(\" \")}\n                    dateFormat={\n                      item.dateFormat\n                        ? item.dateFormat\n                        : undefined\n                    }\n                    defaultValue={\n                      filter[item.name]\n                        ? filter[item.name]\n                        : null\n                    }\n                    onChange={_onChangeData}\n                    value={filter[item.name]}\n                  />\n                );\n              case \"MultiSelect\":\n              case \"SingleSelect\":\n                return (\n                  <Select\n                    key={index}\n                    {...item}\n                    type={item.componentType}\n                    defaultSelectedRowKeys={\n                      filter[item.name]\n                        ? filter[item.name]\n                        : null\n                    }\n                    selectedRowKeys={filter[item.name] ? filter[item.name] : []}\n                    className={cls.join(\" \")}\n                    onChangeKeys={_onChangeData}\n                    defaultValue={\n                      filter[item.name]\n                        ? filter[item.name]\n                        : null\n                    }\n                    value={filter[item.name]}\n                  />\n                );\n              case \"Custom\":\n                return (\n                  <React.Fragment key={index}>\n                    {\n                      item.render({\n                        onChange: _onChangeData,\n                        defaultValue: filter[item.name]\n                          ? filter[item.name]\n                          : null,\n                        value: filter[item.name]\n                      })\n                    }\n                  </React.Fragment>);\n              default:\n                return null;\n            }\n          })}\n          <Tooltip title={applyFilterTooltip}>\n            <Button\n              type='primary'\n              size={applyFilterSize}\n              style={{ marginLeft: \"auto\" }}\n              onClick={_applyFilter}\n            >\n              {applyFilterRender}\n            </Button>\n          </Tooltip>\n          <Tooltip title={resetFilterTooltip}>\n            <Button\n              size={resetFilterSize}\n              style={{ marginLeft: \"10px\" }}\n              onClick={_resetFilter}\n            >\n              {resetFilterRender}\n            </Button>\n          </Tooltip>\n        </div>\n      ) : null}\n    </React.Fragment>\n  );\n};\n\nFilterPanel.propTypes = {\n\n  /** Тест Tooltip для кнопки \"Применить фильтр\" */\n  applyFilterTooltip: PropTypes.string,\n\n  /** Размер кнопки \"Применить фильтр\" ['small', 'middle', 'large'] */\n  applyFilterSize: PropTypes.oneOf([\"small\", \"middle\", \"large\"]),\n\n  /** Строка / функция / элемент для отображения в кнопке \"Применить фильтр\" */\n  applyFilterRender: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.element,\n    PropTypes.string\n  ]),\n\n  /** Тип бордера панели (по умолчанию 'none')\n   * ['all', 'none', 'top', 'left', 'bottom', 'right', 'top-bottom', 'left-right'] */\n  borderStyle: PropTypes.oneOf([\n    \"all\",\n    \"none\",\n    \"top\",\n    \"left\",\n    \"bottom\",\n    \"right\",\n    \"top-bottom\",\n    \"left-right\"\n  ]),\n\n  /** Объект фильтра по умолчанию */\n  defaultFilter: PropTypes.object,\n\n  /** Конфигурация панели фильтров */\n  configFilter: PropTypes.arrayOf(PropTypes.object),\n\n  /** Событие по кнопке выполнить фильтр */\n  onApplyFilter: PropTypes.func,\n\n  /** Событие по изменение объекта фильтра */\n  onChangeFilter: PropTypes.func,\n\n  /** Тест Tooltip для кнопки \"Сбросить фильтр\" */\n  resetFilterTooltip: PropTypes.string,\n\n  /** Размер кнопки \"Сбросить фильтр\" ['small', 'middle', 'large'] */\n  resetFilterSize: PropTypes.oneOf([\"small\", \"middle\", \"large\"]),\n\n  /** Строка / функция / элемент для отображения в кнопке \"Сбросить фильтр\" */\n  resetFilterRender: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.element,\n    PropTypes.string\n  ])\n};\n\nFilterPanel.defaultProps = {\n  applyFilterTooltip: \"Применить фильтр\",\n  applyFilterSize: \"middle\",\n  applyFilterRender: \"Применить\",\n  borderStyle: \"none\",\n  defaultFilter: {},\n  configFilter: [],\n  onApplyFilter: noop,\n  onChangeFilter: noop,\n  resetFilterTooltip: \"Сбросить фильтр\",\n  resetFilterSize: \"middle\",\n  resetFilterRender: \"Сбросить\"\n};\n\nexport default FilterPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {CloseCircleOutlined} from '@ant-design/icons';\nimport {rtPrefix} from '../../utils/variables';\n\nconst SelectionList = (props) => {\n\tconst {selectedRowObjects, rowRender, onClickDropSelect} = props;\n\n\t// console.log(\"SelectionList typeof -> \", typeof(rowRender));\n\treturn (\n\t\t<div className={`${rtPrefix}-table-selected-rows`}>\n\t\t\t{selectedRowObjects && selectedRowObjects.length > 0 ? (\n\t\t\t\t<ul>\n\t\t\t\t\t{selectedRowObjects.map((item, index) => (\n\t\t\t\t\t\t<li key={index}>\n\t\t\t\t\t\t\t{/*{(typeof(rowRender) === 'string') ? <div>{item[rowRender]}</div> : rowRender }*/}\n\t\t\t\t\t\t\t{typeof rowRender === 'function' ? (\n\t\t\t\t\t\t\t\trowRender({rowData: item, rowIndex: index})\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div>{item[rowRender]}</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<div onClick={() => onClickDropSelect(item)}>\n\t\t\t\t\t\t\t\t<CloseCircleOutlined />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t) : (\n\t\t\t\t<div>Нет выбранных записей</div>\n\t\t\t)}\n\t\t</div>\n\t);\n};\n\nSelectionList.propTypes = {\n\t/** Строка или функция для отображения элементов списка\n\t * Строка - имя поля\n\t * Функция - рендер строк. Параметры v\n\t * { rowData, rowIndex }) */\n\trowRender: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n\n\t/** Список выделенных объектов */\n\tselectedRowObjects: PropTypes.arrayOf(PropTypes.object).isRequired,\n\n\t/** Событие удаления элемента */\n\tonClickDropSelect: PropTypes.func.isRequired,\n};\n\nSelectionList.defaultProps = {};\n\nexport default SelectionList;\n","const types =\n{\n    INIT_STORE: 'INIT_STORE',\n    SET_DATA_STORE: 'SET_DATA_STORE',\n};\n\nexport {types as actionTypes};\n","import {actionTypes} from './rtd.action.types';\n\nexport const initStore = (path) => ({\n    type: actionTypes.INIT_STORE,\n    payload: {path}\n});\n\nexport const setDateStore = (path, row) => ({\n    type: actionTypes.SET_DATA_STORE,\n    payload: {path, row}\n});\n","import React, {useRef, forwardRef, useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport {notification} from 'antd';\nimport SortOrder from 'react-base-table/lib/SortOrder';\nimport BaseTable, {AutoResizer, callOrReturn, Column} from 'react-base-table';\nimport {empty, overlay} from './defaultSettings';\nimport SelectionHead from '../Table/Selectable/SelectionHead';\nimport SelectionCell, {parentAnalysis} from '../Table/Selectable/SelectionCell';\nimport CommandPanel from '../CommandPanel/CommandPanel';\nimport FilterPanel from '../FilterPanel/FilterPanel';\nimport SelectionList from '../Table/SelectionList/SelectionList';\nimport {rtPrefix} from '../utils/variables';\nimport {\n\tflatten,\n\tgenerateUUID,\n\tgetTableRowKeys,\n\tfindNodeByRowKey,\n\tnoop,\n\tgetTableRowObjects, notificationError\n} from \"../utils/baseUtils\";\nimport objectPath from \"object-path\";\nimport { setDateStore } from \"../../redux/rtd.actions\";\nimport FormItems from \"../Form/FormItems\";\n\n\n\nconst Table = forwardRef((props, ref) => {\n\t/** Состояние первоначалной настройки компонента*/\n\tconst [mounted, setMounted] = useState(false);\n\t/** Наличие на сервере еще данных */\n\tconst [hasMore, setHasMore] = useState(true);\n\t/** Индикатор загрузки данных */\n\tconst [loading, setLoading] = useState(false);\n\n\t/** Indoor control */\n\tconst [_rows, _setRows] = useState([]);\n\tconst [_selectedRowKeys, setSelectedRowKeys] = useState([]);\n\tconst [_searchValue, setSearchValue] = useState({});\n\tconst [_filter, setFilter] = useState(false);\n\tconst [_sortBy, setSortBy] = useState(false);\n\n\t/** Selectable States */\n\tconst [selectAll, setSelectAll] = useState(false);\n\n\t/** Tree States */\n\tconst [_indeterminateRowKeys, setIndeterminateRowKeys] = useState([]);\n    const [_expandedRowKeys, setExpandedRowKeys] = useState([]);\n\n    const [_totalCountRows, setTotalCountRows] = useState(0);\n\n    const [_footerShow, _setFooterShow] = useState(false);\n\n    const tableRef = useRef();\n\n\tconst {\n\t\t/** Def values */\n\t\tdefaultRows,\n\t\tdefaultSelectedRowKeys,\n\t\tdefaultSearchValue,\n\t\tdefaultFilter,\n\t\tdefaultSortBy,\n\n\t\t/** Outdoor control */\n\t\trows,\n\t\tsetRows,\n\t\tselectedRowKeys,\n\t\tsearchValue,\n\t\tfilter,\n\t\tsortBy,\n\n\t\t/** Required */\n\t\tcolumns,\n\t\ttype,\n\n\t\t/** Base Props */\n\t\tautoDeleteRows,\n\t\trowKey,\n\n\t\t/** View Props */\n\t\tempty,\n\t\tfixWidthColumn,\n\t\tfooterHeight,\n\t\tfooterShow,\n        footerTitles,\n\t\t// footerProps,\n\t\theaderHeight,\n\t\trowHeight,\n\t\tzebraStyle,\n\t\trowRenderer,\n\t\testimatedRowHeight,\n\n\t\t/** Load Data Props */\n\t\tloadThreshold,\n\t\tpageSize,\n\t\trequestLoadRows,\n        requestLoadCount,\n\t\tsearchParamName,\n\n\t\t/** Selectable Props */\n\t\tselectable,\n\n\t\t/** Tree Props */\n\t\tnodeAssociated,\n\t\texpandColumnKey,\n\t\texpandParentKey,\n\t\texpandLazyLoad,\n\t\texpandDefaultAll,\n\n\t\t/** Events */\n\t\tonRowClick,\n\t\tonRowDoubleClick,\n\t\tonRowExpand,\n\t\tonSelectedRowsChange,\n\t\tonExpandedRowsChange,\n\n\t\t/** SELECTED PANEL */\n\t\tshowSelection,\n\t\trowRenderShowSelection,\n\n\t\t/** REDUX PROPS */\n\t\tdispatchPath,\n\t\tsubscribe,\n\t} = props;\n\n\t// console.log('props.commandPanelProps => ', props.commandPanelProps);\n\tconst commandPanelProps = {\n\t\t...CommandPanel.defaultProps,\n\t\t...props.commandPanelProps,\n\t};\n\tconst filterPanelProps = {\n\t\t...FilterPanel.defaultProps,\n\t\t...props.filterPanelProps,\n\t};\n\n\tconst footerProps = {\n\t\t...Table.defaultProps.footerProps,\n\t\t...props.footerProps,\n\t};\n\n\tconst selectedDispatchPath = dispatchPath && `${dispatchPath}.selected`;\n\tconst rowsDispatchPath = dispatchPath && `${dispatchPath}.rows`;\n\n\n\tuseEffect(() => {\n        // console.log(\"Инициализация дефолтных значений \");\n        // console.log(\"Инициализация дефолтных значений defaultSelectedRowKeys > \", defaultSelectedRowKeys);\n\n\t\t// Инициализация дефолтных значений\n\t\t// _setRows(defaultRows);\n\t\t_setRowsHandler(defaultRows);\n\t\tsetSelectedRowKeys(defaultSelectedRowKeys);\n\t\tsetSearchValue(defaultSearchValue);\n\t\tsetFilter(defaultFilter);\n\t\tsetSortBy(defaultSortBy);\n\t\tsetSelectAll(\n\t\t\tdefaultRows.length > 0 &&\n\t\t\t\tdefaultRows.length === defaultSelectedRowKeys.length\n\t\t);\n\t\t// Определение нужно ли отображать подвал\n\t\t_setFooterShow(\n\t\t\t(footerProps.showElements.length ||\n\t\t\tfooterProps.leftCustomSideElement ||\n\t\t\tfooterProps.centerCustomSideElement ||\n\t\t\tfooterProps.rightCustomSideElement));\n\n\t\tif (!!expandColumnKey && !expandLazyLoad) {\n\t\t\t// Открытие всех нод\n\t\t\tif (expandDefaultAll)\n\t\t\t\tsetExpandedRowKeys(\n\t\t\t\t\tflatten(getTableRowKeys(defaultRows, rowKey))\n\t\t\t\t);\n\t\t\t// Установка квадратиков на нужных нодах\n\t\t\tif (defaultSelectedRowKeys && defaultSelectedRowKeys.length > 0) {\n\t\t\t\tlet flatRows = flatten(getTableRowKeys(defaultRows, rowKey));\n\t\t\t\tlet selectedRow = flatRows.filter((item) =>\n\t\t\t\t\tdefaultSelectedRowKeys.includes(item[rowKey])\n\t\t\t\t);\n\t\t\t\tlet _indeterminateRowKeys = [];\n\t\t\t\tselectedRow.forEach((item) => {\n\t\t\t\t\tconst [ss, ii] = parentAnalysis({\n\t\t\t\t\t\trowData: item,\n\t\t\t\t\t\trowKey,\n\t\t\t\t\t\tparentKey: expandParentKey,\n\t\t\t\t\t\tchecked: true,\n\t\t\t\t\t\tnodeAssociated,\n\t\t\t\t\t\ttreeData: defaultRows,\n\t\t\t\t\t\tselectedRowKeys: defaultSelectedRowKeys,\n\t\t\t\t\t\tindeterminateRowKeys: _indeterminateRowKeys,\n\t\t\t\t\t});\n\t\t\t\t\t_indeterminateRowKeys.push(...ii);\n\t\t\t\t});\n\t\t\t\tsetIndeterminateRowKeys([...new Set(_indeterminateRowKeys)]);\n\t\t\t}\n\t\t}\n\n\t\tif (type !== 'localSide') {\n\t\t\t_dataProcessing({\n\t\t\t\tsortBy: defaultSortBy,\n\t\t\t\tfilter: defaultFilter,\n\t\t\t\tsearchLine: defaultSearchValue,\n\t\t\t\treload: true,\n\t\t\t});\n\t\t}\n\t\t// console.log(\"Table => props \", props);\n\t\tsetMounted(true);\n\t\tif (ref && typeof ref === 'function') ref({reloadData});\n\t\telse if (ref && typeof ref === 'object') ref.current = {reloadData};\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (type === 'localSide') {\n\t\t\t// console.log(\"Control useEffect => \", rows, selectedRowKeys, searchValue, filter, sortBy);\n\t\t\t// _setRows(rows);\n\t\t\t_setRowsHandler(rows);\n\t\t\tsetSelectedRowKeys(selectedRowKeys);\n\t\t\tsetSearchValue(searchValue);\n\t\t\tsetFilter(filter);\n\t\t\tsetSortBy(sortBy);\n\t\t\tif (!!expandColumnKey && !expandLazyLoad) {\n\t\t\t\t// Открытие всех нод\n\t\t\t\tif (expandDefaultAll)\n\t\t\t\t\tsetExpandedRowKeys(flatten(getTableRowKeys(rows, rowKey)));\n\t\t\t}\n\t\t}\n    }, [rows, selectedRowKeys, searchValue, filter, sortBy]);\n\n\t/** Подписка на изменение props[subscribe.name] в сторе */\n\tuseEffect( () => {\n\t\tif(subscribe.name) {\n\t\t\t// console.log(\"Table => useEffect => subscribe.value \", props[subscribe.name]);\n\t\t\tsubscribe.onChange && subscribe.onChange({value: props[subscribe.name], setReloadTable: reloadData});\n\t\t}\n\t}, [props[subscribe.name]]);\n\n\n\t/** BASE FUNCTIONS */\n\tconst _setRowsHandler = (rows) => {\n\t\t_setRows(rows);\n\t\trowsDispatch(rows);\n\t};\n\tconst setRowsHandler = (rows) => {\n\t\tsetRows(rows);\n\t\trowsDispatch(rows);\n\t};\n\tconst rowsDispatch = (rows) => {\n\t\trowsDispatchPath && props.setDateStore && props.setDateStore(rowsDispatchPath, rows);\n\t};\n\n\tconst reloadData = ({sortBy, filter, searchValue}) => {\n\t\t// console.log(\"reloadData params \", sortBy, filter, searchValue, loading);\n        if(props.value && props.value.length > 0)\n            setSelectedRowKeys(props.value.map(item => item[rowKey]));\n        else\n            setSelectedRowKeys([]);\n\t\t// setSelectedRowKeys([]);\n\t\tif(sortBy) setSortBy(sortBy);\n\t\tif(filter) setFilter(filter);\n\t\tif(searchValue) setSearchValue(searchValue);\n\t\t_dataProcessing({\n\t\t\tsortBy: sortBy ? sortBy : _sortBy,\n\t\t\tfilter: filter ? filter : _filter,\n\t\t\tsearchLine: searchValue ? searchValue : _searchValue,\n\t\t\treload: true,\n\t\t});\n        // console.log(\"reloadData loading \", loading);\n    };\n\n\tconst _dataProcessing = (params) => {\n\t\t// console.log('_dataProcessing', params);\n\t\tconst {sortBy, filter, searchLine, expandRow, reload} = params;\n\t\tswitch (type) {\n\t\t\tcase 'infinity':\n\t\t\tcase 'serverSide':\n\t\t\t\tif ((hasMore || reload) && !loading) {\n\t\t\t\t\tsetLoading(true);\n\t\t\t\t\tconst pageNum = reload\n\t\t\t\t\t\t? 0\n\t\t\t\t\t\t: Math.floor(_rows.length / pageSize);\n\t\t\t\t\tconst params = {\n\t\t\t\t\t\tpage: pageNum,\n\t\t\t\t\t\tsize: pageSize,\n\t\t\t\t\t\tsort:\n\t\t\t\t\t\t\tsortBy && sortBy.key\n\t\t\t\t\t\t\t\t? sortBy.key + ',' + sortBy.order\n\t\t\t\t\t\t\t\t: null,\n\t\t\t\t\t};\n\t\t\t\t\tconst dataQuery = {\n                        ...filter,\n                        ...(searchLine\n                            ? {[searchParamName]: searchLine}\n                            : null),\n                    };\n\t\t\t\t\t// console.log('dataQuery', dataQuery);\n\n                    if(type === 'infinity' && reload && requestLoadCount !== noop && !expandColumnKey && !expandLazyLoad) {\n                        requestLoadCount({\n                            params,\n                            data: dataQuery,\n                        })\n                            .then((response) => {\n                                // console.log(\"infinity then response\", response);\n                                // const result = response.data;\n                                setTotalCountRows(response.data);\n                            })\n\t\t\t\t\t\t\t.catch(error =>\n\t\t\t\t\t\t\t\tnotificationError(error, 'Ошибка получения количества записей по фильтру') );\n                    }\n\n                    // console.log('requestLoadRows => ', typeof requestLoadRows);\n                    // if(typeof requestLoadRows !== 'function'){\n                    //     setLoading(false);\n                    // }\n                    requestLoadRows({\n\t\t\t\t\t\tparams,\n\t\t\t\t\t\tdata: dataQuery,\n\t\t\t\t\t})\n\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\t// console.log(\"infinity then response\", response);\n\t\t\t\t\t\t\tconst result = response.data;\n\t\t\t\t\t\t\t// Если иерархия и ленивая, то ищим кому добавть полученные записи\n\t\t\t\t\t\t\tif (!!expandColumnKey && expandLazyLoad) {\n\t\t\t\t\t\t\t\t// lastExpandRow//, setLastExpandRow\n\t\t\t\t\t\t\t\t// console.log('!!expandColumnKey && expandLazyLoad', result);\n\t\t\t\t\t\t\t\tif (pageNum === 0) {\n\t\t\t\t\t\t\t\t\tresult.forEach((child) => {\n\t\t\t\t\t\t\t\t\t\tchild.children = [\n\t\t\t\t\t\t\t\t\t\t\t{[rowKey]: generateUUID()},\n\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t// _setRows(result);\n\t\t\t\t\t\t\t\t\t_setRowsHandler(result);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tlet newRows = [..._rows];\n\t\t\t\t\t\t\t\t\t// (data, rowKey, rowValue)\n\t\t\t\t\t\t\t\t\tresult.forEach((child) => {\n\t\t\t\t\t\t\t\t\t\tchild.children = [\n\t\t\t\t\t\t\t\t\t\t\t{[rowKey]: generateUUID()},\n\t\t\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tlet node = findNodeByRowKey(\n\t\t\t\t\t\t\t\t\t\tnewRows,\n\t\t\t\t\t\t\t\t\t\trowKey,\n\t\t\t\t\t\t\t\t\t\texpandRow[rowKey]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tnode.children = result;\n\t\t\t\t\t\t\t\t\t// console.log('newRows -> ', newRows);\n\t\t\t\t\t\t\t\t\t// _setRows(newRows);\n\t\t\t\t\t\t\t\t\t_setRowsHandler(newRows);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (result && result.length < pageSize) {\n\t\t\t\t\t\t\t\t\tsetHasMore(false);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tsetHasMore(true);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tpageNum === 0\n\t\t\t\t\t\t\t\t\t? _setRowsHandler(result) // _setRows\n\t\t\t\t\t\t\t\t\t: _setRowsHandler(_rows.concat(result)); // _setRows\n\n\t\t\t\t\t\t\t\t// console.log('expandDefaultAll ', expandDefaultAll, _expandedRowKeys);\n\t\t\t\t\t\t\t\tif (expandDefaultAll)\n\t\t\t\t\t\t\t\t\tsetExpandedRowKeys(\n\t\t\t\t\t\t\t\t\t\tflatten(getTableRowKeys(result, rowKey))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tnotificationError(error, 'Ошибка загрузки данных')\n\t\t\t\t\t\t\t_setRowsHandler(_rows); // _setRows\n\t\t\t\t\t\t\t// setHasMore(false);\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t// case 'serverSide':\n\t\t\t// \tsetLoading(true);\n\t\t\t// \tbreak;\n\t\t\tcase 'localSide':\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t/** Событие выделение одной строки в режиме без галочек */\n\tconst _rowEventHandlers = {\n\t\tonClick: ({rowData, rowIndex, rowKey, event}) => {\n\t\t\tif (!selectable) {\n\t\t\t\t// if (_selectedRowKeys.includes(rowKey)) {\n\t\t\t\t//     setSelectedRowKeys([]);\n\t\t\t\t//     // setSelectedRow([]);\n\t\t\t\t//     // setSelectedRowObjects([]);\n\t\t\t\t//     onRowClick({\n\t\t\t\t//         selected: false,\n\t\t\t\t//         rowData,\n\t\t\t\t//         rowIndex,\n\t\t\t\t//         rowKey,\n\t\t\t\t//     });\n\t\t\t\t//     onSelectedRowsChange([]);\n\t\t\t\t// } else {\n\t\t\t\t// console.log('_rowEventHandlers -> onClick', rowKey, rowIndex);\n\t\t\t\tconst newRowObject = {\n\t\t\t\t\trowData: {...rowData},\n\t\t\t\t\trowIndex: rowIndex,\n\t\t\t\t\trowKey: rowKey,\n\t\t\t\t};\n\t\t\t\t// if(type !== 'localSide')\n\t\t\t\tsetSelectedRowKeys([rowKey]);\n\t\t\t\t// setSelectedRow(newRowObject);\n\t\t\t\t// setSelectedRowObjects([newRowObject]);\n\t\t\t\tselectedDispatchPath && props.setDateStore && props.setDateStore(selectedDispatchPath, rowData);\n\t\t\t\tonRowClick({\n\t\t\t\t\tselected: true,\n\t\t\t\t\t...newRowObject,\n\t\t\t\t});\n\t\t\t\tonSelectedRowsChange([rowKey], [rowData]);\n\t\t\t\t// }\n\t\t\t}\n\t\t},\n\t\tonDoubleClick: ({rowData, rowIndex, rowKey}) => {\n\t\t\t// console.log('onDoubleClick', rowData, rowIndex, rowKey);\n\t\t\tonRowDoubleClick({rowData, rowIndex, rowKey});\n\t\t},\n\t\t// onContextMenu: console.log('context menu'),\n\t\t// onMouseEnter: console.log('mouse enter'),\n\t\t// onMouseLeave: console.log('mouse leave'),\n\t};\n\n\t/** Событие при сортировке */\n\tconst _onColumnSort = (sortBy) => {\n\t\t// console.log(\"sortBy\", sortBy);\n\t\ttableRef.current.scrollToRow(0, 'auto');\n\t\tsetSortBy(sortBy);\n\n\t\t// Для серверной сортировки - сбросить выделение\n\t\tif (type !== 'localSide') {\n\t\t\tsetSelectedRowKeys([]);\n\t\t}\n\t\tconst loadParams = {\n\t\t\tsortBy: sortBy,\n\t\t\tfilter: _filter,\n\t\t\tsearchLine: _searchValue,\n\t\t\treload: true,\n\t\t};\n\t\t_dataProcessing(loadParams);\n\t};\n\n\t/** Получение колонок таблицы */\n\tconst _getColumns = () => {\n\t\tlet _columns = [...columns];\n\n\t\t/** Создаем колонку с галочками (если надо) */\n\t\tif (selectable) {\n\t\t\tconst selectColumn = {\n\t\t\t\tkey: '__selection__',\n\t\t\t\theaderRenderer: SelectionHead,\n\t\t\t\tcellRenderer: SelectionCell,\n\t\t\t\twidth: 40,\n\t\t\t\tflexShrink: 0,\n\t\t\t\tresizable: false,\n\t\t\t\tfrozen: Column.FrozenDirection.LEFT,\n\t\t\t\trowKey: rowKey,\n\t\t\t\tparentKey: expandParentKey,\n\t\t\t\tselectedRowKeys: _selectedRowKeys,\n\t\t\t\tindeterminateRowKeys: _indeterminateRowKeys,\n\t\t\t\tnodeAssociated: nodeAssociated,\n\t\t\t\tonChange: _onChangeSelectHandler,\n\t\t\t\tselectAll: selectAll,\n\t\t\t\tonSelectAll: _onSelectAllHandler,\n\t\t\t};\n\t\t\t_columns.unshift(selectColumn);\n\t\t}\n\t\treturn _columns;\n\t};\n\n\t/** VIEW FUNCTIONS */\n\n\tconst _footer = (\n\t\t<React.Fragment>\n\t\t\t{_footerShow ? (\n\t\t\t\t\t<React.Fragment>\n                        {/*className={'BaseTable__footer__counter'}>*/}\n\t\t\t\t\t\t<div key={'footer-left-custom-side'} className={'left-custom-side'}>\n\t\t\t\t\t\t\t{footerProps.leftCustomSideElement ? <FormItems items={footerProps.leftCustomSideElement} /> : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div key={'footer-center-custom-side'} className={'center-custom-side'}>\n\t\t\t\t\t\t\t{footerProps.centerCustomSideElement ? <FormItems items={footerProps.centerCustomSideElement} /> : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div key={'footer-right-custom-side'} className={'right-custom-side'}>\n\t\t\t\t\t\t\t{footerProps.rightCustomSideElement ? <FormItems items={footerProps.rightCustomSideElement} /> : null}\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t{selectable ? (\n\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t{footerProps.showElements.includes('selected')\n\t\t\t\t\t\t\t\t\t? <span>{footerProps.selectedTitle} {_selectedRowKeys.length}</span>\n\t\t\t\t\t\t\t\t\t: null }\n\t\t\t\t\t\t\t\t{footerProps.showElements.includes('loaded')\n\t\t\t\t\t\t\t\t\t? <span>{footerProps.loadedTitle} {flatten(getTableRowKeys(_rows, rowKey)).length}</span>\n\t\t\t\t\t\t\t\t\t: null }\n\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t) : null}\n\n\t\t\t\t\t\t{footerProps.showElements.includes('total')\n\t\t\t\t\t\t\t? type === 'infinity' && requestLoadCount !== noop && !expandColumnKey && !expandLazyLoad\n\t\t\t\t\t\t\t\t? <span>{footerProps.totalTitle} {_totalCountRows}</span>\n\t\t\t\t\t\t\t\t: <span>{footerProps.totalTitle} {flatten(getTableRowKeys(_rows, rowKey)).length}</span>\n\t\t\t\t\t\t\t: null}\n\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t) : null}\n\t\t</React.Fragment>\n\t);\n\n\t/** Событие при рендере для стилизации */\n\tconst _rowClassName = ({rowData, rowIndex}) => {\n\t\tconst {rowClassName} = props;\n\t\tconst rowClass = rowClassName\n\t\t\t? callOrReturn(rowClassName, {rowData, rowIndex})\n\t\t\t: '';\n\t\t// const key = {[rowKey]: rowData[rowKey], checked: true};\n\t\t// selectedRowKeys.some((item) => (item[rowKey] === rowData[rowKey] && item.checked))\n\t\treturn [\n\t\t\trowClass,\n\t\t\t_selectedRowKeys.includes(rowData[rowKey]) && 'row-selected',\n\t\t]\n\t\t\t.filter(Boolean)\n\t\t\t.concat(zebraStyle ? (rowIndex % 2 === 0 ? 'even' : 'odd') : '')\n\t\t\t.concat(' ');\n\t};\n\n\t/** LOAD DATA FUNCTIONS */\n\tconst onEndReached = () => {\n\t\tlet selectAll;\n\t\tconst selectLength = _selectedRowKeys.length;\n\t\tif (selectLength === 0) selectAll = false;\n\t\telse if (selectLength > 0) selectAll = null;\n\n\t\tsetSelectAll(selectAll);\n\n\t\tif (type === 'infinity') {\n\t\t\tconst loadParams = {\n\t\t\t\tsortBy: _sortBy,\n\t\t\t\tfilter: _filter,\n\t\t\t\tsearchLine: _searchValue,\n\t\t\t\treload: false,\n\t\t\t};\n\t\t\t_dataProcessing(loadParams);\n\t\t}\n\t};\n\n\t/** SELECTABLE FUNCTIONS */\n\n\t/** Событие при изменении галочки одной строки */\n\tconst _onChangeSelectHandler = ({\n\t\tselected,\n\t\t_selectedRow,\n\t\t_selectAll,\n\t\t_selectedRowKeys,\n\t\t_selectedRowObjects,\n\t\t_indeterminateRowKeys,\n\t}) => {\n\t\tsetSelectedRowKeys(_selectedRowKeys);\n\t\tsetIndeterminateRowKeys(_indeterminateRowKeys);\n\t\tsetSelectAll(_selectAll);\n\t\t// setSelectedRow(_selectedRow);\n\n\t\t// let newSelectedObjects = [];\n\t\t// if (selected) {\n\t\t// \tif (!!expandColumnKey)\n\t\t// \t\tnewSelectedObjects = flatten(\n\t\t// \t\t\tgetTableRowObjects(rows, rowKey)\n\t\t// \t\t).filter((item) => _selectedRowKeys.includes(item[rowKey]));\n\t\t// \telse\n\t\t// \t\tnewSelectedObjects = selectedRowObjects.concat([\n\t\t// \t\t\t_selectedRow.rowData,\n\t\t// \t\t]);\n\t\t// \t// setSelectedRowObjects(newSelectedObjects);\n\t\t// } else {\n\t\t// \tnewSelectedObjects = selectedRowObjects.filter(\n\t\t// \t\t(item) => item[rowKey] !== _selectedRow.rowData[rowKey]\n\t\t// \t);\n\t\t// \t// setSelectedRowObjects(newSelectedObjects);\n\t\t// }\n\t\t// console.log(\"_handleSelectChange\", props);\n\t\t// dispatchPath && props.setTableSelectedRow && props.setTableSelectedRow(dispatchPath, _selectedRow.rowData);\n\t\tselectedDispatchPath && props.setDateStore && props.setDateStore(selectedDispatchPath, _selectedRowObjects);\n\t\tonRowClick({\n\t\t\tselected,\n\t\t\trowData: _selectedRow.rowData,\n\t\t\trowIndex: _selectedRow.rowIndex,\n\t\t\trowKey,\n\t\t});\n\t\tonSelectedRowsChange(_selectedRowKeys, _selectedRowObjects);\n\t};\n\n\t/** Событие при изменении галочки \"Выделить все\" */\n\tconst _onSelectAllHandler = ({selected, rowKeys, rowObjects}) => {\n\t\tconst selectedKeys = selected ? rowKeys : [];\n\t\tsetSelectedRowKeys(selectedKeys);\n\t\tsetIndeterminateRowKeys([]);\n\t\tsetSelectAll(selected);\n\t\tselectedDispatchPath && props.setDateStore && props.setDateStore(selectedDispatchPath, selected ? rowObjects : []);\n\t\t// setSelectedRowObjects(rows);\n\t\t// console.log(\"_handleSelectAll\", selectedKeys);\n\t\tonSelectedRowsChange(selectedKeys, rowObjects);\n\t};\n\n\t/** TREE FUNCTIONS */\n\n\t/** Анализ дерева на пердмет квадратиков\n\t * Нужно для выделения по умолчанию свернутых элементов */\n\t// const _postLoadTreeAnalysis = () => {\n\t//     if (!!expandColumnKey && !expandLazyLoad) {\n\t//         let _indeterminateRowKeys = [];\n\t//         // console.log(\"mounted->selectedRowObjects: \", selectedRowObjects);\n\t//         selectedRowObjects.map((item) => {\n\t//             const [ss, ii] = parentAnalysis({\n\t//                 rowData: item,\n\t//                 rowKey,\n\t//                 parentKey: expandParentKey,\n\t//                 checked: true,\n\t//                 nodeAssociated,\n\t//                 treeData: _rows,\n\t//                 selectedRowKeys: _selectedRowKeys,\n\t//                 indeterminateRowKeys: _indeterminateRowKeys,\n\t//             });\n\t//             _indeterminateRowKeys.push(...ii);\n\t//         });\n\t//         setIndeterminateRowKeys([...new Set(_indeterminateRowKeys)]);\n\t//     }\n\t// }\n\n\tconst _onExpandedRowsChange = (expandedRowKeys) => {\n\t\t// console.log(\"_onExpandedRowsChange\", expandedRowKeys);\n\t\tonExpandedRowsChange(expandedRowKeys);\n\t};\n\tconst _onRowExpand = ({expanded, rowData, rowIndex, rowKey}) => {\n\t\t// console.log(\"_onRowExpand\", rowData, expanded, rowIndex, rowKey);\n\t\tif (expanded) {\n\t\t\tsetExpandedRowKeys([..._expandedRowKeys, rowKey]);\n\n\t\t\tif (expandLazyLoad) {\n\t\t\t\tconst loadParams = {\n\t\t\t\t\tsortBy: _sortBy,\n\t\t\t\t\tfilter: {..._filter, [expandParentKey]: rowKey},\n\t\t\t\t\tsearchLine: _searchValue,\n\t\t\t\t\treload: false,\n\t\t\t\t\texpandRow: rowData,\n\t\t\t\t};\n\t\t\t\t// _callPropsOnLoad(loadParams);\n\t\t\t\t_dataProcessing(loadParams);\n\t\t\t}\n\t\t} else {\n\t\t\tlet expandedRowKeys = [..._expandedRowKeys];\n\t\t\tlet allChildKeys = flatten(\n\t\t\t\tgetTableRowKeys(rowData.children, props.rowKey)\n\t\t\t);\n\t\t\tallChildKeys.push(rowKey);\n\t\t\t// console.log('allChildKeys', allChildKeys);\n\t\t\tsetExpandedRowKeys(\n\t\t\t\texpandedRowKeys.filter((item) => !allChildKeys.includes(item))\n\t\t\t);\n\t\t}\n\t\tonRowExpand({expanded, rowData, rowIndex, rowKey});\n\t};\n\n\t/** COMMAND PANEL FUNCTIONS */\n\n\tconst _getDisabledElementsOfCommandPanel = () => {\n\t\t// console.log('commandPanelProps', commandPanelProps);\n\t\tlet _disabledElements = [...commandPanelProps.disabledElements];\n\t\tif (type === 'infinity') {\n\t\t\t_disabledElements.push('up', 'down');\n            // console.log('_getDisabledElementsOfCommandPanel => infinity');\n        }\n\t\tif (selectable && _selectedRowKeys.length > 1) {\n\t\t\t_disabledElements.push('addAsCopy', 'edit', 'up', 'down');\n            // console.log('_getDisabledElementsOfCommandPanel => selectable');\n        }\n\t\tif (_selectedRowKeys.length === 0) {\n\t\t\t_disabledElements.push('addAsCopy', 'edit', 'delete', 'up', 'down');\n            // console.log('_getDisabledElementsOfCommandPanel => NO select');\n        }\n\t\t// if (expandColumnKey) {\n\t\t\t//|| !selectedRow) {\n\t\t\t// _disabledElements.push('up', 'down');\n            // console.log('_getDisabledElementsOfCommandPanel => expandColumnKey');\n        // }\n        // console.log('_getDisabledElementsOfCommandPanel => ', _disabledElements, _selectedRowKeys);\n\n        return [...new Set(_disabledElements)];\n\t};\n\n\tconst _onClickAddAsCopy = (event) => {\n\t\t// console.log(\"_onClickAddAsCopy\", selectedRow);\n\t\tcommandPanelProps.onClickAddAsCopy(\n\t\t\tevent,\n\t\t\tfindNodeByRowKey(_rows, rowKey, _selectedRowKeys[0])\n\t\t);\n\t};\n\n\tconst _onClickEdit = (event) => {\n\t\t// console.log(\"_onClickEdit\", selectedRow);\n\t\tcommandPanelProps.onClickEdit(event, {\n\t\t\trowData: findNodeByRowKey(_rows, rowKey, _selectedRowKeys[0]),\n\t\t});\n\t\t// props.onClickEdit(event, selectedRow);\n\t};\n\n\tconst _onClickDelete = (event) => {\n\t\t// console.log(\"_onClickDelete\", autoDeleteRows, selectedRowKeys);\n\t\tif (autoDeleteRows) {\n\t\t\tif (type === 'localSide') {\n\t\t\t\tsetRowsHandler(\n\t\t\t\t\t_rows.filter(\n\t\t\t\t\t\t(item) => !_selectedRowKeys.includes(item[rowKey])\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t_setRowsHandler(\n\t\t\t\t\t_rows.filter(\n\t\t\t\t\t\t(item) => !_selectedRowKeys.includes(item[rowKey])\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\tsetSelectedRowKeys([]);\n\t\t}\n\t\tcommandPanelProps.onClickDelete(event, _selectedRowKeys);\n\t};\n\n\tconst loop = (data, key, callback) => {\n\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\tif (data[i][rowKey] === key) {\n\t\t\t\t// console.log(`Selected => index: [${i}], path: [${data[i].path}]`, data);\n\t\t\t\treturn callback(data[i], i, data);\n\t\t\t} else {\n\t\t\t\t// console.log(`Other => index: [${i}], path: [${data[i].path}]`);\n\t\t\t}\n\t\t\tif (data[i].children) {\n\t\t\t\tloop(data[i].children, key, callback);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst _onClickUp = (event) => {\n\t\tconst data = [..._rows];\n\t\tconst key = _selectedRowKeys[0];\n\t\tloop(data, key, (item, index, arr)  => {\n\t\t\tconst newRowIndex = _getNewIndexRow(index, index - 1);\n\t\t\t_changeIndexRow(index, newRowIndex, arr, data);\n\t\t\tcommandPanelProps.onClickUp(event, {\n\t\t\t\trowIndex: newRowIndex,\n\t\t\t\trowData: findNodeByRowKey(_rows, rowKey, _selectedRowKeys[0]),\n\t\t\t}, data);\n\t\t})\n\t};\n\n\tconst _onClickDown = (event) => {\n\t\tconst data = [..._rows];\n\t\tconst key = _selectedRowKeys[0];\n\t\tloop(data, key, (item, index, arr)  => {\n\t\t\tconst newRowIndex = _getNewIndexRow(index, index + 1);\n\t\t\t_changeIndexRow(index, newRowIndex, arr, data);\n\t\t\tcommandPanelProps.onClickDown(event, {\n\t\t\t\trowIndex: newRowIndex,\n\t\t\t\trowData: findNodeByRowKey(_rows, rowKey, _selectedRowKeys[0]),\n\t\t\t}, data);\n\t\t})\n\t};\n\n\tconst _getNewIndexRow = (oldIndex, newIndex) =>\n\t\tnewIndex >= 0 && newIndex < _rows.length ? newIndex : oldIndex;\n\n\tconst _changeIndexRow = (oldIndex, newIndex, arr, data) => {\n\t\tif (newIndex >= 0 && newIndex < arr.length) {\n\t\t\t// let arr = [..._rows]; // Копируем массив\n\t\t\tconst item = arr.splice(oldIndex, 1); // Удаляем элемент со старого места\n\t\t\t// console.log('_changeIndexRow => ',item);\n\t\t\tarr.splice(newIndex > 0 ? newIndex : 0, 0, item[0]); // Ставим элемент на новое место\n\t\t\t// console.log(\"_changeIndexRow\", item[0]);\n\t\t\tif (type === 'localSide') {\n\t\t\t\tsetRowsHandler(data);\n\t\t\t} else {\n\t\t\t\t_setRowsHandler(data);\n\t\t\t}\n\t\t}\n\t};\n\n\tconst _onSearch = (searchLine, e) => {\n        e.preventDefault();\n\t\t// console.log(\"_onSearch\", searchLine);\n        tableRef.current.scrollToRow(0, 'auto');\n\t\tsetSearchValue(searchLine);\n\t\tconst loadParams = {\n\t\t\tsortBy: _sortBy,\n\t\t\tfilter: _filter,\n\t\t\tsearchLine: searchLine,\n\t\t\treload: true,\n\t\t};\n\t\t_dataProcessing(loadParams);\n\t\tcommandPanelProps.onSearch(searchLine);\n\t};\n\n\t/** FILTER PANEL FUNCTIONS */\n\n\tconst _onChangeFilter = (filter) => {\n\t\t// console.log('_onChangeFilter', filter);\n\t\tsetHasMore(true);\n\t\tsetFilter(filter);\n\t\tfilterPanelProps.onChangeFilter(filter);\n\t};\n\tconst _onApplyFilter = (filter) => {\n\t\t// console.log('_onApplyFilter', filter);\n\t\tconst loadParams = {\n\t\t\tsortBy: _sortBy,\n\t\t\tfilter: filter,\n\t\t\tsearchLine: _searchValue,\n\t\t\treload: true,\n\t\t};\n\t\t_dataProcessing(loadParams);\n\t\tfilterPanelProps.onApplyFilter(filter);\n\t};\n\n\t/** SELECTED PANEL */\n\n\tconst _onClickDropSelectHandler = (dropObject) => {\n\t\tconst newSelectedKeys = _selectedRowKeys.filter(\n\t\t\t(item) => item !== dropObject[rowKey]\n\t\t);\n\t\tsetSelectedRowKeys(newSelectedKeys);\n\t\tonSelectedRowsChange(newSelectedKeys);\n\t};\n\n\t// const rowProps = {\n\t//     // tagName: 'button',\n\t//     // onClick: e => {\n\t//     //     e.preventDefault();\n\t//     //     e.stopPropagation();\n\t//     //     console.log(`You clicked row onClick`)\n\t//     // },\n\t//     onDoubleClick: e => {\n\t//         e.preventDefault();\n\t//         e.stopPropagation();\n\t//         console.log(`You clicked row onDoubleClick`)\n\t//     }\n\t// };\n\n\treturn (\n\t\t<div\n\t\t\tclassName={`${rtPrefix}-table`}\n\t\t\tstyle={{width: '100%', height: '100%'}}\n\t\t>\n\t\t\t<div className={`${rtPrefix}-table-top-panel`}>\n\t\t\t\t<CommandPanel\n\t\t\t\t\t{...commandPanelProps}\n\t\t\t\t\tdefaultValueSearch={defaultSearchValue}\n\t\t\t\t\tdisabledElements={_getDisabledElementsOfCommandPanel()}\n\t\t\t\t\tonClickAddAsCopy={_onClickAddAsCopy}\n\t\t\t\t\tonClickDelete={_onClickDelete}\n\t\t\t\t\tonClickDown={_onClickDown}\n\t\t\t\t\tonClickEdit={_onClickEdit}\n\t\t\t\t\tonClickUp={_onClickUp}\n\t\t\t\t\tonSearch={_onSearch}\n\t\t\t\t/>\n\t\t\t\t{/*{!filter ? (*/}\n\t\t\t\t<FilterPanel\n\t\t\t\t\t{...filterPanelProps}\n\t\t\t\t\tdefaultFilter={defaultFilter}\n\t\t\t\t\tonChangeFilter={_onChangeFilter}\n\t\t\t\t\tonApplyFilter={_onApplyFilter}\n\t\t\t\t/>\n\t\t\t\t{/*) : null}*/}\n\t\t\t</div>\n\t\t\t<div className={`${rtPrefix}-baseTable`}>\n\t\t\t\t<AutoResizer>\n\t\t\t\t\t{({width, height}) => (\n\t\t\t\t\t\t<BaseTable\n\t\t\t\t\t\t\tref={tableRef}\n\t\t\t\t\t\t\t/** Required */\n\t\t\t\t\t\t\tcolumns={_getColumns()}\n\t\t\t\t\t\t\tdata={_rows}\n\t\t\t\t\t\t\t/** Control Props */\n\t\t\t\t\t\t\tsortBy={_sortBy}\n\t\t\t\t\t\t\t/** Base Props */\n\t\t\t\t\t\t\twidth={width}\n\t\t\t\t\t\t\theight={height}\n\t\t\t\t\t\t\trowKey={rowKey}\n\t\t\t\t\t\t\t// rowProps={rowProps}\n\n\t\t\t\t\t\t\t/** View Props */\n\t\t\t\t\t\t\trowClassName={_rowClassName}\n\t\t\t\t\t\t\temptyRenderer={empty}\n\t\t\t\t\t\t\tfixed={fixWidthColumn}\n\t\t\t\t\t\t\tfooterHeight={_footerShow ? footerProps.height : 0}\n\t\t\t\t\t\t\theaderHeight={headerHeight}\n\t\t\t\t\t\t\trowHeight={rowHeight}\n\t\t\t\t\t\t\toverlayRenderer={loading ? overlay : null}\n\t\t\t\t\t\t\tfooterRenderer={_footer}\n\t\t\t\t\t\t\trowRenderer={rowRenderer}\n\t\t\t\t\t\t\testimatedRowHeight={estimatedRowHeight}\n\t\t\t\t\t\t\t/** Load Data Props */\n\t\t\t\t\t\t\tonEndReachedThreshold={loadThreshold}\n\t\t\t\t\t\t\tonEndReached={\n\t\t\t\t\t\t\t\ttype === 'infinity' ? onEndReached : undefined\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdisabled={loading}\n\t\t\t\t\t\t\t/** Tree Props */\n\t\t\t\t\t\t\texpandColumnKey={expandColumnKey}\n\t\t\t\t\t\t\texpandedRowKeys={_expandedRowKeys}\n\t\t\t\t\t\t\t/** Events */\n\t\t\t\t\t\t\tonColumnSort={_onColumnSort}\n\t\t\t\t\t\t\trowEventHandlers={_rowEventHandlers}\n\t\t\t\t\t\t\tonExpandedRowsChange={_onExpandedRowsChange}\n\t\t\t\t\t\t\tonRowExpand={_onRowExpand}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</AutoResizer>\n\t\t\t</div>\n\t\t\t{showSelection && selectable && !expandColumnKey ? (\n\t\t\t\t<SelectionList\n\t\t\t\t\tonClickDropSelect={_onClickDropSelectHandler}\n\t\t\t\t\tselectedRowObjects={flatten(\n\t\t\t\t\t\tgetTableRowObjects(_rows, rowKey)\n\t\t\t\t\t).filter((item) => _selectedRowKeys.includes(item[rowKey]))}\n\t\t\t\t\trowRender={rowRenderShowSelection}\n\t\t\t\t/>\n\t\t\t) : null}\n\t\t</div>\n\t);\n});\n\nTable.propTypes = {\n\t/**\n\t * REQUIRED\n\t * */\n\n\t/** Столбцы таблицы */\n\tcolumns: PropTypes.arrayOf(PropTypes.object).isRequired,\n\n\t/** Тип таблицы\n\t * **infinity** - загрузка данных по скроллу. Фильтрация, сортировка и поиск через сервер.\n\t * **serverSide** - первичная загрузка таблицы с сервера. Фильтрация, сортировка и поиск через сервер. Lazy Load для дерева тоже тут.\n\t * **localSide** - полностью локальная таблица. Фильтрация, сортировка и поиск через локальный rows */\n\ttype: PropTypes.oneOf(['infinity', 'serverSide', 'localSide']).isRequired,\n\n\t/** Объект со свойствами Command Panel */\n\tcommandPanelProps: PropTypes.object,\n\n\t/** Объект со свойствами Filter Panel */\n\tfilterPanelProps: PropTypes.object,\n\n\t/**\n\t * ПРОПСЫ ЗАДАНИЯ ЗНАЧЕНИЙ ПО УМОЛЧАНИЮ\n\t * */\n\n\t/** Строки по умолчанию */\n\tdefaultRows: PropTypes.arrayOf(PropTypes.object),\n\n\t/** Ключи выделенных по умолчанию строк */\n\tdefaultSelectedRowKeys: PropTypes.arrayOf(\n\t\tPropTypes.oneOfType([PropTypes.string, PropTypes.number])\n\t),\n\n\t/** Значение строки поиска по умолчанию строк */\n\tdefaultSearchValue: PropTypes.string,\n\n\t/** Объект фильтрации по умолчанию */\n\tdefaultFilter: PropTypes.object,\n\n\t/** Сортировка по умолчанию */\n\tdefaultSortBy: PropTypes.shape({\n\t\t/** Ключ поля для сортировки */\n\t\tkey: PropTypes.string,\n\t\t/** Направление сортировки */\n\t\torder: PropTypes.oneOf(['asc', 'desc']),\n\t}),\n\n\t/**\n\t * ПРОПРЫ ДЛЯ ВНЕШНЕГО КОНТРОЛЯ ТАБЛИЦЫ\n\t * */\n\n\t/** Строки таблицы. Используется для контроля таблицы из вне. */\n\trows: PropTypes.arrayOf(PropTypes.object),\n\n    /** Функция задания строк таблицы. */\n    setRows: PropTypes.func,\n\n\t/** Выделенные строки таблицы. */\n\tselectedRowKeys: PropTypes.arrayOf(\n\t\tPropTypes.oneOfType([PropTypes.string, PropTypes.number])\n\t),\n\n\t/** Значение строки поиска */\n\tsearchValue: PropTypes.string,\n\n\t/** Объект фильтрации */\n\tfilter: PropTypes.object,\n\n\t/** Объект сортировки */\n\tsortBy: PropTypes.shape({\n\t\t/** Ключ поля для сортировки */\n\t\tkey: PropTypes.string,\n\t\t/** Направление сортировки */\n\t\torder: PropTypes.oneOf(['asc', 'desc']),\n\t}),\n\n\t/**\n\t * BASE PROPS\n\t * */\n\n\t/** Автоудаление строк из таблицы по кнопке в командной панели*/\n\tautoDeleteRows: PropTypes.bool,\n\n\t/** Поле для уникальной идентификации строки */\n\trowKey: PropTypes.string,\n\n\t/**\n\t * VIEW PROPS\n\t * */\n\n\t/** Вывод когда нет данных */\n\tempty: PropTypes.element,\n\n\t/** Отображение загрузки данных */\n\toverlay: PropTypes.element,\n\n\t/** Фиксированная ширина столбцов. Появится боковой скрол */\n\tfixWidthColumn: PropTypes.bool,\n\n\t/** Высота подвала */\n\tfooterHeight: PropTypes.number,\n\n\t/** Отображать ли подвал */\n\tfooterShow: PropTypes.bool,\n\n    /** Заголовки футтера */\n    footerTitles: PropTypes.shape({\n\t\t/** Заголовок выделенных элементов */\n        selectedRows: PropTypes.string,\n\t\t/** Заголовок загруженных элементов */\n        loadedRows: PropTypes.string,\n\t\t/** Заголовок всего элементов */\n\t\ttotalRows: PropTypes.string,\n    }),\n\n\tfooterProps: PropTypes.shape({\n\n\t\t/** Высота подвала */\n\t\theight: PropTypes.number,\n\n\t\t/** Массив элементов футтера, которые надо отобразить\n\t\t * ['selected', 'loaded', 'total'] */\n\t\tshowElements: PropTypes.arrayOf(PropTypes.string),\n\n\t\t/** Заколовок для кол-ва выбранных объектов */\n\t\tselectedTitle: PropTypes.string,\n\n\t\t/** Заколовок для кол-ва загруженны объектов */\n\t\tloadedTitle: PropTypes.string,\n\n\t\t/** Заколовок для кол-ва всего объектов */\n\t\ttotalTitle: PropTypes.string,\n\n\t\t/** Левый кастомный элемент командной панели */\n\t\tleftCustomSideElement: PropTypes.arrayOf(PropTypes.object),\n\n\t\t/** Центральный кастомный элемент командной панели */\n\t\tcenterCustomSideElement: PropTypes.arrayOf(PropTypes.object),\n\n\t\t/** Правый кастомный элемент командной панели */\n\t\trightCustomSideElement: PropTypes.arrayOf(PropTypes.object),\n\t}),\n\n\t/** Высота заголовка таблицы */\n\theaderHeight: PropTypes.number,\n\n\t/** Высота строки таблицы */\n\trowHeight: PropTypes.number,\n\n\t/** Custom row renderer\n\t * Параметры - ({ isScrolling, cells, columns, rowData, rowIndex, depth }) */\n\trowRenderer: PropTypes.oneOfType([PropTypes.func, PropTypes.element]),\n\n\t/** Строки будут в зебро-стиле */\n\tzebraStyle: PropTypes.bool,\n\n\t/**\n\t * LOAD DATA PROPS\n\t * */\n\n\t/** Порог в пикселях для вызова _onLoad.\n\t * Кол-во пикселей от низа таблицы для срабатывания события загрузки (onEndReached) */\n\tloadThreshold: PropTypes.number,\n\n\t/** Размер страницы */\n\tpageSize: PropTypes.number,\n\n\t/** Функция запроса для загрузки строк (данных) */\n\trequestLoadRows: PropTypes.func,\n\n    /** Функция запроса для загрузки строк (данных) */\n    requestLoadCount: PropTypes.func,\n\n\t/** Имя параметра для поиска */\n\tsearchParamName: PropTypes.string,\n\n\t/**\n\t * SELECTABLE PROPS\n\t * */\n\n\t/** Таблица с возможностью выбора строки */\n\tselectable: PropTypes.bool,\n\n\t/**\n\t * TREE PROPS\n\t * */\n\n\t/** Родительский узел и дочерние узлы связаны (Работает только при selectable) */\n\tnodeAssociated: PropTypes.bool,\n\n\t/** Ключ колонки по которой строить иерархию */\n\texpandColumnKey: PropTypes.string,\n\n\t/** Открыть по умолчанию вложенность до уровня N или 'All' */\n\texpandDefaultAll: PropTypes.bool,\n\n\t/** Загружать ноды иерархии по одной */\n\texpandLazyLoad: PropTypes.bool,\n\n\t/** Поле в котором хранится ссылка на родителя */\n\texpandParentKey: PropTypes.string,\n\n\t/**\n\t * EVENTS\n\t * */\n\n\t/** Событие при клике на строку (только при selectable = false)\n\t * Параметр - ({selected, rowData, rowIndex}) */\n\tonRowClick: PropTypes.func,\n\n\t/** Событие при двойном клике на строку.\n\t * Параметр - ({rowData, rowIndex, rowKey}) */\n\tonRowDoubleClick: PropTypes.func,\n\n\t/** События при открытии / закрытии ноды\n\t * Парметры - ({ expanded, rowData, rowIndex, rowKey }) */\n\tonRowExpand: PropTypes.func,\n\n\t/** Событие при выборе строки.\n\t * Параметр - массив выбранных строе (только rowKey) */\n\tonSelectedRowsChange: PropTypes.func,\n\n\t/** События при открытии / закрытии ноды\n\t * Парметры - (expandedRowKeys) - массив ключей открытых нод */\n\tonExpandedRowsChange: PropTypes.func,\n\n\t/** SELECTED PANEL */\n\n\t/** Отображать ли панель выбранных элементов */\n\tshowSelection: PropTypes.bool,\n\n\t/** Строка или функция для отображения элементов списка выбранных\n\t * Строка - имя поля\n\t * Функция - рендер строк.\n\t * `({ rowData, rowIndex }) => { return <Component> }` */\n\trowRenderShowSelection: PropTypes.oneOfType([\n\t\tPropTypes.func,\n\t\tPropTypes.string,\n\t]),\n\n\t/** Путь в сторе куда класть выбранную строку таблицы */\n\tdispatchPath: PropTypes.string,\n\n\t/** Объект для подписки на изменения в STORE */\n\tsubscribe: PropTypes.object,\n};\n\nTable.defaultProps = {\n\tdefaultRows: [],\n\tdefaultSelectedRowKeys: [],\n\tdefaultSearchValue: '',\n\tdefaultFilter: {},\n\tdefaultSortBy: {},\n\n\trows: [],\n\tselectedRowKeys: [],\n\tsearchValue: '',\n\tfilter: {},\n\tsortBy: {},\n\n\tautoDeleteRows: true,\n\trowKey: 'id',\n\n\tempty: empty,\n\toverlay: overlay,\n\tfixWidthColumn: false,\n\tfooterHeight: 30,\n\tfooterShow: false,\n    footerTitles: {\n        selectedRows: 'Выделено:',\n        loadedRows: 'Загружено записей:',\n        totalRows: 'Всего записей:',\n    },\n\tfooterProps: {\n\t\theight: 30,\n\t\tshowElements: [],\n\t\tselectedTitle: 'Выделено:',\n\t\tloadedTitle: 'Загружено записей:',\n\t\ttotalTitle: 'Всего записей:',\n\t\tleftCustomSideElement: null,\n\t\tcenterCustomSideElement: null,\n\t\trightCustomSideElement: null\n\t},\n\theaderHeight: 30,\n\trowHeight: 30,\n\tzebraStyle: false,\n\n\tloadThreshold: 300,\n\tpageSize: 50,\n\trequestLoadRows: noop,\n    requestLoadCount: noop,\n\tsearchParamName: 'searchLine',\n\n\tselectable: false,\n\n\tnodeAssociated: true,\n\texpandColumnKey: undefined,\n\texpandDefaultAll: true,\n\texpandLazyLoad: false,\n\texpandParentKey: 'parentId',\n\n\tonRowClick: noop,\n\tonRowDoubleClick: noop,\n\tonRowExpand: noop,\n\tonSelectedRowsChange: noop,\n\tonExpandedRowsChange: noop,\n\n\tshowSelection: false,\n\n\tsubscribe: {},\n};\n\nconst mapStateToProps = (store, ownProps) => {\n\tconst {subscribe} = ownProps;\n\tif(subscribe){\n\t\tconst {name, path} = subscribe;\n\t\tif(name && path)\n\t\t\treturn { [name]: objectPath.get(store, path) };\n\t}\n\n\treturn {};\n};\nconst mapDispatchToProps = (dispatch) =>\n\tbindActionCreators({ setDateStore: setDateStore}, dispatch);\n\n// const mapStateToProps = (store, ownProps) => {\n//     // console.log(\"mapStateToProps -> store\", store);\n//     // const {match , section} = ownProps;\n//     // const { path } = match;\n//     // const rows = store.table[path] && store.table[path][section] ? store.table[path][section].rows : [];\n//     // console.log(\"mapStateToProps -> rows\", rows);\n//     return { store: store };\n// };\n// const mapDispatchToProps = (dispatch, ownProps) => {\n//     // console.log(\"mapDispatchToProps -> ownProps\", ownProps);\n//     // const {match , section} = ownProps;\n//     // const { path } = match;\n//     // initTableStore(path, section);\n//     return bindActionCreators(\n//         {\n//             initTableStore,\n//             setRows,\n//         },\n//         dispatch\n//     );\n// };\n//\n// export default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })(Table);\n\nexport default connect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true })(Table);\n","import React, {useEffect, useState, useRef} from 'react';\nimport PropTypes from 'prop-types';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport { flatten, getTableRowKeys, noop, notificationError } from \"../utils/baseUtils\";\nimport {rtPrefix} from '../utils/variables';\nimport {Button, Typography} from 'antd';\nimport { DownOutlined, UpOutlined, CloseCircleFilled } from '@ant-design/icons'\nimport Table from '../Table/Table';\nimport { setDateStore } from \"../../redux/rtd.actions\";\nconst {Paragraph} = Typography;\n\nconst Select = (props) => {\n\tconst [_selectedRowKeys, setSelectedRowKeys] = useState([]);\n\tconst [_selectedRowData, _setSelectedRowData] = useState(null);\n\tconst [isSelectOpened, setIsSelectOpened] = useState(false);\n\tconst [isClickInSelect, setIsClickInSelect] = useState(false);\n\n\tconst {\n\t\tname,\n\t\trowRender,\n        className,\n\t\ttype,\n\t\ttitle,\n\t\tplaceholder,\n        selectedRowKeys,\n\t\t// searchable,\n        size,\n\t\twidthControl,\n\t\twidthPopup,\n\t\theightPopup,\n\n\t\tonChangeKeys,\n        defaultValue,\n        value,\n\n\t\t/** Table Props */\n\t\tdefaultSelectedRowKeys,\n\t\trowKey,\n\t\texpandColumnKey,\n\t\tshowSelection,\n\t\trequestLoadRows,\n\t\trequestLoadDefault,\n        commandPanelProps,\n\t\trows,\n\t\tdispatchPath,\n\t} = props;\n\n\tconst selectedDispatchPath = dispatchPath && `${dispatchPath}.selected`;\n\tconst searchable = commandPanelProps && commandPanelProps.showElements && commandPanelProps.showElements.includes('search');\n\tconst node = useRef(null);\n\n\tconst setSelectedRowData = (rowData) => {\n\t\tselectedDispatchPath && props.setDateStore && props.setDateStore(selectedDispatchPath, rowData);\n\t\t_setSelectedRowData(rowData);\n\t}\n\n\tconst loadSelectedObject = ({selectedRowKeys}) => {\n        if(selectedRowKeys) {\n            let _selectedRowKeys;\n\t\t\tif(Array.isArray(selectedRowKeys)) {\n\t\t\t\tsetSelectedRowKeys(selectedRowKeys);\n\t\t\t\t_selectedRowKeys = selectedRowKeys\n\t\t\t}\n            else {\n            \tsetSelectedRowKeys([selectedRowKeys]);\n\t\t\t\t_selectedRowKeys = [selectedRowKeys]\n\t\t\t}\n\n\t\t\t// console.log(\"setSelectedRowKeys[70] -> \", _selectedRowKeys);\n\n\t\t\tconst request = requestLoadDefault\n                ? requestLoadDefault\n                : requestLoadRows;\n\n            if (!!request && !rows && _selectedRowKeys.length > 0) {\n                // console.log('defaultSelectedRowKeys ', defaultSelectedRowKeys, defaultSelectedRowKeys.length);\n                request({\n                    data: {\n                        [rowKey]:  _selectedRowKeys, //defaultSelectedRowKeys,\n                    },\n                })\n                    .then((response) => {\n                        let result = response.data;\n\t\t\t\t\t\t// console.log(\"setSelectedRowData[84] => \", response.data);\n\t\t\t\t\t\tif (result.length > 0) setSelectedRowData(result[0]);\n                    })\n\t\t\t\t\t.catch(error => notificationError(error, 'Ошибка загрузки данных в Select') );\n\n            } else if (rows && _selectedRowKeys && type === 'SingleSelect') {\n            \tlet srk = _selectedRowKeys[0];\n\t\t\t\t// if(Array.isArray(selectedRowKeys) && selectedRowKeys.length > 0)\n\t\t\t\t// \tsrk = selectedRowKeys[0];\n            \t// else\n\t\t\t\t// \tsrk = selectedRowKeys;\n\n                const findRow = rows.find((row) => row[rowKey] === srk);\n                // console.log(\"setSelectedRowData[98] => \", findRow, rows, srk);\n                setSelectedRowData(findRow);\n            } else {\n                setSelectedRowData(null);\n            }\n        }\n\t};\n\n\tuseEffect(() => {\n        loadSelectedObject({selectedRowKeys: defaultSelectedRowKeys});\n\t\twindow.addEventListener('mousedown', handleMouseClick, false);\n\t\treturn () => {\n\t\t\twindow.removeEventListener('mousedown', handleMouseClick, false);\n\t\t};\n\t}, []);\n\n\tuseEffect(() => {\n\t\t// console.log(\"selectedRowKeys\", selectedRowKeys);\n        loadSelectedObject({selectedRowKeys: selectedRowKeys});\n    }, [selectedRowKeys]);\n\n\tuseEffect(() => {\n\t\tif(_selectedRowKeys !== undefined && _selectedRowData === undefined){\n\t\t\t// console.log(\"useEffect rows\", _selectedRowKeys, _selectedRowData, rows);\n\t\t\tloadSelectedObject({selectedRowKeys: _selectedRowKeys});\n\t\t}\n\t}, [rows])\n\n\tuseEffect(() => {\n\t\t// console.log(\"isClickInSelect \", isClickInSelect);\n\t\t// console.log(\"isSelectOpened \", isSelectOpened);\n\t\tif(!isClickInSelect && isSelectOpened)\n\t\t\tonClosePopup();\n\t}, [isClickInSelect]);\n\n\t// useEffect(() => {\n\t// \t// console.log(\"setSelectedRowData[117] => \", props.value, props.defaultValue);\n\t// }, [props])\n\n\tconst columns = [\n\t\t{\n\t\t\tkey: rowKey,\n\t\t\ttitle: title,\n\t\t\tdataKey: rowKey,\n\t\t\twidth: 500,\n\t\t\tcellRenderer:\n\t\t\t\ttypeof rowRender === 'function'\n\t\t\t\t\t? rowRender\n\t\t\t\t\t: ({rowData}) => <div>{rowData[rowRender]}</div>,\n\t\t},\n\t];\n\n\tconst _getHeadCls = () => {\n\t    let cls = [`${rtPrefix}-select-header`];\n\n\t    if(isSelectOpened)\n            cls.push('opened');\n\n\t    if(_selectedRowKeys && _selectedRowKeys.length > 0)\n\t        cls.push('selected');\n\n\t    switch (size) {\n            case 'small':\n                cls.push(`${rtPrefix}-select-header-sm`);\n                break;\n            case 'large':\n                cls.push(`${rtPrefix}-select-header-lg`);\n                break;\n            default: break;\n        }\n\n\t    return cls.join(' ');\n    };\n\n\tconst _getHeadText = () => {\n\t\tif (type === 'SingleSelect') {\n\t\t\t\tif(_selectedRowData)\n\t\t\t\t\tif(typeof rowRender === 'function')\n\t\t\t\t\t\treturn rowRender({rowData: _selectedRowData});\n\t\t\t\t\telse\n\t\t\t\t\t\treturn `${_selectedRowData[rowRender]}`;\n\t\t\t\telse\n\t\t\t\t\treturn `${placeholder}`;\n\t\t} else {\n\t\t\treturn _selectedRowKeys.length > 0\n\t\t\t\t? `Выбрано: ${_selectedRowKeys.length}`\n\t\t\t\t: `${placeholder}`;\n\t\t}\n\t};\n\n    const _getPopupCls = () => {\n    \t// console.log('_getPopupCls _selectedRowKeys => ', _selectedRowKeys);\n        let cls = [`${rtPrefix}-select-popup`];\n\n        if(title)\n            cls.push(`${rtPrefix}-select-popup-with-title`);\n\n        return cls.join(' ');\n    };\n\tconst _getPopupStyle = () => {\n\t\t// if (heightPopup)\n\t\t// \treturn {height: `${heightPopup}px`, width: `${widthPopup}px`};\n\n\t\tlet height = {};\n\t\tlet defRowsLen = 0;\n\n\t\tif (!requestLoadRows && rows)\n\t\t\tif (expandColumnKey)\n\t\t\t\tdefRowsLen = flatten(getTableRowKeys(rows, rowKey)).length;\n\t\t\telse defRowsLen = rows.length;\n\n\t\t// console.log('_getPopupStyle', defRowsLen);\n\t\tif (defRowsLen && defRowsLen > 0) {\n\t\t\theight =\n\t\t\t\tdefRowsLen * 30 + // Кол-во строк * высоту строки\n\t\t\t\t(searchable ? 46 : 0) + // Размер поисковой строки или 0\n\t\t\t\t(type === 'MultiSelect' ? 65 : 0) + // Размер футтера (30) + размер кнопки 35 или 0\n\t\t\t\t(showSelection ? 200 : 0) + // Размер панели выбранных элементов или 0\n\t\t\t\t22; // Паддинги и бордер\n\t\t\t// console.log('heightPopup', height);\n\t\t\tif (height > heightPopup) height = `${heightPopup}px`;\n\t\t\telse height = `${height}px`;\n\t\t} else {\n\t\t\t// console.log(\"heightPopup\", heightPopup);\n\t\t\theight = `${heightPopup}px`;\n\t\t}\n\n\t\t// console.log(\"heightPopup, widthPopup\", heightPopup, widthPopup);\n\t\treturn {height, width: `${widthPopup}px`};\n\t};\n\n\tconst getEvents = () => {\n\t\treturn (commandPanelProps && commandPanelProps.systemBtnProps && Object.keys(commandPanelProps.systemBtnProps)) || [];\n\t};\n\n\tconst _onChange = (selectedKeys) => {\n\t\t// console.log('_onChange [176]', selectedKeys);\n\t\tsetSelectedRowKeys(selectedKeys);\n\t\t// setSelectedRowData(selectedObjects);\n\t\tonChangeKeys(name, selectedKeys.length ? selectedKeys : null);\n\t\t// onChangeObjects(name, selectedObjects.length ? selectedObjects : null);\n\t\t// setCountSelect(selectedKeys.length);\n\t\tif (type === 'SingleSelect') {\n\t\t\tsetIsSelectOpened(false);\n\t\t}\n\t};\n\n\tconst _SingleSelectRow = ({selected, rowData, rowIndex}) => {\n\t\t// console.log(\"_SingleSelectRow => \", rowData);\n\t\tsetSelectedRowData(rowData);\n\t\t// selected ? setSingleSelectRowData(rowData) : setSingleSelectRowData({})\n\t};\n\n\tconst handleMouseClick = (e) => {\n\t\tnode && node.current && setIsClickInSelect(node.current.contains(e.target))\n\t};\n\n\tconst onClosePopup  = () => {\n\t\tsetIsSelectOpened(false);\n\t};\n\n\tconst onOpenPopup = () => {\n\t\tif(!isSelectOpened)\n\t\t\tsetIsSelectOpened(true);\n\t\telse\n\t\t\tsetIsSelectOpened(false);\n\t};\n\n\tconst onClickClear = () => {\n\t\t// console.log(\"delete Selected\");\n\t\tsetSelectedRowData(null);\n\t\t_onChange([]);\n\t};\n\n\treturn (\n\t\t<div\n            className={`${rtPrefix}-select ${className ? className : ''}`}\n\t\t\tref={node}\n\t\t>\n\t\t\t{title ? <div className={'title'}>{title}</div> : null}\n\t\t\t<div\n\t\t\t\tclassName={_getHeadCls()}\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: widthControl === 0 ? '100%' : `${widthControl}px`,\n\t\t\t\t}}\n\n\t\t\t>\n\t\t\t\t<div className={`${rtPrefix}-select-selector`}\n\t\t\t\t\t // onFocus={ () => {setIsSelectOpened(true)} }\n\t\t\t\t\t onClick={ onOpenPopup }\n\t\t\t\t>\n\t\t\t\t\t<Paragraph ellipsis> {_getHeadText()} </Paragraph>\n\t\t\t\t</div>\n                {isSelectOpened ? <UpOutlined onClick={ onOpenPopup } className={`${rtPrefix}-select-header-icon`} /> : <DownOutlined onClick={ onOpenPopup } className={`${rtPrefix}-select-header-icon`}/> }\n\t\t\t\t{/*<Button shape=\"circle\" icon={<CloseCircleFilled />} onClick={() => console.log(\"delete Selected\")} className={`${rtPrefix}-select-header-clear`} />*/}\n\t\t\t\t{_selectedRowKeys.length > 0 ? <CloseCircleFilled onClick={onClickClear} className={`${rtPrefix}-select-header-clear`}/> : null }\n\t\t\t</div>\n\n\t\t\t{isSelectOpened ? (\n\t\t\t\t<div className={_getPopupCls()} style={_getPopupStyle()}>\n\t\t\t\t\t<Table\n\t\t\t\t\t\t{...props}\n\t\t\t\t\t\tcommandPanelProps={{\n\t\t\t\t\t\t\t...props.commandPanelProps,\n\t\t\t\t\t\t\tshowElements: getEvents(),// getShowElements(),\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdefaultSelectedRowKeys={_selectedRowKeys}\n                        selectedRowKeys={_selectedRowKeys}\n\t\t\t\t\t\theaderHeight={0}\n\t\t\t\t\t\tcolumns={columns}\n\t\t\t\t\t\ttype={!!requestLoadRows ? 'serverSide' : 'localSide'}\n\t\t\t\t\t\t// showElements={searchable ? ['search'] : undefined}\n\t\t\t\t\t\tselectable={type === 'MultiSelect'}\n\t\t\t\t\t\tfooterShow={type === 'MultiSelect'}\n\t\t\t\t\t\tshowSelection={showSelection}\n\t\t\t\t\t\trowRenderShowSelection={rowRender}\n\t\t\t\t\t\tonRowClick={_SingleSelectRow}\n\t\t\t\t\t\tonSelectedRowsChange={_onChange}\n\t\t\t\t\t/>\n\t\t\t\t\t{type === 'MultiSelect' ? (\n\t\t\t\t\t\t<div className={'close-panel'}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={() => setIsSelectOpened(false)}\n\t\t\t\t\t\t\t\tsize={'small'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tOk\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t);\n};\n\nSelect.propTypes = {\n\t/** Имя параметра селекта (вернется в onChangeKeys и onChangeObjects) */\n\tname: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.number,\n\t\tPropTypes.arrayOf(\n\t\t\tPropTypes.oneOfType(\n\t\t\t\t[PropTypes.string, PropTypes.number]\n\t\t\t)\n\t\t)]).isRequired,\n\n\t/** Строка или функция для отображения элементов списка\n\t * Строка - имя поля\n\t * Функция - рендер строк. Параметры v\n\t * { rowData, rowIndex }) */\n\trowRender: PropTypes.oneOfType([PropTypes.func, PropTypes.string])\n\t\t.isRequired,\n\n\t/** Тип селекта (SingleSelect и MultiSelect) */\n\ttype: PropTypes.oneOf(['SingleSelect', 'MultiSelect']).isRequired,\n\n    /** Дополнительное имя класса для элемента */\n    className: PropTypes.string,\n\n\t/** Заголовок фильтра */\n\ttitle: PropTypes.string,\n\n\t/** Строка, когда ничего не выбрано */\n\tplaceholder: PropTypes.string,\n\n\t/** Запрос на загрузку дефолтных данных */\n\trequestLoadDefault: PropTypes.func,\n\n    /** Массив выбранных значений */\n    selectedRowKeys: PropTypes.arrayOf(\n        PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    ),\n\n    /** Размер селектора ['small', 'middle', 'large'] */\n    size: PropTypes.oneOf(['small', 'middle', 'large']),\n\n\t// /** Показывать ли поисковую строку */\n\t// searchable: PropTypes.bool,\n\n\t/** Ширина поля выбора в пикселях */\n\twidthControl: PropTypes.number,\n\n\t/** Ширина выпадающего меню */\n\twidthPopup: PropTypes.number,\n\n\t/** Высота выпадающего меню (по умолчанию считается сама) */\n\theightPopup: PropTypes.number,\n\n    /** Событие об изменении состояния селектора */\n\tonChangeKeys: PropTypes.func,\n\n\t/** Поле для уникальной идентификации строки */\n\trowKey: PropTypes.string,\n\n\t/** Высота строки таблицы */\n\trowHeight: PropTypes.number,\n\n\t/** Строки будут в зебро-стиле */\n\tzebraStyle: PropTypes.bool,\n\n\t/** Функция запроса для загрузки строк (данных) */\n\trequestLoadRows: PropTypes.func,\n\n\t/** Функция запроса для загрузки строк (данных) */\n\trequestLoadCount: PropTypes.func,\n\n\t/** Значение строки поиска */\n\tsearchValue: PropTypes.string,\n\n\t/** Имя параметра для поиска */\n\tsearchParamName: PropTypes.string,\n\n\t/** Родительский узел и дочерние узлы связаны (Работает только при selectable) */\n\tnodeAssociated: PropTypes.bool,\n\n\t/** Ключ колонки по которой строить иерархию */\n\texpandColumnKey: PropTypes.string,\n\n\t/** Открыть по умолчанию вложенность до уровня N или 'All' */\n\texpandDefaultAll: PropTypes.bool,\n\n\t/** Загружать ноды иерархии по одной */\n\texpandLazyLoad: PropTypes.bool,\n\n\t/** Поле в котором хранится ссылка на родителя */\n\texpandParentKey: PropTypes.string,\n};\n\nSelect.defaultProps = {\n\tonChangeKeys: noop,\n\t// onChangeObjects: noop,\n\tplaceholder: 'Выбрать',\n\t// searchable: false,\n    size: 'middle',\n\twidthControl: 110,\n\twidthPopup: 400,\n\theightPopup: 600,\n    rowKey: 'id',\n\trowHeight: 30,\n\tzebraStyle: false,\n\n\trequestLoadDefault: undefined,\n\trequestLoadRows: undefined,\n\trequestLoadCount: undefined,\n\tsearchValue: '',\n\tsearchParamName: 'searchLine',\n\n\tnodeAssociated: true,\n\texpandColumnKey: undefined,\n\texpandDefaultAll: true,\n\texpandLazyLoad: false,\n\texpandParentKey: 'parentId',\n};\nconst mapDispatchToProps = (dispatch) =>\n\tbindActionCreators({ setDateStore: setDateStore}, dispatch);\n\nexport default connect(null, mapDispatchToProps)(Select);\n","import React, {forwardRef, useEffect, useState} from 'react';\nimport PropTypes from 'prop-types';\nimport Table from '../Table/Table';\nimport {notification} from 'antd';\nimport { notificationError } from \"../utils/baseUtils\";\n\nconst AdvancedTable = forwardRef((props, ref) => {\n\tconst [config, setConfig] = useState({});\n\n\tconst {\n\t\tconfigData,\n        customColumnProps,\n\t\tdefaultFilter,\n\t\texpandColumnKey,\n\t\texpandLazyLoad,\n\t\texpandParentKey,\n\t\tpageSize,\n\t\trowKey,\n\t\trequestLoadConfig,\n\t} = props;\n\n\tuseEffect(() => {\n        let cleanupFunction = false;\n        const loadData = async () => {\n            if (requestLoadConfig) {\n                // console.log('requestLoadConfig => ', typeof requestLoadConfig);\n                // console.log('requestLoadRows => ', typeof props.requestLoadRows);\n                requestLoadConfig()\n                    .then((response) => {\n                        // let result = response.data;\n                        // console.log('requestLoadConfig -> ', response.data);\n                        if(!cleanupFunction)\n                            setConfig(response.data);\n                    })\n                    .catch(error => notificationError(error, 'Ошибка получения конфигурации') );\n            } else {\n                if(!cleanupFunction)\n                    setConfig(configData);\n            }\n        };\n        loadData();\n        return () => cleanupFunction = true;\n\t}, []);\n\n\tconst columnsByConfig = () =>\n\t\tconfig &&\n\t\tconfig.fields &&\n\t\tconfig.fields.map((item) => {\n\n\t\t\tconst colProps =\n                customColumnProps &&\n                customColumnProps.find(\n                    (render) =>\n                        render.name === item.name || render.name === item.alias\n                );\n\t\t\treturn {\n\t\t\t\tkey: item.name,\n\t\t\t\ttitle: item.header ? item.header : item.name,\n\t\t\t\tdataKey: item.alias ? item.alias : item.name,\n\t\t\t\talign: item.align,\n\t\t\t\twidth: item.width,\n\t\t\t\tresizable: item.resizable,\n\t\t\t\tsortable: item.sortable,\n\t\t\t\thidden: !item.visible,\n\t\t\t\t// cellRenderer: cellR && cellR.cellRender,\n                ...colProps,\n                cellRenderer: (object) => {\n                    if(colProps && colProps.cellRenderer)\n                        return colProps.cellRenderer(object) ? colProps.cellRenderer(object) : '---';\n                    else\n                        return object.cellData ? object.cellData : '---';\n                },\n\t\t\t};\n\t\t});\n\n\tconst getDefaultFilter = () => {\n\t\tif (config && config.hierarchical && config.hierarchyLazyLoad) {\n\t\t\tconst parentKey = config.hierarchyField\n\t\t\t\t? config.hierarchyField.split('/')[1]\n\t\t\t\t: expandParentKey;\n\t\t\treturn {...defaultFilter, [parentKey]: null};\n\t\t} else return defaultFilter;\n\t};\n\n\tif (config && config.fields) {\n\t\t// console.log('AdvancedTable render table -> ', config);\n\t\treturn (\n\t\t\t<Table\n\t\t\t\t{...props}\n\t\t\t\tref={ref}\n\t\t\t\tcolumns={columnsByConfig()}\n\t\t\t\tdefaultFilter={getDefaultFilter()}\n\t\t\t\trowKey={\n\t\t\t\t\tconfig && config.hierarchical && config.hierarchyField\n\t\t\t\t\t\t? config.hierarchyField.split('/')[0]\n\t\t\t\t\t\t: rowKey\n\t\t\t\t}\n\t\t\t\texpandParentKey={\n\t\t\t\t\tconfig && config.hierarchical && config.hierarchyField\n\t\t\t\t\t\t? config.hierarchyField.split('/')[1]\n\t\t\t\t\t\t: expandParentKey\n\t\t\t\t}\n\t\t\t\texpandColumnKey={\n\t\t\t\t\tconfig && config.hierarchical && config.hierarchyView\n\t\t\t\t\t\t? config.hierarchyView\n\t\t\t\t\t\t: expandColumnKey\n\t\t\t\t}\n\t\t\t\texpandLazyLoad={\n\t\t\t\t\tconfig && config.hierarchical && config.hierarchyLazyLoad\n\t\t\t\t\t\t? config.hierarchyLazyLoad\n\t\t\t\t\t\t: expandLazyLoad\n\t\t\t\t}\n\t\t\t\tpageSize={config && config.hierarchical ? 1 : pageSize}\n\t\t\t/>\n\t\t);\n\t} else return null;\n});\n\nAdvancedTable.propTypes = {\n\t/** Функция запроса на получение конфига для таблицы */\n\trequestLoadConfig: PropTypes.func,\n\n\t/** Конфигурация внешнего вида таблицы */\n\tconfigData: PropTypes.shape({\n\t\thierarchical: PropTypes.bool,\n\t\thierarchyField: PropTypes.string,\n\t\thierarchyView: PropTypes.string,\n\t\thierarchyLazyLoad: PropTypes.bool,\n\t\tfields: PropTypes.arrayOf(\n\t\t\tPropTypes.shape({\n\t\t\t\tname: PropTypes.string,\n\t\t\t\talias: PropTypes.string,\n\t\t\t\theader: PropTypes.string,\n\t\t\t\tvisible: PropTypes.bool,\n\t\t\t\tresizable: PropTypes.bool,\n\t\t\t\tsortable: PropTypes.bool,\n\t\t\t\talign: PropTypes.oneOf(['left', 'center', 'right']),\n\t\t\t\twidth: PropTypes.number,\n\t\t\t})\n\t\t),\n\t}),\n\n\t/** Дополнительные пропсы для колонок */\n    customColumnProps: PropTypes.arrayOf(PropTypes.object),\n};\n\nAdvancedTable.defaultProps = {};\n\nexport default AdvancedTable;\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport FormItems from \"./FormItems\";\nimport { Form as AntForm, notification } from \"antd\";\nimport { getObjectExcludedProps, noop, notificationError } from \"../utils/baseUtils\";\nimport { rtPrefix } from \"../utils/variables\";\n\nconst excludeProps = [\"noPadding\", \"header\", \"body\", \"footer\", \"loadInitData\", \"autoSaveForm\", \"requestSaveForm\", \"methodSaveForm\", \"processBeforeSaveForm\"];\n\n\nconst Form = (props) => {\n    const { loadInitData, header, body, footer,\n        autoSaveForm, requestSaveForm, methodSaveForm, processBeforeSaveForm } = props;\n\n    /** Состояние первоначалной настройки компонента*/\n    const [loaded, setLoaded] = useState(false);\n    const [antFormProps, setAntFormProps] = useState({});\n    const [initFormData, setInitFormData] = useState({});\n\n    useEffect(() => {\n        if (!loaded) {\n            if (loadInitData !== noop)\n                loadInitData(_setInitFormData);\n            else\n                setLoaded(true);\n        }\n    }, [loaded]);\n\n    useEffect(() => {\n        setAntFormProps(getObjectExcludedProps(props, excludeProps));\n        // console.log('antFormProps props => ', getObjectExcludedProps(props, excludeProps));\n    }, [props]);\n\n\n    const _setInitFormData = (data) => {\n        // console.log(\"Form loaded init data => \", data);\n        setInitFormData(data);\n        setLoaded(true);\n    };\n\n\n    let antForm;\n    if (props && props.form) {\n        antForm = props.form;\n    } else {\n        const [form] = AntForm.useForm();\n        antForm = form;\n    }\n\n    const getBodyCls = () => {\n        let cls = [`${rtPrefix}-form-body`];\n        props.noPadding && cls.push(`${rtPrefix}-form-body-no-padding`);\n        return cls.join(\" \");\n    };\n\n    const onFinish = (rawValues) => {\n        const values = processBeforeSaveForm ? processBeforeSaveForm(rawValues) : rawValues;\n        console.log(`Success form [${props.name ? props.name : 'no name form'}]: `, values);\n        if (autoSaveForm && requestSaveForm) {\n            const saveObject = {\n                ...initFormData,\n                ...values,\n                // dateStart: getISO(values['dateStart'])\n            };\n            requestSaveForm({\n                method: methodSaveForm,\n                data: saveObject\n            })\n                .then(response => {\n                    notification.success({\n                        message: \"Сохранение прошло успешно\"\n                    });\n                    if (props.onFinish)\n                        props.onFinish(values);\n                })\n                .catch(error => notificationError(error, 'Ошибка при сохранении') );\n        } else if (props.onFinish)\n            props.onFinish(values);\n    };\n\n    const onFinishFailed = errorInfo => {\n        console.error(\"Failed:\", errorInfo);\n        props.onFinishFailed && props.onFinishFailed(errorInfo);\n    };\n\n    return (\n        <React.Fragment>\n            {loaded ?\n                <AntForm\n                    form={antForm}\n                    {...antFormProps}\n                    className={`${antFormProps.className} ${rtPrefix}-form`}\n                    style={{ ...antFormProps.style, width: '100%', height: '100%' }}\n                    initialValues={{ ...antFormProps.initialValues, ...initFormData }}\n                    onFinish={onFinish}\n                    onFinishFailed={onFinishFailed}\n                >\n                    {header ? <div className={`${rtPrefix}-form-header`}><FormItems items={header}/></div> : null}\n                    <div className={getBodyCls()}><FormItems items={body}/></div>\n                    {footer ? <div className={`${rtPrefix}-form-footer`}><FormItems items={footer}/></div> : null}\n                </AntForm>\n                : null}\n        </React.Fragment>\n    );\n};\n\nForm.propTypes = {\n\n    /** Не делать отступы у формы от краев блока */\n    noPadding: PropTypes.bool,\n\n    /** Массив объектов для шапки формы. Как правило только заголовок. */\n    header: PropTypes.arrayOf(PropTypes.object),\n\n    /** Массив объектов для тела формы */\n    body: PropTypes.arrayOf(PropTypes.object).isRequired,\n\n    /** Массив объектов для подвала формы. Как правило только кнопки \"Сохранить\" и \"Отмена\" */\n    footer: PropTypes.arrayOf(PropTypes.object),\n\n    /** Ссылка на функцию загрузки значений по умолчанию\n     * (callBack) => callBack(initObject) */\n    loadInitData: PropTypes.func,\n\n    /** Производить ли автоматическое сохранение по параметрам requestSaveForm и methodSaveForm */\n    autoSaveForm: PropTypes.bool,\n\n    /** Запрос для автоматического сохранения формы */\n    requestSaveForm: PropTypes.func,\n\n    /** HTTP Метод, передаваемый в запрос сохранения */\n    methodSaveForm: PropTypes.string,\n\n    /** Функция обработки перед сохранением формы */\n    processBeforeSaveForm: PropTypes.func,\n};\n\nForm.defaultProps = {\n    noPadding: false,\n    loadInitData: noop,\n    autoSaveForm: true\n};\n\nexport default Form;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {getObjectExcludedProps} from '../utils/baseUtils';\nimport Form from './Form';\nimport {Modal} from 'antd';\n\nconst excludeProps = ['type', 'initialValues', 'form'];\n\nconst FormModal = props => {\n\n    const {\n        modal,\n        selectedRow,\n        visible,\n        setVisible,\n        saveRow,\n    } = props;\n\n    const getDefaultFooterProps = () => {\n\n        let okText = '';\n        let cancelText = '';\n        let modalTitle = '';\n\n        switch (modal.type) {\n            case 'addOnServer':\n            case 'addGroupOnServer':\n                okText = 'Сохранить';\n                cancelText = 'Отмена';\n                modalTitle = 'Сохранить на сервере';\n                break;\n            case 'addOnLocal':\n            case 'addGroupOnLocal':\n                okText = 'Сохранить';\n                cancelText = 'Отмена';\n                modalTitle = 'Сохранить локально';\n                break;\n            case 'editOnServer':\n            case 'editGroupOnServer':\n                okText = 'Сохранить';\n                cancelText = 'Отмена';\n                modalTitle = 'Измененить на сервере';\n                break;\n            case 'editOnLocal':\n            case 'editGroupOnLocal':\n                okText = 'Сохранить';\n                cancelText = 'Отмена';\n                modalTitle = 'Изменение локально';\n                break;\n            case 'select':\n                okText = 'Добавить';\n                cancelText = 'Отмена';\n                modalTitle = 'Выбор';\n                break;\n            case 'viewGroup':\n            case 'viewObject':\n                okText = 'Закрыть';\n                modalTitle = 'Просмотр';\n                break;\n            default: break;\n        }\n\n        if(modal.okText)\n            okText = modal.okText;\n\n        if(modal.cancelText)\n            cancelText = modal.cancelText;\n\n        if(modal.title)\n            modalTitle = modal.title;\n\n        return {okText, cancelText, title: modalTitle, okType: 'primary'}\n    };\n\n    let modalProps = { ...getDefaultFooterProps(), ...getObjectExcludedProps(modal, excludeProps) };\n\n    const onFinish = values => {\n        // console.log('FormModal Success:', values, selectedRow);\n        let saveObj = {};\n        if(modal.type.startsWith('add'))\n            saveObj = {...values};\n        else\n            saveObj = {...selectedRow, ...values};\n\n        saveRow({type: modal.type, row: saveObj, requestSaveRow: modal.requestSaveRow});\n\n        if (modalProps.onOk) modalProps.onOk(values);\n        if (modalProps.onFinish) modalProps.onFinish(values);\n    };\n\n    const onFinishFailed = errorInfo => {\n        // console.log('FormModal Failed:', errorInfo);\n        console.error(\"FormModal fields failed: \", errorInfo);\n        props.onFinishFailed && props.onFinishFailed(errorInfo);\n    };\n\n    const _onCancelHandler = (e) => {\n        // setVisibleModals({ ...visibleModals, [modal.type]: false });\n        // form.resetFields();\n        setVisible(modal.type, false);\n        if (modalProps.onCancel) modalProps.onCancel(e)\n    };\n\n    const _onLoadInitData = (callBack) => {\n        // console.log(\"Modal => loadInitData\", selectedRow);\n        formConfig.loadInitData(callBack, selectedRow)\n    }\n\n    const defaultFooter = [\n        {\n            componentType: 'Item',\n            child: {\n                componentType: 'Button',\n                label: modalProps.cancelText,\n                className: 'mr-8',\n                onClick: _onCancelHandler,\n                ...modalProps.cancelButtonProps\n            }\n        },\n        {\n            componentType: 'Item',\n            child: {\n                componentType: 'Button',\n                label: modalProps.okText,\n                type: modalProps.okType,\n                htmlType: 'submit',\n                ...modalProps.okButtonProps\n            }\n        }\n    ];\n\n    const formConfig =  {\n        footer: defaultFooter,\n        ...modal.form\n    };\n    return (\n        <Modal\n            {...modalProps}\n            centered\n            destroyOnClose\n            visible={visible}\n            onCancel={_onCancelHandler}\n            bodyStyle={{padding: 0, ...modalProps.bodyStyle}}\n            footer={null}\n        >\n            <Form\n                {...formConfig}\n                onFinish={onFinish}\n                onFinishFailed={onFinishFailed}\n                loadInitData={_onLoadInitData}\n            />\n        </Modal>\n    )\n};\n\nFormModal.propTypes = {\n    /** Объект модального окна */\n    modal: PropTypes.object,\n\n    /** Выделенная строка таблицы */\n    selectedRow: PropTypes.object,\n\n    /** Состояние видимости модалки */\n    visible: PropTypes.bool,\n\n    /** Задание состояния видимости модалки */\n    setVisible: PropTypes.func,\n\n    /** CallBack функция для сохранения данных */\n    saveRow: PropTypes.func,\n};\n\nexport default FormModal;\n","import React, {forwardRef, useState, useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport SortOrder from 'react-base-table/lib/SortOrder';\nimport AdvancedTable from '../AdvancedTable/AdvancedTable';\nimport { generateUUID, getObjectExcludedProps, noop, notificationError } from \"../utils/baseUtils\";\nimport FormModal from './FormModal';\nimport { notification as antNotification, notification } from \"antd\";\nimport { rtPrefix } from \"../utils/variables\";\nimport { empty, overlay } from \"../Table/defaultSettings\";\n\n\nconst excludeProps = ['onChange', 'defaultValue', 'modals', 'events', 'history'];\n\nconst FormTable = forwardRef((props, ref) => {\n\n    /** Состояние первоначалной настройки компонента*/\n    const [loading, setLoading] = useState(false);\n\n    /** Состояние отображения модалок таблицы */\n    const [visibleModals, setVisibleModals] = useState({\n        addOnServer: false,\n        editOnServer: false,\n        addOnLocal: false,\n        editOnLocal: false,\n        addGroupOnServer: false,\n        editGroupOnServer: false,\n        addGroupOnLocal: false,\n        editGroupOnLocal: false,\n        select: false,\n        viewGroup: false,\n        viewObject: false});\n    const [tableRows, setTableRows] = useState([]);\n    const [tableSelectedRowKeys, setTableSelectedRowKeys] = useState([]);\n    const [tableSelectedRow, setTableSelectedRow] = useState({});\n\n    /** Ссылка на объект таблицы */\n    const [tableRef, setTableRef] = useState({});\n    const _setTableRef = (_ref) => {\n        setTableRef(_ref);\n        ref && ref(_ref)\n    };\n\n    const {\n        rowKey,\n        rowKeyType,\n        customFields,\n        modals,\n        isGroupKey,\n        history,\n\n        componentType,\n        name,\n\n        // Form.Item props\n        value,\n\n        // Requests\n        requestDeleteRow,\n\n        dataDeleteRow\n    } = props;\n    const cmdProps = props.commandPanelProps;\n\n    // let advancedTableProps = getObjectExcludedProps(props, excludeProps);\n\n    /** Аналог componentDidMounted */\n    useEffect(() => {\n        // Если таблица локальная, то пробуем загрузить исходные данные\n        if(!loading && props.type === 'localSide') {\n            let cleanupFunction = false;\n            setLoading(true);\n            const loadData = async () => {\n                if (!loading && props.requestLoadRows) {\n                    props.requestLoadRows({params: {page: 0, size: 1}, data: {}})\n                        .then((response) => {\n                            // console.log('FormTable -> requestLoadRows -> response', response);\n                            // console.log('FormTable -> requestLoadRows -> value', value);\n                            if (!cleanupFunction)\n                                _addRowsToLocalTable(response.data, value);\n                        })\n                        .catch(error => notificationError(error, 'Ошибка загрузки данных') );\n                }\n                // console.log('FormTable -> setMounted ', advancedTableProps.type);\n                setLoading(false);\n            };\n            loadData();\n            return () => cleanupFunction = true;\n        }\n    }, [props.type]);\n\n    useEffect(() => {\n        if(props.selectable) {\n            console.log(\"FormTable => useEffect => value: \", value);\n            if(value && value.length > 0)\n                setTableSelectedRowKeys(value.map(item => item[rowKey]));\n            else\n                setTableSelectedRowKeys([]);\n\n        }\n    }, [value]);\n\n    /** Получить список кнопок для Command Panel */\n    const getEvents = () => {\n        return (cmdProps && cmdProps.systemBtnProps && Object.keys(cmdProps.systemBtnProps)) || [];\n    };\n\n    /** Получить рендер модалок */\n    const getModals = () => {\n        return modals.map((modal, index) => {\n            return (\n                <FormModal\n                    key={index}\n                    modal={modal}\n                    selectedRow={tableSelectedRow}\n                    visible={visibleModals[modal.type]}\n                    setVisible={(type, value) => setVisibleModals({ ...visibleModals, [type]: value })}\n                    saveRow={_onSaveRow}\n                />\n            )\n\n        })\n    };\n\n    /** Проверка существования кнопки в Command Panel */\n    const isExistCmdBtn = (btnType) => (cmdProps && cmdProps.systemBtnProps && cmdProps.systemBtnProps[btnType]);\n\n    /** Проверка соответствия типа кнопки и события ? (params) === (props) */\n    const equalsActionTypeCmdBtn = (btnType, actionType) => {\n        if(isExistCmdBtn(btnType)) {\n            if(btnType === 'edit') {\n                const aTypes = actionType.split('/');\n                if(aTypes[0] === 'g') {\n                    return !!(cmdProps.systemBtnProps[btnType].actionType\n                        && cmdProps.systemBtnProps[btnType].actionType.length === 2\n                        && cmdProps.systemBtnProps[btnType].actionType[1] === aTypes[1]);\n                }\n                else if (aTypes[0] === 'i') {\n                    return !!(cmdProps.systemBtnProps[btnType].actionType\n                        && cmdProps.systemBtnProps[btnType].actionType.length === 2\n                        && cmdProps.systemBtnProps[btnType].actionType[0] === aTypes[1]);\n                }\n            } else {\n                return !!(cmdProps.systemBtnProps[btnType].actionType\n                    && cmdProps.systemBtnProps[btnType].actionType === actionType);\n            }\n        }\n        return false;\n    };\n\n    /** Command Panel Events */\n    /** Добавить */\n    const _onClickAddHandler = () => {\n        if(equalsActionTypeCmdBtn('add', 'modal')) {\n            // console.log(\"FormTable => _onClickAddHandler => modal\");\n            if (props.type !== 'localSide') {\n                setVisibleModals({...visibleModals, addOnServer: true});\n            } else {\n                if (modals && (modals.find(modal => modal.type === 'select') !== undefined)) {\n                    setVisibleModals({...visibleModals, select: true});\n                    // console.log(\"FormTable => _onClickAddHandler => select\", modals.find(modal => modal.type === 'select'));\n                } else {\n                    setVisibleModals({...visibleModals, addOnLocal: true});\n                    // console.log(\"FormTable => _onClickAddHandler => addOnLocal\"); location.pathname\n                }\n            }\n        } else if (equalsActionTypeCmdBtn('add', 'page')) {\n            history.push(`${history.location.pathname}/new`);\n        }\n    };\n\n    /** Добавить копированием */\n    const _onClickAddAsCopyHandler = (event, row) => {\n        _addRowToLocalTable(row);\n    };\n\n    /** Добавить группу */\n    const _onClickAddGroupHandler = () => {\n        if(equalsActionTypeCmdBtn('addGroup', 'modal')) {\n            // console.log(\"FormTable => _onClickAddGroupHandler => modal\");\n            if (props.type !== 'localSide')\n                setVisibleModals({...visibleModals, addGroupOnServer: true});\n            else\n                setVisibleModals({...visibleModals, addGroupOnLocal: true});\n        } else if (equalsActionTypeCmdBtn('addGroup', 'page')) {\n            // console.log(\"FormTable => _onClickAddGroupHandler => page\");\n            history.push(`${history.location.pathname}/newGroup`);\n        }\n    };\n\n    /** Изменить */\n    const _onClickEditHandler = (event, {rowData}) => {\n        // console.log(\"FormTable -> _onClickEditHandler -> row \", rowData, props.type);\n        if (rowData[isGroupKey]) {\n            if (equalsActionTypeCmdBtn('edit', 'g/modal')) {\n                // console.log(\"FormTable => _onClickEditHandler => g/modal\");\n                if (props.type !== 'localSide')\n                    setVisibleModals({...visibleModals, editGroupOnServer: true});\n                else\n                    setVisibleModals({...visibleModals, editGroupOnLocal: true});\n            } else if (equalsActionTypeCmdBtn('edit', 'g/page')) {\n                // console.log(\"FormTable => _onClickEditHandler => g/page\");\n                history.push(`${history.location.pathname}/${rowData[rowKey]}`);\n            }\n        } else {\n            if (equalsActionTypeCmdBtn('edit', 'i/modal')) {\n                // console.log(\"FormTable => _onClickEditHandler => i/modal\");\n                if (props.type !== 'localSide')\n                    setVisibleModals({...visibleModals, editOnServer: true});\n                else\n                    setVisibleModals({...visibleModals, editOnLocal: true});\n            } else if (equalsActionTypeCmdBtn('edit', 'i/page')) {\n                // console.log(\"FormTable => _onClickEditHandler => i/page\");\n                history.push(`${history.location.pathname}/${rowData[rowKey]}`);\n            }\n        }\n    };\n\n    /** Удалить */\n    const _onClickDelete = (event, _selectedRowKeys) => {\n        if(props.type === 'localSide') {\n            const _rows = tableRows.filter(\n                (item) => !_selectedRowKeys.includes(item[rowKey])\n            );\n            setTableRows(_rows);\n            _onChange(_rows);\n        } else {\n            if(_selectedRowKeys && _selectedRowKeys.length > 0 && requestDeleteRow){\n                const deleteData = _selectedRowKeys.map(item => { return {[rowKey]: item, ...dataDeleteRow} } );\n                requestDeleteRow({data: {deleteData: deleteData}})\n                    .then((response) => {\n                        antNotification.success({message: 'Успешное удаленение'});\n                        tableRef && tableRef.reloadData({});\n\n                    })\n                    .catch(error => {\n                        notificationError(error, 'Ошибка удаления записи');\n                        tableRef && tableRef.reloadData({});\n                    });\n            }\n        }\n        cmdProps.onClickDelete && cmdProps.onClickDelete(event, _selectedRowKeys);\n    };\n\n    /** Переместить вверх / вниз */\n    const _onClickUpHandler = (event, row, rows) => {\n        _onChange(rows);\n        cmdProps.onClickUp && cmdProps.onClickUp(event, row, rows);\n    };\n\n    const _onClickDownHandler = (event, row, rows) => {\n        _onChange(rows);\n        cmdProps.onClickDown && cmdProps.onClickDown(event, row, rows);\n    };\n\n    /** Modal Events */\n    const _onSaveRow = ({type, row, requestSaveRow}) => {\n        // console.log(\"FormTable -> _saveRow -> row \", row);\n        if(type === 'select') {\n            // Получить массив строк из таблицы в модальной форме\n            let selectRows = row[name];\n            // console.log(\"FormTable -> _onSaveRow -> row [0]\", row);\n            // console.log(\"FormTable -> _onSaveRow -> saveRows [0]\", selectRows);\n\n            // Фильтрация выбранных строк, оставить только те которых еще нет в таблице\n            let saveRows = selectRows.filter((sRow) =>\n                tableRows.findIndex((tRow) => tRow[rowKey] === sRow[rowKey]) === -1\n            );\n            // console.log(\"FormTable -> _onSaveRow -> saveRows [1]\", saveRows);\n            if (customFields)\n                // Фильтрация по пользовательским параметрам\n                saveRows = saveRows.filter((sRow) => {\n                    let isValid = true;\n                    customFields.forEach((field) => {\n                        // Валидация по пользовательской логике функции validate\n                        if(field.validate)\n                            isValid = field.validate(sRow, tableRows);\n\n                        // Создание или переобразование по пользовательской логике функции value\n                        if(field.value)\n                            sRow[field.name] = field.value(sRow, tableRows);\n                    });\n                    if(isValid)\n                        return sRow;\n                });\n            setVisibleModals({ ...visibleModals, [type]: false });\n            notification.success({\n                message: `Добавлено ${saveRows.length} строк`\n            });\n            // console.log(\"FormTable -> _onSaveRow -> saveRows [2]\", saveRows);\n            _addRowsToLocalTable([...tableRows, ...saveRows]);\n        }\n        else {\n            let saveRow = {...row};\n            if(type.indexOf('Group') !== -1)\n                saveRow[isGroupKey] = true;\n            else\n                saveRow[isGroupKey] = false;\n            if (customFields)\n                customFields.forEach((field) => saveRow[field.name] = field.value(saveRow, tableRows));\n            switch (type) {\n                case 'addOnServer':\n                case 'editOnServer':\n                case 'addGroupOnServer':\n                case 'editGroupOnServer':\n                    _addRowToServerTable({requestSaveRow, type, saveRow});\n                    break;\n                case 'addOnLocal':\n                case 'addGroupOnLocal':\n                    setVisibleModals({ ...visibleModals, [type]: false });\n                    _addRowToLocalTable(saveRow);\n                    break;\n                case 'editOnLocal':\n                case 'editGroupOnLocal':\n                    setVisibleModals({ ...visibleModals, [type]: false });\n                    _editRowToLocalTable(saveRow);\n                    break;\n\n                //            addGroupOnServer: false,\n                //         editGroupOnServer: false,\n                //         addGroupOnLocal: false,\n                //         editGroupOnLocal: false,\n                // case 'select':\n                case 'viewGroup':\n                case 'viewObject':\n                    setVisibleModals({ ...visibleModals, [type]: false });\n                    break;\n            }\n            // console.log(\"Modal Events => type: \", type, itemName, componentType, saveRow);\n        }\n\n    };\n\n    const _addRowToLocalTable = (row) => {\n        let saveObj = {...row};\n        if(rowKeyType === 'uuid')\n            saveObj[rowKey] = generateUUID();\n\n        // console.log('_addRowToLocalTable', tableRows);\n        _addRowsToLocalTable([...tableRows, saveObj]);\n    };\n\n    const _editRowToLocalTable = (row) => {\n        let arr = [...tableRows];\n        const rowIndex = arr.findIndex(item => item[rowKey] === row[rowKey]);\n        arr.splice(rowIndex, 1, row);\n        setTableRows(arr);\n        setTableSelectedRow(row);\n        _onChange(arr);\n    };\n\n    const _addRowsToLocalTable = (rows, keys) => {\n        // console.log('FormTable -> _addRowsToLocalTable -> rows', rows, keys);\n        setTableRows(rows);\n        if(props.selectable)\n            _onChange(keys);\n        else\n            _onChange(rows);\n    };\n\n    const _addRowToServerTable = ({requestSaveRow, type, saveRow}) => {\n        if (requestSaveRow\n            && ['addOnServer', 'editOnServer', 'addGroupOnServer', 'editGroupOnServer'].includes(type)\n        ) {\n            const method = (type === 'addOnServer' || type === 'addGroupOnServer') ? 'POST' : 'PUT';\n            // console.log(\"Modal Events => type: \", type, itemName, componentType, saveRow);\n            requestSaveRow({\n                method,\n                data: saveRow,\n            })\n                .then(response => {\n                    notification.success({\n                        message: 'Сохранение прошло успешно'\n                    });\n                    setVisibleModals({ ...visibleModals, [type]: false });\n                    tableRef && tableRef.reloadData({ filter: props.defaultFilter});\n                    // ref && ref.current && ref.current.reloadData({ filter: props.defaultFilter});\n                    // console.log('_addRowToServerTable tableRef =>', tableRef);\n                })\n                .catch(error => notificationError(error, 'Ошибка при сохранении') );\n        }\n    };\n\n    const _onRowClick = ({selected, rowData, rowIndex, rowKey}) => {\n        if(!props.selectable) {\n            setTableSelectedRow(rowData);\n            setTableSelectedRowKeys([rowKey]);\n            if(componentType === 'SelectTable')\n                _onChange([rowData]);\n        }\n        props.onRowClick && props.onRowClick({selected, rowData, rowIndex, rowKey});\n    };\n\n    const _onRowDoubleClick = ({rowData, rowIndex, rowKey}) => {\n        if (rowData[isGroupKey]) {\n            setVisibleModals({...visibleModals, viewGroup: true});\n        } else {\n            setVisibleModals({...visibleModals, viewObject: true});\n        }\n        props.onRowDoubleClick && props.onRowDoubleClick({rowData, rowIndex, rowKey});\n    };\n\n    const _onSelectedRowsChange = (keys, rows) => {\n        // console.log(\"_onSelectedRowsChange\", keys, rows);\n        if(props.selectable) {\n            setTableSelectedRow(rows[0]);\n            setTableSelectedRowKeys(keys);\n            _onChange(rows);\n        }\n    };\n\n    const _onChange = (rows) => {\n        if(rows !== undefined)\n            props.onChange(rows);\n        else\n            props.onChange(tableRows);\n    };\n\n    const getTableCls = () => {\n        let cls = [`${rtPrefix}-form-table`];\n        if (props.className)\n            cls.push(props.className);\n        return cls.join(' ');\n    };\n\n    return (\n        <div className={getTableCls()} style={props.style} >\n            <AdvancedTable\n                ref={_setTableRef}\n                {...getObjectExcludedProps(props, excludeProps)}\n                rows={tableRows}\n                setRows={setTableRows}\n                // selectedRowKeys={tableSelectedRow[rowKey] ? [tableSelectedRow[rowKey]] : []}\n                selectedRowKeys={tableSelectedRowKeys}\n                onRowClick={_onRowClick}\n                onRowDoubleClick={_onRowDoubleClick}\n                onSelectedRowsChange={_onSelectedRowsChange}\n                autoDeleteRows={false}\n                commandPanelProps={{\n                    ...props.commandPanelProps,\n                    showElements: getEvents(),// getShowElements(),\n                    onClickAdd: _onClickAddHandler,\n                    onClickAddAsCopy: _onClickAddAsCopyHandler,\n                    onClickAddGroup: _onClickAddGroupHandler,\n                    onClickEdit: _onClickEditHandler,\n                    onClickDelete: _onClickDelete,\n                    onClickDown: _onClickDownHandler,\n                    onClickUp: _onClickUpHandler,\n                }}\n                filterPanelProps={{\n                    ...props.filterPanelProps,\n                    // onApplyFilter: (filter) => console.log('filter', filter)\n                }}\n            />\n            {modals && getModals()}\n        </div>\n    );\n});\n\nFormTable.propTypes = {\n    /** Объект со свойствами Command Panel */\n    commandPanelProps: PropTypes.object,\n\n    /** Объект со свойствами Filter Panel */\n    filterPanelProps: PropTypes.object,\n\n    /**\n     * ПРОПСЫ ЗАДАНИЯ ЗНАЧЕНИЙ ПО УМОЛЧАНИЮ\n     * */\n\n    /** Строки по умолчанию */\n    defaultRows: PropTypes.arrayOf(PropTypes.object),\n\n    /** Ключи выделенных по умолчанию строк */\n    defaultSelectedRowKeys: PropTypes.arrayOf(\n        PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n    ),\n\n    /** Значение строки поиска по умолчанию строк */\n    defaultSearchValue: PropTypes.string,\n\n    /** Объект фильтрации по умолчанию */\n    defaultFilter: PropTypes.object,\n\n    /** Сортировка по умолчанию */\n    defaultSortBy: PropTypes.shape({\n        key: PropTypes.string,\n        order: PropTypes.oneOf([SortOrder.ASC, SortOrder.DESC]),\n    }),\n\n    /**\n     * ПРОПРЫ ДЛЯ ВНЕШНЕГО КОНТРОЛЯ ТАБЛИЦЫ\n     * */\n\n    /** Значение строки поиска */\n    searchValue: PropTypes.string,\n\n    /** Фильтр */\n    filter: PropTypes.object,\n\n    /** Объект сортировки ({ key: 'string', order: 'asc' }).\n     * key - поле по которому сотрировать,\n     * order - направление сортировки (\"asc\", \"desc\")\n     * */\n    sortBy: PropTypes.shape({\n        key: PropTypes.string,\n        order: PropTypes.oneOf([SortOrder.ASC, SortOrder.DESC]),\n    }),\n\n    /**\n     * BASE PROPS\n     * */\n\n    /** Автоудаление строк из таблицы по кнопке в командной панели*/\n    autoDeleteRows: PropTypes.bool,\n\n    /** Поле для уникальной идентификации строки */\n    rowKey: PropTypes.string,\n\n    /** Тип поля для уникальной идентификации строки */\n    rowKeyType: PropTypes.oneOf(['uuid', 'number']),\n\n    /**\n     * VIEW PROPS\n     * */\n\n    /** Вывод когда нет данных. JSX для заглушки \"Нет данных\".  */\n    empty: PropTypes.element,\n\n    /** Отображение загрузки данных. JSX для загрузки данных. */\n    overlay: PropTypes.element,\n\n    /** Фиксированная ширина столбцов. Появится боковой скрол */\n    fixWidthColumn: PropTypes.bool,\n\n    /** Высота подвала */\n    footerHeight: PropTypes.number,\n\n    /** Отображать ли подвал */\n    footerShow: PropTypes.bool,\n\n    /** Названия футтера */\n    footerTitles: PropTypes.shape({\n        selectedRows: PropTypes.string,\n        loadedRows: PropTypes.string,\n        totalRows: PropTypes.string,\n    }),\n\n    /** Высота заголовка таблицы */\n    headerHeight: PropTypes.number,\n\n    /** Высота строки таблицы */\n    rowHeight: PropTypes.number,\n\n    /** Custom row renderer\n     * Параметры - ({ isScrolling, cells, columns, rowData, rowIndex, depth }) */\n    rowRenderer: PropTypes.oneOfType([PropTypes.func, PropTypes.element]),\n\n    /** Строки будут в зебро-стиле */\n    zebraStyle: PropTypes.bool,\n\n    /**\n     * LOAD DATA PROPS\n     * */\n\n    /** Порог в пикселях для вызова _onLoad.\n     * Кол-во пикселей от низа таблицы для срабатывания события загрузки (onEndReached) */\n    loadThreshold: PropTypes.number,\n\n    /** Размер страницы */\n    pageSize: PropTypes.number,\n\n    /** Функция запроса для загрузки строк (данных) */\n    requestLoadRows: PropTypes.func,\n\n    /** Функция запроса для загрузки строк (данных) */\n    requestLoadCount: PropTypes.func,\n\n    /** Имя параметра для поиска */\n    searchParamName: PropTypes.string,\n\n    /**\n     * SELECTABLE PROPS\n     * */\n\n    /** Таблица с возможностью выбора строки */\n    selectable: PropTypes.bool,\n\n    /**\n     * TREE PROPS\n     * */\n\n    /** Родительский узел и дочерние узлы связаны (Работает только при selectable) */\n    nodeAssociated: PropTypes.bool,\n\n    /** Ключ колонки по которой строить иерархию */\n    expandColumnKey: PropTypes.string,\n\n    /** Открыть по умолчанию вложенность до уровня N или 'All' */\n    expandDefaultAll: PropTypes.bool,\n\n    /** Загружать ноды иерархии по одной */\n    expandLazyLoad: PropTypes.bool,\n\n    /** Поле в котором хранится ссылка на родителя */\n    expandParentKey: PropTypes.string,\n\n    /**\n     * EVENTS\n     * */\n\n    /** Событие при клике на строку (только при selectable = false)\n     * Параметр - ({selected, rowData, rowIndex}) */\n    onRowClick: PropTypes.func,\n\n    /** Событие при двойном клике на строку.\n     * Параметр - ({rowData, rowIndex, rowKey}) */\n    onRowDoubleClick: PropTypes.func,\n\n    /** События при открытии / закрытии ноды\n     * Парметры - ({ expanded, rowData, rowIndex, rowKey }) */\n    onRowExpand: PropTypes.func,\n\n    /** Событие при выборе строки.\n     * Параметр - массив выбранных строе (только rowKey) */\n    onSelectedRowsChange: PropTypes.func,\n\n    /** События при открытии / закрытии ноды\n     * Парметры - (expandedRowKeys) - массив ключей открытых нод */\n    onExpandedRowsChange: PropTypes.func,\n\n    /** SELECTED PANEL */\n\n    /** Отображать ли панель выбранных элементов */\n    showSelection: PropTypes.bool,\n\n    /** Строка или функция для отображения элементов списка выбранных\n     * Строка - имя поля\n     * Функция - рендер строк.\n     * Параметры - ({ rowData, rowIndex }) */\n    rowRenderShowSelection: PropTypes.oneOfType([\n        PropTypes.func,\n        PropTypes.string,\n    ]),\n\n\n    /** Дополнительные пропсы для колонок */\n    customColumnProps: PropTypes.arrayOf(PropTypes.object),\n\n    /** Дополнительные поля и валидация в объекты таблицы */\n    customFields: PropTypes.arrayOf(PropTypes.object),\n\n    /** Модальные окна */\n    modals: PropTypes.arrayOf(PropTypes.object),\n\n    /** Событие об изменении объектов таблицы\n     * Параметр - (rows)*/\n    onChange: PropTypes.func,\n\n    /** implemented - только для (LocalTable + selectable) - Контроль значение из вне */\n    // value: PropTypes.arrayOf(PropTypes.object),\n\n    /** Not implemented - Задание значений по умолчанию */\n    defaultValue: PropTypes.arrayOf(PropTypes.object),\n\n    /** Классы стилей */\n    className: PropTypes.string,\n\n    /** Стили */\n    style: PropTypes.object,\n\n    /** Поле для идентификации группы */\n    isGroupKey: PropTypes.string,\n\n    /** Объект history для перемещения по путям */\n    history: PropTypes.object,\n\n    /** Функция запроса на получение конфига для таблицы */\n    requestLoadConfig: PropTypes.func,\n\n    /** Функция запроса на уделание данных */\n    requestDeleteRow: PropTypes.func,\n\n    /** Параметры объекта удаления */\n    dataDeleteRow: PropTypes.object,\n};\n\nFormTable.defaultProps = {\n    defaultRows: [],\n    defaultSelectedRowKeys: [],\n    defaultSearchValue: '',\n    defaultFilter: {},\n    defaultSortBy: {},\n\n    searchValue: '',\n    filter: {},\n    sortBy: {},\n\n    autoDeleteRows: true,\n    rowKey: 'id',\n\n    empty: empty,\n    overlay: overlay,\n    fixWidthColumn: false,\n    footerHeight: 30,\n    footerShow: false,\n    footerTitles: {\n        selectedRows: 'Выделено:',\n        loadedRows: 'Загружено записей:',\n        totalRows: 'Всего записей:',\n    },\n    headerHeight: 30,\n    rowHeight: 30,\n    zebraStyle: false,\n\n    loadThreshold: 300,\n    pageSize: 50,\n    requestLoadRows: noop,\n    requestLoadCount: noop,\n    searchParamName: 'searchLine',\n\n    selectable: false,\n\n    nodeAssociated: true,\n    expandColumnKey: undefined,\n    expandDefaultAll: true,\n    expandLazyLoad: false,\n    expandParentKey: 'parentId',\n\n    onRowClick: noop,\n    onRowDoubleClick: noop,\n    onRowExpand: noop,\n    onSelectedRowsChange: noop,\n    onExpandedRowsChange: noop,\n\n    showSelection: false,\n\n    rowKeyType: 'uuid',\n    onChange: noop,\n    isGroupKey: 'isGroup',\n};\n\nexport default FormTable;\n","import React, {useState, useEffect} from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport objectPath from \"object-path\";\nimport { setDateStore } from \"../../redux/rtd.actions\";\nimport {getObjectExcludedProps} from '../utils/baseUtils';\nimport moment from \"moment\";\nimport { Typography as AntTypography } from \"antd\";\nimport { getISO, toFormat } from \"../..\";\n\nexport const withStore = (Component, antFormItemProps) => {\n\n    const mapStateToProps = (store, ownProps) => {\n        const {subscribe} = ownProps;\n        if(subscribe){\n            const {name, path} = subscribe;\n            if(name && path)\n                return { [name]: objectPath.get(store, path) };\n        }\n\n        return {};\n    };\n    const mapDispatchToProps = (dispatch) =>\n        bindActionCreators({ setDateStore: setDateStore}, dispatch);\n\n    const defaultGetValueFromEvent = (valuePropName, event) => {\n        if (event && event.target && valuePropName in event.target) {\n            return event.target[valuePropName];\n        }\n        return event;\n    };\n\n    const defaultProps = {\n        trigger: 'onChange',\n        valuePropName: 'value',\n    };\n\n    const withStoreProps = { ...defaultProps, ...antFormItemProps };\n\n    return connect(mapStateToProps, mapDispatchToProps)( (props) => {\n\n        const {dispatchPath} = props;\n\n        const subscribe = props.subscribe ? props.subscribe : {};\n\n        const [subscribeProps, setSubscribeProps] = useState({});\n\n        const {trigger, getValueFromEvent, valuePropName} = withStoreProps;\n\n        const excludeProps = ['componentType', 'setDateStore', 'subscribe', subscribe.name, 'dispatchPath'];\n\n        const getValue = (...args) => {\n            let newValue;\n            if (getValueFromEvent) {\n                newValue = getValueFromEvent(...args);\n                // console.log(\"storeHOC => getValueFromEvent: \", newValue);\n            } else {\n                newValue = defaultGetValueFromEvent(valuePropName, ...args);\n                // console.log(\"storeHOC => defaultGetValueFromEvent: \", newValue);\n            }\n            return newValue;\n        };\n\n        /** Подписка на изменение props[subscribe.name] в сторе */\n        useEffect( () => {\n            if(subscribe.name) {\n                // console.log(\"storeHOC => subscribe: \", props[subscribe.name]);\n                subscribe.onChange && subscribe.onChange({value: props[subscribe.name], setSubscribeProps});\n            }\n            // console.log(\"Change Props[2]: \", props.subscribeЗф);\n        }, [props[subscribe.name]]);\n\n        useEffect(() => {\n            // dispatchPath && props.setDateStore && props.setDateStore(dispatchPath, props.value);\n            if(dispatchPath) {\n                const newValue = props[valuePropName];\n                // console.log(\"storeHOC => dispatch: \", newValue);\n                dispatchPath && props.setDateStore && props.setDateStore(dispatchPath, newValue);\n            }\n        }, [props]);\n\n        useEffect(() => {\n            if(subscribeProps.value) {\n                // console.log('subscribeProps.value => ', subscribeProps.value);\n                props[trigger] && props[trigger](subscribeProps.value);\n            }\n        }, [subscribeProps.value]);\n\n        const onChange = (...args) => {\n            // const newValue = getValue(...args);\n            // dispatchPath && props.setDateStore && props.setDateStore(dispatchPath, newValue);\n            props[trigger] && props[trigger](...args);\n        };\n\n        const childProps = getObjectExcludedProps(props, excludeProps);\n        return <Component {...childProps} {...subscribeProps} {...{[trigger]: onChange }}/>\n    })\n};\n\n\nexport const DatePickerHOC = (Component) => {\n    return props => {\n        // console.log(\"DatePickerHOC => \", props);\n        if(props.value){\n            if(typeof props.value === 'string'){\n                // console.log(\"DatePickerHOC => onChange => string\");\n                props.onChange(moment(props.value), props.value);\n            }\n            // else {\n            // \tconsole.log(\"DatePickerHOC => onChange => moment\");\n            // \tprops.onChange(props.value, props.format ? toFormat(props.value,props.format) : getISO(props.value));\n            // }\n        }\n        const value = props.value ? (typeof props.value === 'string' ? moment(props.value) : props.value) : null;\n        return <Component {...props} value={value} />\n    };\n};\n\nexport const TypographyTitle = (props) =>\n    <AntTypography.Title {...props}> {props.label || props.value} </AntTypography.Title>;\n\nexport const TypographyText = (props) =>\n    <AntTypography.Text {...props}> {props.label || props.value} </AntTypography.Text>;\n\nexport const TypographyDate = (props) => {\n    const {label, value, format } = props;\n    const _value = value ? (format ? toFormat(value, format) : getISO(value)) : null;\n    return <AntTypography.Text {...props}> {label || _value} </AntTypography.Text>;\n}\n","\n\n\nconst getTitle = (type, element) => {\n    if(element === 'Group')\n        if(type === 'edit')\n            return 'Изменение папки';\n        else\n            return 'Создание папки';\n    else\n        return 'Изменение файла';\n};\n\nconst Modal = (type, element, requestSaveRow, processBeforeSaveForm, parentLoadHandler, requestLoadRows) => {\n    // console.log(\"FolderModal\", type, requestSaveRow, processBeforeSaveForm, parentLoadHandler, requestLoadRows);\n    let selectedRow;\n    return {\n        type: `${type}${element}OnServer`,\n        title: getTitle(type, element),\n        requestSaveRow: requestSaveRow,\n        width: 500,\n        // bodyStyle: {height: 650},\n        form: {\n            name: 'FileManagerModalModal',\n            labelCol: {span: 8},\n            wrapperCol: {span: 16},\n            processBeforeSaveForm: (rawValues) => processBeforeSaveForm(rawValues, type, element),\n            loadInitData: (callBack, row) => {\n                selectedRow = row;\n                callBack(type === 'edit' ? row : null);\n            },\n            body: [\n                {\n                    componentType: 'Item',\n                    label: 'Наименование',\n                    name: 'name',\n                    rules: [\n                        {\n                            message: `Заполните наименование`,\n                            required: true,\n                        },\n                    ],\n                    child: {componentType: 'Input'},\n                },\n                type === 'edit'\n                    ? {\n                        componentType: 'Item',\n                        label: 'Родитель',\n                        name: 'parentId',\n                        child: {\n                            componentType: 'SingleSelect',\n                            widthControl: 0,\n                            heightPopup: 300,\n                            expandColumnKey: 'id',\n                            rowRender: 'name',\n                            nodeAssociated: false,\n                            expandDefaultAll: true,\n                            // (info) аналогично ({params, data})\n                            // Но поскольку тут раскрывать объект не нужно, мы можем просто передать его дальше\n                            requestLoadRows: (info) => parentLoadHandler(type, selectedRow, info),\n                            requestLoadDefault: requestLoadRows,\n                        },\n                    }\n                    : {},\n            ],\n        },\n    };\n};\n\nexport const AddFolderModal = (...args) => Modal('add', 'Group', ...args);\nexport const EditFolderModal = (...args) => Modal('edit', 'Group', ...args);\nexport const EditFileModal = (...args) => Modal('edit', '', ...args);\n\n","import {notification} from 'antd';\n\nexport const copyTextToClipboard = text => {\n\tif (!navigator.clipboard) {\n\t\tfallbackCopyTextToClipboard(text);\n\t\treturn;\n\t}\n\tnavigator.clipboard.writeText(text).then(\n\t\tfunction() {\n\t\t\topenNotificationWithIcon(\n\t\t\t\t'success',\n\t\t\t\t'Успешно',\n\t\t\t\t`[${text}] успешно копирован в буфер обмена`\n\t\t\t);\n\t\t},\n\t\tfunction(err) {\n\t\t\topenNotificationWithIcon(\n\t\t\t\t'error',\n\t\t\t\t'Ошибка',\n\t\t\t\t`[${text}] НЕ успешно копирован в буфер обмена`\n\t\t\t);\n\t\t}\n\t);\n};\n\nconst fallbackCopyTextToClipboard = text => {\n\tlet textArea = document.createElement('textarea');\n\ttextArea.value = text;\n\n\t// Avoid scrolling to bottom\n\ttextArea.style.top = '0';\n\ttextArea.style.left = '0';\n\ttextArea.style.position = 'fixed';\n\n\tdocument.body.appendChild(textArea);\n\ttextArea.focus();\n\ttextArea.select();\n\n\ttry {\n\t\tlet successful = document.execCommand('copy');\n\t\tif (successful) {\n\t\t\topenNotificationWithIcon(\n\t\t\t\t'success',\n\t\t\t\t'Успешно',\n\t\t\t\t`[${text}] успешно копирован в буфер обмена`\n\t\t\t);\n\t\t} else {\n\t\t\topenNotificationWithIcon(\n\t\t\t\t'error',\n\t\t\t\t'Ошибка',\n\t\t\t\t`[${text}] НЕ успешно копирован в буфер обмена`\n\t\t\t);\n\t\t}\n\t} catch (err) {\n\t\topenNotificationWithIcon(\n\t\t\t'error',\n\t\t\t'Ошибка',\n\t\t\t`[${text}] НЕ успешно копирован в буфер обмена`\n\t\t);\n\t}\n\tdocument.body.removeChild(textArea);\n};\n\nconst openNotificationWithIcon = (type, title, msg) => {\n\tnotification[type]({\n\t\tmessage: title,\n\t\tdescription: msg\n\t});\n};\n","import React, {useState} from \"react\";\nimport PropTypes from \"prop-types\";\nimport FormTable from \"../Form/FormTable\";\nimport {Button, Upload, notification as antNotification, Spin, Typography, Tooltip} from 'antd';\nimport {\n    HomeOutlined,\n    RollbackOutlined,\n    FolderFilled,\n    FileOutlined,\n    PlusOutlined,\n    LoadingOutlined,\n    FileWordOutlined,\n    FileExcelOutlined,\n    FileImageOutlined,\n    FileMarkdownOutlined,\n    FilePdfOutlined,\n    FilePptOutlined,\n    FileTextOutlined,\n    FileZipOutlined,\n    CopyOutlined\n} from '@ant-design/icons';\nimport { AddFolderModal, EditFileModal, EditFolderModal } from \"./AddFolderModal\";\nimport { rtPrefix } from \"../utils/variables\";\nimport { toDDMMYYYYHHMMSS } from \"../../components/utils/datesUtils\";\nimport { copyTextToClipboard } from \"../utils/clipboardUtils\";\nimport { notificationError } from \"../utils/baseUtils\";\n\n/**\n *\n * Виды: дерево, плоская, парно плоская\n * Функции: скопировать, переместить, удалить, создать папку, загрузить файл\n *\n * Зашитые параметры:\n *\n */\n\nconst FileManager = props => {\n\n    const {\n        rowKey,\n        isGroupKey,\n        expandParentKey\n    } = props;\n\n    const [tableRef, setTableRef] = useState({});\n    const _setTableRef = (ref) => setTableRef(ref);\n\n    // const tableRef = React.createRef();\n\n    const [breadcrumb, setBreadcrumb] = useState([{[rowKey]: null, name: <HomeOutlined />}]);\n    const [tableFilter, setTableFilter] = useState({deleted: false, [expandParentKey]: null});\n\n\n\n    /**\n     * TABLE EVENTS\n     */\n\n    // Down to folder OR download file\n    const _onRowDoubleClick = ({rowData, rowIndex, rowKey}) => {\n        if(rowData.isGroup) {\n            loadTable([...breadcrumb, rowData], { [expandParentKey]: rowKey });\n        } else {\n            props.requestDownloadFile(rowKey)\n        }\n        props.onRowDoubleClick && props.onRowDoubleClick({rowData, rowIndex, rowKey});\n    };\n\n    // Jump to folder\n    const _onClickBreadcrumb = (parentId, index) => {\n        loadTable(breadcrumb.slice(0, index), {[expandParentKey]: parentId})\n    };\n\n    // Up to folder\n    const _onClickBack = () => {\n        if(breadcrumb.length > 1) {\n            const newBreadcrumb = breadcrumb.slice(0, breadcrumb.length - 1);\n            // setBreadcrumb(newBreadcrumb);\n            // tableRef && tableRef.reloadData({ filter: { parentId: newBreadcrumb[newBreadcrumb.length - 1].id } });\n            loadTable(newBreadcrumb, { [expandParentKey]: newBreadcrumb[newBreadcrumb.length - 1][rowKey] })\n        }\n    };\n\n    // Delete folder OR file\n    const _onClickDelete = (event, _selectedRowKeys) => {\n        if(_selectedRowKeys && _selectedRowKeys.length > 0){\n            props.requestDeleteRow({data: {[rowKey]: _selectedRowKeys[0], deleted: true}})\n                .then((response) => {\n                    antNotification.success({message: 'Файл успешно удален'});\n                    tableRef && tableRef.reloadData({filter: tableFilter});\n                })\n                .catch(error => {\n                    notificationError(error, 'Ошибка удаления файла');\n                    tableRef && tableRef.reloadData({filter: tableFilter});\n                });\n        }\n    };\n\n    /**\n     * TABLE FUNCs\n     */\n    const loadTable = (breadcrumb, filter) => {\n        setBreadcrumb(breadcrumb);\n        const newFilter = {...tableFilter, ...filter};\n        setTableFilter(newFilter);\n        tableRef && tableRef.reloadData({filter: newFilter});\n    };\n\n\n    /**\n     * MODAL FUNCs\n     */\n    const processBeforeSaveModal = (rawValues, type, element) => {\n        let values = {...rawValues};\n        if(type === 'add')\n            values[expandParentKey] = breadcrumb[breadcrumb.length - 1][rowKey];\n\n        if(element === 'Group')\n            values.extension = 'dir';\n        // console.log(\"FileManager values =>\", values);\n        return values;\n    };\n\n    const parentLoadHandler = (type, selectedRow, {params, data}) => {\n        let newData = {...data, [isGroupKey]: true};\n        if (type === 'edit') newData.owner = selectedRow && selectedRow[rowKey];\n        return props.requestLoadParent({ params, data: newData, });\n    };\n\n    // const _onChangeViewDeleted = (checked) => {\n    //     const newFilter = {...tableFilter, deleted: checked };//? undefined : checked};\n    //     setTableFilter(newFilter);\n    //     tableRef && tableRef.reloadData({filter: newFilter});\n    // };\n\n    // console.log(\"EditFolderModal\", EditFolderModal(props.requestSaveRow, processBeforeSaveForm));\n\n\n    /**\n     * UPLOAD FUNCs\n     */\n\n    const _uploadFile = (file) => {\n        // console.log('beforeUpload fileList => ', fileList);\n        notification(file, 'loading');\n        if (props.requestUploadFile) {\n            props.requestUploadFile({ file: file, [expandParentKey]: breadcrumb[breadcrumb.length - 1][rowKey] })\n                .then((response) => {\n                    notification(file, 'success');\n                    tableRef && tableRef.reloadData({ filter: tableFilter });\n                })\n                .catch(() => {\n                    notification(file, 'error');\n                    tableRef && tableRef.reloadData({ filter: tableFilter });\n                });\n        }\n        return false;\n    };\n\n    const notification = (file, type) => {\n        const notifProps = {\n            key: file.uid,\n            duration: type === 'loading' ? 0 : 5,\n            icon: type === 'loading'\n                ? <Spin indicator={<LoadingOutlined style={{ fontSize: 24 }} spin />} />\n                : null,\n            message: <span>Загрузка файла: <Typography.Text code>{file.name}</Typography.Text></span>\n        };\n        switch (type) {\n            case 'loading':\n                antNotification.info(notifProps);\n                break;\n            case 'success':\n                antNotification.success(notifProps);\n                break;\n            case 'error':\n                antNotification.error(notifProps);\n                break;\n            case 'close':\n                antNotification.close(file.uid);\n                break;\n            default:\n                break;\n        }\n    };\n\n    /**\n     * RENDER PARAMS\n     */\n    const customColumnProps = [\n        {\n            name: 'dateCreate',\n            cellRenderer: ({cellData}) => toDDMMYYYYHHMMSS(cellData),\n        },\n        {\n            name: 'dateUpdate',\n            cellRenderer: ({cellData}) => toDDMMYYYYHHMMSS(cellData),\n        },\n        {\n            name: 'path',\n            cellRenderer: ({rowData}) =>\n                rowData[isGroupKey] ? null\n                    :\n                <Tooltip title=\"Скопировать путь к файлу\">\n                    <CopyOutlined onClick={() => copyTextToClipboard(props.pathDownloadFile(rowData[rowKey]))}/>\n                </Tooltip>,\n        },\n        {\n            name: 'name',\n            cellRenderer: ({rowData}) => {\n                const styleDiv = {display: 'flex', alignItems: 'center'};\n                let Icon;\n                let styleIcon = {marginRight: '10px', fontSize: '16px'};\n                switch (rowData.extension) {\n                    case 'dir':\n                        Icon = FolderFilled;\n                        styleIcon.color = '#3a88c9';\n                        break;\n                    case 'doc':\n                    case 'docm':\n                    case 'docx':\n                    case 'dot':\n                    case 'dotx':\n                        Icon = FileWordOutlined;\n                        styleIcon.color = '#185abc';\n                        break;\n                    case 'xlm':\n                    case 'xls':\n                    case 'xlsm':\n                    case 'xlt':\n                    case 'xltm':\n                    case 'xltx':\n                    case 'xlsx':\n                        Icon = FileExcelOutlined;\n                        styleIcon.color = '#1f7244';\n                        break;\n                    case 'png':\n                    case 'jpg':\n                    case 'jpeg':\n                    case 'tiff':\n                    case 'bmp':\n                    case 'ico':\n                    case 'gif':\n                    case 'svg':\n                        Icon = FileImageOutlined;\n                        break;\n                    case 'markdown':\n                    case 'md':\n                        Icon = FileMarkdownOutlined;\n                        styleIcon.color = '#175987';\n                        break;\n                    case 'pdf':\n                        Icon = FilePdfOutlined;\n                        styleIcon.color = '#bd1f07';\n                        break;\n                    case 'ppt':\n                        Icon = FilePptOutlined;\n                        styleIcon.color = '#be5239';\n                        break;\n                    case 'txt':\n                        Icon = FileTextOutlined;\n                        break;\n                    case 'zip':\n                        Icon = FileZipOutlined;\n                        break;\n                    default:\n                        Icon = FileOutlined;\n                }\n\n\n                return (\n                    <div style={styleDiv}>\n                        {/*{rowData.isGroup*/}\n                        {/*    ? <FolderFilled style={{ marginRight: '10px', color: '#3a88c9'}}/>*/}\n                        {/*    : <FileOutlined style={{ marginRight: '10px' }}/>*/}\n                        {/*}*/}\n                        <Icon style={styleIcon}/>\n                        {rowData.name}\n                    </div>\n                );\n            },\n        }\n    ];\n\n    const uploadProps = {\n        multiple: true,\n        showUploadList: false,\n        beforeUpload: _uploadFile\n    };\n\n    const uploadRender = () => {\n        return (\n            <Upload {...uploadProps}>\n                <Button icon={<PlusOutlined />}/>\n            </Upload>\n        )\n    };\n\n    const breadcrumbRender = () => {\n        return (\n            <span className={`${rtPrefix}-file-manager-breadcrumb ml-8`}>\n                {breadcrumb.map((item, index) =>\n                    <span\n                        key={item[rowKey]}\n                        // type=\"text\"\n                        className={`${rtPrefix}-file-manager-breadcrumb-btn`}\n                        onClick={() => _onClickBreadcrumb(item[rowKey], index + 1)}\n                    >\n                        <span>/</span><span>{item.name}</span>\n                    </span>\n                )}\n            </span>\n        )\n    };\n\n    return (\n        <FormTable\n            {...props}\n            ref={_setTableRef}\n            type={'serverSide'}\n            componentType={'FilesTable'}\n            onRowDoubleClick={_onRowDoubleClick}\n            defaultFilter={tableFilter}\n            customColumnProps={customColumnProps}\n            commandPanelProps={{\n                ...props.commandPanelProps,\n                onClickDelete: _onClickDelete,\n                systemBtnProps: {\n                    add: {\n                        actionType: 'modal',\n                        tooltip: 'Загрузить файл(ы)',\n                        render: uploadRender\n                    },\n                    addGroup: {actionType: 'modal', tooltip: 'Создать папку'},\n                    edit: {actionType: ['modal', 'modal']},\n                    delete: {}\n                },\n                leftCustomSideElement: [\n                    {\n                        componentType: 'Item',\n                        child: {\n                            componentType: 'Button',\n                            icon: <RollbackOutlined />,\n                            label: 'Back',\n                            className: 'ml-4',\n                            disabled: (breadcrumb.length === 1),\n                            onClick: _onClickBack\n                        }\n                    },\n                    {\n                        componentType: 'Item',\n                        child: {\n                            componentType: 'Custom',\n                            render: breadcrumbRender\n                        }\n                    }\n                ],\n                // rightCustomSideElement: [\n                //     {\n                //         componentType: 'Item',\n                //         label: 'View deleted',\n                //         className: 'mb-0',\n                //         child: {\n                //             componentType: 'Switch',\n                //             checked: tableFilter.deleted,\n                //             onChange: _onChangeViewDeleted\n                //         }\n                //     },\n                // ]\n            }}\n            modals={[\n                AddFolderModal(props.requestSaveRow, processBeforeSaveModal, parentLoadHandler, props.requestLoadRows),\n                EditFolderModal(props.requestSaveRow, processBeforeSaveModal, parentLoadHandler, props.requestLoadRows),\n                EditFileModal(props.requestSaveRow, processBeforeSaveModal, parentLoadHandler, props.requestLoadRows)\n            ]}\n        />\n    );\n};\n\nFileManager.propTypes = {\n\n    /** Функция запроса для загрузки строк (данных) */\n    requestLoadRows: PropTypes.func,\n\n    /** Функция запроса на получение конфига для таблицы */\n    requestLoadConfig: PropTypes.func,\n};\n\nFileManager.defaultProps = {\n    rowKey: 'id',\n    isGroupKey: 'isGroup',\n    expandParentKey: 'parentId',\n};\n\nexport default FileManager;\n","import React, {useState, useEffect} from \"react\";\nimport PropTypes from \"prop-types\";\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport FormModal from \"../Form/FormModal\";\nimport { notification, Button} from \"antd\";\nimport { notificationError } from \"../utils/baseUtils\";\nimport objectPath from \"object-path\";\nimport { setDateStore } from \"../../redux/rtd.actions\";\n\nconst Modal = props => {\n\n    const {buttonProps, modalConfig, modalData, dispatchPath} = props;\n\n    const [visible, setVisible] = useState(false);\n    const [_modalData, _setModalData] = useState({});\n    const [_buttonProps, setButtonProps] = useState({});\n\n    const subscribe = props.subscribe ? props.subscribe : {};\n\n    const setModalData = (value) => {\n        // console.log(\"setModalData: \", value);\n        _setModalData && _setModalData(value);\n    }\n\n    useEffect(() => {\n        _setModalData(modalData);\n    }, []);\n\n    /** Подписка на изменение props[subscribe.name] в сторе */\n    useEffect( () => {\n        if(subscribe.name) {\n            // console.log(\"Modal => subscribe: \", props[subscribe.name]);\n            subscribe.onChange && subscribe.onChange({value: props[subscribe.name], setModalData, setButtonProps});\n        }\n        // console.log(\"Change Props[2]: \", props.subscribeЗф);\n    }, [props[subscribe.name]]);\n\n    const _onOpenModal = () => {\n        // console.log(\"Modal => _modalData: \", _modalData);\n        setVisible(true)\n    }\n\n    const _onCloseModal = () => {\n        setVisible(false)\n    }\n\n    const _onSaveRow = ({type, row, requestSaveRow}) => {\n        dispatchPath && props.setDateStore && props.setDateStore(dispatchPath, row);\n\n        if (requestSaveRow\n            && ['addOnServer', 'editOnServer', 'addGroupOnServer', 'editGroupOnServer'].includes(type)\n        ) {\n            const method = (type === 'addOnServer' || type === 'addGroupOnServer') ? 'POST' : 'PUT';\n            // console.log(\"Modal Events => type: \", type, method, row, _modalData);\n            requestSaveRow({\n                method,\n                data: row,\n            })\n                .then(response => {\n                    notification.success({\n                        message: 'Сохранение прошло успешно'\n                    });\n                    _onCloseModal();\n                })\n                .catch(error => notificationError(error, 'Ошибка при сохранении'));\n        } else _onCloseModal();\n    };\n\n    return (\n        <React.Fragment>\n            <Button\n                type=\"primary\"\n                {...buttonProps}\n                {..._buttonProps}\n                onClick={_onOpenModal}\n            >{buttonProps && buttonProps.label}</Button>\n            <FormModal\n                modal={modalConfig}\n                selectedRow={_modalData}\n                visible={visible}\n                setVisible={_onCloseModal}\n                saveRow={_onSaveRow}\n            />\n        </React.Fragment>\n    )\n};\n\nModal.propTypes = {\n\n    /** Свойства [Button](https://ant.design/components/button/) из Ant Design\n     * Добавлено свойство `label` с типом `ReactNode` или `string` для формирования контента кнопки*/\n    buttonProps: PropTypes.object,\n\n    /** Объект модального окна. Стандартная конфигурация. */\n    modalConfig: PropTypes.object,\n\n    /** Данные для модального окна */\n    modalData: PropTypes.object,\n\n    /** Путь в сторе куда класть данных окна после закрытия */\n    dispatchPath: PropTypes.string,\n\n    /** Объект для подписки на изменения в STORE */\n    subscribe: PropTypes.object,\n};\n\nconst mapStateToProps = (store, ownProps) => {\n    const {subscribe} = ownProps;\n    if(subscribe){\n        const {name, path} = subscribe;\n        if(name && path)\n            return { [name]: objectPath.get(store, path) };\n    }\n    return {};\n};\nconst mapDispatchToProps = (dispatch) =>\n    bindActionCreators( { setDateStore: setDateStore, }, dispatch);\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Modal);\n","import React, {useState, useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport Select from '../Select/Select';\nimport {\n\tInput,\n\tInputNumber,\n\tForm as AntForm,\n\tButton,\n\tCheckbox,\n\tSwitch,\n\tDatePicker,\n\tRadio,\n    Divider,\n} from 'antd';\nimport { getObjectExcludedProps, getValueFromMultiSelect, getValueFromSingleSelect } from \"../utils/baseUtils\";\nimport FormTable from './FormTable';\n// import Typography from './Typography';\nimport { withStore, DatePickerHOC, TypographyTitle, TypographyText, TypographyDate } from \"./HOCs\";\nimport FileManager from \"../FileManager/FileManager\";\nimport Modal from \"../Modal/Modal\";\n\nconst excludeProps = ['child', 'componentType', 'field'];\nconst noAntItemTypes = ['Title', 'Text', 'Divider', 'Button', 'LocalTable', 'ServerTable', 'InfinityTable'];\n\nconst FormItem = (props) => {\n\n\tconst {child, field} = props;\n\tlet antFormItemProps = getObjectExcludedProps(props, excludeProps);\n\n\t// Если тип элемента Select -> добавить доп свойства к Form.Item\n    if (child && child.componentType && (child.componentType === 'SingleSelect' || child.componentType === 'MultiSelect')) {\n        antFormItemProps.valuePropName = 'defaultSelectedRowKeys';\n        antFormItemProps.getValueFromEvent = child.componentType === 'SingleSelect' ? getValueFromSingleSelect : getValueFromMultiSelect;\n        antFormItemProps.trigger = 'onChangeKeys';\n    } else if (child && child.componentType && child.componentType === 'SelectTable') {\n        // antFormItemProps.getValueFromEvent = getValueFromSelectTable;\n        // antFormItemProps.trigger = 'onRowClick';\n    }\n\n\t// console.log('FormItem props => ', props);\n\n\tconst getItem = () => {\n\t\tif (child) {\n\t\t    // const childProps = getObjectExcludedProps(child, ['componentType']);\n\t\t\tconst childProps = {...child};\n            // console.log('FormItem childProps => ', childProps);\n\t\t\tlet Component;\n\t\t\tlet placeholder;\n            switch (child.componentType) {\n\t\t\t\tcase 'Button':\n\t\t\t\t\tComponent = withStore(Button, antFormItemProps);\n\t\t\t\t\t// console.log('Props field => ', field);\n\t\t\t\t\tconst onClick = (e) => childProps.onClick && childProps.onClick(e, field);\n\t\t\t\t\treturn (<Component {...childProps} onClick={onClick}>{childProps && childProps.label}</Component>);\n\t\t\t\tcase 'Title':\n\t\t\t\t\tComponent = withStore(TypographyTitle, antFormItemProps);\n\t\t\t\t\treturn (<Component {...child} componentType={child.componentType}/>);\n\t\t\t\tcase 'Text':\n\t\t\t\t\tComponent = withStore(TypographyText, antFormItemProps);\n\t\t\t\t\treturn (<Component {...child} componentType/>);\n\t\t\t\tcase 'Divider':\n\t\t\t\t\tComponent = withStore(Divider, antFormItemProps);\n\t\t\t\t\treturn (<Component {...childProps}>{childProps && childProps.label}</Component>);\n\t\t\t\tcase 'Checkbox':\n\t\t\t\t\tComponent = withStore(Checkbox, antFormItemProps);\n\t\t\t\t\treturn (<Component {...childProps}>{childProps && childProps.label}</Component>);\n\t\t\t\tcase 'DatePicker':\n\t\t\t\t\tComponent = withStore(DatePickerHOC(DatePicker), antFormItemProps);\n\t\t\t\t\tplaceholder = childProps && childProps.placeholder ? childProps.placeholder : 'Выберите дату';\n\t\t\t\t\tconst style = {width: '100%', ...(childProps && childProps.style)};\n\t\t\t\t\treturn (<Component{...childProps} style={style} placeholder={placeholder}/>);\n\t\t\t\tcase 'DateText':\n\t\t\t\t\tComponent = withStore(TypographyDate, antFormItemProps);\n\t\t\t\t\treturn (<Component {...child} />);\n\t\t\t\tcase 'Input':\n\t\t\t\t\tComponent = withStore(Input, antFormItemProps);\n\t\t\t\t\tplaceholder = childProps && childProps.placeholder ? childProps.placeholder : 'Введите значение';\n\t\t\t\t\treturn (<Component {...childProps} placeholder={placeholder} />);\n\t\t\t\tcase 'TextArea':\n\t\t\t\t\tComponent = withStore(Input.TextArea, antFormItemProps);\n\t\t\t\t\treturn (<Component {...childProps} />);\n\t\t\t\tcase 'Password':\n\t\t\t\t\tComponent = withStore(Input.Password, antFormItemProps);\n\t\t\t\t\tplaceholder = childProps && childProps.placeholder ? childProps.placeholder : 'Введите пароль';\n\t\t\t\t\treturn (<Component {...childProps} placeholder={placeholder}/>);\n\t\t\t\tcase 'InputNumber':\n\t\t\t\t\tComponent = withStore(InputNumber, antFormItemProps);\n\t\t\t\t\tplaceholder = childProps && childProps.placeholder ? childProps.placeholder : 'Введите значение';\n\t\t\t\t\treturn (<Component {...childProps} style={{width: '100%'}} placeholder={placeholder}/>);\n\t\t\t\tcase 'Radio':\n\t\t\t\t\tComponent = withStore(Radio, antFormItemProps);\n\t\t\t\t\treturn <Component {...childProps}>{childProps && childProps.label}</Component>;\n\t\t\t\tcase 'RadioButton':\n\t\t\t\t\tComponent = withStore(Radio.Button, antFormItemProps);\n\t\t\t\t\treturn (<Component {...childProps}>{childProps && childProps.label}</Component>);\n\t\t\t\tcase 'Switch':\n\t\t\t\t\tComponent = withStore(Switch, antFormItemProps);\n\t\t\t\t\treturn <Component {...childProps} />;\n                case \"RadioGroup\":\n                    Component = withStore(Radio.Group, antFormItemProps);\n                    return (<Component {...childProps} />);\n\t\t\t\tcase 'SingleSelect':\n                case 'MultiSelect':\n\t\t\t\t\treturn <Select {...childProps} type={child.componentType} name={antFormItemProps.name}/>;\n\t\t\t\t\t//'infinity', 'serverSide', 'localSide'\n                case 'InfinityTable':\n                    childProps.type = 'infinity';\n                    return <FormTable {...childProps} name={props.name} componentType={child.componentType}/> ;\n                case 'ServerTable':\n                    childProps.type = 'serverSide';\n                    return <FormTable {...childProps} name={props.name} componentType={child.componentType}/> ;\n                case 'LocalTable':\n                    childProps.type = 'localSide';\n                    return <FormTable {...childProps} name={props.name} componentType={child.componentType}/> ;\n                case 'SelectTable':\n\t\t\t\t\tchildProps.type = 'localSide';\n\t\t\t\t\treturn <FormTable {...childProps} name={props.name} componentType={child.componentType} /> ;\n\t\t\t\tcase 'FileManager':\n\t\t\t\t\treturn <FileManager {...childProps} name={props.name} />;\n\t\t\t\tcase 'Modal':\n\t\t\t\t\treturn <Modal {...childProps} name={props.name} />;\n\t\t\t\tcase 'Custom':\n\t\t\t\t\tComponent = withStore(child.render, antFormItemProps);\n\t\t\t\t\treturn <Component />;\n\t\t\t\tdefault:\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t};\n\n    if(!antFormItemProps.label)\n        return <AntForm.Item {...antFormItemProps} noStyle>{getItem()}</AntForm.Item>;\n    else\n        return <AntForm.Item {...antFormItemProps}>{getItem()}</AntForm.Item>;\n};\n\nFormItem.propTypes = {\n\tchild: PropTypes.object.isRequired\n};\n\nexport default FormItem;\n","import React from 'react';\nimport {rtPrefix} from '../utils/variables';\nimport PropTypes from \"prop-types\";\n\nconst Layout = props => {\n\n    let itemProps = {};\n    Object.keys(props).forEach((key) =>\n        key !== 'children' ? (itemProps[key] = props[key]) : null\n    );\n\n    const getCls = () => {\n        let cls = [`${rtPrefix}-layout`];\n        itemProps.className && cls.push(itemProps.className);\n        return cls.join(' ');\n    };\n\n    return (\n        <div {...itemProps} className={getCls()}>\n            {props.children}\n        </div>\n    );\n};\n\nLayout.propTypes = {\n    /** Строка класса */\n    className: PropTypes.string,\n\n    /** Объект стиля */\n    style: PropTypes.object,\n};\n\nexport default Layout;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport FormItem from \"./FormItem\";\nimport Layout from \"../Layout/Layout\";\nimport { Row, Col, Tabs, Radio, Form as AntForm, Input, Space } from \"antd\";\nimport { getObjectExcludedProps } from \"../utils/baseUtils\";\n\nconst excludeProps = [\"children\", \"componentType\"];\n\nconst FormItems = (props) => {\n    const { items } = props;\n\n    // console.log('FormItems props => ', props);\n\n    const getItems = (data, antFormListParams) => {\n\n        return (data && data.map((item, index) => {\n            let itemProps = getObjectExcludedProps(item, excludeProps);\n            // console.log('FormItems index => ', index);\n\n            switch (item.componentType) {\n                case \"Row\":\n                    return (\n                        <Row key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Row>\n                    );\n                case \"Col\":\n                    return (\n                        <Col key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Col>\n                    );\n                case \"Layout\":\n                    return (\n                        <Layout key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Layout>\n                    );\n                case \"Tabs\":\n                    return (\n                        <Tabs key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Tabs>\n                    );\n                case \"TabPane\":\n                    return (\n                        <Tabs.TabPane key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Tabs.TabPane>\n                    );\n                case \"RadioGroup\":\n                    return (\n                        <Radio.Group key={index} {...itemProps}>\n                            {item.children &&\n                            item.children.length > 0 &&\n                            getItems(item.children, antFormListParams)}\n                        </Radio.Group>\n                    );\n                case \"Item\":\n                    let _item = { ...item };\n                    let _key = index;\n                    if (antFormListParams && antFormListParams.field) {\n                        if (_item.name) {\n                            if (Array.isArray(_item.name)) {\n                                _item.name = [antFormListParams.field.name, ..._item.name];\n                                _item.fieldKey = [antFormListParams.field.name, ..._item.name];\n                            } else {\n                                _item.name = [antFormListParams.field.name, _item.name];\n                                _item.fieldKey = [antFormListParams.field.name, ..._item.name];\n                            }\n                        }\n                    }\n                    // console.log('_item ', _item.name);\n                    return <FormItem key={`${_key}`} {..._item} field={{ ...antFormListParams }}/>;\n                case \"ListItems\":\n                    return (\n                        <AntForm.List key={index} {...itemProps}>\n                            {(fields, operation) => {\n                                const param = { fields: [...fields], operation: { ...operation } };\n                                return getItems(item.children, param);\n                            }}\n                        </AntForm.List>\n                    );\n                case \"ListItem\":\n                    // console.log('antFormListParams => ', antFormListParams);\n                    return (\n                        <div key={index}>\n                            {antFormListParams && antFormListParams.fields && antFormListParams.fields.map((field, fIndex) => {\n                                // console.log('index field.key', index, field);\n                                const param = { field: { ...field }, ...antFormListParams };\n                                return <div key={field.key}>{getItems(item.children, param)} </div>;\n                            })}\n                        </div>\n                    );\n\n\n                default:\n                    return null;\n            }\n        })) || null;\n    };\n\n    return getItems(items);\n};\n\nFormItems.propTypes = {\n    items: PropTypes.arrayOf(PropTypes.object).isRequired\n};\n\nexport default FormItems;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {noop} from '../utils/baseUtils';\nimport {rtPrefix} from '../utils/variables';\nimport {Input, Tooltip, Popconfirm, Modal, Button} from 'antd';\nimport {\n\tPlusOutlined,\n\tCopyOutlined,\n\tFolderAddOutlined,\n\tDeleteOutlined,\n\tEditOutlined,\n\tArrowUpOutlined,\n\tArrowDownOutlined,\n\tSettingOutlined,\n\tFilterOutlined,\n\tExclamationCircleOutlined,\n} from '@ant-design/icons';\nimport FormItems from \"../Form/FormItems\";\nconst {confirm} = Modal;\n\nconst CommandPanel = (props) => {\n\tconst {\n\t\tborderStyle,\n\t\tdefaultValueSearch,\n\t\tdeleteConfirm,\n\t\tdeleteConfirmType,\n\t\tdeleteConfirmTitle,\n\t\tdeleteConfirmDescription,\n\t\tonClickAdd,\n\t\tonClickAddAsCopy,\n\t\tonClickAddGroup,\n\t\tonClickDelete,\n\t\tonClickEdit,\n\t\tonClickUp,\n\t\tonClickDown,\n\t\tonSearch,\n\t\tshowElements,\n        systemBtnProps,\n\t\tdisabledElements,\n\t\tleftCustomSideElement,\n\t\tcenterCustomSideElement,\n\t\trightCustomSideElement,\n\t} = props;\n\n    const defaultSystemBtnProps = {\n        add: {\n            tooltip: 'Добавить',\n            onClick: onClickAdd,\n            icon: <PlusOutlined />\n        },\n        addAsCopy: {\n            tooltip: 'Добавить копированием',\n            onClick: onClickAddAsCopy,\n            icon: <CopyOutlined />\n        },\n        addGroup: {\n            tooltip: 'Добавить группу',\n            onClick: onClickAddGroup,\n            icon: <FolderAddOutlined />\n        },\n        edit: {\n            tooltip: 'Изменить',\n            onClick: onClickEdit,\n            icon: <EditOutlined />\n        },\n        delete: {\n            tooltip: 'Удалить',\n            icon: <DeleteOutlined />\n        },\n        up: {\n            tooltip: 'Переместить вверх',\n            onClick: onClickUp,\n            icon: <ArrowUpOutlined />\n        },\n        down: {\n            tooltip: 'Переместить вниз',\n            onClick: onClickDown,\n            icon: <ArrowDownOutlined />\n        },\n\t\tsearch: {\n\t\t\tplaceholder: 'Поиск',\n\t\t\tonSearch: onSearch,\n\t\t},\n        settings: {\n            tooltip: 'Настройки таблицы',\n            tooltipPlacement: 'topRight',\n            onClick: () => {},\n            icon: <SettingOutlined />\n        },\n        filter: {\n            tooltip: 'Настройки фильтров',\n            tooltipPlacement: 'topRight',\n            onClick: () => {},\n            icon: <FilterOutlined />\n        }\n    };\n\n\tconst _onClickDelete = (event) => {\n\t\tif (deleteConfirmType === 'Modal') {\n\t\t\tdeleteButtonModalConfirm();\n\t\t} else {\n\t\t\tonClickDelete(event);\n\t\t}\n\t};\n\n\tconst deleteButtonPopupConfirm = () => {\n\t\treturn (\n\t\t\t<Popconfirm\n\t\t\t\tplacement='top'\n\t\t\t\ttitle={deleteConfirmDescription}\n\t\t\t\tonConfirm={onClickDelete}\n\t\t\t\tokText='Да'\n\t\t\t\tcancelText='Нет'\n\t\t\t>\n\t\t\t\t{renderDeleteBtn(false)}\n\t\t\t</Popconfirm>\n\t\t);\n\t};\n\n    const deleteButtonModalConfirm = () => {\n\t\tconfirm({\n\t\t\ttitle: deleteConfirmTitle,\n\t\t\ticon: <ExclamationCircleOutlined />,\n\t\t\tcontent: deleteConfirmDescription,\n\t\t\tcentered: true,\n\t\t\tokText: 'Ок',\n\t\t\tcancelText: 'Отмена',\n\t\t\tonOk() {\n\t\t\t\tonClickDelete();\n\t\t\t},\n\t\t});\n\t};\n\n    const renderDeleteBtn = (withOnClick) => {\n        const genProps = {...defaultSystemBtnProps['all'], ...systemBtnProps['all']};\n        const btnProps = {...defaultSystemBtnProps['delete'], ...systemBtnProps['delete']};\n\n        return (\n            <Tooltip title={btnProps.tooltip}>\n                <Button\n                    {...genProps}\n                    className={`${rtPrefix}-btn`}\n                    icon={btnProps.icon}\n                    onClick={withOnClick ? _onClickDelete : null}\n                    disabled={disabledElements.includes('delete')}\n                />\n            </Tooltip>\n        );\n    };\n\n    const renderBtn = (type) => {\n        const genProps = {...defaultSystemBtnProps['all'], ...systemBtnProps['all']};\n        const btnProps = {...defaultSystemBtnProps[type], ...systemBtnProps[type]};\n\n        if(showElements.includes(type)) {\n            if(btnProps.render)\n                return btnProps.render({\n                    disabled: disabledElements.includes(type),\n                    onClick: btnProps.onClick,\n\t\t\t\t\tonSearch: btnProps.onSearch\n\t\t\t\t});\n             else\n             \tif (type === 'search')\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Input.Search\n\t\t\t\t\t\t\tdisabled={disabledElements.includes(type)}\n\t\t\t\t\t\t\tdefaultValue={defaultValueSearch}\n\t\t\t\t\t\t\tplaceholder={btnProps.placeholder}\n\t\t\t\t\t\t\tonSearch={btnProps.onSearch}\n\t\t\t\t\t\t\tclassName={'search'}\n\t\t\t\t\t\t/>\n\t\t\t\t\t);\n\t\t\t\telse\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Tooltip title={btnProps.tooltip} placement={btnProps.tooltipPlacement ? btnProps.tooltipPlacement : 'top'}>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t{...genProps}\n\t\t\t\t\t\t\t\tclassName={`${rtPrefix}-btn`}\n\t\t\t\t\t\t\t\ticon={btnProps.icon}\n\t\t\t\t\t\t\t\tonClick={btnProps.onClick}\n\t\t\t\t\t\t\t\tdisabled={disabledElements.includes(type)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t)\n        }\n        else\n            return null\n    };\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{showElements.length ||\n\t\t\tleftCustomSideElement ||\n\t\t\tcenterCustomSideElement ||\n\t\t\trightCustomSideElement ? (\n\t\t\t\t<div\n\t\t\t\t\tclassName={`${rtPrefix}-command-panel border-${borderStyle}`}\n\t\t\t\t>\n\t\t\t\t\t<div className={'left-system-side'}>\n                        {renderBtn('add')}\n                        {renderBtn('addAsCopy')}\n                        {renderBtn('addGroup')}\n                        {renderBtn('edit')}\n\n\t\t\t\t\t\t{showElements.includes('delete')\n\t\t\t\t\t\t\t? deleteConfirm\n\t\t\t\t\t\t\t\t? deleteConfirmType === 'Popup'\n\t\t\t\t\t\t\t\t\t? deleteButtonPopupConfirm()\n\t\t\t\t\t\t\t\t\t: renderDeleteBtn(true)\n\t\t\t\t\t\t\t\t: renderDeleteBtn(true)\n\t\t\t\t\t\t\t: null}\n\n                        {renderBtn('up')}\n                        {renderBtn('down')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={'left-custom-side'}>\n\t\t\t\t\t\t{leftCustomSideElement ? <FormItems items={leftCustomSideElement} /> : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={'center-custom-side'}>\n\t\t\t\t\t\t{centerCustomSideElement ? <FormItems items={centerCustomSideElement} /> : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={'right-custom-side'}>\n\t\t\t\t\t\t{rightCustomSideElement ? <FormItems items={rightCustomSideElement} /> : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={'right-system-side'}>\n\t\t\t\t\t\t{renderBtn('search')}\n                        {renderBtn('settings')}\n                        {renderBtn('filter')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</React.Fragment>\n\t);\n};\n\nCommandPanel.propTypes = {\n\t/** Центральный кастомный элемент командной панели */\n\tcenterCustomSideElement: PropTypes.arrayOf(PropTypes.object), // PropTypes.element,\n\n\t/** Тип бордера панели (по умолчанию 'bottom')\n\t * ['all', 'none', 'top', 'left', 'bottom', 'right', 'top-bottom', 'left-right'] */\n\tborderStyle: PropTypes.oneOf([\n\t\t'all',\n\t\t'none',\n\t\t'top',\n\t\t'left',\n\t\t'bottom',\n\t\t'right',\n\t\t'top-bottom',\n\t\t'left-right',\n\t]),\n\n\t/** Значение по умолчанию для строки поиска */\n\tdefaultValueSearch: PropTypes.string,\n\n\t/** Нужно ли делать подтверждение на кнопке удалить */\n\tdeleteConfirm: PropTypes.bool,\n\n\t/** Тип подтверждения удаления 'Popup' / 'Modal' */\n\tdeleteConfirmType: PropTypes.oneOf(['Popup', 'Modal']),\n\n\t/** Текст подтверждения на удаление элемента */\n\tdeleteConfirmTitle: PropTypes.string,\n\n\t/** Текст подтверждения на удаление элемента */\n\tdeleteConfirmDescription: PropTypes.string,\n\n\t/** Массив элементов командной панели для блокировки\n     ['add', 'addAsCopy', 'addGroup', 'delete', 'edit', 'up', 'down', 'search', 'settings', 'filter'] */\n\tdisabledElements: PropTypes.arrayOf(PropTypes.string),\n\n\t/** Левый кастомный элемент командной панели */\n\tleftCustomSideElement: PropTypes.arrayOf(PropTypes.object),\n\n\t/** Событие при нажатии на кнопку \"Добавить\" */\n\tonClickAdd: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Добавить копированием\" */\n\tonClickAddAsCopy: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Добавить группу\" */\n\tonClickAddGroup: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Удалить\" */\n\tonClickDelete: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Переместить вниз\" */\n\tonClickDown: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Изменить\" */\n\tonClickEdit: PropTypes.func,\n\n\t/** Событие при нажатии на кнопку \"Переместить вверх\" */\n\tonClickUp: PropTypes.func,\n\n\t/** Событие при поиске */\n\tonSearch: PropTypes.func,\n\n\t/** Правый кастомный элемент командной панели */\n\trightCustomSideElement: PropTypes.arrayOf(PropTypes.object),\n\n\t/** Массив элементов командной панели, которые надо отобразить\n     ['add', 'addAsCopy', 'addGroup', 'delete', 'edit', 'up', 'down', 'search', 'settings', 'filter'] */\n\tshowElements: PropTypes.arrayOf(PropTypes.string),\n\n    /** Объект кастомизации системных кнопок\n     { [btnType]: { tooltip: <String>, icon: <Icon />, render: ({disabled, onClick}) => <Component /> } } */\n    systemBtnProps: PropTypes.object\n};\n\nCommandPanel.defaultProps = {\n\tcenterCustomSideElement: null,\n\tborderStyle: 'bottom',\n\tdefaultValueSearch: undefined,\n\tdeleteConfirm: true,\n\tdeleteConfirmType: 'Modal',\n\tdeleteConfirmTitle: 'Подтвержение удаления',\n\tdeleteConfirmDescription: 'Вы действительно хотите удалить?',\n\tdisabledElements: [],\n\tleftCustomSideElement: null,\n\tonClickAdd: noop,\n\tonClickAddAsCopy: noop,\n\tonClickAddGroup: noop,\n\tonClickDelete: noop,\n\tonClickEdit: noop,\n\tonClickUp: noop,\n\tonClickDown: noop,\n\tonSearch: noop,\n\trightCustomSideElement: null,\n\tshowElements: [],\n    systemBtnProps: {},\n};\nexport default CommandPanel;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Table from '../Table/Table';\n\n/**\n * ### Список / Дерево.\n */\nconst List = (props) => {\n\tconst {rowKey, rowRender, title} = props;\n\n\tconst columns = [\n\t\t{\n\t\t\tkey: rowKey,\n\t\t\ttitle: title,\n\t\t\tdataKey: rowKey,\n\t\t\twidth: 500,\n\t\t\tcellRenderer:\n\t\t\t\ttypeof rowRender === 'function'\n\t\t\t\t\t? rowRender\n\t\t\t\t\t: ({rowData}) => <div>{rowData[rowRender]}</div>,\n\t\t},\n\t];\n\treturn <Table {...props} columns={columns} headerHeight={title ? 30 : 0} />;\n};\n\nList.propTypes = {\n\t/** Поле для уникальной идентификации строки */\n\trowKey: PropTypes.string,\n\n\t/** Строка или функция для отображения элементов списка\n\t * Строка - имя поля\n\t * Функция - рендер строк. Параметры v\n\t * { cellData, columns, column, columnIndex, rowData, rowIndex, container, isScrolling }) */\n\trowRender: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n\n\t/** Заголовок списка (по умолчанию скрыт)*/\n\ttitle: PropTypes.string,\n};\n\nList.defaultProps = {\n\trowKey: 'id',\n\trowRender: 'id',\n\ttitle: undefined,\n};\n\nexport default List;\n","import objectPath from 'object-path';\nimport {actionTypes} from './rtd.action.types';\n\nconst rtdReducer = (state = {}, action) => {\n    switch (action.type) {\n        case actionTypes.INIT_STORE: {\n            const {path} = action.payload;\n            // console.log(\"INIT_TABLE_STORE: \", path);\n            let newState = {...state};\n            objectPath.set(newState, path, {});\n            return newState;\n        }\n        case actionTypes.SET_DATA_STORE: {\n            const {path, row} = action.payload;\n\n            let newState = {...state};\n            objectPath.set(newState, path, row); // obj.a is now {}\n            // console.log(\"SET_ROWS newState: \", newState);\n            return newState;\n        }\n        default:\n            return state;\n    }\n};\n\nexport default rtdReducer;\n"],"names":["noop","flatten","arrayOfArrays","reduce","flattened","item","concat","Array","isArray","getTableRowObjects","data","rowKeys","map","children","length","getTableRowKeys","rowKey","findNodeByRowKey","rowValue","node","i","_findNodeByRowKey","currentNode","value","currentChild","result","generateUUID","replace","c","crypto","getRandomValues","Uint8Array","toString","getValueFromSingleSelect","name","keys","getValueFromMultiSelect","getObjectExcludedProps","object","exclude","returnObject","Object","forEach","key","includes","notificationError","error","message","response","console","status","errorDescription","description","rtPrefix","empty","React","overlay","LoadingOutlined","fontSize","SelectionHead","props","column","container","onSelectAll","selectedRowKeys","selectAll","_handleChange","e","rowObjects","filter","totalLength","selectLength","checked","selected","getRowChildren","findBrothers","selfItem","parentKey","arr","push","parentAnalysis","rowData","nodeAssociated","treeData","indeterminateRowKeys","_selectedRowKeys","_indeterminateRowKeys","currentRowData","parentExist","lastTypeSelect","typeSelect","nextSquare","indeterminateBrothers","selectedBrothers","allBrothers","index","indexOf","splice","indexS","indexI","SelectionCell","rowIndex","onChange","rowChildren","element","Set","_selectedRowObjects","_selectedRow","_selectAll","det","target","APP_TIME_OFFSET","getMomentFromStringByFormat","date","format","moment","utcOffset","getMomentWithOffset","getMomentWithOffsetTruncateDay","hours","minutes","seconds","milliseconds","toFormat","dateString","mom","isValid","toDDMMYYYYdot","toDDMMYYYYdotAltDashDash","toDDMMYYYYHHMMSS","toDDMMYYYYdash","getISO","toISOString","DateRange","useState","mounted","setMounted","undefined","startValue","setStartValue","endValue","setEndValue","className","nameStart","nameEnd","dateFormat","size","title","valueStart","valueEnd","showTime","useEffect","defaultValueStart","_onChange","defaultValueEnd","disabledStartDate","valueOf","disabledEndDate","onStartChange","onEndChange","locale","width","propTypes","PropTypes","string","func","oneOf","defaultProps","SingleDate","_value","setValue","defaultValue","_onChangePicker","FilterPanel","defaultFilter","setFilter","applyFilterTooltip","applyFilterSize","applyFilterRender","borderStyle","onChangeFilter","onApplyFilter","configFilter","resetFilterRender","resetFilterTooltip","resetFilterSize","_onChangeData","_filter","_applyFilter","_resetFilter","getPanelCls","cls","findIndex","join","componentType","Select","render","marginLeft","oneOfType","arrayOf","SelectionList","selectedRowObjects","rowRender","onClickDropSelect","CloseCircleOutlined","isRequired","types","INIT_STORE","SET_DATA_STORE","setDateStore","path","row","type","actionTypes","payload","Table","forwardRef","ref","hasMore","setHasMore","loading","setLoading","_rows","_setRows","setSelectedRowKeys","_searchValue","setSearchValue","_sortBy","setSortBy","setSelectAll","setIndeterminateRowKeys","_expandedRowKeys","setExpandedRowKeys","_totalCountRows","setTotalCountRows","_footerShow","_setFooterShow","tableRef","useRef","defaultRows","defaultSelectedRowKeys","defaultSearchValue","defaultSortBy","rows","setRows","searchValue","sortBy","columns","autoDeleteRows","fixWidthColumn","footerHeight","footerShow","footerTitles","headerHeight","rowHeight","zebraStyle","rowRenderer","estimatedRowHeight","loadThreshold","pageSize","requestLoadRows","requestLoadCount","searchParamName","selectable","expandColumnKey","expandParentKey","expandLazyLoad","expandDefaultAll","onRowClick","onRowDoubleClick","onRowExpand","onSelectedRowsChange","onExpandedRowsChange","showSelection","rowRenderShowSelection","dispatchPath","subscribe","commandPanelProps","CommandPanel","filterPanelProps","footerProps","selectedDispatchPath","rowsDispatchPath","_setRowsHandler","showElements","leftCustomSideElement","centerCustomSideElement","rightCustomSideElement","flatRows","selectedRow","ss","ii","_dataProcessing","searchLine","reload","reloadData","current","setReloadTable","rowsDispatch","setRowsHandler","params","expandRow","pageNum","Math","floor","page","sort","order","dataQuery","then","catch","child","newRows","_rowEventHandlers","onClick","event","newRowObject","onDoubleClick","_onColumnSort","scrollToRow","loadParams","_getColumns","_columns","selectColumn","headerRenderer","cellRenderer","flexShrink","resizable","frozen","Column","FrozenDirection","LEFT","_onChangeSelectHandler","_onSelectAllHandler","unshift","_footer","selectedTitle","loadedTitle","totalTitle","_rowClassName","rowClassName","rowClass","callOrReturn","Boolean","onEndReached","selectedKeys","_onExpandedRowsChange","expandedRowKeys","_onRowExpand","expanded","allChildKeys","_getDisabledElementsOfCommandPanel","_disabledElements","disabledElements","_onClickAddAsCopy","onClickAddAsCopy","_onClickEdit","onClickEdit","_onClickDelete","onClickDelete","loop","callback","_onClickUp","newRowIndex","_getNewIndexRow","_changeIndexRow","onClickUp","_onClickDown","onClickDown","oldIndex","newIndex","_onSearch","preventDefault","onSearch","_onChangeFilter","_onApplyFilter","_onClickDropSelectHandler","dropObject","newSelectedKeys","height","BaseTable","number","shape","bool","selectedRows","loadedRows","totalRows","mapStateToProps","store","ownProps","objectPath","get","mapDispatchToProps","dispatch","bindActionCreators","connect","Paragraph","_selectedRowData","_setSelectedRowData","isSelectOpened","setIsSelectOpened","isClickInSelect","setIsClickInSelect","placeholder","widthControl","widthPopup","heightPopup","onChangeKeys","requestLoadDefault","searchable","setSelectedRowData","loadSelectedObject","request","srk","findRow","find","window","addEventListener","handleMouseClick","removeEventListener","onClosePopup","dataKey","_getHeadCls","_getHeadText","_getPopupCls","_getPopupStyle","defRowsLen","getEvents","systemBtnProps","_SingleSelectRow","contains","onOpenPopup","onClickClear","UpOutlined","DownOutlined","CloseCircleFilled","AdvancedTable","config","setConfig","configData","customColumnProps","requestLoadConfig","cleanupFunction","loadData","columnsByConfig","fields","colProps","alias","header","align","sortable","hidden","visible","cellData","getDefaultFilter","hierarchical","hierarchyLazyLoad","hierarchyField","split","hierarchyView","excludeProps","Form","loadInitData","body","footer","autoSaveForm","requestSaveForm","methodSaveForm","processBeforeSaveForm","loaded","setLoaded","antFormProps","setAntFormProps","initFormData","setInitFormData","_setInitFormData","antForm","form","_Form","useForm","getBodyCls","noPadding","onFinish","rawValues","values","log","saveObject","method","success","onFinishFailed","errorInfo","style","initialValues","FormModal","modal","setVisible","saveRow","getDefaultFooterProps","okText","cancelText","modalTitle","okType","modalProps","saveObj","startsWith","requestSaveRow","onOk","_onCancelHandler","onCancel","_onLoadInitData","callBack","formConfig","defaultFooter","label","cancelButtonProps","htmlType","okButtonProps","padding","bodyStyle","FormTable","addOnServer","editOnServer","addOnLocal","editOnLocal","addGroupOnServer","editGroupOnServer","addGroupOnLocal","editGroupOnLocal","select","viewGroup","viewObject","visibleModals","setVisibleModals","tableRows","setTableRows","tableSelectedRowKeys","setTableSelectedRowKeys","tableSelectedRow","setTableSelectedRow","setTableRef","_setTableRef","_ref","rowKeyType","customFields","modals","isGroupKey","history","requestDeleteRow","dataDeleteRow","cmdProps","_addRowsToLocalTable","getModals","_onSaveRow","isExistCmdBtn","btnType","equalsActionTypeCmdBtn","actionType","aTypes","_onClickAddHandler","location","pathname","_onClickAddAsCopyHandler","_addRowToLocalTable","_onClickAddGroupHandler","_onClickEditHandler","deleteData","_onClickUpHandler","_onClickDownHandler","selectRows","saveRows","sRow","tRow","field","validate","_addRowToServerTable","_editRowToLocalTable","_onRowClick","_onRowDoubleClick","_onSelectedRowsChange","getTableCls","onClickAdd","onClickAddGroup","SortOrder","ASC","DESC","withStore","Component","antFormItemProps","trigger","valuePropName","withStoreProps","subscribeProps","setSubscribeProps","getValueFromEvent","newValue","childProps","DatePickerHOC","TypographyTitle","TypographyText","TypographyDate","getTitle","Modal","parentLoadHandler","labelCol","span","wrapperCol","rules","required","info","AddFolderModal","args","EditFolderModal","EditFileModal","copyTextToClipboard","navigator","clipboard","fallbackCopyTextToClipboard","text","writeText","openNotificationWithIcon","err","textArea","document","createElement","top","left","position","appendChild","focus","successful","execCommand","removeChild","msg","FileManager","HomeOutlined","breadcrumb","setBreadcrumb","deleted","tableFilter","setTableFilter","isGroup","loadTable","requestDownloadFile","_onClickBreadcrumb","parentId","slice","_onClickBack","newBreadcrumb","newFilter","processBeforeSaveModal","extension","newData","owner","requestLoadParent","_uploadFile","file","notification","requestUploadFile","notifProps","uid","duration","icon","close","CopyOutlined","pathDownloadFile","styleDiv","display","alignItems","Icon","styleIcon","marginRight","FolderFilled","color","FileWordOutlined","FileExcelOutlined","FileImageOutlined","FileMarkdownOutlined","FilePdfOutlined","FilePptOutlined","FileTextOutlined","FileZipOutlined","FileOutlined","uploadProps","multiple","showUploadList","beforeUpload","uploadRender","PlusOutlined","breadcrumbRender","add","tooltip","addGroup","edit","delete","RollbackOutlined","disabled","buttonProps","modalConfig","modalData","_modalData","_setModalData","_buttonProps","setButtonProps","setModalData","_onOpenModal","_onCloseModal","FormItem","getItem","_Input","TextArea","Password","_Radio","Button","Group","Layout","itemProps","getCls","FormItems","items","getItems","antFormListParams","_item","_key","fieldKey","operation","param","fIndex","confirm","defaultValueSearch","deleteConfirm","deleteConfirmType","deleteConfirmTitle","deleteConfirmDescription","defaultSystemBtnProps","addAsCopy","FolderAddOutlined","EditOutlined","DeleteOutlined","up","ArrowUpOutlined","down","ArrowDownOutlined","search","settings","tooltipPlacement","SettingOutlined","FilterOutlined","deleteButtonModalConfirm","deleteButtonPopupConfirm","renderDeleteBtn","ExclamationCircleOutlined","content","centered","withOnClick","genProps","btnProps","renderBtn","List","rtdReducer","state","action","newState","set"],"mappings":"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"}